import{_ as o,r as a,o as c,c as t,h as i,d as l,a as s,b as n,e as r}from"./app-f8712291.js";const B={},d=s("div",{class:"hint-container info"},[s("p",{class:"hint-container-title"},"ç›¸å…³ä¿¡æ¯"),s("p",null,[n("è¿™æ˜¯ä¸€ä¸ª"),s("code",null,"GitHub Actions"),n("çš„é…ç½®æ–‡ä»¶ï¼Œæ•´ä½“æ€è·¯æ˜¯ï¼Œè·å–æœ¬æ¬¡æ›´æ–°çš„url ï¼ˆé€šè¿‡å¯¹æ¯”ä¸¤æ¬¡æäº¤çš„sitemap.xmlæ–‡ä»¶ï¼‰ï¼Œæ‰€ä»¥è§¦å‘æ¡ä»¶æ˜¯deployåˆ†æ”¯æœ‰æ¨é€å¹¶ä¿®æ”¹äº†"),s("code",null,"sitemap.xml"),n("æ–‡ä»¶ï¼Œå†åˆ©ç”¨pythonè„šæœ¬è¿›è¡Œurlæ¨é€åˆ°ç™¾åº¦ã€Bingã€Google")]),s("p",null,[n("è„šæœ¬ä»£ç è¯·çœ‹è¿™é‡ŒğŸ‘‰"),s("a",{href:"/posts/Python/submit-url"},"æäº¤URLåˆ°æœç´¢å¼•æ“ï¼ˆç™¾åº¦ã€Bingã€Googleï¼‰")])],-1),y=s("p",null,"å‰äº›å¤©ä¸æ˜¯å†™äº†Bingçš„æäº¤è„šæœ¬å—ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½è¦è‡ªå·±æ‰‹åŠ¨è·‘è„šæœ¬ä¹Ÿå¾ˆéº»çƒ¦ï¼Œä½†æˆ‘åˆæ²¡æœ‰æœåŠ¡å™¨ï¼Œæ‰€ä»¥ç”¨ä¸Šäº†GitHub Actionsäº†å˜› æ€»çš„æ¥è¯´åšäº†ä»¥ä¸‹äº‹æƒ…ï¼š",-1),v=s("ol",null,[s("li",null,"æäº¤ä»£ç å¹¶ä¿®æ”¹sitemap.xml åè§¦å‘å·¥ä½œæµ"),s("li",null,"æ¯”å¯¹ä¸Šä¸€æ¬¡æäº¤å’Œæœ¬æ¬¡æäº¤çš„æ–°å¢URL"),s("li",null,"å°†URLåˆ†åˆ«æäº¤ç»™ç™¾åº¦ç«™é•¿ã€Bingã€Google ä¾›æœç´¢å¼•æ“å¿«é€Ÿæ”¶å½•"),s("li")],-1),u=s("h2",{id:"æµç¨‹è§£è¯»",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#æµç¨‹è§£è¯»","aria-hidden":"true"},"#"),n(" æµç¨‹è§£è¯»")],-1),m=r(`<h2 id="é…ç½®ä»£ç " tabindex="-1"><a class="header-anchor" href="#é…ç½®ä»£ç " aria-hidden="true">#</a> é…ç½®ä»£ç </h2><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">æ¨é€è„šæœ¬</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D19A66;">on</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">push</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">branches</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">gh-pages</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">paths</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#98C379;">&#39;sitemap.xml&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E06C75;">jobs</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">  </span><span style="color:#E06C75;">push_bot</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">runs-on</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">ubuntu-latest</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E06C75;">steps</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Checkout gh-pages branch</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">uses</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">actions/checkout@v3</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">with</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">fetch-depth</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">0</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;gh-pages&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">gh-pages</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">è·å–ä¸Šä¸€æ¬¡æäº¤SHA</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">id</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">last-commit</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">run</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">|</span></span>
<span class="line"><span style="color:#98C379;">          cd gh-pages</span></span>
<span class="line"><span style="color:#98C379;">          PREV=$(git log --format=&quot;%H&quot; -n 2 | tail -n 1)</span></span>
<span class="line"><span style="color:#98C379;">          echo &quot;SHA_KEY=$PREV&quot; &gt;&gt; $GITHUB_OUTPUT</span></span>
<span class="line"><span style="color:#98C379;">          echo $PREV</span></span>
<span class="line"><span style="color:#98C379;">        </span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">æ‹‰å–prevä»£ç </span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">uses</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">actions/checkout@v3</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">with</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">\${{ steps.last-commit.outputs.SHA_KEY }}</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">prev</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Checkout main branch</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">uses</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">actions/checkout@v3</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">with</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&#39;main&#39;</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">Set up Python</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">uses</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">actions/setup-python@v4</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">with</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">python-version</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;3.10&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">cache</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">&quot;pip&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#7F848E;font-style:italic;"># è®¾ç½®ç¼“å­˜</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">å®‰è£…ä¾èµ–</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">run</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">|</span></span>
<span class="line"><span style="color:#98C379;">          pip install -r main/script/requirements.txt</span></span>
<span class="line"><span style="color:#ABB2BF;">      - </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">è¿è¡Œè„šæœ¬</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">env</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#7F848E;font-style:italic;">#è®¾ç½®secretsçš„ç¯å¢ƒå˜é‡</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">BAIDU_KEY</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">\${{ secrets.BAIDU_KEY }}</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">BING_KEY</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">\${{ secrets.BING_KEY }}</span></span>
<span class="line"><span style="color:#ABB2BF;">          </span><span style="color:#E06C75;">GOOGLE_JSON</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">\${{ secrets.GOOGLE_JSON }}</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#E06C75;">run</span><span style="color:#ABB2BF;">: </span><span style="color:#C678DD;">|</span></span>
<span class="line"><span style="color:#98C379;">          python main/script/submit.py --sitemap gh-pages/sitemap.xml --prevsitemap prev/sitemap.xml</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="é…ç½®è§£è¯»" tabindex="-1"><a class="header-anchor" href="#é…ç½®è§£è¯»" aria-hidden="true">#</a> é…ç½®è§£è¯»</h2><h4 id="è§¦å‘" tabindex="-1"><a class="header-anchor" href="#è§¦å‘" aria-hidden="true">#</a> è§¦å‘</h4><p>è¿™ä¸ªä¾‹å­çš„è§¦å‘æœºåˆ¶å¦‚ä¸‹ï¼š</p><ol><li>å½“æœ‰æ¨é€è¡Œä¸ºå‘ç”Ÿ</li><li>æ¨é€åˆ†æ”¯ä¸º<code>gh-pages</code></li><li><code>sitemap.xml</code>æ–‡ä»¶è¢«ä¿®æ”¹</li></ol><h4 id="é…ç½®è¿è¡Œç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#é…ç½®è¿è¡Œç¯å¢ƒ" aria-hidden="true">#</a> é…ç½®è¿è¡Œç¯å¢ƒ</h4><p>è¿™é‡ŒæŒ‡å®š<code>ubuntu-latest</code></p><h4 id="æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#æ­¥éª¤" aria-hidden="true">#</a> æ­¥éª¤</h4><ol><li><p>æ‹‰å– gh-pages åˆ†æ”¯ä»£ç åˆ°è·¯å¾„<code>gh-pages</code></p></li><li><p>è·å–ä¸Šä¸€æ¬¡æäº¤SHA-1å€¼ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œå°†è·å–åˆ°çš„å€’æ•°ç¬¬äºŒæ¬¡gitæäº¤SHA-1å€¼å­˜å‚¨åˆ°ç¯å¢ƒå˜é‡<code>GITHUB_OUTPUT</code><sup class="footnote-ref"><a href="#footnote1">[1]</a><a class="footnote-anchor" id="footnote-ref1"></a></sup>ä¸­ï¼Œæ–¹ä¾¿åç»­ä½¿ç”¨</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">cd</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">gh-pages</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">PREV</span><span style="color:#56B6C2;">=</span><span style="color:#98C379;">$(</span><span style="color:#61AFEF;">git</span><span style="color:#98C379;"> log </span><span style="color:#D19A66;">--format=</span><span style="color:#98C379;">&quot;%H&quot; </span><span style="color:#D19A66;">-n</span><span style="color:#98C379;"> </span><span style="color:#D19A66;">2</span><span style="color:#98C379;"> </span><span style="color:#ABB2BF;">|</span><span style="color:#98C379;"> </span><span style="color:#61AFEF;">tail</span><span style="color:#98C379;"> </span><span style="color:#D19A66;">-n</span><span style="color:#98C379;"> </span><span style="color:#D19A66;">1</span><span style="color:#98C379;">)</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">echo</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&quot;SHA_KEY=</span><span style="color:#E06C75;">$PREV</span><span style="color:#98C379;">&quot;</span><span style="color:#ABB2BF;"> &gt;&gt; </span><span style="color:#E06C75;">$GITHUB_OUTPUT</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">echo</span><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">$PREV</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>è·å–ä¸Šä¸€æ­¥å­˜å‚¨åˆ°åˆ°<code>GITHUB_OUTPUT</code>çš„commitidï¼Œå¹¶æ‹‰å–ä»£ç ä»£ç åˆ°è·¯å¾„prevï¼Œrefå¯ä»¥æ˜¯åˆ†æ”¯ï¼Œtagï¼Œcommitid</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">name</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">æ‹‰å–prevä»£ç </span></span>
<span class="line"><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">uses</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">actions/checkout@v3</span></span>
<span class="line"><span style="color:#ABB2BF;"> </span><span style="color:#E06C75;">with</span><span style="color:#ABB2BF;">:</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#E06C75;">ref</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">\${{ steps.last-commit.outputs.SHA_KEY }}</span></span>
<span class="line"><span style="color:#ABB2BF;">     </span><span style="color:#E06C75;">path</span><span style="color:#ABB2BF;">: </span><span style="color:#98C379;">prev</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>æ‹‰å–mainåˆ†æ”¯ä»£ç åˆ°è·¯å¾„main</p></li><li><p>å®‰è£…pythonç¯å¢ƒå¹¶è®¾ç½®ç¼“å­˜</p></li><li><p>å®‰è£…pythonä¾èµ–åº“</p></li><li><p>è¿è¡Œè„šæœ¬è¯»å–é…ç½®åœ¨ä»“åº“--&gt;Settings--&gt;Secrets and variables--&gt;Actions--&gt;Repository secretsä¸­çš„ç¯å¢ƒå˜é‡ï¼Œå¹¶æŠŠä¸Šæ¬¡æäº¤çš„sitemap.xmlå’Œæœ¬æ¬¡æäº¤çš„sitemap.xmlä½œä¸ºå‘½ä»¤è¡Œå‚æ•°æäº¤ç»™pythonè„šæœ¬</p><figure><img src="https://s3.bmp.ovh/imgs/2023/04/17/67c1bc7646f4be1d.png" alt="Repository secrets" tabindex="0" loading="lazy"><figcaption>Repository secrets</figcaption></figure></li></ol><hr class="footnotes-sep">`,11),A={class:"footnotes"},h={class:"footnotes-list"},F={id:"footnote1",class:"footnote-item"},C={href:"https://docs.github.com/zh/actions/using-workflows/workflow-commands-for-github-actions#setting-an-environment-variable",target:"_blank",rel:"noopener noreferrer"},b=s("a",{href:"#footnote-ref1",class:"footnote-backref"},"â†©ï¸",-1);function E(g,f){const e=a("Mermaid"),p=a("ExternalLinkIcon");return c(),t("div",null,[d,i(" more "),y,v,u,l(e,{id:"mermaid-34",code:"eJylUk1PwkAQvfdXbOKVJogBYg8mFIIXT8aLaTiUdguNm5a0S5Cb+BEDGCoHiTGaiBjhQMAL0YSAf6Yfy79wqUADN3Uvm3lvZt7bmWVZlsEqRpAD7qji9eqk2yHDMTPHFaSXpLxoYHDEM4Aes5jNGWIhD9JAIF+3pH1DLh/cx37GZ2XVgBJWdQ0cHPoAaXw4VstrDJ2XC8e6n11bLLtHBlNvMnCaE3v8Shs41rl7905xo6j5RVCT/TshkO6bYzXdRm92VskAmgJ4wa1XaUsq6fbb9rjjPS+Y5IKxP2sBMydSgjOoks7Vj92ll5o9fSKjlp+RnstJSDTNFFTAvgGhhsUcUFSEuK1wWJJFKWRiQz+BGyFbUmWc5yKF05CkI93gthRFWXKyaNLJGWKZA1EQXZM4hogONtBQspK8s73SWAv/qsGjIgwUIuFdaVW2Ef5SwcRlBOn+F9bj8XAsEliPxf7hGySC0QQgH0qulhKgqeULGf+zMN9pvxYZ"}),m,s("section",A,[s("ol",h,[s("li",F,[s("p",null,[s("a",C,[n("è®¾ç½®æ­¥éª¤çš„è¾“å‡ºå‚æ•°"),l(p)]),n(),b])])])])])}const x=o(B,[["render",E],["__file","auto-push.html.vue"]]);export{x as default};
