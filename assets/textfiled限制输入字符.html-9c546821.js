import{_ as s,O as n,P as a,U as l}from"./framework-dab5a93a.js";const e={},p=l(`<blockquote><p>记录一下限制输入字符的判断。不仅局限于中文或英文</p></blockquote><ul><li>首先在 ViewDidLoad 中注册通知</li></ul><div class="language-objc line-numbers-mode" data-ext="objc"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">[[</span><span style="color:#E5C07B;">NSNotificationCenter</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">defaultCenter</span><span style="color:#ABB2BF;">]addObserver:</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">selector:</span><span style="color:#C678DD;">@selector(</span><span style="color:#61AFEF;">textFieldEditChanged:</span><span style="color:#C678DD;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#61AFEF;">name:</span><span style="color:#98C379;">@&quot;UITextFieldTextDidChangeNotification&quot;</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">object:</span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">.userTF];</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>下面是判断逻辑 由于需求有中文键盘下的字母数字输入，所以其中那部分判断如不需要可以去除</li></ul><div class="language-objc line-numbers-mode" data-ext="objc"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#7F848E;font-style:italic;">// 输入字符判断</span></span>
<span class="line"><span style="color:#ABB2BF;">-(</span><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;">)textFieldEditChanged:(</span><span style="color:#E5C07B;">NSNotification</span><span style="color:#ABB2BF;"> *)obj {</span></span>
<span class="line"><span style="color:#ABB2BF;">    UITextField *textField </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> (UITextField *)</span><span style="color:#E5C07B;">obj</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">object</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">NSString</span><span style="color:#ABB2BF;"> *toBeString </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">textField</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">text</span><span style="color:#ABB2BF;">;</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">NSString</span><span style="color:#ABB2BF;"> *lang </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [textField.textInputMode </span><span style="color:#61AFEF;">primaryLanguage</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> ([lang </span><span style="color:#61AFEF;">isEqualToString:</span><span style="color:#98C379;">@&quot;zh-Hans&quot;</span><span style="color:#ABB2BF;">])</span><span style="color:#7F848E;font-style:italic;">// 简体中文输入</span></span>
<span class="line"><span style="color:#ABB2BF;">    	{</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//获取高亮部分</span></span>
<span class="line"><span style="color:#ABB2BF;">        UITextRange *selectedRange </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [textField </span><span style="color:#61AFEF;">markedTextRange</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"><span style="color:#ABB2BF;">        UITextPosition *position </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [textField </span><span style="color:#61AFEF;">positionFromPosition:</span><span style="color:#ABB2BF;">selectedRange.start </span><span style="color:#61AFEF;">offset:</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// 没有高亮选择的字，则对已输入的文字进行字数统计和限制</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#56B6C2;">!</span><span style="color:#ABB2BF;">position </span><span style="color:#56B6C2;">||</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">!</span><span style="color:#ABB2BF;">selectedRange)</span></span>
<span class="line"><span style="color:#ABB2BF;">        {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">toBeString</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;"> MAX_CHINESE_LENGTH)</span></span>
<span class="line"><span style="color:#ABB2BF;">            {</span></span>
<span class="line"><span style="color:#ABB2BF;">                NSRange rangeIndex </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [toBeString </span><span style="color:#61AFEF;">rangeOfComposedCharacterSequenceAtIndex:</span><span style="color:#ABB2BF;">MAX_CHINESE_LENGTH];</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">rangeIndex</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E5C07B;">textField</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">text</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [toBeString </span><span style="color:#61AFEF;">substringToIndex:</span><span style="color:#ABB2BF;">MAX_CHINESE_LENGTH];</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">else</span></span>
<span class="line"><span style="color:#ABB2BF;">                {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    NSRange rangeRange </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [toBeString </span><span style="color:#61AFEF;">rangeOfComposedCharacterSequencesForRange:</span><span style="color:#56B6C2;">NSMakeRange</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, MAX_CHINESE_LENGTH)];</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E5C07B;">textField</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">text</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [toBeString </span><span style="color:#61AFEF;">substringWithRange:</span><span style="color:#ABB2BF;">rangeRange];</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">toBeString</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;"> MAX_ENGLISH_LENGTH)</span></span>
<span class="line"><span style="color:#ABB2BF;">            {</span></span>
<span class="line"><span style="color:#ABB2BF;">                NSRange rangeIndex </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [toBeString </span><span style="color:#61AFEF;">rangeOfComposedCharacterSequenceAtIndex:</span><span style="color:#ABB2BF;">MAX_ENGLISH_LENGTH];</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">rangeIndex</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">                {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E5C07B;">textField</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">text</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [toBeString </span><span style="color:#61AFEF;">substringToIndex:</span><span style="color:#ABB2BF;">MAX_ENGLISH_LENGTH];</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#C678DD;">else</span></span>
<span class="line"><span style="color:#ABB2BF;">                {</span></span>
<span class="line"><span style="color:#ABB2BF;">                    NSRange rangeRange </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [toBeString </span><span style="color:#61AFEF;">rangeOfComposedCharacterSequencesForRange:</span><span style="color:#56B6C2;">NSMakeRange</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, MAX_ENGLISH_LENGTH)];</span></span>
<span class="line"><span style="color:#ABB2BF;">                    </span><span style="color:#E5C07B;">textField</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">text</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [toBeString </span><span style="color:#61AFEF;">substringWithRange:</span><span style="color:#ABB2BF;">rangeRange];</span></span>
<span class="line"><span style="color:#ABB2BF;">                }</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">    	</span><span style="color:#7F848E;font-style:italic;">// 中文输入法以外的直接对其统计限制即可，不考虑其他语种情况</span></span>
<span class="line"><span style="color:#ABB2BF;">    	</span><span style="color:#C678DD;">else</span></span>
<span class="line"><span style="color:#ABB2BF;">    	{</span></span>
<span class="line"><span style="color:#ABB2BF;">        	</span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">toBeString</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">&gt;</span><span style="color:#ABB2BF;"> MAX_ENGLISH_LENGTH)</span></span>
<span class="line"><span style="color:#ABB2BF;">        		{</span></span>
<span class="line"><span style="color:#ABB2BF;">            		NSRange rangeIndex </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [toBeString </span><span style="color:#61AFEF;">rangeOfComposedCharacterSequenceAtIndex:</span><span style="color:#ABB2BF;">MAX_ENGLISH_LENGTH];</span></span>
<span class="line"><span style="color:#ABB2BF;">            		</span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> (</span><span style="color:#E5C07B;">rangeIndex</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">length</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">==</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">1</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">            		{</span></span>
<span class="line"><span style="color:#ABB2BF;">                		</span><span style="color:#E5C07B;">textField</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">text</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [toBeString </span><span style="color:#61AFEF;">substringToIndex:</span><span style="color:#ABB2BF;">MAX_ENGLISH_LENGTH];</span></span>
<span class="line"><span style="color:#ABB2BF;">            		}</span></span>
<span class="line"><span style="color:#ABB2BF;">            		</span><span style="color:#C678DD;">else</span></span>
<span class="line"><span style="color:#ABB2BF;">            		{</span></span>
<span class="line"><span style="color:#ABB2BF;">                NSRange rangeRange </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [toBeString </span><span style="color:#61AFEF;">rangeOfComposedCharacterSequencesForRange:</span><span style="color:#56B6C2;">NSMakeRange</span><span style="color:#ABB2BF;">(</span><span style="color:#D19A66;">0</span><span style="color:#ABB2BF;">, MAX_ENGLISH_LENGTH)];</span></span>
<span class="line"><span style="color:#ABB2BF;">                </span><span style="color:#E5C07B;">textField</span><span style="color:#ABB2BF;">.</span><span style="color:#E06C75;">text</span><span style="color:#ABB2BF;"> </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> [toBeString </span><span style="color:#61AFEF;">substringWithRange:</span><span style="color:#ABB2BF;">rangeRange];</span></span>
<span class="line"><span style="color:#ABB2BF;">            		}</span></span>
<span class="line"><span style="color:#ABB2BF;">        		}</span></span>
<span class="line"><span style="color:#ABB2BF;">    		}</span></span>
<span class="line"><span style="color:#ABB2BF;">		}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5),o=[p];function B(t,c){return n(),a("div",null,o)}const i=s(e,[["render",B],["__file","textfiled限制输入字符.html.vue"]]);export{i as default};
