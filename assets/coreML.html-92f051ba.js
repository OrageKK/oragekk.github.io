import{_ as a,r as o,o as t,c as p,a as s,b as n,d as l,e as r}from"./app-2ec7332a.js";const c={},i=s("blockquote",null,[s("p",null,"CoreML æ˜¯ iOS 11 æ–°æ¨å‡ºçš„æœºå™¨å­¦ä¹ æ¡†æ¶ï¼Œæ˜¯äººå·¥æ™ºèƒ½çš„æ ¸å¿ƒå†…å®¹ï¼Œä»–å¯ä»¥åœ¨è®­ç»ƒå¥½çš„æœºå™¨å­¦ä¹ æ¨¡å‹åº”ç”¨åˆ° APP ä¸­")],-1),B=s("figure",null,[s("img",{src:"http://upload-images.jianshu.io/upload_images/74454-4726f1eccb39b18c.png?imageMogr2/auto-orient/strip|imageView2/2/w/1240",alt:"",tabindex:"0",loading:"lazy"}),s("figcaption")],-1),d={href:"https://developer.apple.com/documentation/gameplaykit",target:"_blank",rel:"noopener noreferrer"},u=s("h2",{id:"è·å–æ¨¡å‹",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#è·å–æ¨¡å‹","aria-hidden":"true"},"#"),n(" è·å–æ¨¡å‹")],-1),y=s("p",null,"Core ML æ”¯æŒå¤šç§æœºå™¨å­¦ä¹ æ¨¡å‹ï¼Œå…¶ä¸­åŒ…æ‹¬äº†ç¥ç»ç½‘ç»œ (Neural Network)ã€ç»„åˆæ ‘ (Tree Ensemble)ã€æ”¯æŒå‘é‡æœº (Support Vector Machine) ä»¥åŠå¹¿ä¹‰çº¿æ€§æ¨¡å‹ (Generalized Linear Model)ã€‚Core ML çš„è¿è¡Œéœ€è¦ä½¿ç”¨ Core ML æ¨¡å‹æ ¼å¼ï¼ˆä¹Ÿå°±æ˜¯ä»¥ .mlmodel æ‰©å±•åç»“å°¾çš„æ¨¡å‹ï¼‰ã€‚",-1),m={href:"https://developer.apple.com/machine-learning/",target:"_blank",rel:"noopener noreferrer"},_=s("h2",{id:"å·¥ç¨‹å®ä¾‹",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#å·¥ç¨‹å®ä¾‹","aria-hidden":"true"},"#"),n(" å·¥ç¨‹å®ä¾‹")],-1),h=s("p",null,"é¦–å…ˆå› ä¸º CoreML å’Œ Vision éƒ½æ˜¯ iOS 11 æ‰æœ‰çš„åŠŸèƒ½ï¼Œä½ è¦ç¡®ä¿ Xcode9 å’Œ iOS 11 çš„è®¾å¤‡ï¼Œå½“ç„¶æ¨¡æ‹Ÿå™¨ä¹Ÿå¯ä»¥ã€‚å¼€å‘è¯­è¨€ä½¿ç”¨ Swift4",-1),g=s("br",null,null,-1),F=s("br",null,null,-1),b=s("img",{src:"https://storage1.cuntuku.com/2017/11/21/Snip20171121_6.png",alt:"Snip20171121_6.png",loading:"lazy"},null,-1),A=s("br",null,null,-1),v=s("br",null,null,-1),f={href:"https://cuntuku.com/image/KNKHr",target:"_blank",rel:"noopener noreferrer"},C=s("img",{src:"https://storage2.cuntuku.com/2017/11/21/Snip20171121_7.md.png",alt:"Snip20171121_7.md.png",loading:"lazy"},null,-1),D=s("br",null,null,-1),k=s("blockquote",null,[s("p",null,"Detects the dominant objects present in an image from a set of 1000 categories such as trees, animals, food, vehicles, people, and more.å¤§æ„ä¸ºå¯ä»¥ä» 1000 ä¸ªç±»åˆ«ä¸­ç­›é€‰ä¼ æ ‘æœ¨ã€åŠ¨ç‰©ã€é£Ÿå“ã€æ±½è½¦ã€äººç­‰ç­‰ã€‚")],-1),E=s("li",null,[s("p",null,[n("æ¨¡å‹è§£è¯»"),s("br"),n(" inputs ä¸­å†™äº†éœ€è¦ä¸€ä¸ª image å¤§å° 299*299ï¼›outputs é‡Œä¼šæœ‰ä¸¤ä¸ªå‚æ•° classLabelProbs å’Œ classLabel"),s("br"),n(" ï¼ŒclassLabelProbs æ˜¯ä¸€ä¸ª[string:Double]çš„å­—å…¸æ•°ç»„ï¼Œæ•°ç»„é‡Œæ¯ä¸€ä¸ªå­—å…¸å°±æ˜¯è¿™ä¸ªè¾“å…¥å›¾ç‰‡åˆ†æå¾—å‡ºå¯èƒ½çš„ä¸€ä¸ªç»“æœ string å°±æ˜¯å¯¹å›¾ç‰‡ç±»å‹çš„æè¿°ï¼Œè€Œ double å°±æ˜¯å¯èƒ½æ€§ç™¾åˆ†æ¯”ã€‚å¦ä¸€ä¸ª classLabel å°±æ˜¯æœ€æœ‰å¯èƒ½çš„ä¸€ä¸ªä¸€ä¸ªç»“æœæè¿°")]),s("pre",null,[s("code",null,`*Model Class*ä¸‹é¢æœ‰è¿™ä¸ªç±»æ–‡ä»¶ç‚¹è¿›å»å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¸‰ä¸ªç±»

**inputè¾“å…¥æºï¼Œå¯ä»¥çœ‹åˆ°å®ƒéœ€è¦ä¸€ä¸ªCVPixelBufferæ ¼å¼çš„å›¾ç‰‡ä½œä¸ºè¾“å…¥**
[![Snip20171121_8.md.png](https://storage2.cuntuku.com/2017/11/21/Snip20171121_8.md.png)](https://cuntuku.com/image/KNlCE)
**outputå¯ä»¥çœ‹åˆ°è¾“å‡ºçš„ä¸¤ä¸ªå‚æ•°classLabelå’ŒclassLabelProbsæ­£å¼æˆ‘ä»¬ä¸Šé¢æœ‰ä»‹ç»è¿‡çš„æ‰€æœ‰å¯èƒ½çš„ç»“æœæ•°ç»„ä¸æœ€æœ‰å¯èƒ½çš„ç»“æœæè¿°**
[![Snip20171121_9.md.png](https://storage1.cuntuku.com/2017/11/21/Snip20171121_9.md.png)](https://cuntuku.com/image/KNgTJ)
**inceptionv3è°ƒç”¨è¿™ä¸ªç±»çš„Predictionæ–¹æ³•æ¥å¼€å§‹è¿›è¡Œåˆ†æ**
[![Snip20171121_10.md.png](https://storage1.cuntuku.com/2017/11/21/Snip20171121_10.md.png)](https://cuntuku.com/image/KN1Im)
`)])],-1),S=s("li",null,[s("p",null,[n("ç¼–å†™ä»£ç "),s("br"),n(" å®šä¹‰ä¸€ä¸ª imageViewï¼Œä¸€ä¸ª Labelï¼Œä¸€ä¸ª button"),s("br"),n(" ç‚¹å‡»æŒ‰é’®æ‰“å¼€ç›¸å†Œé€‰å–å›¾ç‰‡ï¼Œé€‰å–å®Œæˆæ‰§è¡Œä¸‹é¢çš„æ–¹æ³•ï¼Œç„¶åå† label æ˜¾ç¤ºåˆ†æç»“æœ")])],-1),L=r(`<div class="language-swift line-numbers-mode" data-ext="swift"><pre class="shiki one-dark-pro" style="background-color:#282c34;" tabindex="0"><code><span class="line"><span style="color:#ABB2BF;">	</span><span style="color:#C678DD;">func</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">process</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">_</span><span style="color:#ABB2BF;"> </span><span style="color:#ABB2BF;font-style:italic;">image</span><span style="color:#ABB2BF;">: UIImage) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        imageView.image = image</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">// éœ€è¦CVPixelBufferæ ¼å¼çš„è¾“å…¥æº</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">guard</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> pixelBuffer = image.</span><span style="color:#61AFEF;">pixelBuffer</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">width</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">299</span><span style="color:#ABB2BF;">, </span><span style="color:#61AFEF;">height</span><span style="color:#ABB2BF;">: </span><span style="color:#D19A66;">299</span><span style="color:#ABB2BF;">) </span><span style="color:#C678DD;">else</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">return</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#7F848E;font-style:italic;">//I have \`Use of unresolved identifier &#39;Inceptionv3&#39;\` error here when I use New Build System (File &gt; Project Settings)   Â¯\\_(ãƒ„)_/Â¯</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> model = </span><span style="color:#61AFEF;">Inceptionv3</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">do</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// è°ƒç”¨modelçš„predictionæ–¹æ³•è¿›è¡Œåˆ†æ</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> output = </span><span style="color:#C678DD;">try</span><span style="color:#ABB2BF;"> model.</span><span style="color:#61AFEF;">prediction</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">image</span><span style="color:#ABB2BF;">: pixelBuffer)</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#7F848E;font-style:italic;">// æ‰“å°è¾“å‡ºç»“æœ</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> probs = output.</span><span style="color:#E06C75;">classLabelProbs</span><span style="color:#ABB2BF;">.</span><span style="color:#56B6C2;">sorted</span><span style="color:#ABB2BF;"> { </span><span style="color:#E5C07B;">$0</span><span style="color:#ABB2BF;">.value &gt; </span><span style="color:#E5C07B;">$1</span><span style="color:#ABB2BF;">.value }</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#C678DD;">if</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">let</span><span style="color:#ABB2BF;"> prob = probs.</span><span style="color:#56B6C2;">first</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">                Label.text = </span><span style="color:#98C379;">&quot;</span><span style="color:#C678DD;">\\(</span><span style="color:#ABB2BF;">prob.</span><span style="color:#E06C75;">key</span><span style="color:#C678DD;">)</span><span style="color:#98C379;"> </span><span style="color:#C678DD;">\\(</span><span style="color:#ABB2BF;">prob.value</span><span style="color:#C678DD;">)</span><span style="color:#98C379;">&quot;</span></span>
<span class="line"><span style="color:#ABB2BF;">            }</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">catch</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">            </span><span style="color:#E5C07B;">self</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">presentAlertController</span><span style="color:#ABB2BF;">(</span><span style="color:#61AFEF;">withTitle</span><span style="color:#ABB2BF;">: title,</span></span>
<span class="line"><span style="color:#ABB2BF;">                                        </span><span style="color:#61AFEF;">message</span><span style="color:#ABB2BF;">: error.</span><span style="color:#E06C75;">localizedDescription</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">        }</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="è¿è¡Œæ•ˆæœ" tabindex="-1"><a class="header-anchor" href="#è¿è¡Œæ•ˆæœ" aria-hidden="true">#</a> è¿è¡Œæ•ˆæœ</h2>`,2),x={href:"https://cuntuku.com/image/KNToV",target:"_blank",rel:"noopener noreferrer"},N=s("img",{src:"https://storage2.cuntuku.com/2017/11/21/Snip20171121_3.md.png",alt:"Snip20171121_3.md.png",loading:"lazy"},null,-1),M=s("br",null,null,-1),V={href:"https://cuntuku.com/image/KNvFW",target:"_blank",rel:"noopener noreferrer"},w=s("img",{src:"https://storage1.cuntuku.com/2017/11/21/Snip20171121_4.md.png",alt:"Snip20171121_4.md.png",loading:"lazy"},null,-1),K=s("br",null,null,-1),P={href:"https://cuntuku.com/image/KNNdd",target:"_blank",rel:"noopener noreferrer"},I=s("img",{src:"https://storage2.cuntuku.com/2017/11/21/Snip20171121_5.md.png",alt:"Snip20171121_5.md.png",loading:"lazy"},null,-1),z=s("h2",{id:"demo",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#demo","aria-hidden":"true"},"#"),n(" Demo")],-1),T={href:"https://github.com/OrageKK/coreML-Examples",target:"_blank",rel:"noopener noreferrer"},q=s("br",null,null,-1),O=s("strong",null,"å¦‚æœæœ‰å¸®åŠ©çƒ¦è¯·ç‚¹ star",-1);function j(G,U){const e=o("ExternalLinkIcon");return t(),p("div",null,[i,B,s("p",null,[n("æ‰€è°“å·²è®­ç»ƒæ¨¡å‹ (trained model)æŒ‡çš„æ˜¯å¯¹ä¸€ç»„è®­ç»ƒæ•°æ®åº”ç”¨äº†æŸä¸ªæœºå™¨å­¦ä¹ ç®—æ³•åï¼Œæ‰€ç”Ÿæˆçš„ä¸€ç»„ç»“æœ Core ML æ˜¯é¢†åŸŸç‰¹å®š (domain-specific) æ¡†æ¶å’ŒåŠŸèƒ½çš„åŸºç¡€æ‰€åœ¨ã€‚Core ML ä¸º Vision æä¾›äº†å›¾åƒå¤„ç†çš„æ”¯æŒï¼Œä¸º Foundation æä¾›äº†è‡ªç„¶è¯­è¨€å¤„ç†çš„æ”¯æŒï¼ˆä¾‹å¦‚ NSLinguisticTagger ç±»ï¼‰ï¼Œä¸º "),s("a",d,[n("GameplayKit"),l(e)]),n(" æä¾›äº†å¯¹å­¦ä¹ å†³ç­–æ ‘ (learned decision tree) è¿›è¡Œåˆ†æçš„æ”¯æŒã€‚Core ML æœ¬èº«æ˜¯åŸºäºåº•å±‚åŸºæœ¬ç±»å‹è€Œå»ºç«‹çš„ï¼ŒåŒ…æ‹¬ Accelerateã€BNNS ä»¥åŠ Metal Performance Shaders ç­‰ã€‚")]),u,y,s("p",null,[n("Apple æä¾›äº†ä¸€äº›å¸¸è§çš„"),s("a",m,[n("å¼€æºæ¨¡å‹"),l(e)]),n("ä¾›å¤§å®¶ä½¿ç”¨ï¼Œè¿™äº›æ¨¡å‹å·²ç»ä½¿ç”¨äº† Core ML æ¨¡å‹æ ¼å¼ã€‚æ‚¨å¯ä»¥è‡ªè¡Œä¸‹è½½è¿™äº›æ¨¡å‹ï¼Œç„¶åå°±å¯ä»¥å¼€å§‹åœ¨åº”ç”¨ä¸­ä½¿ç”¨å®ƒä»¬äº†ã€‚")]),_,h,s("ol",null,[s("li",null,[s("p",null,[n("å°†æ¨¡å‹æ·»åŠ åˆ° Xcode ä¸­"),g,n(" åˆ›å»ºå·¥ç¨‹å¹¶å¼•å…¥æ¨¡å‹æ–‡ä»¶"),F,b,A,n(" å•å‡»è¿™ä¸ªæ–‡ä»¶å°±å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ¨¡å‹çš„è¯¦ç»†ä¿¡æ¯"),v,s("a",f,[C,l(e)]),D,n(" ä¸‹é¢æ˜¯è¿™ä¸ªæ¨¡å‹çš„å®˜æ–¹ä»‹ç»")]),k]),E,S]),L,s("p",null,[s("a",x,[N,l(e)]),M,s("a",V,[w,l(e)]),K,s("a",P,[I,l(e)])]),z,s("p",null,[s("a",T,[n("ğŸ‘‰Demo ä¸‹è½½"),l(e)]),q,O])])}const $=a(c,[["render",j],["__file","coreML.html.vue"]]);export{$ as default};
