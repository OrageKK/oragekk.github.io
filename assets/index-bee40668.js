var g1=Object.defineProperty,v1=(t,e,r)=>e in t?g1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ti=(t,e,r)=>(v1(t,typeof e!="symbol"?e+"":e,r),r),vn=(t,e,r)=>new Promise((i,o)=>{var s=d=>{try{c(r.next(d))}catch(_){o(_)}},h=d=>{try{c(r.throw(d))}catch(_){o(_)}},c=d=>d.done?i(d.value):Promise.resolve(d.value).then(s,h);c((r=r.apply(t,e)).next())});(function(){var pe=!0;function t(){pe||(this._$MT=null,this._$5S=null,this._$NP=0,t._$42++,this._$5S=new _t(this))}t._$0s=1,t._$4s=2,t._$42=0,t._$62=function(l,f){try{if(f instanceof ArrayBuffer&&(f=new DataView(f)),!(f instanceof DataView))throw new Ur("_$SS#loadModel(b) / b _$x be DataView or ArrayBuffer");var T=new Mt(f),D=T._$ST(),N=T._$ST(),M=T._$ST(),X;if(D==109&&N==111&&M==99)X=T._$ST();else throw new Ur("_$gi _$C _$li , _$Q0 _$P0.");if(T._$gr(X),X>Et._$T7){l._$NP|=t._$4s;var H=Et._$T7,U="_$gi _$C _$li , _$n0 _$_ version _$li ( SDK : "+H+" < _$f0 : "+X+` )@_$SS#loadModel()
`;throw new Ur(U)}var z=T._$nP();if(X>=Et._$s7){var ot=T._$9T(),et=T._$9T();if(ot!=-30584||et!=-30584)throw l._$NP|=t._$0s,new Ur("_$gi _$C _$li , _$0 _$6 _$Ui.")}l._$KS(z);var rt=l.getModelContext();rt.setDrawParam(l.getDrawParam()),rt.init()}catch(gt){h._$Rb(gt)}},t.prototype._$KS=function(l){this._$MT=l},t.prototype.getModelImpl=function(){return this._$MT==null&&(this._$MT=new E,this._$MT._$zP()),this._$MT},t.prototype.getCanvasWidth=function(){return this._$MT==null?0:this._$MT.getCanvasWidth()},t.prototype.getCanvasHeight=function(){return this._$MT==null?0:this._$MT.getCanvasHeight()},t.prototype.getParamFloat=function(l){return typeof l!="number"&&(l=this._$5S.getParamIndex(I.getID(l))),this._$5S.getParamFloat(l)},t.prototype.setParamFloat=function(l,f,T){typeof l!="number"&&(l=this._$5S.getParamIndex(I.getID(l))),arguments.length<3&&(T=1),this._$5S.setParamFloat(l,this._$5S.getParamFloat(l)*(1-T)+f*T)},t.prototype.addToParamFloat=function(l,f,T){typeof l!="number"&&(l=this._$5S.getParamIndex(I.getID(l))),arguments.length<3&&(T=1),this._$5S.setParamFloat(l,this._$5S.getParamFloat(l)+f*T)},t.prototype.multParamFloat=function(l,f,T){typeof l!="number"&&(l=this._$5S.getParamIndex(I.getID(l))),arguments.length<3&&(T=1),this._$5S.setParamFloat(l,this._$5S.getParamFloat(l)*(1+(f-1)*T))},t.prototype.getParamIndex=function(l){return this._$5S.getParamIndex(I.getID(l))},t.prototype.loadParam=function(){this._$5S.loadParam()},t.prototype.saveParam=function(){this._$5S.saveParam()},t.prototype.init=function(){this._$5S.init()},t.prototype.update=function(){this._$5S.update()},t.prototype._$Rs=function(){return h._$li("_$60 _$PT _$Rs()"),-1},t.prototype._$Ds=function(l){h._$li(`_$60 _$PT _$SS#_$Ds() 
`)},t.prototype._$K2=function(){},t.prototype.draw=function(){},t.prototype.getModelContext=function(){return this._$5S},t.prototype._$s2=function(){return this._$NP},t.prototype._$P7=function(l,f,T,D){var N=-1,M=0,X=this,H=.5,U=.15;if(T==0){for(var z=0;z<l.length;z++){var ot=l[z],et=f[z],rt=X.getParamFloat(ot)!=0;X.setPartsOpacity(et,rt?1:0)}return}else if(l.length==1){var ot=l[0],gt=X.getParamFloat(ot)!=0,et=f[0],At=X.getPartsOpacity(et),lt=T/D;gt?(At+=lt,At>1&&(At=1)):(At-=lt,At<0&&(At=0)),X.setPartsOpacity(et,At)}else{for(var z=0;z<l.length;z++){var ot=l[z],rt=X.getParamFloat(ot)!=0;if(rt){if(N>=0)break;N=z;var et=f[z];M=X.getPartsOpacity(et),M+=T/D,M>1&&(M=1)}}N<0&&(console.log("No _$wi _$q0/ _$U default[%s]",l[0]),N=0,M=1,X.loadParam(),X.setParamFloat(l[N],M),X.saveParam());for(var z=0;z<l.length;z++){var et=f[z];if(N==z)X.setPartsOpacity(et,M);else{var Pt=X.getPartsOpacity(et),bt;M<H?bt=M*(H-1)/H+1:bt=(1-M)*H/(1-H);{var Ct=(1-bt)*(1-M);Ct>U&&(bt=1-U/(1-M))}Pt>bt&&(Pt=bt),X.setPartsOpacity(et,Pt)}}}},t.prototype.setPartsOpacity=function(l,f){typeof l!="number"&&(l=this._$5S.getPartsDataIndex(_.getID(l))),this._$5S.setPartsOpacity(l,f)},t.prototype.getPartsDataIndex=function(l){return l instanceof _||(l=_.getID(l)),this._$5S.getPartsDataIndex(l)},t.prototype.getPartsOpacity=function(l){return typeof l!="number"&&(l=this._$5S.getPartsDataIndex(_.getID(l))),l<0?0:this._$5S.getPartsOpacity(l)},t.prototype.getDrawParam=function(){},t.prototype.getDrawDataIndex=function(l){return this._$5S.getDrawDataIndex(he.getID(l))},t.prototype.getDrawData=function(l){return this._$5S.getDrawData(l)},t.prototype.getTransformedPoints=function(l){var f=this._$5S._$C2(l);return f instanceof dn?f.getTransformedPoints():null},t.prototype.getIndexArray=function(l){if(l<0||l>=this._$5S._$aS.length)return null;var f=this._$5S._$aS[l];return f!=null&&f.getType()==qt._$wb&&f instanceof Xe?f.getIndexArray():null};function e(l){if(!pe){this.clipContextList=new Array,this.glcontext=l.gl,this.dp_webgl=l,this.curFrameNo=0,this.firstError_clipInNotUpdate=!0,this.colorBuffer=0,this.isInitGLFBFunc=!1,this.tmpBoundsOnModel=new J,vt.glContext.length>vt.frameBuffers.length&&(this.curFrameNo=this.getMaskRenderTexture()),this.tmpModelToViewMatrix=new Ht,this.tmpMatrix2=new Ht,this.tmpMatrixForMask=new Ht,this.tmpMatrixForDraw=new Ht,this.CHANNEL_COLORS=new Array;var f=new St;f=new St,f.r=0,f.g=0,f.b=0,f.a=1,this.CHANNEL_COLORS.push(f),f=new St,f.r=1,f.g=0,f.b=0,f.a=0,this.CHANNEL_COLORS.push(f),f=new St,f.r=0,f.g=1,f.b=0,f.a=0,this.CHANNEL_COLORS.push(f),f=new St,f.r=0,f.g=0,f.b=1,f.a=0,this.CHANNEL_COLORS.push(f);for(var T=0;T<this.CHANNEL_COLORS.length;T++)this.dp_webgl.setChannelFlagAsColor(T,this.CHANNEL_COLORS[T])}}e.CHANNEL_COUNT=4,e.RENDER_TEXTURE_USE_MIPMAP=!1,e.NOT_USED_FRAME=-100,e.prototype._$L7=function(){if(this.tmpModelToViewMatrix&&(this.tmpModelToViewMatrix=null),this.tmpMatrix2&&(this.tmpMatrix2=null),this.tmpMatrixForMask&&(this.tmpMatrixForMask=null),this.tmpMatrixForDraw&&(this.tmpMatrixForDraw=null),this.tmpBoundsOnModel&&(this.tmpBoundsOnModel=null),this.CHANNEL_COLORS){for(var l=this.CHANNEL_COLORS.length-1;l>=0;--l)this.CHANNEL_COLORS.splice(l,1);this.CHANNEL_COLORS=[]}this.releaseShader()},e.prototype.releaseShader=function(){for(var l=vt.frameBuffers.length,f=0;f<l;f++)this.gl.deleteFramebuffer(vt.frameBuffers[f].framebuffer);vt.frameBuffers=[],vt.glContext=[]},e.prototype.init=function(l,f,T){for(var D=0;D<f.length;D++){var N=f[D].getClipIDList();if(N!=null){var M=this.findSameClip(N);M==null&&(M=new r(this,l,N),this.clipContextList.push(M));var X=f[D].getDrawDataID(),H=l.getDrawDataIndex(X);M.addClippedDrawData(X,H);var U=T[D];U.clipBufPre_clipContext=M}}},e.prototype.getMaskRenderTexture=function(){var l=null;return l=this.dp_webgl.createFramebuffer(),vt.frameBuffers[this.dp_webgl.glno]=l,this.dp_webgl.glno},e.prototype.setupClip=function(l,f){for(var T=0,D=0;D<this.clipContextList.length;D++){var N=this.clipContextList[D];this.calcClippedDrawTotalBounds(l,N),N.isUsing&&T++}if(T>0){var M=f.gl.getParameter(f.gl.FRAMEBUFFER_BINDING),X=new Array(4);X[0]=0,X[1]=0,X[2]=f.gl.canvas.width,X[3]=f.gl.canvas.height,f.gl.viewport(0,0,vt.clippingMaskBufferSize,vt.clippingMaskBufferSize),this.setupLayoutBounds(T),f.gl.bindFramebuffer(f.gl.FRAMEBUFFER,vt.frameBuffers[this.curFrameNo].framebuffer),f.gl.clearColor(0,0,0,0),f.gl.clear(f.gl.COLOR_BUFFER_BIT);for(var D=0;D<this.clipContextList.length;D++){var N=this.clipContextList[D],H=N.allClippedDrawRect;N.layoutChannelNo;var U=N.layoutBounds,z=.05;this.tmpBoundsOnModel._$jL(H),this.tmpBoundsOnModel.expand(H.width*z,H.height*z);var ot=U.width/this.tmpBoundsOnModel.width,et=U.height/this.tmpBoundsOnModel.height;this.tmpMatrix2.identity(),this.tmpMatrix2.translate(-1,-1,0),this.tmpMatrix2.scale(2,2,1),this.tmpMatrix2.translate(U.x,U.y,0),this.tmpMatrix2.scale(ot,et,1),this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0),this.tmpMatrixForMask.setMatrix(this.tmpMatrix2.m),this.tmpMatrix2.identity(),this.tmpMatrix2.translate(U.x,U.y,0),this.tmpMatrix2.scale(ot,et,1),this.tmpMatrix2.translate(-this.tmpBoundsOnModel.x,-this.tmpBoundsOnModel.y,0),this.tmpMatrixForDraw.setMatrix(this.tmpMatrix2.m);for(var rt=this.tmpMatrixForMask.getArray(),gt=0;gt<16;gt++)N.matrixForMask[gt]=rt[gt];for(var At=this.tmpMatrixForDraw.getArray(),gt=0;gt<16;gt++)N.matrixForDraw[gt]=At[gt];for(var lt=N.clippingMaskDrawIndexList.length,Pt=0;Pt<lt;Pt++){var bt=N.clippingMaskDrawIndexList[Pt],Ct=l.getDrawData(bt),Rt=l._$C2(bt);f.setClipBufPre_clipContextForMask(N),Ct.draw(f,l,Rt)}}f.gl.bindFramebuffer(f.gl.FRAMEBUFFER,M),f.setClipBufPre_clipContextForMask(null),f.gl.viewport(X[0],X[1],X[2],X[3])}},e.prototype.getColorBuffer=function(){return this.colorBuffer},e.prototype.findSameClip=function(l){for(var f=0;f<this.clipContextList.length;f++){var T=this.clipContextList[f],D=T.clipIDList.length;if(D==l.length){for(var N=0,M=0;M<D;M++)for(var X=T.clipIDList[M],H=0;H<D;H++)if(l[H]==X){N++;break}if(N==D)return T}}return null},e.prototype.calcClippedDrawTotalBounds=function(l,f){for(var T=l._$Ri.getModelImpl().getCanvasWidth(),D=l._$Ri.getModelImpl().getCanvasHeight(),N=T>D?T:D,M=N,X=N,H=0,U=0,z=f.clippedDrawContextList.length,ot=0;ot<z;ot++){var et=f.clippedDrawContextList[ot],rt=et.drawDataIndex,gt=l._$C2(rt);if(gt._$yo()){for(var At=gt.getTransformedPoints(),lt=At.length,Pt=[],bt=[],Ct=0,Rt=st._$i2;Rt<lt;Rt+=st._$No)Pt[Ct]=At[Rt],bt[Ct]=At[Rt+1],Ct++;var ne=Math.min.apply(null,Pt),kt=Math.min.apply(null,bt),Dt=Math.max.apply(null,Pt),B=Math.max.apply(null,bt);ne<M&&(M=ne),kt<X&&(X=kt),Dt>H&&(H=Dt),B>U&&(U=B)}}if(M==N)f.allClippedDrawRect.x=0,f.allClippedDrawRect.y=0,f.allClippedDrawRect.width=0,f.allClippedDrawRect.height=0,f.isUsing=!1;else{var Ft=H-M,je=U-X;f.allClippedDrawRect.x=M,f.allClippedDrawRect.y=X,f.allClippedDrawRect.width=Ft,f.allClippedDrawRect.height=je,f.isUsing=!0}},e.prototype.setupLayoutBounds=function(l){var f=l/e.CHANNEL_COUNT,T=l%e.CHANNEL_COUNT;f=~~f,T=~~T;for(var D=0,N=0;N<e.CHANNEL_COUNT;N++){var M=f+(N<T?1:0);if(M!=0)if(M==1){var X=this.clipContextList[D++];X.layoutChannelNo=N,X.layoutBounds.x=0,X.layoutBounds.y=0,X.layoutBounds.width=1,X.layoutBounds.height=1}else if(M==2)for(var H=0;H<M;H++){var U=H%2,z=0;U=~~U;var X=this.clipContextList[D++];X.layoutChannelNo=N,X.layoutBounds.x=U*.5,X.layoutBounds.y=0,X.layoutBounds.width=.5,X.layoutBounds.height=1}else if(M<=4)for(var H=0;H<M;H++){var U=H%2,z=H/2;U=~~U,z=~~z;var X=this.clipContextList[D++];X.layoutChannelNo=N,X.layoutBounds.x=U*.5,X.layoutBounds.y=z*.5,X.layoutBounds.width=.5,X.layoutBounds.height=.5}else if(M<=9)for(var H=0;H<M;H++){var U=H%3,z=H/3;U=~~U,z=~~z;var X=this.clipContextList[D++];X.layoutChannelNo=N,X.layoutBounds.x=U/3,X.layoutBounds.y=z/3,X.layoutBounds.width=1/3,X.layoutBounds.height=1/3}else h._$li("_$6 _$0P mask count : %d",M)}};function r(l,f,T){this.clipIDList=new Array,this.clipIDList=T,this.clippingMaskDrawIndexList=new Array;for(var D=0;D<T.length;D++)this.clippingMaskDrawIndexList.push(f.getDrawDataIndex(T[D]));this.clippedDrawContextList=new Array,this.isUsing=!0,this.layoutChannelNo=0,this.layoutBounds=new J,this.allClippedDrawRect=new J,this.matrixForMask=new Float32Array(16),this.matrixForDraw=new Float32Array(16),this.owner=l}r.prototype.addClippedDrawData=function(l,f){var T=new i(l,f);this.clippedDrawContextList.push(T)};function i(l,f){this._$gP=l,this.drawDataIndex=f}function o(){pe||(this.color=null)}function s(){pe||(this._$dP=null,this._$eo=null,this._$V0=null,this._$dP=1e3,this._$eo=1e3,this._$V0=1,this._$a0())}s._$JT=function(l,f,T){var D=l/f,N=T/f,M=N,X=1/3,H=2/3,U=1-(1-N)*(1-N),z=1-(1-M)*(1-M),ot=0,et=(1-N)*X*U+(M*H+(1-M)*X)*(1-U),rt=(M+(1-M)*H)*z+(N*X+(1-N)*H)*(1-z),gt=1,At=gt-3*rt+3*et-ot,lt=3*rt-6*et+3*ot,Pt=3*et-3*ot,bt=ot;if(D<=0)return 0;if(D>=1)return 1;var Ct=D,Rt=Ct*Ct,ne=Ct*Rt,kt=At*ne+lt*Rt+Pt*Ct+bt;return kt},s.prototype._$a0=function(){},s.prototype.setFadeIn=function(l){this._$dP=l},s.prototype.setFadeOut=function(l){this._$eo=l},s.prototype._$pT=function(l){this._$V0=l},s.prototype.getFadeOut=function(){return this._$eo},s.prototype._$4T=function(){return this._$eo},s.prototype._$mT=function(){return this._$V0},s.prototype.getDurationMSec=function(){return-1},s.prototype.getLoopDurationMSec=function(){return-1},s.prototype.updateParam=function(l,f){if(!(!f._$AT||f._$9L)){var T=Gt.getUserTimeMSec();if(f._$z2<0){f._$z2=T,f._$bs=T;var D=this.getDurationMSec();f._$Do<0&&(f._$Do=D<=0?-1:f._$z2+D)}var N=this._$V0,M=this._$dP==0?1:cn._$r2((T-f._$bs)/this._$dP),X=this._$eo==0||f._$Do<0?1:cn._$r2((f._$Do-T)/this._$eo);N=N*M*X,0<=N&&N<=1||console.log("### assert!! ### "),this.updateParamExe(l,T,N,f),f._$Do>0&&f._$Do<T&&(f._$9L=!0)}},s.prototype.updateParamExe=function(l,f,T,D){};function h(){}h._$8s=0,h._$fT=new Object,h.start=function(l){var f=h._$fT[l];f==null&&(f=new c,f._$r=l,h._$fT[l]=f),f._$0S=Gt.getSystemTimeMSec()},h.dump=function(l){var f=h._$fT[l];if(f!=null){var T=Gt.getSystemTimeMSec(),D=T-f._$0S;return console.log(l+" : "+D+"ms"),D}else return-1},h.end=function(l){var f=h._$fT[l];if(f!=null){var T=Gt.getSystemTimeMSec();return T-f._$0S}else return-1},h._$li=function(l,f){},h._$Ji=function(l,f){console.log(l,f)},h._$dL=function(l,f){console.log(l,f),console.log(`
`)},h._$KL=function(l,f){for(var T=0;T<f;T++)T%16==0&&T>0?console.log(`
`):T%8==0&&T>0&&console.log("  "),console.log("%02X ",l[T]&255);console.log(`
`)},h._$nr=function(l,f,T){console.log(`%s
`,l);for(var D=f.length,N=0;N<D;++N)console.log("%5d",f[N]),console.log(`%s
`,T),console.log(",");console.log(`
`)},h._$Rb=function(l){console.log("dump exception : "+l),console.log("stack :: "+l.stack)};function c(){this._$r=null,this._$0S=null}function d(){pe||(this.x=null,this.y=null,this.width=null,this.height=null)}d.prototype._$8P=function(){return .5*(this.x+this.x+this.width)},d.prototype._$6P=function(){return .5*(this.y+this.y+this.height)},d.prototype._$EL=function(){return this.x+this.width},d.prototype._$5T=function(){return this.y+this.height},d.prototype._$jL=function(l,f,T,D){this.x=l,this.y=f,this.width=T,this.height=D},d.prototype._$jL=function(l){this.x=l.x,this.y=l.y,this.width=l.width,this.height=l.height};function _(l){pe||Er.prototype.constructor.call(this,l)}_.prototype=new Er,_._$tP=new Object,_._$27=function(){_._$tP.clear()},_.getID=function(l){var f=_._$tP[l];return f==null&&(f=new _(l),_._$tP[l]=f),f},_.prototype._$3s=function(){return new _};function y(){}function I(l){pe||Er.prototype.constructor.call(this,l)}I.prototype=new Er,I._$tP=new Object,I._$27=function(){I._$tP.clear()},I.getID=function(l){var f=I._$tP[l];return f==null&&(f=new I(l),I._$tP[l]=f),f},I.prototype._$3s=function(){return new I};function E(){pe||(this._$vo=null,this._$F2=null,this._$ao=400,this._$1S=400,E._$42++)}E._$42=0,E.prototype._$zP=function(){this._$vo==null&&(this._$vo=new qr),this._$F2==null&&(this._$F2=new Array)},E.prototype.getCanvasWidth=function(){return this._$ao},E.prototype.getCanvasHeight=function(){return this._$1S},E.prototype._$F0=function(l){this._$vo=l._$nP(),this._$F2=l._$nP(),this._$ao=l._$6L(),this._$1S=l._$6L()},E.prototype._$6S=function(l){this._$F2.push(l)},E.prototype._$Xr=function(){return this._$F2},E.prototype._$E2=function(){return this._$vo};function S(){pe||(this.p1=new b,this.p2=new b,this._$Fo=0,this._$Db=0,this._$L2=0,this._$M2=0,this._$ks=0,this._$9b=0,this._$iP=0,this._$iT=0,this._$lL=new Array,this._$qP=new Array,this.setup(.3,.5,.1))}S.prototype.setup=function(l,f,T){this._$ks=this._$Yb(),this.p2._$xT(),arguments.length==3&&(this._$Fo=l,this._$L2=f,this.p1._$p=T,this.p2._$p=T,this.p2.y=l,this.setup())},S.prototype.getPhysicsPoint1=function(){return this.p1},S.prototype.getPhysicsPoint2=function(){return this.p2},S.prototype._$qr=function(){return this._$Db},S.prototype._$pr=function(l){this._$Db=l},S.prototype._$5r=function(){return this._$M2},S.prototype._$Cs=function(){return this._$9b},S.prototype._$Yb=function(){return-180*Math.atan2(this.p1.x-this.p2.x,-(this.p1.y-this.p2.y))/Math.PI},S.prototype.addSrcParam=function(l,f,T,D){var N=new $(l,f,T,D);this._$lL.push(N)},S.prototype.addTargetParam=function(l,f,T,D){var N=new Y(l,f,T,D);this._$qP.push(N)},S.prototype.update=function(l,f){if(this._$iP==0){this._$iP=this._$iT=f,this._$Fo=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y));return}var T=(f-this._$iT)/1e3;if(T!=0){for(var D=this._$lL.length-1;D>=0;--D){var N=this._$lL[D];N._$oP(l,this)}this._$oo(l,T),this._$M2=this._$Yb(),this._$9b=(this._$M2-this._$ks)/T,this._$ks=this._$M2}for(var D=this._$qP.length-1;D>=0;--D){var M=this._$qP[D];M._$YS(l,this)}this._$iT=f},S.prototype._$oo=function(l,f){f<.033&&(f=.033);var T=1/f;this.p1.vx=(this.p1.x-this.p1._$s0)*T,this.p1.vy=(this.p1.y-this.p1._$70)*T,this.p1.ax=(this.p1.vx-this.p1._$7L)*T,this.p1.ay=(this.p1.vy-this.p1._$HL)*T,this.p1.fx=this.p1.ax*this.p1._$p,this.p1.fy=this.p1.ay*this.p1._$p,this.p1._$xT();var D=-Math.atan2(this.p1.y-this.p2.y,this.p1.x-this.p2.x),N,M,X=Math.cos(D),H=Math.sin(D),U=9.8*this.p2._$p,z=this._$Db*Ae._$bS,ot=U*Math.cos(D-z);N=ot*H,M=ot*X;var et=-this.p1.fx*H*H,rt=-this.p1.fy*H*X,gt=-this.p2.vx*this._$L2,At=-this.p2.vy*this._$L2;this.p2.fx=N+et+gt,this.p2.fy=M+rt+At,this.p2.ax=this.p2.fx/this.p2._$p,this.p2.ay=this.p2.fy/this.p2._$p,this.p2.vx+=this.p2.ax*f,this.p2.vy+=this.p2.ay*f,this.p2.x+=this.p2.vx*f,this.p2.y+=this.p2.vy*f;var lt=Math.sqrt((this.p1.x-this.p2.x)*(this.p1.x-this.p2.x)+(this.p1.y-this.p2.y)*(this.p1.y-this.p2.y));this.p2.x=this.p1.x+this._$Fo*(this.p2.x-this.p1.x)/lt,this.p2.y=this.p1.y+this._$Fo*(this.p2.y-this.p1.y)/lt,this.p2.vx=(this.p2.x-this.p2._$s0)*T,this.p2.vy=(this.p2.y-this.p2._$70)*T,this.p2._$xT()};function b(){this._$p=1,this.x=0,this.y=0,this.vx=0,this.vy=0,this.ax=0,this.ay=0,this.fx=0,this.fy=0,this._$s0=0,this._$70=0,this._$7L=0,this._$HL=0}b.prototype._$xT=function(){this._$s0=this.x,this._$70=this.y,this._$7L=this.vx,this._$HL=this.vy};function x(l,f,T){this._$wL=null,this.scale=null,this._$V0=null,this._$wL=l,this.scale=f,this._$V0=T}x.prototype._$oP=function(l,f){};function $(l,f,T,D){x.prototype.constructor.call(this,f,T,D),this._$tL=null,this._$tL=l}$.prototype=new x,$.prototype._$oP=function(l,f){var T=this.scale*l.getParamFloat(this._$wL),D=f.getPhysicsPoint1();switch(this._$tL){default:case S.Src.SRC_TO_X:D.x=D.x+(T-D.x)*this._$V0;break;case S.Src.SRC_TO_Y:D.y=D.y+(T-D.y)*this._$V0;break;case S.Src.SRC_TO_G_ANGLE:var N=f._$qr();N=N+(T-N)*this._$V0,f._$pr(N);break}};function j(l,f,T){this._$wL=null,this.scale=null,this._$V0=null,this._$wL=l,this.scale=f,this._$V0=T}j.prototype._$YS=function(l,f){};function Y(l,f,T,D){j.prototype.constructor.call(this,f,T,D),this._$YP=null,this._$YP=l}Y.prototype=new j,Y.prototype._$YS=function(l,f){switch(this._$YP){default:case S.Target.TARGET_FROM_ANGLE:l.setParamFloat(this._$wL,this.scale*f._$5r(),this._$V0);break;case S.Target.TARGET_FROM_ANGLE_V:l.setParamFloat(this._$wL,this.scale*f._$Cs(),this._$V0);break}},S.Src=function(){},S.Src.SRC_TO_X="SRC_TO_X",S.Src.SRC_TO_Y="SRC_TO_Y",S.Src.SRC_TO_G_ANGLE="SRC_TO_G_ANGLE",S.Target=function(){},S.Target.TARGET_FROM_ANGLE="TARGET_FROM_ANGLE",S.Target.TARGET_FROM_ANGLE_V="TARGET_FROM_ANGLE_V";function Q(){pe||(this._$fL=0,this._$gL=0,this._$B0=1,this._$z0=1,this._$qT=0,this.reflectX=!1,this.reflectY=!1)}Q.prototype.init=function(l){this._$fL=l._$fL,this._$gL=l._$gL,this._$B0=l._$B0,this._$z0=l._$z0,this._$qT=l._$qT,this.reflectX=l.reflectX,this.reflectY=l.reflectY},Q.prototype._$F0=function(l){this._$fL=l._$_T(),this._$gL=l._$_T(),this._$B0=l._$_T(),this._$z0=l._$_T(),this._$qT=l._$_T(),l.getFormatVersion()>=Et.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this.reflectX=l._$po(),this.reflectY=l._$po())},Q.prototype._$e=function(){};var it=function(){};it._$ni=function(l,f,T,D,N,M,X,H,U){var z=X*M-H*N;if(z==0)return null;var ot=((l-T)*M-(f-D)*N)/z,et;return N!=0?et=(l-T-ot*X)/N:et=(f-D-ot*H)/M,isNaN(et)&&(et=(l-T-ot*X)/N,isNaN(et)&&(et=(f-D-ot*H)/M),isNaN(et)&&(console.log("a is NaN @UtVector#_$ni() "),console.log("v1x : "+N),console.log("v1x != 0 ? "+(N!=0)))),U==null?new Array(et,ot):(U[0]=et,U[1]=ot,U)};function J(){pe||(this.x=null,this.y=null,this.width=null,this.height=null)}J.prototype._$8P=function(){return this.x+.5*this.width},J.prototype._$6P=function(){return this.y+.5*this.height},J.prototype._$EL=function(){return this.x+this.width},J.prototype._$5T=function(){return this.y+this.height},J.prototype._$jL=function(l,f,T,D){this.x=l,this.y=f,this.width=T,this.height=D},J.prototype._$jL=function(l){this.x=l.x,this.y=l.y,this.width=l.width,this.height=l.height},J.prototype.contains=function(l,f){return this.x<=this.x&&this.y<=this.y&&this.x<=this.x+this.width&&this.y<=this.y+this.height},J.prototype.expand=function(l,f){this.x-=l,this.y-=f,this.width+=l*2,this.height+=f*2};function K(){}K._$Z2=function(l,f,T,D){var N=f._$Q2(l,T),M=l._$vs(),X=l._$Tr();if(f._$zr(M,X,N),N<=0)return D[M[0]];if(N==1){var H=D[M[0]],U=D[M[1]],z=X[0];return H+(U-H)*z|0}else if(N==2){var H=D[M[0]],U=D[M[1]],ot=D[M[2]],et=D[M[3]],z=X[0],rt=X[1],gt=H+(U-H)*z|0,At=ot+(et-ot)*z|0;return gt+(At-gt)*rt|0}else if(N==3){var lt=D[M[0]],Pt=D[M[1]],bt=D[M[2]],Ct=D[M[3]],Rt=D[M[4]],ne=D[M[5]],kt=D[M[6]],Dt=D[M[7]],z=X[0],rt=X[1],B=X[2],H=lt+(Pt-lt)*z|0,U=bt+(Ct-bt)*z|0,ot=Rt+(ne-Rt)*z|0,et=kt+(Dt-kt)*z|0,gt=H+(U-H)*rt|0,At=ot+(et-ot)*rt|0;return gt+(At-gt)*B|0}else if(N==4){var Ft=D[M[0]],je=D[M[1]],rr=D[M[2]],Qe=D[M[3]],zt=D[M[4]],ge=D[M[5]],me=D[M[6]],fe=D[M[7]],Se=D[M[8]],ye=D[M[9]],Me=D[M[10]],te=D[M[11]],de=D[M[12]],ee=D[M[13]],Lt=D[M[14]],De=D[M[15]],z=X[0],rt=X[1],B=X[2],pr=X[3],lt=Ft+(je-Ft)*z|0,Pt=rr+(Qe-rr)*z|0,bt=zt+(ge-zt)*z|0,Ct=me+(fe-me)*z|0,Rt=Se+(ye-Se)*z|0,ne=Me+(te-Me)*z|0,kt=de+(ee-de)*z|0,Dt=Lt+(De-Lt)*z|0,H=lt+(Pt-lt)*rt|0,U=bt+(Ct-bt)*rt|0,ot=Rt+(ne-Rt)*rt|0,et=kt+(Dt-kt)*rt|0,gt=H+(U-H)*B|0,At=ot+(et-ot)*B|0;return gt+(At-gt)*pr|0}else{for(var Ye=1<<N,Ie=new Float32Array(Ye),sr=0;sr<Ye;sr++){for(var Be=sr,mt=1,ir=0;ir<N;ir++)mt*=Be%2==0?1-X[ir]:X[ir],Be/=2;Ie[sr]=mt}for(var Cr=new Float32Array(Ye),mr=0;mr<Ye;mr++)Cr[mr]=D[M[mr]];for(var Zr=0,mr=0;mr<Ye;mr++)Zr+=Ie[mr]*Cr[mr];return Zr+.5|0}},K._$br=function(l,f,T,D){var N=f._$Q2(l,T),M=l._$vs(),X=l._$Tr();if(f._$zr(M,X,N),N<=0)return D[M[0]];if(N==1){var H=D[M[0]],U=D[M[1]],z=X[0];return H+(U-H)*z}else if(N==2){var H=D[M[0]],U=D[M[1]],ot=D[M[2]],et=D[M[3]],z=X[0],rt=X[1];return(1-rt)*(H+(U-H)*z)+rt*(ot+(et-ot)*z)}else if(N==3){var gt=D[M[0]],At=D[M[1]],lt=D[M[2]],Pt=D[M[3]],bt=D[M[4]],Ct=D[M[5]],Rt=D[M[6]],ne=D[M[7]],z=X[0],rt=X[1],kt=X[2];return(1-kt)*((1-rt)*(gt+(At-gt)*z)+rt*(lt+(Pt-lt)*z))+kt*((1-rt)*(bt+(Ct-bt)*z)+rt*(Rt+(ne-Rt)*z))}else if(N==4){var Dt=D[M[0]],B=D[M[1]],Ft=D[M[2]],je=D[M[3]],rr=D[M[4]],Qe=D[M[5]],zt=D[M[6]],ge=D[M[7]],me=D[M[8]],fe=D[M[9]],Se=D[M[10]],ye=D[M[11]],Me=D[M[12]],te=D[M[13]],de=D[M[14]],ee=D[M[15]],z=X[0],rt=X[1],kt=X[2],Lt=X[3];return(1-Lt)*((1-kt)*((1-rt)*(Dt+(B-Dt)*z)+rt*(Ft+(je-Ft)*z))+kt*((1-rt)*(rr+(Qe-rr)*z)+rt*(zt+(ge-zt)*z)))+Lt*((1-kt)*((1-rt)*(me+(fe-me)*z)+rt*(Se+(ye-Se)*z))+kt*((1-rt)*(Me+(te-Me)*z)+rt*(de+(ee-de)*z)))}else{for(var De=1<<N,pr=new Float32Array(De),Ye=0;Ye<De;Ye++){for(var Ie=Ye,sr=1,Be=0;Be<N;Be++)sr*=Ie%2==0?1-X[Be]:X[Be],Ie/=2;pr[Ye]=sr}for(var mt=new Float32Array(De),ir=0;ir<De;ir++)mt[ir]=D[M[ir]];for(var Cr=0,ir=0;ir<De;ir++)Cr+=pr[ir]*mt[ir];return Cr}},K._$Vr=function(l,f,T,D,N,M,X,H){var U=f._$Q2(l,T),z=l._$vs(),ot=l._$Tr();f._$zr(z,ot,U);var et=D*2,rt=X;if(U<=0){var gt=z[0],At=N[gt];if(H==2&&X==0)Gt._$jT(At,0,M,0,et);else for(var lt=0;lt<et;)M[rt]=At[lt++],M[rt+1]=At[lt++],rt+=H}else if(U==1)for(var At=N[z[0]],Pt=N[z[1]],bt=ot[0],Ct=1-bt,lt=0;lt<et;)M[rt]=At[lt]*Ct+Pt[lt]*bt,++lt,M[rt+1]=At[lt]*Ct+Pt[lt]*bt,++lt,rt+=H;else if(U==2)for(var At=N[z[0]],Pt=N[z[1]],Rt=N[z[2]],ne=N[z[3]],bt=ot[0],kt=ot[1],Ct=1-bt,Dt=1-kt,B=Dt*Ct,Ft=Dt*bt,je=kt*Ct,rr=kt*bt,lt=0;lt<et;)M[rt]=B*At[lt]+Ft*Pt[lt]+je*Rt[lt]+rr*ne[lt],++lt,M[rt+1]=B*At[lt]+Ft*Pt[lt]+je*Rt[lt]+rr*ne[lt],++lt,rt+=H;else if(U==3)for(var Qe=N[z[0]],zt=N[z[1]],ge=N[z[2]],me=N[z[3]],fe=N[z[4]],Se=N[z[5]],ye=N[z[6]],Me=N[z[7]],bt=ot[0],kt=ot[1],te=ot[2],Ct=1-bt,Dt=1-kt,de=1-te,ee=de*Dt*Ct,Lt=de*Dt*bt,De=de*kt*Ct,pr=de*kt*bt,Ye=te*Dt*Ct,Ie=te*Dt*bt,sr=te*kt*Ct,Be=te*kt*bt,lt=0;lt<et;)M[rt]=ee*Qe[lt]+Lt*zt[lt]+De*ge[lt]+pr*me[lt]+Ye*fe[lt]+Ie*Se[lt]+sr*ye[lt]+Be*Me[lt],++lt,M[rt+1]=ee*Qe[lt]+Lt*zt[lt]+De*ge[lt]+pr*me[lt]+Ye*fe[lt]+Ie*Se[lt]+sr*ye[lt]+Be*Me[lt],++lt,rt+=H;else if(U==4)for(var mt=N[z[0]],ir=N[z[1]],Cr=N[z[2]],mr=N[z[3]],Zr=N[z[4]],li=N[z[5]],ri=N[z[6]],Qr=N[z[7]],Tr=N[z[8]],Ji=N[z[9]],$i=N[z[10]],ii=N[z[11]],Ni=N[z[12]],ui=N[z[13]],We=N[z[14]],Dr=N[z[15]],bt=ot[0],kt=ot[1],te=ot[2],Jr=ot[3],Ct=1-bt,Dt=1-kt,de=1-te,bi=1-Jr,jo=bi*de*Dt*Ct,Ks=bi*de*Dt*bt,Ki=bi*de*kt*Ct,$r=bi*de*kt*bt,Yo=bi*te*Dt*Ct,ta=bi*te*Dt*bt,ea=bi*te*kt*Ct,Vo=bi*te*kt*bt,Wo=Jr*de*Dt*Ct,zo=Jr*de*Dt*bt,_o=Jr*de*kt*Ct,In=Jr*de*kt*bt,On=Jr*te*Dt*Ct,wn=Jr*te*Dt*bt,qo=Jr*te*kt*Ct,Zo=Jr*te*kt*bt,lt=0;lt<et;)M[rt]=jo*mt[lt]+Ks*ir[lt]+Ki*Cr[lt]+$r*mr[lt]+Yo*Zr[lt]+ta*li[lt]+ea*ri[lt]+Vo*Qr[lt]+Wo*Tr[lt]+zo*Ji[lt]+_o*$i[lt]+In*ii[lt]+On*Ni[lt]+wn*ui[lt]+qo*We[lt]+Zo*Dr[lt],++lt,M[rt+1]=jo*mt[lt]+Ks*ir[lt]+Ki*Cr[lt]+$r*mr[lt]+Yo*Zr[lt]+ta*li[lt]+ea*ri[lt]+Vo*Qr[lt]+Wo*Tr[lt]+zo*Ji[lt]+_o*$i[lt]+In*ii[lt]+On*Ni[lt]+wn*ui[lt]+qo*We[lt]+Zo*Dr[lt],++lt,rt+=H;else{for(var fn=1<<U,Mn=new Float32Array(fn),_n=0;_n<fn;_n++){for(var Qo=_n,Jo=1,ci=0;ci<U;ci++)Jo*=Qo%2==0?1-ot[ci]:ot[ci],Qo/=2;Mn[_n]=Jo}for(var Cn=new Float32Array(fn),Yr=0;Yr<fn;Yr++)Cn[Yr]=N[z[Yr]];for(var lt=0;lt<et;){for(var Dn=0,Ko=0,_h=lt+1,Yr=0;Yr<fn;Yr++)Dn+=Mn[Yr]*Cn[Yr][lt],Ko+=Mn[Yr]*Cn[Yr][_h];lt+=2,M[rt]=Dn,M[rt+1]=Ko,rt+=H}}};function Tt(){pe||(this.x=null,this.y=null)}Tt.prototype._$HT=function(l,f){this.x=l,this.y=f},Tt.prototype._$HT=function(l){this.x=l.x,this.y=l.y};function yt(){pe||(this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null,this.clipID=null,this.clipIDList=new Array)}yt._$ur=-2,yt._$ES=500,yt._$wb=2,yt._$8S=3,yt._$52=yt._$ES,yt._$R2=yt._$ES,yt._$or=function(){return yt._$52},yt._$Pr=function(){return yt._$R2},yt.prototype.convertClipIDForV2_11=function(l){var f=[];return l==null||l.length==0?null:/,/.test(l)?(f=l.id.split(","),f):(f.push(l.id),f)},yt.prototype._$F0=function(l){this._$gP=l._$nP(),this._$dr=l._$nP(),this._$GS=l._$nP(),this._$qb=l._$6L(),this._$Lb=l._$cS(),this._$mS=l._$Tb(),l.getFormatVersion()>=Et._$T7?(this.clipID=l._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=[],this._$MS(this._$Lb)},yt.prototype.getClipIDList=function(){return this.clipIDList},yt.prototype.init=function(l){},yt.prototype._$Nr=function(l,f){f._$IS[0]=!1,f._$Us=K._$Z2(l,this._$GS,f._$IS,this._$Lb),!(!vt._$Zs&&f._$IS[0])&&(f._$7s=K._$br(l,this._$GS,f._$IS,this._$mS))},yt.prototype._$2b=function(l,f){},yt.prototype.getDrawDataID=function(){return this._$gP},yt.prototype._$j2=function(l){this._$gP=l},yt.prototype.getOpacity=function(l,f){return f._$7s},yt.prototype._$zS=function(l,f){return f._$Us},yt.prototype._$MS=function(l){for(var f=l.length-1;f>=0;--f){var T=l[f];T<yt._$52?yt._$52=T:T>yt._$R2&&(yt._$R2=T)}},yt.prototype.getTargetBaseDataID=function(){return this._$dr},yt.prototype._$gs=function(l){this._$dr=l},yt.prototype._$32=function(){return this._$dr!=null&&this._$dr!=_r._$2o()},yt.prototype.preDraw=function(l,f,T){},yt.prototype.draw=function(l,f,T){},yt.prototype.getType=function(){},yt.prototype._$B2=function(l,f,T){};function ft(){pe||(this._$Eb=ft._$ps,this._$lT=1,this._$C0=1,this._$tT=1,this._$WL=1,this.culling=!1,this.matrix4x4=new Float32Array(16),this.premultipliedAlpha=!1,this.anisotropy=0,this.clippingProcess=ft.CLIPPING_PROCESS_NONE,this.clipBufPre_clipContextMask=null,this.clipBufPre_clipContextDraw=null,this.CHANNEL_COLORS=new Array)}ft._$ps=32,ft.CLIPPING_PROCESS_NONE=0,ft.CLIPPING_PROCESS_OVERWRITE_ALPHA=1,ft.CLIPPING_PROCESS_MULTIPLY_ALPHA=2,ft.CLIPPING_PROCESS_DRAW=3,ft.CLIPPING_PROCESS_CLEAR_ALPHA=4,ft.prototype.setChannelFlagAsColor=function(l,f){this.CHANNEL_COLORS[l]=f},ft.prototype.getChannelFlagAsColor=function(l){return this.CHANNEL_COLORS[l]},ft.prototype._$ZT=function(){},ft.prototype._$Uo=function(l,f,T,D,N,M,X){},ft.prototype._$Rs=function(){return-1},ft.prototype._$Ds=function(l){},ft.prototype.setBaseColor=function(l,f,T,D){l<0?l=0:l>1&&(l=1),f<0?f=0:f>1&&(f=1),T<0?T=0:T>1&&(T=1),D<0?D=0:D>1&&(D=1),this._$lT=l,this._$C0=f,this._$tT=T,this._$WL=D},ft.prototype._$WP=function(l){this.culling=l},ft.prototype.setMatrix=function(l){for(var f=0;f<16;f++)this.matrix4x4[f]=l[f]},ft.prototype._$IT=function(){return this.matrix4x4},ft.prototype.setPremultipliedAlpha=function(l){this.premultipliedAlpha=l},ft.prototype.isPremultipliedAlpha=function(){return this.premultipliedAlpha},ft.prototype.setAnisotropy=function(l){this.anisotropy=l},ft.prototype.getAnisotropy=function(){return this.anisotropy},ft.prototype.getClippingProcess=function(){return this.clippingProcess},ft.prototype.setClippingProcess=function(l){this.clippingProcess=l},ft.prototype.setClipBufPre_clipContextForMask=function(l){this.clipBufPre_clipContextMask=l},ft.prototype.getClipBufPre_clipContextMask=function(){return this.clipBufPre_clipContextMask},ft.prototype.setClipBufPre_clipContextForDraw=function(l){this.clipBufPre_clipContextDraw=l},ft.prototype.getClipBufPre_clipContextDraw=function(){return this.clipBufPre_clipContextDraw};function St(){pe||(this.a=1,this.r=1,this.g=1,this.b=1,this.scale=1,this._$ho=1,this.blendMode=vt.L2D_COLOR_BLEND_MODE_MULT)}function wt(){pe||(this._$kP=null,this._$dr=null,this._$Ai=!0,this._$mS=null)}wt._$ur=-2,wt._$c2=1,wt._$_b=2,wt.prototype._$F0=function(l){this._$kP=l._$nP(),this._$dr=l._$nP()},wt.prototype.readV2_opacity=function(l){l.getFormatVersion()>=Et.LIVE2D_FORMAT_VERSION_V2_10_SDK2&&(this._$mS=l._$Tb())},wt.prototype.init=function(l){},wt.prototype._$Nr=function(l,f){},wt.prototype.interpolateOpacity=function(l,f,T,D){this._$mS==null?T.setInterpolatedOpacity(1):T.setInterpolatedOpacity(K._$br(l,f,D,this._$mS))},wt.prototype._$2b=function(l,f){},wt.prototype._$nb=function(l,f,T,D,N,M,X){},wt.prototype.getType=function(){},wt.prototype._$gs=function(l){this._$dr=l},wt.prototype._$a2=function(l){this._$kP=l},wt.prototype.getTargetBaseDataID=function(){return this._$dr},wt.prototype.getBaseDataID=function(){return this._$kP},wt.prototype._$32=function(){return this._$dr!=null&&this._$dr!=_r._$2o()};function Gt(){}Gt._$W2=0,Gt._$CS=Gt._$W2,Gt._$Mo=function(){return!0},Gt._$XP=function(l){try{for(var f=getTimeMSec();getTimeMSec()-f<l;);}catch(T){T._$Rb()}},Gt.getUserTimeMSec=function(){return Gt._$CS==Gt._$W2?Gt.getSystemTimeMSec():Gt._$CS},Gt.setUserTimeMSec=function(l){Gt._$CS=l},Gt.updateUserTimeMSec=function(){return Gt._$CS=Gt.getSystemTimeMSec()},Gt.getTimeMSec=function(){return new Date().getTime()},Gt.getSystemTimeMSec=function(){return new Date().getTime()},Gt._$Q=function(l){},Gt._$jT=function(l,f,T,D,N){for(var M=0;M<N;M++)T[D+M]=l[f+M]};function oe(){pe||(this._$VP=0,this._$wL=null,this._$GP=null,this._$8o=oe._$ds,this._$2r=-1,this._$O2=0,this._$ri=0)}oe._$ds=-2,oe.prototype._$F0=function(l){this._$wL=l._$nP(),this._$VP=l._$6L(),this._$GP=l._$nP()},oe.prototype.getParamIndex=function(l){return this._$2r!=l&&(this._$8o=oe._$ds),this._$8o},oe.prototype._$Pb=function(l,f){this._$8o=l,this._$2r=f},oe.prototype.getParamID=function(){return this._$wL},oe.prototype._$yP=function(l){this._$wL=l},oe.prototype._$N2=function(){return this._$VP},oe.prototype._$d2=function(){return this._$GP},oe.prototype._$t2=function(l,f){this._$VP=l,this._$GP=f},oe.prototype._$Lr=function(){return this._$O2},oe.prototype._$wr=function(l){this._$O2=l},oe.prototype._$SL=function(){return this._$ri},oe.prototype._$AL=function(l){this._$ri=l};function ae(){}ae.startsWith=function(l,f,T){var D=f+T.length;if(D>=l.length)return!1;for(var N=f;N<D;N++)if(ae.getChar(l,N)!=T.charAt(N-f))return!1;return!0},ae.getChar=function(l,f){return String.fromCharCode(l.getUint8(f))},ae.createString=function(l,f,T){for(var D=new ArrayBuffer(T*2),N=new Uint16Array(D),M=0;M<T;M++)N[M]=l.getUint8(f+M);return String.fromCharCode.apply(null,N)},ae._$LS=function(l,f,T,D){l instanceof ArrayBuffer&&(l=new DataView(l));var N=T,M=!1,X=!1,H=0,U=ae.getChar(l,N);U=="-"&&(M=!0,N++);for(var z=!1;N<f;N++){switch(U=ae.getChar(l,N),U){case"0":H=H*10;break;case"1":H=H*10+1;break;case"2":H=H*10+2;break;case"3":H=H*10+3;break;case"4":H=H*10+4;break;case"5":H=H*10+5;break;case"6":H=H*10+6;break;case"7":H=H*10+7;break;case"8":H=H*10+8;break;case"9":H=H*10+9;break;case".":X=!0,N++,z=!0;break;default:z=!0;break}if(z)break}if(X)for(var ot=.1,et=!1;N<f;N++){switch(U=ae.getChar(l,N),U){case"0":break;case"1":H+=ot*1;break;case"2":H+=ot*2;break;case"3":H+=ot*3;break;case"4":H+=ot*4;break;case"5":H+=ot*5;break;case"6":H+=ot*6;break;case"7":H+=ot*7;break;case"8":H+=ot*8;break;case"9":H+=ot*9;break;default:et=!0;break}if(ot*=.1,et)break}return M&&(H=-H),D[0]=N,H};function Yt(){pe||(this._$Ob=null)}Yt.prototype._$zP=function(){this._$Ob=new Array},Yt.prototype._$F0=function(l){this._$Ob=l._$nP()},Yt.prototype._$Ur=function(l){if(l._$WS())return!0;for(var f=l._$v2(),T=this._$Ob.length-1;T>=0;--T){var D=this._$Ob[T].getParamIndex(f);if(D==oe._$ds&&(D=l.getParamIndex(this._$Ob[T].getParamID())),l._$Xb(D))return!0}return!1},Yt.prototype._$Q2=function(l,f){for(var T=this._$Ob.length,D=l._$v2(),N=0,M,X,H=0;H<T;H++){var U=this._$Ob[H];if(M=U.getParamIndex(D),M==oe._$ds&&(M=l.getParamIndex(U.getParamID()),U._$Pb(M,D)),M<0)throw new Exception("err 23242 : "+U.getParamID());var z=M<0?0:l.getParamFloat(M);X=U._$N2();var ot=U._$d2(),et=-1,rt=0,gt,At;if(!(X<1))if(X==1)gt=ot[0],gt-st._$J<z&&z<gt+st._$J?(et=0,rt=0):(et=0,f[0]=!0);else if(gt=ot[0],z<gt-st._$J)et=0,f[0]=!0;else if(z<gt+st._$J)et=0;else{for(var lt=!1,Pt=1;Pt<X;++Pt){if(At=ot[Pt],z<At+st._$J){At-st._$J<z?et=Pt:(et=Pt-1,rt=(z-gt)/(At-gt),N++),lt=!0;break}gt=At}lt||(et=X-1,rt=0,f[0]=!0)}U._$wr(et),U._$AL(rt)}return N},Yt.prototype._$zr=function(l,f,T){var D=1<<T;D+1>st._$Qb&&console.log(`err 23245
`);for(var N=this._$Ob.length,M=1,X=1,H=0,U=0;U<D;++U)l[U]=0;for(var z=0;z<N;++z){var ot=this._$Ob[z];if(ot._$SL()==0){var et=ot._$Lr()*M;if(et<0&&vt._$3T)throw new Exception("err 23246");for(var U=0;U<D;++U)l[U]+=et}else{for(var et=M*ot._$Lr(),rt=M*(ot._$Lr()+1),U=0;U<D;++U)l[U]+=(U/X|0)%2==0?et:rt;f[H++]=ot._$SL(),X*=2}M*=ot._$N2()}l[D]=65535,f[H]=-1},Yt.prototype._$h2=function(l,f,T){for(var D=new Float32Array(f),N=0;N<f;++N)D[N]=T[N];var M=new oe;M._$yP(l),M._$t2(f,D),this._$Ob.push(M)},Yt.prototype._$J2=function(l){for(var f=l,T=this._$Ob.length,D=0;D<T;++D){var N=this._$Ob[D],M=N._$N2(),X=f%N._$N2(),H=N._$d2()[X];console.log("%s[%d]=%7.2f / ",N.getParamID(),X,H),f/=M}console.log(`
`)},Yt.prototype.getParamCount=function(){return this._$Ob.length},Yt.prototype._$zs=function(){return this._$Ob};function Ht(){this.m=new Float32Array(16),this.identity()}Ht.prototype.identity=function(){for(var l=0;l<16;l++)this.m[l]=l%5==0?1:0},Ht.prototype.getArray=function(){return this.m},Ht.prototype.getCopyMatrix=function(){return new Float32Array(this.m)},Ht.prototype.setMatrix=function(l){if(!(l==null||l.length!=16))for(var f=0;f<16;f++)this.m[f]=l[f]},Ht.prototype.mult=function(l,f,T){return f==null?null:(this==f?this.mult_safe(this.m,l.m,f.m,T):this.mult_fast(this.m,l.m,f.m,T),f)},Ht.prototype.mult_safe=function(l,f,T,D){if(l==T){var N=new Array(16);this.mult_fast(l,f,N,D);for(var M=15;M>=0;--M)T[M]=N[M]}else this.mult_fast(l,f,T,D)},Ht.prototype.mult_fast=function(l,f,T,D){D?(T[0]=l[0]*f[0]+l[4]*f[1]+l[8]*f[2],T[4]=l[0]*f[4]+l[4]*f[5]+l[8]*f[6],T[8]=l[0]*f[8]+l[4]*f[9]+l[8]*f[10],T[12]=l[0]*f[12]+l[4]*f[13]+l[8]*f[14]+l[12],T[1]=l[1]*f[0]+l[5]*f[1]+l[9]*f[2],T[5]=l[1]*f[4]+l[5]*f[5]+l[9]*f[6],T[9]=l[1]*f[8]+l[5]*f[9]+l[9]*f[10],T[13]=l[1]*f[12]+l[5]*f[13]+l[9]*f[14]+l[13],T[2]=l[2]*f[0]+l[6]*f[1]+l[10]*f[2],T[6]=l[2]*f[4]+l[6]*f[5]+l[10]*f[6],T[10]=l[2]*f[8]+l[6]*f[9]+l[10]*f[10],T[14]=l[2]*f[12]+l[6]*f[13]+l[10]*f[14]+l[14],T[3]=T[7]=T[11]=0,T[15]=1):(T[0]=l[0]*f[0]+l[4]*f[1]+l[8]*f[2]+l[12]*f[3],T[4]=l[0]*f[4]+l[4]*f[5]+l[8]*f[6]+l[12]*f[7],T[8]=l[0]*f[8]+l[4]*f[9]+l[8]*f[10]+l[12]*f[11],T[12]=l[0]*f[12]+l[4]*f[13]+l[8]*f[14]+l[12]*f[15],T[1]=l[1]*f[0]+l[5]*f[1]+l[9]*f[2]+l[13]*f[3],T[5]=l[1]*f[4]+l[5]*f[5]+l[9]*f[6]+l[13]*f[7],T[9]=l[1]*f[8]+l[5]*f[9]+l[9]*f[10]+l[13]*f[11],T[13]=l[1]*f[12]+l[5]*f[13]+l[9]*f[14]+l[13]*f[15],T[2]=l[2]*f[0]+l[6]*f[1]+l[10]*f[2]+l[14]*f[3],T[6]=l[2]*f[4]+l[6]*f[5]+l[10]*f[6]+l[14]*f[7],T[10]=l[2]*f[8]+l[6]*f[9]+l[10]*f[10]+l[14]*f[11],T[14]=l[2]*f[12]+l[6]*f[13]+l[10]*f[14]+l[14]*f[15],T[3]=l[3]*f[0]+l[7]*f[1]+l[11]*f[2]+l[15]*f[3],T[7]=l[3]*f[4]+l[7]*f[5]+l[11]*f[6]+l[15]*f[7],T[11]=l[3]*f[8]+l[7]*f[9]+l[11]*f[10]+l[15]*f[11],T[15]=l[3]*f[12]+l[7]*f[13]+l[11]*f[14]+l[15]*f[15])},Ht.prototype.translate=function(l,f,T){this.m[12]=this.m[0]*l+this.m[4]*f+this.m[8]*T+this.m[12],this.m[13]=this.m[1]*l+this.m[5]*f+this.m[9]*T+this.m[13],this.m[14]=this.m[2]*l+this.m[6]*f+this.m[10]*T+this.m[14],this.m[15]=this.m[3]*l+this.m[7]*f+this.m[11]*T+this.m[15]},Ht.prototype.scale=function(l,f,T){this.m[0]*=l,this.m[4]*=f,this.m[8]*=T,this.m[1]*=l,this.m[5]*=f,this.m[9]*=T,this.m[2]*=l,this.m[6]*=f,this.m[10]*=T,this.m[3]*=l,this.m[7]*=f,this.m[11]*=T},Ht.prototype.rotateX=function(l){var f=Ae.fcos(l),T=Ae._$9(l),D=this.m[4];this.m[4]=D*f+this.m[8]*T,this.m[8]=D*-T+this.m[8]*f,D=this.m[5],this.m[5]=D*f+this.m[9]*T,this.m[9]=D*-T+this.m[9]*f,D=this.m[6],this.m[6]=D*f+this.m[10]*T,this.m[10]=D*-T+this.m[10]*f,D=this.m[7],this.m[7]=D*f+this.m[11]*T,this.m[11]=D*-T+this.m[11]*f},Ht.prototype.rotateY=function(l){var f=Ae.fcos(l),T=Ae._$9(l),D=this.m[0];this.m[0]=D*f+this.m[8]*-T,this.m[8]=D*T+this.m[8]*f,D=this.m[1],this.m[1]=D*f+this.m[9]*-T,this.m[9]=D*T+this.m[9]*f,D=m[2],this.m[2]=D*f+this.m[10]*-T,this.m[10]=D*T+this.m[10]*f,D=m[3],this.m[3]=D*f+this.m[11]*-T,this.m[11]=D*T+this.m[11]*f},Ht.prototype.rotateZ=function(l){var f=Ae.fcos(l),T=Ae._$9(l),D=this.m[0];this.m[0]=D*f+this.m[4]*T,this.m[4]=D*-T+this.m[4]*f,D=this.m[1],this.m[1]=D*f+this.m[5]*T,this.m[5]=D*-T+this.m[5]*f,D=this.m[2],this.m[2]=D*f+this.m[6]*T,this.m[6]=D*-T+this.m[6]*f,D=this.m[3],this.m[3]=D*f+this.m[7]*T,this.m[7]=D*-T+this.m[7]*f};function he(l){pe||Er.prototype.constructor.call(this,l)}he.prototype=new Er,he._$tP=new Object,he._$27=function(){he._$tP.clear()},he.getID=function(l){var f=he._$tP[l];return f==null&&(f=new he(l),he._$tP[l]=f),f},he.prototype._$3s=function(){return new he};function Kt(){pe||(this._$7=1,this._$f=0,this._$H=0,this._$g=1,this._$k=0,this._$w=0,this._$hi=STATE_IDENTITY,this._$Z=_$pS)}Kt._$kS=-1,Kt._$pS=0,Kt._$hb=1,Kt.STATE_IDENTITY=0,Kt._$gb=1,Kt._$fo=2,Kt._$go=4,Kt.prototype.transform=function(l,f,T){var D,N,M,X,H,U,z=0,ot=0;switch(this._$hi){default:return;case Kt._$go|Kt._$fo|Kt._$gb:for(D=this._$7,N=this._$H,M=this._$k,X=this._$f,H=this._$g,U=this._$w;--T>=0;){var et=l[z++],rt=l[z++];f[ot++]=D*et+N*rt+M,f[ot++]=X*et+H*rt+U}return;case Kt._$go|Kt._$fo:for(D=this._$7,N=this._$H,X=this._$f,H=this._$g;--T>=0;){var et=l[z++],rt=l[z++];f[ot++]=D*et+N*rt,f[ot++]=X*et+H*rt}return;case Kt._$go|Kt._$gb:for(N=this._$H,M=this._$k,X=this._$f,U=this._$w;--T>=0;){var et=l[z++];f[ot++]=N*l[z++]+M,f[ot++]=X*et+U}return;case Kt._$go:for(N=this._$H,X=this._$f;--T>=0;){var et=l[z++];f[ot++]=N*l[z++],f[ot++]=X*et}return;case Kt._$fo|Kt._$gb:for(D=this._$7,M=this._$k,H=this._$g,U=this._$w;--T>=0;)f[ot++]=D*l[z++]+M,f[ot++]=H*l[z++]+U;return;case Kt._$fo:for(D=this._$7,H=this._$g;--T>=0;)f[ot++]=D*l[z++],f[ot++]=H*l[z++];return;case Kt._$gb:for(M=this._$k,U=this._$w;--T>=0;)f[ot++]=l[z++]+M,f[ot++]=l[z++]+U;return;case Kt.STATE_IDENTITY:(l!=f||z!=ot)&&Gt._$jT(l,z,f,ot,T*2);return}},Kt.prototype.update=function(){this._$H==0&&this._$f==0?this._$7==1&&this._$g==1?this._$k==0&&this._$w==0?(this._$hi=Kt.STATE_IDENTITY,this._$Z=Kt._$pS):(this._$hi=Kt._$gb,this._$Z=Kt._$hb):this._$k==0&&this._$w==0?(this._$hi=Kt._$fo,this._$Z=Kt._$kS):(this._$hi=Kt._$fo|Kt._$gb,this._$Z=Kt._$kS):this._$7==0&&this._$g==0?this._$k==0&&this._$w==0?(this._$hi=Kt._$go,this._$Z=Kt._$kS):(this._$hi=Kt._$go|Kt._$gb,this._$Z=Kt._$kS):this._$k==0&&this._$w==0?(this._$hi=Kt._$go|Kt._$fo,this._$Z=Kt._$kS):(this._$hi=Kt._$go|Kt._$fo|Kt._$gb,this._$Z=Kt._$kS)},Kt.prototype._$RT=function(l){this._$IT(l);var f=l[0],T=l[2],D=l[1],N=l[3],M=Math.sqrt(f*f+D*D),X=f*N-T*D;M==0?vt._$so&&console.log("affine._$RT() / rt==0"):(l[0]=M,l[1]=X/M,l[2]=(D*N+f*T)/X,l[3]=Math.atan2(D,f))},Kt.prototype._$ho=function(l,f,T,D){var N=new Float32Array(6),M=new Float32Array(6);l._$RT(N),f._$RT(M);var X=new Float32Array(6);X[0]=N[0]+(M[0]-N[0])*T,X[1]=N[1]+(M[1]-N[1])*T,X[2]=N[2]+(M[2]-N[2])*T,X[3]=N[3]+(M[3]-N[3])*T,X[4]=N[4]+(M[4]-N[4])*T,X[5]=N[5]+(M[5]-N[5])*T,D._$CT(X)},Kt.prototype._$CT=function(l){var f=Math.cos(l[3]),T=Math.sin(l[3]);this._$7=l[0]*f,this._$f=l[0]*T,this._$H=l[1]*(l[2]*f-T),this._$g=l[1]*(l[2]*T+f),this._$k=l[4],this._$w=l[5],this.update()},Kt.prototype._$IT=function(l){l[0]=this._$7,l[1]=this._$f,l[2]=this._$H,l[3]=this._$g,l[4]=this._$k,l[5]=this._$w};function ve(){pe||(s.prototype.constructor.call(this),this.motions=new Array,this._$7r=null,this._$7r=ve._$Co++,this._$D0=30,this._$yT=0,this._$E=!0,this.loopFadeIn=!0,this._$AS=-1,_$a0())}ve.prototype=new s,ve._$cs="VISIBLE:",ve._$ar="LAYOUT:",ve._$Co=0,ve._$D2=[],ve._$1T=1,ve.loadMotion=function(l){var f=new ve,T=[0],D=l.length;f._$yT=0;for(var N=0;N<D;++N){var M=l[N]&255;if(!(M==`
`||M=="\r")){if(M=="#"){for(;N<D&&!(l[N]==`
`||l[N]=="\r");++N);continue}if(M=="$"){for(var X=N,H=-1;N<D&&(M=l[N]&255,!(M=="\r"||M==`
`));++N)if(M=="="){H=N;break}if(H>=0)for(H==X+4&&l[X+1]=="f"&&l[X+2]=="p"&&l[X+3]=="s",N=H+1;N<D&&(M=l[N]&255,!(M=="\r"||M==`
`));++N)M==","||M==" "||M=="	"||(ae._$LS(l,D,N,T),N=T[0]);for(;N<D&&!(l[N]==`
`||l[N]=="\r");++N);continue}if("a"<=M&&M<="z"||"A"<=M&&M<="Z"||M=="_"){for(var X=N,H=-1;N<D&&(M=l[N]&255,!(M=="\r"||M==`
`));++N)if(M=="="){H=N;break}if(H>=0){var U=new Nt;ae.startsWith(l,X,ve._$cs)?(U._$RP=Nt._$hs,U._$4P=new String(l,X,H-X)):ae.startsWith(l,X,ve._$ar)?(U._$4P=new String(l,X+7,H-X-7),ae.startsWith(l,X+7,"ANCHOR_X")?U._$RP=Nt._$xs:ae.startsWith(l,X+7,"ANCHOR_Y")?U._$RP=Nt._$us:ae.startsWith(l,X+7,"SCALE_X")?U._$RP=Nt._$qs:ae.startsWith(l,X+7,"SCALE_Y")?U._$RP=Nt._$Ys:ae.startsWith(l,X+7,"X")?U._$RP=Nt._$ws:ae.startsWith(l,X+7,"Y")&&(U._$RP=Nt._$Ns)):(U._$RP=Nt._$Fr,U._$4P=new String(l,X,H-X)),f.motions.push(U);var z=0;for(ve._$D2.clear(),N=H+1;N<D&&(M=l[N]&255,!(M=="\r"||M==`
`));++N)M==","||M==" "||M=="	"||ae._$LS(l,D,N,T);U._$I0=ve._$D2._$BL(),z>f._$yT&&(f._$yT=z)}}}}return f._$AS=1e3*f._$yT/f._$D0|0,f},ve.prototype.getDurationMSec=function(){return this._$AS},ve.prototype.dump=function(){for(var l=0;l<this.motions.length;l++){var f=this.motions[l];console.log("_$wL[%s] [%d]. ",f._$4P,f._$I0.length);for(var T=0;T<f._$I0.length&&T<10;T++)console.log("%5.2f ,",f._$I0[T]);console.log(`
`)}},ve.prototype.updateParamExe=function(l,f,T,D){for(var N=f-D._$z2,M=N*this._$D0/1e3,X=M|0,H=M-X,U=0;U<this.motions.length;U++){var z=this.motions[U],ot=z._$I0.length,et=z._$4P;if(z._$RP==Nt._$hs){var rt=z._$I0[X>=ot?ot-1:X];l.setParamFloat(et,rt)}else if(!(Nt._$ws<=z._$RP&&z._$RP<=Nt._$Ys)){var gt=l.getParamFloat(et),At=z._$I0[X>=ot?ot-1:X],lt=z._$I0[X+1>=ot?ot-1:X+1],Pt=At+(lt-At)*H,bt=gt+(Pt-gt)*T;l.setParamFloat(et,bt)}}X>=this._$yT&&(this._$E?(D._$z2=f,this.loopFadeIn&&(D._$bs=f)):D._$9L=!0)},ve.prototype._$r0=function(){return this._$E},ve.prototype._$aL=function(l){this._$E=l},ve.prototype.isLoopFadeIn=function(){return this.loopFadeIn},ve.prototype.setLoopFadeIn=function(l){this.loopFadeIn=l},Nt._$Fr=0,Nt._$hs=1,Nt._$ws=100,Nt._$Ns=101,Nt._$xs=102,Nt._$us=103,Nt._$qs=104,Nt._$Ys=105;function st(){}st._$Ms=1,st._$Qs=2,st._$i2=0,st._$No=2,st._$do=st._$Ms,st._$Ls=!0,st._$1r=5,st._$Qb=65,st._$J=1e-4,st._$FT=.001,st._$Ss=3;function Et(){}Et._$o7=6,Et._$S7=7,Et._$s7=8,Et._$77=9,Et.LIVE2D_FORMAT_VERSION_V2_10_SDK2=10,Et.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1=11,Et._$T7=Et.LIVE2D_FORMAT_VERSION_V2_11_SDK2_1,Et._$Is=-2004318072,Et._$h0=0,Et._$4L=23,Et._$7P=33,Et._$uT=function(l){console.log(`_$bo :: _$6 _$mo _$E0 : %d
`,l)},Et._$9o=function(l){if(l<40||l<50||l<60)return Et._$uT(l),null;if(l<100)switch(l){case 65:return new ie;case 66:return new Yt;case 67:return new oe;case 68:return new se;case 69:return new Q;case 70:return new Xe;default:return Et._$uT(l),null}else if(l<150)switch(l){case 131:return new hi;case 133:return new Pe;case 136:return new E;case 137:return new qr;case 142:return new Ge}return Et._$uT(l),null};function _t(l){pe||(this._$QT=!0,this._$co=-1,this._$qo=0,this._$pb=new Array(_t._$is),this._$_2=new Float32Array(_t._$is),this._$vr=new Float32Array(_t._$is),this._$Rr=new Float32Array(_t._$is),this._$Or=new Float32Array(_t._$is),this._$fs=new Float32Array(_t._$is),this._$Js=new Array(_t._$is),this._$3S=new Array,this._$aS=new Array,this._$Bo=null,this._$F2=new Array,this._$db=new Array,this._$8b=new Array,this._$Hr=new Array,this._$Ws=null,this._$Vs=null,this._$Er=null,this._$Es=new Int16Array(st._$Qb),this._$ZP=new Float32Array(st._$1r*2),this._$Ri=l,this._$b0=_t._$HP++,this.clipManager=null,this.dp_webgl=null)}_t._$HP=0,_t._$_0=!0,_t._$V2=-1,_t._$W0=-1,_t._$jr=!1,_t._$ZS=!0,_t._$tr=-1e6,_t._$lr=1e6,_t._$is=32,_t._$e=!1,_t.prototype.getDrawDataIndex=function(l){for(var f=this._$aS.length-1;f>=0;--f)if(this._$aS[f]!=null&&this._$aS[f].getDrawDataID()==l)return f;return-1},_t.prototype.getDrawData=function(l){if(l instanceof he){if(this._$Bo==null){this._$Bo=new Object;for(var f=this._$aS.length,T=0;T<f;T++){var D=this._$aS[T],N=D.getDrawDataID();N!=null&&(this._$Bo[N]=D)}}return this._$Bo[id]}else return l<this._$aS.length?this._$aS[l]:null},_t.prototype.release=function(){this._$3S.clear(),this._$aS.clear(),this._$F2.clear(),this._$Bo!=null&&this._$Bo.clear(),this._$db.clear(),this._$8b.clear(),this._$Hr.clear()},_t.prototype.init=function(){this._$co++,this._$F2.length>0&&this.release();for(var l=this._$Ri.getModelImpl(),f=l._$Xr(),T=f.length,D=new Array,N=new Array,M=0;M<T;++M){var X=f[M];this._$F2.push(X),this._$Hr.push(X.init(this));for(var H=X.getBaseData(),U=H.length,z=0;z<U;++z)D.push(H[z]);for(var z=0;z<U;++z){var ot=H[z].init(this);ot._$l2(M),N.push(ot)}for(var et=X.getDrawData(),rt=et.length,z=0;z<rt;++z){var gt=et[z],At=gt.init(this);At._$IP=M,this._$aS.push(gt),this._$8b.push(At)}}for(var lt=D.length,Pt=_r._$2o();;){for(var bt=!1,M=0;M<lt;++M){var Ct=D[M];if(Ct!=null){var Rt=Ct.getTargetBaseDataID();(Rt==null||Rt==Pt||this.getBaseDataIndex(Rt)>=0)&&(this._$3S.push(Ct),this._$db.push(N[M]),D[M]=null,bt=!0)}}if(!bt)break}var ne=l._$E2();if(ne!=null){var kt=ne._$1s();if(kt!=null)for(var Dt=kt.length,M=0;M<Dt;++M){var B=kt[M];B!=null&&this._$02(B.getParamID(),B.getDefaultValue(),B.getMinValue(),B.getMaxValue())}}this.clipManager=new e(this.dp_webgl),this.clipManager.init(this,this._$aS,this._$8b),this._$QT=!0},_t.prototype.update=function(){_t._$e&&h.start("_$zL");for(var l=this._$_2.length,f=0;f<l;f++)this._$_2[f]!=this._$vr[f]&&(this._$Js[f]=_t._$ZS,this._$vr[f]=this._$_2[f]);var T=!1,D=this._$3S.length,N=this._$aS.length,M=qt._$or(),X=qt._$Pr(),H=X-M+1;(this._$Ws==null||this._$Ws.length<H)&&(this._$Ws=new Int16Array(H),this._$Vs=new Int16Array(H));for(var f=0;f<H;f++)this._$Ws[f]=_t._$V2,this._$Vs[f]=_t._$V2;(this._$Er==null||this._$Er.length<N)&&(this._$Er=new Int16Array(N));for(var f=0;f<N;f++)this._$Er[f]=_t._$W0;_t._$e&&h.dump("_$zL"),_t._$e&&h.start("_$UL");for(var U=null,z=0;z<D;++z){var ot=this._$3S[z],et=this._$db[z];try{ot._$Nr(this,et),ot._$2b(this,et)}catch(Ct){U==null&&(U=Ct)}}U!=null&&_t._$_0&&h._$Rb(U),_t._$e&&h.dump("_$UL"),_t._$e&&h.start("_$DL");for(var rt=null,gt=0;gt<N;++gt){var At=this._$aS[gt],lt=this._$8b[gt];try{if(At._$Nr(this,lt),lt._$u2())continue;At._$2b(this,lt);var Pt=Math.floor(At._$zS(this,lt)-M),bt;try{bt=this._$Vs[Pt]}catch(Ct){console.log(`_$li :: %s / %s 				@@_$fS
`,Ct.toString(),At.getDrawDataID().toString()),Pt=Math.floor(At._$zS(this,lt)-M);continue}bt==_t._$V2?this._$Ws[Pt]=gt:this._$Er[bt]=gt,this._$Vs[Pt]=gt}catch(Ct){rt==null&&(rt=Ct,vt._$sT(vt._$H7))}}rt!=null&&_t._$_0&&h._$Rb(rt),_t._$e&&h.dump("_$DL"),_t._$e&&h.start("_$eL");for(var f=this._$Js.length-1;f>=0;f--)this._$Js[f]=_t._$jr;return this._$QT=!1,_t._$e&&h.dump("_$eL"),T},_t.prototype.preDraw=function(l){this.clipManager!=null&&(l._$ZT(),this.clipManager.setupClip(this,l))},_t.prototype.draw=function(l){if(this._$Ws==null){h._$li("call _$Ri.update() before _$Ri.draw() ");return}var f=this._$Ws.length;l._$ZT();for(var T=0;T<f;++T){var D=this._$Ws[T];if(D!=_t._$V2)do{var N=this._$aS[D],M=this._$8b[D];if(M._$yo()){var X=M._$IP,H=this._$Hr[X];M._$VS=H.getPartsOpacity(),N.draw(l,this,M)}var U=this._$Er[D];if(U<=D||U==_t._$W0)break;D=U}while(!0)}},_t.prototype.getParamIndex=function(l){for(var f=this._$pb.length-1;f>=0;--f)if(this._$pb[f]==l)return f;return this._$02(l,0,_t._$tr,_t._$lr)},_t.prototype._$BS=function(l){return this.getBaseDataIndex(l)},_t.prototype.getBaseDataIndex=function(l){for(var f=this._$3S.length-1;f>=0;--f)if(this._$3S[f]!=null&&this._$3S[f].getBaseDataID()==l)return f;return-1},_t.prototype._$UT=function(l,f){var T=new Float32Array(f);return Gt._$jT(l,0,T,0,l.length),T},_t.prototype._$02=function(l,f,T,D){if(this._$qo>=this._$pb.length){var N=this._$pb.length,M=new Array(N*2);Gt._$jT(this._$pb,0,M,0,N),this._$pb=M,this._$_2=this._$UT(this._$_2,N*2),this._$vr=this._$UT(this._$vr,N*2),this._$Rr=this._$UT(this._$Rr,N*2),this._$Or=this._$UT(this._$Or,N*2);var X=new Array;Gt._$jT(this._$Js,0,X,0,N),this._$Js=X}return this._$pb[this._$qo]=l,this._$_2[this._$qo]=f,this._$vr[this._$qo]=f,this._$Rr[this._$qo]=T,this._$Or[this._$qo]=D,this._$Js[this._$qo]=_t._$ZS,this._$qo++},_t.prototype._$Zo=function(l,f){this._$3S[l]=f},_t.prototype.setParamFloat=function(l,f){f<this._$Rr[l]&&(f=this._$Rr[l]),f>this._$Or[l]&&(f=this._$Or[l]),this._$_2[l]=f},_t.prototype.loadParam=function(){var l=this._$_2.length;l>this._$fs.length&&(l=this._$fs.length),Gt._$jT(this._$fs,0,this._$_2,0,l)},_t.prototype.saveParam=function(){var l=this._$_2.length;l>this._$fs.length&&(this._$fs=new Float32Array(l)),Gt._$jT(this._$_2,0,this._$fs,0,l)},_t.prototype._$v2=function(){return this._$co},_t.prototype._$WS=function(){return this._$QT},_t.prototype._$Xb=function(l){return this._$Js[l]==_t._$ZS},_t.prototype._$vs=function(){return this._$Es},_t.prototype._$Tr=function(){return this._$ZP},_t.prototype.getBaseData=function(l){return this._$3S[l]},_t.prototype.getParamFloat=function(l){return this._$_2[l]},_t.prototype.getParamMax=function(l){return this._$Or[l]},_t.prototype.getParamMin=function(l){return this._$Rr[l]},_t.prototype.setPartsOpacity=function(l,f){var T=this._$Hr[l];T.setPartsOpacity(f)},_t.prototype.getPartsOpacity=function(l){var f=this._$Hr[l];return f.getPartsOpacity()},_t.prototype.getPartsDataIndex=function(l){for(var f=this._$F2.length-1;f>=0;--f)if(this._$F2[f]!=null&&this._$F2[f]._$p2()==l)return f;return-1},_t.prototype._$q2=function(l){return this._$db[l]},_t.prototype._$C2=function(l){return this._$8b[l]},_t.prototype._$Bb=function(l){return this._$Hr[l]},_t.prototype._$5s=function(l,f){for(var T=this._$Ws.length,D=l,N=0;N<T;++N){var M=this._$Ws[N];if(M!=_t._$V2)do{var X=this._$8b[M];X._$yo()&&(X._$GT()._$B2(this,X,D),D+=f);var H=this._$Er[M];if(H<=M||H==_t._$W0)break;M=H}while(!0)}},_t.prototype.setDrawParam=function(l){this.dp_webgl=l},_t.prototype.getDrawParam=function(){return this.dp_webgl};function le(){}le._$0T=function(l){return le._$0T(new _$5(l))},le._$0T=function(l){if(!l.exists())throw new _$ls(l._$3b());for(var f=l.length(),T=new Int8Array(f),D=new _$Xs(new _$kb(l),8192),N,M=0;(N=D.read(T,M,f-M))>0;)M+=N;return T},le._$C=function(l){var f=null,T=null;try{f=l instanceof Array?l:new _$Xs(l,8192),T=new _$js;for(var D=1e3,N,M=new Int8Array(D);(N=f.read(M))>0;)T.write(M,0,N);return T._$TS()}finally{l!=null&&l.close(),T!=null&&(T.flush(),T.close())}};function Ut(){pe||(ft.prototype.constructor.call(this),this._$sb=new Int32Array(Ut._$As),this._$U2=new Array,this.transform=null,this.gl=null,Ut._$NT==null&&(Ut._$NT=Ut._$9r(256),Ut._$vS=Ut._$9r(256),Ut._$no=Ut._$vb(256)))}Ut.prototype=new ft,Ut._$As=32,Ut._$Gr=!1,Ut._$NT=null,Ut._$vS=null,Ut._$no=null,Ut._$9r=function(l){var f=new Float32Array(l);return f},Ut._$vb=function(l){var f=new Int16Array(l);return f},Ut._$cr=function(l,f){return l==null||l._$yL()<f.length?(l=Ut._$9r(f.length*2),l.put(f),l._$oT(0)):(l.clear(),l.put(f),l._$oT(0)),l},Ut._$mb=function(l,f){return l==null||l._$yL()<f.length?(l=Ut._$vb(f.length*2),l.put(f),l._$oT(0)):(l.clear(),l.put(f),l._$oT(0)),l},Ut._$Hs=function(){return Ut._$Gr},Ut._$as=function(l){Ut._$Gr=l},Ut.prototype.setGL=function(l){this.gl=l},Ut.prototype.setTransform=function(l){this.transform=l},Ut.prototype._$ZT=function(){},Ut.prototype._$Uo=function(l,f,T,D,N,M,X,H){if(!(M<.01)){var U=this._$U2[l],z=M>.9?vt.EXPAND_W:0;this.gl.drawElements(U,T,D,N,M,z,this.transform,H)}},Ut.prototype._$Rs=function(){throw new Error("_$Rs")},Ut.prototype._$Ds=function(l){throw new Error("_$Ds")},Ut.prototype._$K2=function(){for(var l=0;l<this._$sb.length;l++){var f=this._$sb[l];f!=0&&(this.gl._$Sr(1,this._$sb,l),this._$sb[l]=0)}},Ut.prototype.setTexture=function(l,f){this._$sb.length<l+1&&this._$nS(l),this._$sb[l]=f},Ut.prototype.setTexture=function(l,f){this._$sb.length<l+1&&this._$nS(l),this._$U2[l]=f},Ut.prototype._$nS=function(l){var f=Math.max(this._$sb.length*2,l+1+10),T=new Int32Array(f);Gt._$jT(this._$sb,0,T,0,this._$sb.length),this._$sb=T;var D=new Array;Gt._$jT(this._$U2,0,D,0,this._$U2.length),this._$U2=D};function se(){pe||(wt.prototype.constructor.call(this),this._$GS=null,this._$Y0=null)}se.prototype=new wt,se._$Xo=new Float32Array(2),se._$io=new Float32Array(2),se._$0o=new Float32Array(2),se._$Lo=new Float32Array(2),se._$To=new Float32Array(2),se._$Po=new Float32Array(2),se._$gT=new Array,se.prototype._$zP=function(){this._$GS=new Yt,this._$GS._$zP(),this._$Y0=new Array},se.prototype.getType=function(){return wt._$c2},se.prototype._$F0=function(l){wt.prototype._$F0.call(this,l),this._$GS=l._$nP(),this._$Y0=l._$nP(),wt.prototype.readV2_opacity.call(this,l)},se.prototype.init=function(l){var f=new Re(this);return f._$Yr=new Q,this._$32()&&(f._$Wr=new Q),f},se.prototype._$Nr=function(l,f){this!=f._$GT()&&console.log("### assert!! ### ");var T=f;if(this._$GS._$Ur(l)){var D=se._$gT;D[0]=!1;var N=this._$GS._$Q2(l,D);f._$Ib(D[0]),this.interpolateOpacity(l,this._$GS,f,D);var M=l._$vs(),X=l._$Tr();if(this._$GS._$zr(M,X,N),N<=0){var We=this._$Y0[M[0]];T._$Yr.init(We)}else if(N==1){var We=this._$Y0[M[0]],H=this._$Y0[M[1]],U=X[0];T._$Yr._$fL=We._$fL+(H._$fL-We._$fL)*U,T._$Yr._$gL=We._$gL+(H._$gL-We._$gL)*U,T._$Yr._$B0=We._$B0+(H._$B0-We._$B0)*U,T._$Yr._$z0=We._$z0+(H._$z0-We._$z0)*U,T._$Yr._$qT=We._$qT+(H._$qT-We._$qT)*U}else if(N==2){var We=this._$Y0[M[0]],H=this._$Y0[M[1]],z=this._$Y0[M[2]],ot=this._$Y0[M[3]],U=X[0],et=X[1],rt=We._$fL+(H._$fL-We._$fL)*U,gt=z._$fL+(ot._$fL-z._$fL)*U;T._$Yr._$fL=rt+(gt-rt)*et,rt=We._$gL+(H._$gL-We._$gL)*U,gt=z._$gL+(ot._$gL-z._$gL)*U,T._$Yr._$gL=rt+(gt-rt)*et,rt=We._$B0+(H._$B0-We._$B0)*U,gt=z._$B0+(ot._$B0-z._$B0)*U,T._$Yr._$B0=rt+(gt-rt)*et,rt=We._$z0+(H._$z0-We._$z0)*U,gt=z._$z0+(ot._$z0-z._$z0)*U,T._$Yr._$z0=rt+(gt-rt)*et,rt=We._$qT+(H._$qT-We._$qT)*U,gt=z._$qT+(ot._$qT-z._$qT)*U,T._$Yr._$qT=rt+(gt-rt)*et}else if(N==3){var At=this._$Y0[M[0]],lt=this._$Y0[M[1]],Pt=this._$Y0[M[2]],bt=this._$Y0[M[3]],Ct=this._$Y0[M[4]],Rt=this._$Y0[M[5]],ne=this._$Y0[M[6]],kt=this._$Y0[M[7]],U=X[0],et=X[1],Dt=X[2],rt=At._$fL+(lt._$fL-At._$fL)*U,gt=Pt._$fL+(bt._$fL-Pt._$fL)*U,B=Ct._$fL+(Rt._$fL-Ct._$fL)*U,Ft=ne._$fL+(kt._$fL-ne._$fL)*U;T._$Yr._$fL=(1-Dt)*(rt+(gt-rt)*et)+Dt*(B+(Ft-B)*et),rt=At._$gL+(lt._$gL-At._$gL)*U,gt=Pt._$gL+(bt._$gL-Pt._$gL)*U,B=Ct._$gL+(Rt._$gL-Ct._$gL)*U,Ft=ne._$gL+(kt._$gL-ne._$gL)*U,T._$Yr._$gL=(1-Dt)*(rt+(gt-rt)*et)+Dt*(B+(Ft-B)*et),rt=At._$B0+(lt._$B0-At._$B0)*U,gt=Pt._$B0+(bt._$B0-Pt._$B0)*U,B=Ct._$B0+(Rt._$B0-Ct._$B0)*U,Ft=ne._$B0+(kt._$B0-ne._$B0)*U,T._$Yr._$B0=(1-Dt)*(rt+(gt-rt)*et)+Dt*(B+(Ft-B)*et),rt=At._$z0+(lt._$z0-At._$z0)*U,gt=Pt._$z0+(bt._$z0-Pt._$z0)*U,B=Ct._$z0+(Rt._$z0-Ct._$z0)*U,Ft=ne._$z0+(kt._$z0-ne._$z0)*U,T._$Yr._$z0=(1-Dt)*(rt+(gt-rt)*et)+Dt*(B+(Ft-B)*et),rt=At._$qT+(lt._$qT-At._$qT)*U,gt=Pt._$qT+(bt._$qT-Pt._$qT)*U,B=Ct._$qT+(Rt._$qT-Ct._$qT)*U,Ft=ne._$qT+(kt._$qT-ne._$qT)*U,T._$Yr._$qT=(1-Dt)*(rt+(gt-rt)*et)+Dt*(B+(Ft-B)*et)}else if(N==4){var je=this._$Y0[M[0]],rr=this._$Y0[M[1]],Qe=this._$Y0[M[2]],zt=this._$Y0[M[3]],ge=this._$Y0[M[4]],me=this._$Y0[M[5]],fe=this._$Y0[M[6]],Se=this._$Y0[M[7]],ye=this._$Y0[M[8]],Me=this._$Y0[M[9]],te=this._$Y0[M[10]],de=this._$Y0[M[11]],ee=this._$Y0[M[12]],Lt=this._$Y0[M[13]],De=this._$Y0[M[14]],pr=this._$Y0[M[15]],U=X[0],et=X[1],Dt=X[2],Ye=X[3],rt=je._$fL+(rr._$fL-je._$fL)*U,gt=Qe._$fL+(zt._$fL-Qe._$fL)*U,B=ge._$fL+(me._$fL-ge._$fL)*U,Ft=fe._$fL+(Se._$fL-fe._$fL)*U,Ie=ye._$fL+(Me._$fL-ye._$fL)*U,sr=te._$fL+(de._$fL-te._$fL)*U,Be=ee._$fL+(Lt._$fL-ee._$fL)*U,mt=De._$fL+(pr._$fL-De._$fL)*U;T._$Yr._$fL=(1-Ye)*((1-Dt)*(rt+(gt-rt)*et)+Dt*(B+(Ft-B)*et))+Ye*((1-Dt)*(Ie+(sr-Ie)*et)+Dt*(Be+(mt-Be)*et)),rt=je._$gL+(rr._$gL-je._$gL)*U,gt=Qe._$gL+(zt._$gL-Qe._$gL)*U,B=ge._$gL+(me._$gL-ge._$gL)*U,Ft=fe._$gL+(Se._$gL-fe._$gL)*U,Ie=ye._$gL+(Me._$gL-ye._$gL)*U,sr=te._$gL+(de._$gL-te._$gL)*U,Be=ee._$gL+(Lt._$gL-ee._$gL)*U,mt=De._$gL+(pr._$gL-De._$gL)*U,T._$Yr._$gL=(1-Ye)*((1-Dt)*(rt+(gt-rt)*et)+Dt*(B+(Ft-B)*et))+Ye*((1-Dt)*(Ie+(sr-Ie)*et)+Dt*(Be+(mt-Be)*et)),rt=je._$B0+(rr._$B0-je._$B0)*U,gt=Qe._$B0+(zt._$B0-Qe._$B0)*U,B=ge._$B0+(me._$B0-ge._$B0)*U,Ft=fe._$B0+(Se._$B0-fe._$B0)*U,Ie=ye._$B0+(Me._$B0-ye._$B0)*U,sr=te._$B0+(de._$B0-te._$B0)*U,Be=ee._$B0+(Lt._$B0-ee._$B0)*U,mt=De._$B0+(pr._$B0-De._$B0)*U,T._$Yr._$B0=(1-Ye)*((1-Dt)*(rt+(gt-rt)*et)+Dt*(B+(Ft-B)*et))+Ye*((1-Dt)*(Ie+(sr-Ie)*et)+Dt*(Be+(mt-Be)*et)),rt=je._$z0+(rr._$z0-je._$z0)*U,gt=Qe._$z0+(zt._$z0-Qe._$z0)*U,B=ge._$z0+(me._$z0-ge._$z0)*U,Ft=fe._$z0+(Se._$z0-fe._$z0)*U,Ie=ye._$z0+(Me._$z0-ye._$z0)*U,sr=te._$z0+(de._$z0-te._$z0)*U,Be=ee._$z0+(Lt._$z0-ee._$z0)*U,mt=De._$z0+(pr._$z0-De._$z0)*U,T._$Yr._$z0=(1-Ye)*((1-Dt)*(rt+(gt-rt)*et)+Dt*(B+(Ft-B)*et))+Ye*((1-Dt)*(Ie+(sr-Ie)*et)+Dt*(Be+(mt-Be)*et)),rt=je._$qT+(rr._$qT-je._$qT)*U,gt=Qe._$qT+(zt._$qT-Qe._$qT)*U,B=ge._$qT+(me._$qT-ge._$qT)*U,Ft=fe._$qT+(Se._$qT-fe._$qT)*U,Ie=ye._$qT+(Me._$qT-ye._$qT)*U,sr=te._$qT+(de._$qT-te._$qT)*U,Be=ee._$qT+(Lt._$qT-ee._$qT)*U,mt=De._$qT+(pr._$qT-De._$qT)*U,T._$Yr._$qT=(1-Ye)*((1-Dt)*(rt+(gt-rt)*et)+Dt*(B+(Ft-B)*et))+Ye*((1-Dt)*(Ie+(sr-Ie)*et)+Dt*(Be+(mt-Be)*et))}else{for(var ir=Math.pow(2,N)|0,Cr=new Float32Array(ir),mr=0;mr<ir;mr++){for(var Zr=mr,li=1,ri=0;ri<N;ri++)li*=Zr%2==0?1-X[ri]:X[ri],Zr/=2;Cr[mr]=li}for(var Qr=new Array,Tr=0;Tr<ir;Tr++)Qr[Tr]=this._$Y0[M[Tr]];for(var Ji=0,$i=0,ii=0,Ni=0,ui=0,Tr=0;Tr<ir;Tr++)Ji+=Cr[Tr]*Qr[Tr]._$fL,$i+=Cr[Tr]*Qr[Tr]._$gL,ii+=Cr[Tr]*Qr[Tr]._$B0,Ni+=Cr[Tr]*Qr[Tr]._$z0,ui+=Cr[Tr]*Qr[Tr]._$qT;T._$Yr._$fL=Ji,T._$Yr._$gL=$i,T._$Yr._$B0=ii,T._$Yr._$z0=Ni,T._$Yr._$qT=ui}var We=this._$Y0[M[0]];T._$Yr.reflectX=We.reflectX,T._$Yr.reflectY=We.reflectY}},se.prototype._$2b=function(l,f){this!=f._$GT()&&console.log("### assert!! ### ");var T=f;if(T._$hS(!0),!this._$32())T.setTotalScale_notForClient(T._$Yr._$B0),T.setTotalOpacity(T.getInterpolatedOpacity());else{var D=this.getTargetBaseDataID();if(T._$8r==wt._$ur&&(T._$8r=l.getBaseDataIndex(D)),T._$8r<0)vt._$so&&h._$li("_$L _$0P _$G :: %s",D),T._$hS(!1);else{var N=l.getBaseData(T._$8r);if(N!=null){var M=l._$q2(T._$8r),X=se._$Xo;X[0]=T._$Yr._$fL,X[1]=T._$Yr._$gL;var H=se._$io;H[0]=0,H[1]=-.1;var U=M._$GT().getType();U==wt._$c2?H[1]=-10:H[1]=-.1;var z=se._$0o;this._$Jr(l,N,M,X,H,z);var ot=Ae._$92(H,z);N._$nb(l,M,X,X,1,0,2),T._$Wr._$fL=X[0],T._$Wr._$gL=X[1],T._$Wr._$B0=T._$Yr._$B0,T._$Wr._$z0=T._$Yr._$z0,T._$Wr._$qT=T._$Yr._$qT-ot*Ae._$NS;var et=M.getTotalScale();T.setTotalScale_notForClient(et*T._$Wr._$B0);var rt=M.getTotalOpacity();T.setTotalOpacity(rt*T.getInterpolatedOpacity()),T._$Wr.reflectX=T._$Yr.reflectX,T._$Wr.reflectY=T._$Yr.reflectY,T._$hS(M._$yo())}else T._$hS(!1)}}},se.prototype._$nb=function(l,f,T,D,N,M,X){this!=f._$GT()&&console.log("### assert!! ### ");for(var H=f,U=H._$Wr!=null?H._$Wr:H._$Yr,z=Math.sin(Ae._$bS*U._$qT),ot=Math.cos(Ae._$bS*U._$qT),et=H.getTotalScale(),rt=U.reflectX?-1:1,gt=U.reflectY?-1:1,At=ot*et*rt,lt=-z*et*gt,Pt=z*et*rt,bt=ot*et*gt,Ct=U._$fL,Rt=U._$gL,ne,kt,Dt=N*X,B=M;B<Dt;B+=X)ne=T[B],kt=T[B+1],D[B]=At*ne+lt*kt+Ct,D[B+1]=Pt*ne+bt*kt+Rt},se.prototype._$Jr=function(l,f,T,D,N,M){f!=T._$GT()&&console.log("### assert!! ### ");var X=se._$Lo;se._$Lo[0]=D[0],se._$Lo[1]=D[1],f._$nb(l,T,X,X,1,0,2);for(var H=se._$To,U=se._$Po,z=10,ot=1,et=0;et<z;et++){if(U[0]=D[0]+ot*N[0],U[1]=D[1]+ot*N[1],f._$nb(l,T,U,H,1,0,2),H[0]-=X[0],H[1]-=X[1],H[0]!=0||H[1]!=0){M[0]=H[0],M[1]=H[1];return}if(U[0]=D[0]-ot*N[0],U[1]=D[1]-ot*N[1],f._$nb(l,T,U,H,1,0,2),H[0]-=X[0],H[1]-=X[1],H[0]!=0||H[1]!=0){H[0]=-H[0],H[0]=-H[0],M[0]=H[0],M[1]=H[1];return}ot*=.1}vt._$so&&console.log(`_$L0 to transform _$SP
`)};function Re(l){Mr.prototype.constructor.call(this,l),this._$8r=wt._$ur,this._$Yr=null,this._$Wr=null}Re.prototype=new Mr;function qt(){pe||(yt.prototype.constructor.call(this),this._$gP=null,this._$dr=null,this._$GS=null,this._$qb=null,this._$Lb=null,this._$mS=null)}qt.prototype=new yt,qt._$ur=-2,qt._$ES=500,qt._$wb=2,qt._$8S=3,qt._$os=4,qt._$52=qt._$ES,qt._$R2=qt._$ES,qt._$Sb=function(l){for(var f=l.length-1;f>=0;--f){var T=l[f];T<qt._$52?qt._$52=T:T>qt._$R2&&(qt._$R2=T)}},qt._$or=function(){return qt._$52},qt._$Pr=function(){return qt._$R2},qt.prototype._$F0=function(l){this._$gP=l._$nP(),this._$dr=l._$nP(),this._$GS=l._$nP(),this._$qb=l._$6L(),this._$Lb=l._$cS(),this._$mS=l._$Tb(),l.getFormatVersion()>=Et._$T7?(this.clipID=l._$nP(),this.clipIDList=this.convertClipIDForV2_11(this.clipID)):this.clipIDList=null,qt._$Sb(this._$Lb)},qt.prototype.getClipIDList=function(){return this.clipIDList},qt.prototype._$Nr=function(l,f){f._$IS[0]=!1,f._$Us=K._$Z2(l,this._$GS,f._$IS,this._$Lb),!(!vt._$Zs&&f._$IS[0])&&(f._$7s=K._$br(l,this._$GS,f._$IS,this._$mS))},qt.prototype._$2b=function(l){},qt.prototype.getDrawDataID=function(){return this._$gP},qt.prototype._$j2=function(l){this._$gP=l},qt.prototype.getOpacity=function(l,f){return f._$7s},qt.prototype._$zS=function(l,f){return f._$Us},qt.prototype.getTargetBaseDataID=function(){return this._$dr},qt.prototype._$gs=function(l){this._$dr=l},qt.prototype._$32=function(){return this._$dr!=null&&this._$dr!=_r._$2o()},qt.prototype.getType=function(){};function Ge(){pe||(this._$NL=null,this._$3S=null,this._$aS=null,Ge._$42++)}Ge._$42=0,Ge.prototype._$1b=function(){return this._$3S},Ge.prototype.getDrawDataList=function(){return this._$aS},Ge.prototype._$F0=function(l){this._$NL=l._$nP(),this._$aS=l._$nP(),this._$3S=l._$nP()},Ge.prototype._$kr=function(l){l._$Zo(this._$3S),l._$xo(this._$aS),this._$3S=null,this._$aS=null};function _e(){pe||(t.prototype.constructor.call(this),this._$zo=new Ut)}_e.prototype=new t,_e.loadModel=function(l){var f=new _e;return t._$62(f,l),f},_e.loadModel=function(l){var f=new _e;return t._$62(f,l),f},_e._$to=function(){var l=new _e;return l},_e._$er=function(l){var f=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(f.exists()==!1)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+f._$PL());for(var T=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],D=_e.loadModel(f._$3b()),N=0;N<T.length;N++){var M=new _$5(T[N]);if(M.exists()==!1)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+M._$PL());D.setTexture(N,_$nL._$_o(l,M._$3b()))}return D},_e.prototype.setGL=function(l){this._$zo.setGL(l)},_e.prototype.setTransform=function(l){this._$zo.setTransform(l)},_e.prototype.draw=function(){this._$5S.draw(this._$zo)},_e.prototype._$K2=function(){this._$zo._$K2()},_e.prototype.setTexture=function(l,f){this._$zo==null&&h._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this._$zo.setTexture(l,f)},_e.prototype.setTexture=function(l,f){this._$zo==null&&h._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this._$zo.setTexture(l,f)},_e.prototype._$Rs=function(){return this._$zo._$Rs()},_e.prototype._$Ds=function(l){this._$zo._$Ds(l)},_e.prototype.getDrawParam=function(){return this._$zo};function ce(){pe||(s.prototype.constructor.call(this),this.motions=new Array,this._$o2=null,this._$7r=ce._$Co++,this._$D0=30,this._$yT=0,this._$E=!1,this.loopFadeIn=!0,this._$rr=-1,this._$eP=0)}ce.prototype=new s,ce._$cs="VISIBLE:",ce._$ar="LAYOUT:",ce.MTN_PREFIX_FADEIN="FADEIN:",ce.MTN_PREFIX_FADEOUT="FADEOUT:",ce._$Co=0,ce._$1T=1,ce.loadMotion=function(l){var f=le._$C(l),T=ce.loadMotion(f);return T};function ue(l,f){return String.fromCharCode(l.getUint8(f))}ce.loadMotion=function(l){l instanceof ArrayBuffer&&(l=new DataView(l));var f=new ce,T=[0],D=l.byteLength;f._$yT=0;for(var N=0;N<D;++N){var M=ue(l,N),X=M.charCodeAt(0);if(!(M==`
`||M=="\r")){if(M=="#"){for(;N<D&&!(ue(l,N)==`
`||ue(l,N)=="\r");++N);continue}if(M=="$"){for(var H=N,U=-1;N<D&&(M=ue(l,N),!(M=="\r"||M==`
`));++N)if(M=="="){U=N;break}if(U>=0)for(U==H+4&&ue(l,H+1)=="f"&&ue(l,H+2)=="p"&&ue(l,H+3)=="s",N=U+1;N<D&&(M=ue(l,N),!(M=="\r"||M==`
`));++N)M==","||M==" "||M=="	"||(ae._$LS(l,D,N,T),N=T[0]);for(;N<D&&!(ue(l,N)==`
`||ue(l,N)=="\r");++N);continue}if(97<=X&&X<=122||65<=X&&X<=90||M=="_"){for(var H=N,U=-1;N<D&&(M=ue(l,N),!(M=="\r"||M==`
`));++N)if(M=="="){U=N;break}if(U>=0){var z=new Nt;ae.startsWith(l,H,ce._$cs)?(z._$RP=Nt._$hs,z._$4P=ae.createString(l,H,U-H)):ae.startsWith(l,H,ce._$ar)?(z._$4P=ae.createString(l,H+7,U-H-7),ae.startsWith(l,H+7,"ANCHOR_X")?z._$RP=Nt._$xs:ae.startsWith(l,H+7,"ANCHOR_Y")?z._$RP=Nt._$us:ae.startsWith(l,H+7,"SCALE_X")?z._$RP=Nt._$qs:ae.startsWith(l,H+7,"SCALE_Y")?z._$RP=Nt._$Ys:ae.startsWith(l,H+7,"X")?z._$RP=Nt._$ws:ae.startsWith(l,H+7,"Y")&&(z._$RP=Nt._$Ns)):(z._$RP=Nt._$Fr,z._$4P=ae.createString(l,H,U-H)),f.motions.push(z);var ot=0,et=[];for(N=U+1;N<D&&(M=ue(l,N),!(M=="\r"||M==`
`));++N)M==","||M==" "||M=="	"||ae._$LS(l,D,N,T);z._$I0=new Float32Array(et),ot>f._$yT&&(f._$yT=ot)}}}}return f._$rr=1e3*f._$yT/f._$D0|0,f},ce.prototype.getDurationMSec=function(){return this._$E?-1:this._$rr},ce.prototype.getLoopDurationMSec=function(){return this._$rr},ce.prototype.dump=function(){for(var l=0;l<this.motions.length;l++){var f=this.motions[l];console.log("_$wL[%s] [%d]. ",f._$4P,f._$I0.length);for(var T=0;T<f._$I0.length&&T<10;T++)console.log("%5.2f ,",f._$I0[T]);console.log(`
`)}},ce.prototype.updateParamExe=function(l,f,T,D){for(var N=f-D._$z2,M=N*this._$D0/1e3,X=M|0,H=M-X,U=0;U<this.motions.length;U++){var z=this.motions[U],ot=z._$I0.length,et=z._$4P;if(z._$RP==Nt._$hs){var rt=z._$I0[X>=ot?ot-1:X];l.setParamFloat(et,rt)}else if(!(Nt._$ws<=z._$RP&&z._$RP<=Nt._$Ys)){var gt=l.getParamIndex(et),At=l.getModelContext(),lt=At.getParamMax(gt),Pt=At.getParamMin(gt),bt=.4,Ct=bt*(lt-Pt),Rt=At.getParamFloat(gt),ne=z._$I0[X>=ot?ot-1:X],kt=z._$I0[X+1>=ot?ot-1:X+1],Dt;ne<kt&&kt-ne>Ct||ne>kt&&ne-kt>Ct?Dt=ne:Dt=ne+(kt-ne)*H;var B=Rt+(Dt-Rt)*T;l.setParamFloat(et,B)}}X>=this._$yT&&(this._$E?(D._$z2=f,this.loopFadeIn&&(D._$bs=f)):D._$9L=!0),this._$eP=T},ce.prototype._$r0=function(){return this._$E},ce.prototype._$aL=function(l){this._$E=l},ce.prototype._$S0=function(){return this._$D0},ce.prototype._$U0=function(l){this._$D0=l},ce.prototype.isLoopFadeIn=function(){return this.loopFadeIn},ce.prototype.setLoopFadeIn=function(l){this.loopFadeIn=l};function Nt(){this._$4P=null,this._$I0=null,this._$RP=null}Nt._$Fr=0,Nt._$hs=1,Nt._$ws=100,Nt._$Ns=101,Nt._$xs=102,Nt._$us=103,Nt._$qs=104,Nt._$Ys=105;function ie(){pe||(wt.prototype.constructor.call(this),this._$o=0,this._$A=0,this._$GS=null,this._$Eo=null)}ie.prototype=new wt,ie._$gT=new Array,ie.prototype._$zP=function(){this._$GS=new Yt,this._$GS._$zP()},ie.prototype._$F0=function(l){wt.prototype._$F0.call(this,l),this._$A=l._$6L(),this._$o=l._$6L(),this._$GS=l._$nP(),this._$Eo=l._$nP(),wt.prototype.readV2_opacity.call(this,l)},ie.prototype.init=function(l){var f=new er(this),T=(this._$o+1)*(this._$A+1);return f._$Cr!=null&&(f._$Cr=null),f._$Cr=new Float32Array(T*2),f._$hr!=null&&(f._$hr=null),this._$32()?f._$hr=new Float32Array(T*2):f._$hr=null,f},ie.prototype._$Nr=function(l,f){var T=f;if(this._$GS._$Ur(l)){var D=this._$VT(),N=ie._$gT;N[0]=!1,K._$Vr(l,this._$GS,N,D,this._$Eo,T._$Cr,0,2),f._$Ib(N[0]),this.interpolateOpacity(l,this._$GS,f,N)}},ie.prototype._$2b=function(l,f){var T=f;if(T._$hS(!0),!this._$32())T.setTotalOpacity(T.getInterpolatedOpacity());else{var D=this.getTargetBaseDataID();if(T._$8r==wt._$ur&&(T._$8r=l.getBaseDataIndex(D)),T._$8r<0)vt._$so&&h._$li("_$L _$0P _$G :: %s",D),T._$hS(!1);else{var N=l.getBaseData(T._$8r),M=l._$q2(T._$8r);if(N!=null&&M._$yo()){var X=M.getTotalScale();T.setTotalScale_notForClient(X);var H=M.getTotalOpacity();T.setTotalOpacity(H*T.getInterpolatedOpacity()),N._$nb(l,M,T._$Cr,T._$hr,this._$VT(),0,2),T._$hS(!0)}else T._$hS(!1)}}},ie.prototype._$nb=function(l,f,T,D,N,M,X){{var H=f,U=H._$hr!=null?H._$hr:H._$Cr;ie.transformPoints_sdk2(T,D,N,M,X,U,this._$o,this._$A)}},ie.transformPoints_sdk2=function(l,f,T,D,N,M,X,H){for(var U=T*N,z,ot,et,rt=0,gt=0,At=0,lt=0,Pt=0,bt=0,Ct=!1,Rt=D;Rt<U;Rt+=N){var ne,kt,Dt,B;if(Dt=l[Rt],B=l[Rt+1],ne=Dt*X,kt=B*H,ne<0||kt<0||X<=ne||H<=kt){var Ft=X+1;if(!Ct){Ct=!0,rt=.25*(M[(0+0*Ft)*2]+M[(X+0*Ft)*2]+M[(0+H*Ft)*2]+M[(X+H*Ft)*2]),gt=.25*(M[(0+0*Ft)*2+1]+M[(X+0*Ft)*2+1]+M[(0+H*Ft)*2+1]+M[(X+H*Ft)*2+1]);var je=M[(X+H*Ft)*2]-M[(0+0*Ft)*2],rr=M[(X+H*Ft)*2+1]-M[(0+0*Ft)*2+1],Qe=M[(X+0*Ft)*2]-M[(0+H*Ft)*2],zt=M[(X+0*Ft)*2+1]-M[(0+H*Ft)*2+1];At=(je+Qe)*.5,lt=(rr+zt)*.5,Pt=(je-Qe)*.5,bt=(rr-zt)*.5,rt-=.5*(At+Pt),gt-=.5*(lt+bt)}if(-2<Dt&&Dt<3&&-2<B&&B<3)if(Dt<=0)if(B<=0){var ge=M[(0+0*Ft)*2],me=M[(0+0*Ft)*2+1],fe=rt-2*At,Se=gt-2*lt,ye=rt-2*Pt,Me=gt-2*bt,te=rt-2*At-2*Pt,de=gt-2*lt-2*bt,ee=.5*(Dt- -2),Lt=.5*(B- -2);ee+Lt<=1?(f[Rt]=te+(ye-te)*ee+(fe-te)*Lt,f[Rt+1]=de+(Me-de)*ee+(Se-de)*Lt):(f[Rt]=ge+(fe-ge)*(1-ee)+(ye-ge)*(1-Lt),f[Rt+1]=me+(Se-me)*(1-ee)+(Me-me)*(1-Lt))}else if(B>=1){var ye=M[(0+H*Ft)*2],Me=M[(0+H*Ft)*2+1],te=rt-2*At+1*Pt,de=gt-2*lt+1*bt,ge=rt+3*Pt,me=gt+3*bt,fe=rt-2*At+3*Pt,Se=gt-2*lt+3*bt,ee=.5*(Dt- -2),Lt=.5*(B-1);ee+Lt<=1?(f[Rt]=te+(ye-te)*ee+(fe-te)*Lt,f[Rt+1]=de+(Me-de)*ee+(Se-de)*Lt):(f[Rt]=ge+(fe-ge)*(1-ee)+(ye-ge)*(1-Lt),f[Rt+1]=me+(Se-me)*(1-ee)+(Me-me)*(1-Lt))}else{var De=kt|0;De==H&&(De=H-1);var ee=.5*(Dt- -2),Lt=kt-De,pr=De/H,Ye=(De+1)/H,ye=M[(0+De*Ft)*2],Me=M[(0+De*Ft)*2+1],ge=M[(0+(De+1)*Ft)*2],me=M[(0+(De+1)*Ft)*2+1],te=rt-2*At+pr*Pt,de=gt-2*lt+pr*bt,fe=rt-2*At+Ye*Pt,Se=gt-2*lt+Ye*bt;ee+Lt<=1?(f[Rt]=te+(ye-te)*ee+(fe-te)*Lt,f[Rt+1]=de+(Me-de)*ee+(Se-de)*Lt):(f[Rt]=ge+(fe-ge)*(1-ee)+(ye-ge)*(1-Lt),f[Rt+1]=me+(Se-me)*(1-ee)+(Me-me)*(1-Lt))}else if(1<=Dt)if(B<=0){var fe=M[(X+0*Ft)*2],Se=M[(X+0*Ft)*2+1],ge=rt+3*At,me=gt+3*lt,te=rt+1*At-2*Pt,de=gt+1*lt-2*bt,ye=rt+3*At-2*Pt,Me=gt+3*lt-2*bt,ee=.5*(Dt-1),Lt=.5*(B- -2);ee+Lt<=1?(f[Rt]=te+(ye-te)*ee+(fe-te)*Lt,f[Rt+1]=de+(Me-de)*ee+(Se-de)*Lt):(f[Rt]=ge+(fe-ge)*(1-ee)+(ye-ge)*(1-Lt),f[Rt+1]=me+(Se-me)*(1-ee)+(Me-me)*(1-Lt))}else if(B>=1){var te=M[(X+H*Ft)*2],de=M[(X+H*Ft)*2+1],ye=rt+3*At+1*Pt,Me=gt+3*lt+1*bt,fe=rt+1*At+3*Pt,Se=gt+1*lt+3*bt,ge=rt+3*At+3*Pt,me=gt+3*lt+3*bt,ee=.5*(Dt-1),Lt=.5*(B-1);ee+Lt<=1?(f[Rt]=te+(ye-te)*ee+(fe-te)*Lt,f[Rt+1]=de+(Me-de)*ee+(Se-de)*Lt):(f[Rt]=ge+(fe-ge)*(1-ee)+(ye-ge)*(1-Lt),f[Rt+1]=me+(Se-me)*(1-ee)+(Me-me)*(1-Lt))}else{var De=kt|0;De==H&&(De=H-1);var ee=.5*(Dt-1),Lt=kt-De,pr=De/H,Ye=(De+1)/H,te=M[(X+De*Ft)*2],de=M[(X+De*Ft)*2+1],fe=M[(X+(De+1)*Ft)*2],Se=M[(X+(De+1)*Ft)*2+1],ye=rt+3*At+pr*Pt,Me=gt+3*lt+pr*bt,ge=rt+3*At+Ye*Pt,me=gt+3*lt+Ye*bt;ee+Lt<=1?(f[Rt]=te+(ye-te)*ee+(fe-te)*Lt,f[Rt+1]=de+(Me-de)*ee+(Se-de)*Lt):(f[Rt]=ge+(fe-ge)*(1-ee)+(ye-ge)*(1-Lt),f[Rt+1]=me+(Se-me)*(1-ee)+(Me-me)*(1-Lt))}else if(B<=0){var Ie=ne|0;Ie==X&&(Ie=X-1);var ee=ne-Ie,Lt=.5*(B- -2),sr=Ie/X,Be=(Ie+1)/X,fe=M[(Ie+0*Ft)*2],Se=M[(Ie+0*Ft)*2+1],ge=M[(Ie+1+0*Ft)*2],me=M[(Ie+1+0*Ft)*2+1],te=rt+sr*At-2*Pt,de=gt+sr*lt-2*bt,ye=rt+Be*At-2*Pt,Me=gt+Be*lt-2*bt;ee+Lt<=1?(f[Rt]=te+(ye-te)*ee+(fe-te)*Lt,f[Rt+1]=de+(Me-de)*ee+(Se-de)*Lt):(f[Rt]=ge+(fe-ge)*(1-ee)+(ye-ge)*(1-Lt),f[Rt+1]=me+(Se-me)*(1-ee)+(Me-me)*(1-Lt))}else if(B>=1){var Ie=ne|0;Ie==X&&(Ie=X-1);var ee=ne-Ie,Lt=.5*(B-1),sr=Ie/X,Be=(Ie+1)/X,te=M[(Ie+H*Ft)*2],de=M[(Ie+H*Ft)*2+1],ye=M[(Ie+1+H*Ft)*2],Me=M[(Ie+1+H*Ft)*2+1],fe=rt+sr*At+3*Pt,Se=gt+sr*lt+3*bt,ge=rt+Be*At+3*Pt,me=gt+Be*lt+3*bt;ee+Lt<=1?(f[Rt]=te+(ye-te)*ee+(fe-te)*Lt,f[Rt+1]=de+(Me-de)*ee+(Se-de)*Lt):(f[Rt]=ge+(fe-ge)*(1-ee)+(ye-ge)*(1-Lt),f[Rt+1]=me+(Se-me)*(1-ee)+(Me-me)*(1-Lt))}else System.err.printf(`_$li calc : %.4f , %.4f					@@BDBoxGrid
`,Dt,B);else f[Rt]=rt+Dt*At+B*Pt,f[Rt+1]=gt+Dt*lt+B*bt}else ot=ne-(ne|0),et=kt-(kt|0),z=2*((ne|0)+(kt|0)*(X+1)),ot+et<1?(f[Rt]=M[z]*(1-ot-et)+M[z+2]*ot+M[z+2*(X+1)]*et,f[Rt+1]=M[z+1]*(1-ot-et)+M[z+3]*ot+M[z+2*(X+1)+1]*et):(f[Rt]=M[z+2*(X+1)+2]*(ot-1+et)+M[z+2*(X+1)]*(1-ot)+M[z+2]*(1-et),f[Rt+1]=M[z+2*(X+1)+3]*(ot-1+et)+M[z+2*(X+1)+1]*(1-ot)+M[z+3]*(1-et))}},ie.prototype.transformPoints_sdk1=function(l,f,T,D,N,M,X){for(var H=f,U,z,ot=this._$o,et=this._$A,rt=N*X,gt,At,lt,Pt,bt,Ct=H._$hr!=null?H._$hr:H._$Cr,Rt=M;Rt<rt;Rt+=X)vt._$ts?(U=T[Rt],z=T[Rt+1],U<0?U=0:U>1&&(U=1),z<0?z=0:z>1&&(z=1),U*=ot,z*=et,gt=U|0,At=z|0,gt>ot-1&&(gt=ot-1),At>et-1&&(At=et-1),Pt=U-gt,bt=z-At,lt=2*(gt+At*(ot+1))):(U=T[Rt]*ot,z=T[Rt+1]*et,Pt=U-(U|0),bt=z-(z|0),lt=2*((U|0)+(z|0)*(ot+1))),Pt+bt<1?(D[Rt]=Ct[lt]*(1-Pt-bt)+Ct[lt+2]*Pt+Ct[lt+2*(ot+1)]*bt,D[Rt+1]=Ct[lt+1]*(1-Pt-bt)+Ct[lt+3]*Pt+Ct[lt+2*(ot+1)+1]*bt):(D[Rt]=Ct[lt+2*(ot+1)+2]*(Pt-1+bt)+Ct[lt+2*(ot+1)]*(1-Pt)+Ct[lt+2]*(1-bt),D[Rt+1]=Ct[lt+2*(ot+1)+3]*(Pt-1+bt)+Ct[lt+2*(ot+1)+1]*(1-Pt)+Ct[lt+3]*(1-bt))},ie.prototype._$VT=function(){return(this._$o+1)*(this._$A+1)},ie.prototype.getType=function(){return wt._$_b};function er(l){Mr.prototype.constructor.call(this,l),this._$8r=wt._$ur,this._$Cr=null,this._$hr=null}er.prototype=new Mr;function Pe(){pe||(this.visible=!0,this._$g0=!1,this._$NL=null,this._$3S=null,this._$aS=null,Pe._$42++)}Pe._$42=0,Pe.prototype._$zP=function(){this._$3S=new Array,this._$aS=new Array},Pe.prototype._$F0=function(l){this._$g0=l._$8L(),this.visible=l._$8L(),this._$NL=l._$nP(),this._$3S=l._$nP(),this._$aS=l._$nP()},Pe.prototype.init=function(l){var f=new Ce(this);return f.setPartsOpacity(this.isVisible()?1:0),f},Pe.prototype._$6o=function(l){if(this._$3S==null)throw new Error("_$3S _$6 _$Wo@_$6o");this._$3S.push(l)},Pe.prototype._$3o=function(l){if(this._$aS==null)throw new Error("_$aS _$6 _$Wo@_$3o");this._$aS.push(l)},Pe.prototype._$Zo=function(l){this._$3S=l},Pe.prototype._$xo=function(l){this._$aS=l},Pe.prototype.isVisible=function(){return this.visible},Pe.prototype._$uL=function(){return this._$g0},Pe.prototype._$KP=function(l){this.visible=l},Pe.prototype._$ET=function(l){this._$g0=l},Pe.prototype.getBaseData=function(){return this._$3S},Pe.prototype.getDrawData=function(){return this._$aS},Pe.prototype._$p2=function(){return this._$NL},Pe.prototype._$ob=function(l){this._$NL=l},Pe.prototype.getPartsID=function(){return this._$NL},Pe.prototype._$MP=function(l){this._$NL=l};function Ce(l){this._$VS=null,this._$e0=null,this._$e0=l}Ce.prototype=new y,Ce.prototype.getPartsOpacity=function(){return this._$VS},Ce.prototype.setPartsOpacity=function(l){this._$VS=l};function Er(l){pe||(this.id=l)}Er._$L7=function(){I._$27(),_r._$27(),he._$27(),_._$27()},Er.prototype.toString=function(){return this.id};function qr(){pe||(this._$4S=null)}qr.prototype._$1s=function(){return this._$4S},qr.prototype._$zP=function(){this._$4S=new Array},qr.prototype._$F0=function(l){this._$4S=l._$nP()},qr.prototype._$Ks=function(l){this._$4S.push(l)};function Ve(l,f){this.canvas=l,this.context=f,this.viewport=new Array(0,0,l.width,l.height),this._$6r=1,this._$xP=0,this._$3r=1,this._$uP=0,this._$Qo=-1,this.cacheImages={}}Ve.tr=new Hr,Ve._$50=new Hr,Ve._$Ti=new Array(0,0),Ve._$Pi=new Array(0,0),Ve._$B=new Array(0,0),Ve.prototype._$lP=function(l,f,T,D){this.viewport=new Array(l,f,T,D)},Ve.prototype._$bL=function(){this.context.save();var l=this.viewport;l!=null&&(this.context.beginPath(),this.context._$Li(l[0],l[1],l[2],l[3]),this.context.clip())},Ve.prototype._$ei=function(){this.context.restore()},Ve.prototype.drawElements=function(l,f,T,D,N,M,X,H){try{N!=this._$Qo&&(this._$Qo=N,this.context.globalAlpha=N);for(var U=f.length,z=l.width,ot=l.height,et=this.context,rt=this._$xP,gt=this._$uP,At=this._$6r,lt=this._$3r,Pt=Ve.tr,bt=Ve._$Ti,Ct=Ve._$Pi,Rt=Ve._$B,ne=0;ne<U;ne+=3){et.save();var kt=f[ne],Dt=f[ne+1],B=f[ne+2],Ft=rt+At*T[kt*2],je=gt+lt*T[kt*2+1],rr=rt+At*T[Dt*2],Qe=gt+lt*T[Dt*2+1],zt=rt+At*T[B*2],ge=gt+lt*T[B*2+1];X&&(X._$PS(Ft,je,Rt),Ft=Rt[0],je=Rt[1],X._$PS(rr,Qe,Rt),rr=Rt[0],Qe=Rt[1],X._$PS(zt,ge,Rt),zt=Rt[0],ge=Rt[1]);var me=z*D[kt*2],fe=ot-ot*D[kt*2+1],Se=z*D[Dt*2],ye=ot-ot*D[Dt*2+1],Me=z*D[B*2],te=ot-ot*D[B*2+1],de=Math.atan2(ye-fe,Se-me),ee=Math.atan2(Qe-je,rr-Ft),Lt=rr-Ft,De=Qe-je,pr=Math.sqrt(Lt*Lt+De*De),Ye=Se-me,Ie=ye-fe,sr=Math.sqrt(Ye*Ye+Ie*Ie),Be=pr/sr;it._$ni(Me,te,me,fe,Se-me,ye-fe,-(ye-fe),Se-me,bt),it._$ni(zt,ge,Ft,je,rr-Ft,Qe-je,-(Qe-je),rr-Ft,Ct);var mt=(Ct[0]-bt[0])/bt[1],ir=Math.min(me,Se,Me),Cr=Math.max(me,Se,Me),mr=Math.min(fe,ye,te),Zr=Math.max(fe,ye,te),li=Math.floor(ir),ri=Math.floor(mr),Qr=Math.ceil(Cr),Tr=Math.ceil(Zr);Pt.identity(),Pt.translate(Ft,je),Pt.rotate(ee),Pt.scale(1,Ct[1]/bt[1]),Pt.shear(mt,0),Pt.scale(Be,Be),Pt.rotate(-de),Pt.translate(-me,-fe),Pt.setContext(et);var Ji=!0,$i=1.2;if(M||(M=Ji?$i:0),vt.IGNORE_EXPAND&&(M=0),vt.USE_CACHED_POLYGON_IMAGE){var ii=H._$e0;if(ii.gl_cacheImage=ii.gl_cacheImage||{},!ii.gl_cacheImage[ne]){var Ni=Ve.createCanvas(Qr-li,Tr-ri);vt.DEBUG_DATA.LDGL_CANVAS_MB=vt.DEBUG_DATA.LDGL_CANVAS_MB||0,vt.DEBUG_DATA.LDGL_CANVAS_MB+=(Qr-li)*(Tr-ri)*4;var ui=Ni.getContext("2d");ui.translate(-li,-ri),Ve.clip(ui,Pt,M,pr,me,fe,Se,ye,Me,te,Ft,je,rr,Qe,zt,ge),ui.drawImage(l,0,0),ii.gl_cacheImage[ne]={cacheCanvas:Ni,cacheContext:ui}}et.drawImage(ii.gl_cacheImage[ne].cacheCanvas,li,ri)}else vt.IGNORE_CLIP||Ve.clip(et,Pt,M,pr,me,fe,Se,ye,Me,te,Ft,je,rr,Qe,zt,ge),vt.USE_ADJUST_TRANSLATION&&(ir=0,Cr=z,mr=0,Zr=ot),et.drawImage(l,ir,mr,Cr-ir,Zr-mr,ir,mr,Cr-ir,Zr-mr);et.restore()}}catch(We){h._$Rb(We)}},Ve.clip=function(l,f,T,D,N,M,X,H,U,z,ot,et,rt,gt,At,lt){T>.02?Ve.expandClip(l,f,T,D,ot,et,rt,gt,At,lt):Ve.clipWithTransform(l,null,N,M,X,H,U,z)},Ve.expandClip=function(l,f,T,D,N,M,X,H,U,z){var ot=X-N,et=H-M,rt=U-N,gt=z-M,At=ot*gt-et*rt>0?T:-T,lt=-et,Pt=ot,bt=U-X,Ct=z-H,Rt=-Ct,ne=bt,kt=Math.sqrt(bt*bt+Ct*Ct),Dt=-gt,B=rt,Ft=Math.sqrt(rt*rt+gt*gt),je=N-At*lt/D,rr=M-At*Pt/D,Qe=X-At*lt/D,zt=H-At*Pt/D,ge=X-At*Rt/kt,me=H-At*ne/kt,fe=U-At*Rt/kt,Se=z-At*ne/kt,ye=N+At*Dt/Ft,Me=M+At*B/Ft,te=U+At*Dt/Ft,de=z+At*B/Ft,ee=Ve._$50,Lt=f._$P2(ee);return Lt==null?!1:(Ve.clipWithTransform(l,ee,je,rr,Qe,zt,ge,me,fe,Se,te,de,ye,Me),!0)},Ve.clipWithTransform=function(l,f,T,D,N,M,X,H){if(arguments.length<1+3*2){h._$li("err : @LDGL.clip()");return}if(!(arguments[1]instanceof Hr)){h._$li("err : a[0] is _$6 LDTransform @LDGL.clip()");return}var U=Ve._$B,z=f,ot=arguments;if(l.beginPath(),z){z._$PS(ot[2],ot[3],U),l.moveTo(U[0],U[1]);for(var et=4;et<ot.length;et+=2)z._$PS(ot[et],ot[et+1],U),l.lineTo(U[0],U[1])}else{l.moveTo(ot[2],ot[3]);for(var et=4;et<ot.length;et+=2)l.lineTo(ot[et],ot[et+1])}l.clip()},Ve.createCanvas=function(l,f){var T=document.createElement("canvas");return T.setAttribute("width",l),T.setAttribute("height",f),T||h._$li("err : "+T),T},Ve.dumpValues=function(){for(var l="",f=0;f<arguments.length;f++)l+="["+f+"]= "+arguments[f].toFixed(3)+" , ";console.log(l)};function hi(){pe||(this._$TT=null,this._$LT=null,this._$FS=null,this._$wL=null)}hi.prototype._$F0=function(l){this._$TT=l._$_T(),this._$LT=l._$_T(),this._$FS=l._$_T(),this._$wL=l._$nP()},hi.prototype.getMinValue=function(){return this._$TT},hi.prototype.getMaxValue=function(){return this._$LT},hi.prototype.getDefaultValue=function(){return this._$FS},hi.prototype.getParamID=function(){return this._$wL};function Mr(l){pe||(this._$e0=null,this._$IP=null,this._$JS=!1,this._$AT=!0,this._$e0=l,this.totalScale=1,this._$7s=1,this.totalOpacity=1)}Mr.prototype._$yo=function(){return this._$AT&&!this._$JS},Mr.prototype._$hS=function(l){this._$AT=l},Mr.prototype._$GT=function(){return this._$e0},Mr.prototype._$l2=function(l){this._$IP=l},Mr.prototype.getPartsIndex=function(){return this._$IP},Mr.prototype._$x2=function(){return this._$JS},Mr.prototype._$Ib=function(l){this._$JS=l},Mr.prototype.getTotalScale=function(){return this.totalScale},Mr.prototype.setTotalScale_notForClient=function(l){this.totalScale=l},Mr.prototype.getInterpolatedOpacity=function(){return this._$7s},Mr.prototype.setInterpolatedOpacity=function(l){this._$7s=l},Mr.prototype.getTotalOpacity=function(l){return this.totalOpacity},Mr.prototype.setTotalOpacity=function(l){this.totalOpacity=l};function vt(){}vt._$2s="2.1.00_1",vt._$Kr=201001e3,vt._$sP=!0,vt._$so=!0,vt._$cb=!1,vt._$3T=!0,vt._$Ts=!0,vt._$fb=!0,vt._$ts=!0,vt.L2D_DEFORMER_EXTEND=!0,vt._$Wb=!1,vt._$yr=!1,vt._$Zs=!1,vt.L2D_NO_ERROR=0,vt._$i7=1e3,vt._$9s=1001,vt._$es=1100,vt._$r7=2e3,vt._$07=2001,vt._$b7=2002,vt._$H7=4e3,vt.L2D_COLOR_BLEND_MODE_MULT=0,vt.L2D_COLOR_BLEND_MODE_ADD=1,vt.L2D_COLOR_BLEND_MODE_INTERPOLATE=2,vt._$6b=!0,vt._$cT=0,vt.clippingMaskBufferSize=256,vt.glContext=new Array,vt.frameBuffers=new Array,vt.fTexture=new Array,vt.IGNORE_CLIP=!1,vt.IGNORE_EXPAND=!1,vt.EXPAND_W=2,vt.USE_ADJUST_TRANSLATION=!0,vt.USE_CANVAS_TRANSFORM=!0,vt.USE_CACHED_POLYGON_IMAGE=!1,vt.DEBUG_DATA={},vt.PROFILE_IOS_SPEED={PROFILE_NAME:"iOS Speed",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!0,EXPAND_W:4},vt.PROFILE_IOS_QUALITY={PROFILE_NAME:"iOS HiQ",USE_ADJUST_TRANSLATION:!0,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},vt.PROFILE_IOS_DEFAULT=vt.PROFILE_IOS_QUALITY,vt.PROFILE_ANDROID={PROFILE_NAME:"Android",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},vt.PROFILE_DESKTOP={PROFILE_NAME:"Desktop",USE_ADJUST_TRANSLATION:!1,USE_CACHED_POLYGON_IMAGE:!1,EXPAND_W:2},vt.initProfile=function(){Jt.isIOS()?vt.setupProfile(vt.PROFILE_IOS_DEFAULT):Jt.isAndroid()?vt.setupProfile(vt.PROFILE_ANDROID):vt.setupProfile(vt.PROFILE_DESKTOP)},vt.setupProfile=function(l,f){if(typeof l=="number")switch(l){case 9901:l=vt.PROFILE_IOS_SPEED;break;case 9902:l=vt.PROFILE_IOS_QUALITY;break;case 9903:l=vt.PROFILE_IOS_DEFAULT;break;case 9904:l=vt.PROFILE_ANDROID;break;case 9905:l=vt.PROFILE_DESKTOP;break;default:alert("profile _$6 _$Ui : "+l);break}for(var T in l)vt[T]=l[T]},vt.init=function(){vt._$6b&&(vt._$6b=!1,vt.initProfile())},vt.getVersionStr=function(){return vt._$2s},vt.getVersionNo=function(){return vt._$Kr},vt._$sT=function(l){vt._$cT=l},vt.getError=function(){var l=vt._$cT;return vt._$cT=0,l},vt.dispose=function(){vt.glContext=[],vt.frameBuffers=[],vt.fTexture=[]},vt.setGL=function(l,f){var T=f||0;vt.glContext[T]=l},vt.getGL=function(l){return vt.glContext[l]},vt.setClippingMaskBufferSize=function(l){vt.clippingMaskBufferSize=l},vt.getClippingMaskBufferSize=function(){return vt.clippingMaskBufferSize},vt.deleteBuffer=function(l){var f=vt.getGL(l);f.deleteFramebuffer(vt.frameBuffers[l].framebuffer),delete vt.frameBuffers[l],delete vt.glContext[l]};function cn(){}cn._$r2=function(l){return l<0?0:l>1?1:.5-.5*Math.cos(l*Ae.PI_F)};function Ur(l){pe||(this._$ib=l)}Ur._$fr=-1,Ur.prototype.toString=function(){return this._$ib};function Xe(){pe||(qt.prototype.constructor.call(this),this._$LP=-1,this._$d0=0,this._$Yo=0,this._$JP=null,this._$5P=null,this._$BP=null,this._$Eo=null,this._$Qi=null,this._$6s=Xe._$ms,this.culling=!0,this.gl_cacheImage=null,this.instanceNo=Xe._$42++)}Xe.prototype=new qt,Xe._$42=0,Xe._$Os=30,Xe._$ms=0,Xe._$ns=1,Xe._$_s=2,Xe._$gT=new Array,Xe.prototype._$_S=function(l){this._$LP=l},Xe.prototype.getTextureNo=function(){return this._$LP},Xe.prototype._$ZL=function(){return this._$Qi},Xe.prototype._$H2=function(){return this._$JP},Xe.prototype.getNumPoints=function(){return this._$d0},Xe.prototype.getType=function(){return qt._$wb},Xe.prototype._$B2=function(l,f,T){var D=f,N=D._$hr!=null?D._$hr:D._$Cr,M=st._$do;switch(M){default:case st._$Ms:throw new Error("_$L _$ro ");case st._$Qs:for(var X=this._$d0-1;X>=0;--X){var H=X*st._$No;N[H+4]=T}break}},Xe.prototype._$zP=function(){this._$GS=new Yt,this._$GS._$zP()},Xe.prototype._$F0=function(l){qt.prototype._$F0.call(this,l),this._$LP=l._$6L(),this._$d0=l._$6L(),this._$Yo=l._$6L();var f=l._$nP();this._$BP=new Int16Array(this._$Yo*3);for(var T=this._$Yo*3-1;T>=0;--T)this._$BP[T]=f[T];if(this._$Eo=l._$nP(),this._$Qi=l._$nP(),l.getFormatVersion()>=Et._$s7){if(this._$JP=l._$6L(),this._$JP!=0){if(this._$JP&1){var D=l._$6L();this._$5P==null&&(this._$5P=new Object),this._$5P._$Hb=parseInt(D)}this._$JP&Xe._$Os?this._$6s=(this._$JP&Xe._$Os)>>1:this._$6s=Xe._$ms,this._$JP&32&&(this.culling=!1)}}else this._$JP=0},Xe.prototype.init=function(l){var f=new dn(this),T=this._$d0*st._$No,D=this._$32();f._$Cr!=null&&(f._$Cr=null),f._$Cr=new Float32Array(T),f._$hr!=null&&(f._$hr=null),f._$hr=D?new Float32Array(T):null;var N=st._$do;switch(N){default:case st._$Ms:if(st._$Ls)for(var M=this._$d0-1;M>=0;--M){var X=M<<1;this._$Qi[X+1]=1-this._$Qi[X+1]}break;case st._$Qs:for(var M=this._$d0-1;M>=0;--M){var X=M<<1,H=M*st._$No,U=this._$Qi[X],z=this._$Qi[X+1];f._$Cr[H]=U,f._$Cr[H+1]=z,f._$Cr[H+4]=0,D&&(f._$hr[H]=U,f._$hr[H+1]=z,f._$hr[H+4]=0)}break}return f},Xe.prototype._$Nr=function(l,f){var T=f;if(this!=T._$GT()&&console.log("### assert!! ### "),!!this._$GS._$Ur(l)&&(qt.prototype._$Nr.call(this,l,T),!T._$IS[0])){var D=Xe._$gT;D[0]=!1,K._$Vr(l,this._$GS,D,this._$d0,this._$Eo,T._$Cr,st._$i2,st._$No)}},Xe.prototype._$2b=function(l,f){try{this!=f._$GT()&&console.log("### assert!! ### ");var T=!1;f._$IS[0]&&(T=!0);var D=f;if(!T&&(qt.prototype._$2b.call(this,l),this._$32())){var N=this.getTargetBaseDataID();if(D._$8r==qt._$ur&&(D._$8r=l.getBaseDataIndex(N)),D._$8r<0)vt._$so&&h._$li("_$L _$0P _$G :: %s",N);else{var M=l.getBaseData(D._$8r),X=l._$q2(D._$8r);M!=null&&!X._$x2()?(M._$nb(l,X,D._$Cr,D._$hr,this._$d0,st._$i2,st._$No),D._$AT=!0):D._$AT=!1,D.baseOpacity=X.getTotalOpacity()}}}catch(H){throw H}},Xe.prototype.draw=function(l,f,T){if(this!=T._$GT()&&console.log("### assert!! ### "),!T._$IS[0]){var D=T,N=this._$LP;N<0&&(N=1);var M=this.getOpacity(f,D)*T._$VS*T.baseOpacity,X=D._$hr!=null?D._$hr:D._$Cr;l.setClipBufPre_clipContextForDraw(T.clipBufPre_clipContext),l._$WP(this.culling),l._$Uo(N,3*this._$Yo,this._$BP,X,this._$Qi,M,this._$6s,D)}},Xe.prototype.dump=function(){console.log(`  _$yi( %d ) , _$d0( %d ) , _$Yo( %d ) 
`,this._$LP,this._$d0,this._$Yo),console.log("  _$Oi _$di = { ");for(var l=0;l<this._$BP.length;l++)console.log("%5d ,",this._$BP[l]);console.log(`
  _$5i _$30`);for(var l=0;l<this._$Eo.length;l++){console.log(`
    _$30[%d] = `,l);for(var f=this._$Eo[l],T=0;T<f.length;T++)console.log("%6.2f, ",f[T])}console.log(`
`)},Xe.prototype._$72=function(l){return this._$5P==null?null:this._$5P[l]},Xe.prototype.getIndexArray=function(){return this._$BP};function dn(l){n.prototype.constructor.call(this,l),this._$8r=qt._$ur,this._$Cr=null,this._$hr=null}dn.prototype=new n,dn.prototype.getTransformedPoints=function(){return this._$hr!=null?this._$hr:this._$Cr};function Zi(){pe||(this.x=null,this.y=null)}Zi.prototype._$HT=function(l){this.x=l.x,this.y=l.y},Zi.prototype._$HT=function(l,f){this.x=l,this.y=f};function Ot(l){pe||(t.prototype.constructor.call(this),this.drawParamWebGL=new hr(l),this.drawParamWebGL.setGL(vt.getGL(l)))}Ot.prototype=new t,Ot.loadModel=function(l){var f=new Ot;return t._$62(f,l),f},Ot.loadModel=function(l,f){var T=f||0,D=new Ot(T);return t._$62(D,l),D},Ot._$to=function(){var l=new Ot;return l},Ot._$er=function(l){var f=new _$5("../_$_r/_$t0/_$Ri/_$_P._$d");if(f.exists()==!1)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+f._$PL());for(var T=["../_$_r/_$t0/_$Ri/_$_P.512/_$CP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$vP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$EP._$1","../_$_r/_$t0/_$Ri/_$_P.512/_$pP._$1"],D=Ot.loadModel(f._$3b()),N=0;N<T.length;N++){var M=new _$5(T[N]);if(M.exists()==!1)throw new _$ls("_$t0 _$_ _$6 _$Ui :: "+M._$PL());D.setTexture(N,_$nL._$_o(l,M._$3b()))}return D},Ot.prototype.setGL=function(l){vt.setGL(l)},Ot.prototype.setTransform=function(l){this.drawParamWebGL.setTransform(l)},Ot.prototype.update=function(){this._$5S.update(),this._$5S.preDraw(this.drawParamWebGL)},Ot.prototype.draw=function(){this._$5S.draw(this.drawParamWebGL)},Ot.prototype._$K2=function(){this.drawParamWebGL._$K2()},Ot.prototype.setTexture=function(l,f){this.drawParamWebGL==null&&h._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this.drawParamWebGL.setTexture(l,f)},Ot.prototype.setTexture=function(l,f){this.drawParamWebGL==null&&h._$li("_$Yi for QT _$ki / _$XS() is _$6 _$ui!!"),this.drawParamWebGL.setTexture(l,f)},Ot.prototype._$Rs=function(){return this.drawParamWebGL._$Rs()},Ot.prototype._$Ds=function(l){this.drawParamWebGL._$Ds(l)},Ot.prototype.getDrawParam=function(){return this.drawParamWebGL},Ot.prototype.setMatrix=function(l){this.drawParamWebGL.setMatrix(l)},Ot.prototype.setPremultipliedAlpha=function(l){this.drawParamWebGL.setPremultipliedAlpha(l)},Ot.prototype.isPremultipliedAlpha=function(){return this.drawParamWebGL.isPremultipliedAlpha()},Ot.prototype.setAnisotropy=function(l){this.drawParamWebGL.setAnisotropy(l)},Ot.prototype.getAnisotropy=function(){return this.drawParamWebGL.getAnisotropy()};function Li(){pe||(this.motions=null,this._$eb=!1,this.motions=new Array)}Li.prototype._$tb=function(){return this.motions},Li.prototype.startMotion=function(l,f){for(var T=null,D=this.motions.length,N=0;N<D;++N)T=this.motions[N],T!=null&&(T._$qS(T._$w0.getFadeOut()),this._$eb&&h._$Ji(`MotionQueueManager[size:%2d]->startMotion() / start _$K _$3 (m%d)
`,D,T._$sr));if(l==null)return-1;T=new Qi,T._$w0=l,this.motions.push(T);var M=T._$sr;return this._$eb&&h._$Ji(`MotionQueueManager[size:%2d]->startMotion() / new _$w0 (m%d)
`,D,M),M},Li.prototype.updateParam=function(l){try{for(var f=!1,T=0;T<this.motions.length;T++){var D=this.motions[T];if(D==null){this.motions.splice(T,1),T--;continue}var N=D._$w0;if(N==null){this.motions=this.motions.splice(T,1),T--;continue}N.updateParam(l,D),f=!0,D.isFinished()&&(this._$eb&&h._$Ji(`MotionQueueManager[size:%2d]->updateParam() / _$T0 _$w0 (m%d)
`,this.motions.length-1,D._$sr),this.motions.splice(T,1),T--)}return f}catch(M){return h._$li(M),!0}},Li.prototype.isFinished=function(l){if(arguments.length>=1){for(var f=0;f<this.motions.length;f++){var T=this.motions[f];if(T!=null&&T._$sr==l&&!T.isFinished())return!1}return!0}else{for(var f=0;f<this.motions.length;f++){var T=this.motions[f];if(T==null){this.motions.splice(f,1),f--;continue}var D=T._$w0;if(D==null){this.motions.splice(f,1),f--;continue}if(!T.isFinished())return!1}return!0}},Li.prototype.stopAllMotions=function(){for(var l=0;l<this.motions.length;l++){var f=this.motions[l];if(f==null){this.motions.splice(l,1),l--;continue}var T=f._$w0;if(T==null){this.motions.splice(l,1),l--;continue}this.motions.splice(l,1),l--}},Li.prototype._$Zr=function(l){this._$eb=l},Li.prototype._$e=function(){console.log(`-- _$R --
`);for(var l=0;l<this.motions.length;l++){var f=this.motions[l],T=f._$w0;console.log(`MotionQueueEnt[%d] :: %s
`,this.motions.length,T.toString())}};function Qi(){this._$w0=null,this._$AT=!0,this._$9L=!1,this._$z2=-1,this._$bs=-1,this._$Do=-1,this._$sr=null,this._$sr=Qi._$Gs++}Qi._$Gs=0,Qi.prototype.isFinished=function(){return this._$9L},Qi.prototype._$qS=function(l){var f=Gt.getUserTimeMSec(),T=f+l;(this._$Do<0||T<this._$Do)&&(this._$Do=T)},Qi.prototype._$Bs=function(){return this._$sr};function Hr(){this.m=new Array(1,0,0,0,1,0,0,0,1)}Hr.prototype.setContext=function(l){var f=this.m;l.transform(f[0],f[1],f[3],f[4],f[6],f[7])},Hr.prototype.toString=function(){for(var l="LDTransform { ",f=0;f<9;f++)l+=this.m[f].toFixed(2)+" ,";return l+=" }",l},Hr.prototype.identity=function(){var l=this.m;l[0]=l[4]=l[8]=1,l[1]=l[2]=l[3]=l[5]=l[6]=l[7]=0},Hr.prototype._$PS=function(l,f,T){T==null&&(T=new Array(0,0));var D=this.m;return T[0]=D[0]*l+D[3]*f+D[6],T[1]=D[1]*l+D[4]*f+D[7],T},Hr.prototype._$P2=function(l){l||(l=new Hr);var f=this.m,T=f[0],D=f[1],N=f[2],M=f[3],X=f[4],H=f[5],U=f[6],z=f[7],ot=f[8],et=T*X*ot+D*H*U+N*M*z-T*H*z-N*X*U-D*M*ot;if(et==0)return null;var rt=1/et;return l.m[0]=rt*(X*ot-z*H),l.m[1]=rt*(z*N-D*ot),l.m[2]=rt*(D*H-X*N),l.m[3]=rt*(U*H-M*ot),l.m[4]=rt*(T*ot-U*N),l.m[5]=rt*(M*N-T*H),l.m[6]=rt*(M*z-U*X),l.m[7]=rt*(U*D-T*z),l.m[8]=rt*(T*X-M*D),l},Hr.prototype.transform=function(l,f,T){T==null&&(T=new Array(0,0));var D=this.m;return T[0]=D[0]*l+D[3]*f+D[6],T[1]=D[1]*l+D[4]*f+D[7],T},Hr.prototype.translate=function(l,f){var T=this.m;T[6]=T[0]*l+T[3]*f+T[6],T[7]=T[1]*l+T[4]*f+T[7],T[8]=T[2]*l+T[5]*f+T[8]},Hr.prototype.scale=function(l,f){var T=this.m;T[0]*=l,T[1]*=l,T[2]*=l,T[3]*=f,T[4]*=f,T[5]*=f},Hr.prototype.shear=function(l,f){var T=this.m,D=T[0]+T[3]*f,N=T[1]+T[4]*f,M=T[2]+T[5]*f;T[3]=T[0]*l+T[3],T[4]=T[1]*l+T[4],T[5]=T[2]*l+T[5],T[0]=D,T[1]=N,T[2]=M},Hr.prototype.rotate=function(l){var f=this.m,T=Math.cos(l),D=Math.sin(l),N=f[0]*T+f[3]*D,M=f[1]*T+f[4]*D,X=f[2]*T+f[5]*D;f[3]=-f[0]*D+f[3]*T,f[4]=-f[1]*D+f[4]*T,f[5]=-f[2]*D+f[5]*T,f[0]=N,f[1]=M,f[2]=X},Hr.prototype.concatenate=function(l){var f=this.m,T=l.m,D=f[0]*T[0]+f[3]*T[1]+f[6]*T[2],N=f[1]*T[0]+f[4]*T[1]+f[7]*T[2],M=f[2]*T[0]+f[5]*T[1]+f[8]*T[2],X=f[0]*T[3]+f[3]*T[4]+f[6]*T[5],H=f[1]*T[3]+f[4]*T[4]+f[7]*T[5],U=f[2]*T[3]+f[5]*T[4]+f[8]*T[5],z=f[0]*T[6]+f[3]*T[7]+f[6]*T[8],ot=f[1]*T[6]+f[4]*T[7]+f[7]*T[8],et=f[2]*T[6]+f[5]*T[7]+f[8]*T[8];m[0]=D,m[1]=N,m[2]=M,m[3]=X,m[4]=H,m[5]=U,m[6]=z,m[7]=ot,m[8]=et};function _r(l){pe||Er.prototype.constructor.call(this,l)}_r.prototype=new Er,_r._$eT=null,_r._$tP=new Object,_r._$2o=function(){return _r._$eT==null&&(_r._$eT=_r.getID("DST_BASE")),_r._$eT},_r._$27=function(){_r._$tP.clear(),_r._$eT=null},_r.getID=function(l){var f=_r._$tP[l];return f==null&&(f=new _r(l),_r._$tP[l]=f),f},_r.prototype._$3s=function(){return new _r};function hr(l){pe||(ft.prototype.constructor.call(this),this.textures=new Array,this.transform=null,this.gl=null,this.glno=l,this.firstDraw=!0,this.anisotropyExt=null,this.maxAnisotropy=0,this._$As=32,this._$Gr=!1,this._$NT=null,this._$vS=null,this._$no=null,this.vertShader=null,this.fragShader=null,this.vertShaderOff=null,this.fragShaderOff=null)}hr.prototype=new ft,hr._$9r=function(l){var f=new Float32Array(l);return f},hr._$vb=function(l){var f=new Int16Array(l);return f},hr._$cr=function(l,f){return l==null||l._$yL()<f.length?(l=hr._$9r(f.length*2),l.put(f),l._$oT(0)):(l.clear(),l.put(f),l._$oT(0)),l},hr._$mb=function(l,f){return l==null||l._$yL()<f.length?(l=hr._$vb(f.length*2),l.put(f),l._$oT(0)):(l.clear(),l.put(f),l._$oT(0)),l},hr._$Hs=function(){return this._$Gr},hr._$as=function(l){this._$Gr=l},hr.prototype.getGL=function(){return this.gl},hr.prototype.setGL=function(l){this.gl=l},hr.prototype.setTransform=function(l){this.transform=l},hr.prototype._$ZT=function(){var l=this.gl;this.firstDraw&&(this.initShader(),this.firstDraw=!1,this.anisotropyExt=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic"),this.anisotropyExt&&(this.maxAnisotropy=l.getParameter(this.anisotropyExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),l.disable(l.SCISSOR_TEST),l.disable(l.STENCIL_TEST),l.disable(l.DEPTH_TEST),l.frontFace(l.CW),l.enable(l.BLEND),l.colorMask(1,1,1,1),l.bindBuffer(l.ARRAY_BUFFER,null),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,null)},hr.prototype._$Uo=function(l,f,T,D,N,M,X,H){if(!(M<.01&&this.clipBufPre_clipContextMask==null)){M>.9&&vt.EXPAND_W;var U=this.gl;if(this.gl==null)throw new Error("gl is null");var z=!1,ot=1,et=1,rt=1,gt=this._$C0*ot*M,At=this._$tT*et*M,lt=this._$WL*rt*M,Pt=this._$lT*M;if(this.clipBufPre_clipContextMask!=null){U.frontFace(U.CCW),U.useProgram(this.shaderProgram),this._$vS=at(U,this._$vS,D),this._$no=pt(U,this._$no,T),U.enableVertexAttribArray(this.a_position_Loc),U.vertexAttribPointer(this.a_position_Loc,2,U.FLOAT,!1,0,0),this._$NT=at(U,this._$NT,N),U.activeTexture(U.TEXTURE1),U.bindTexture(U.TEXTURE_2D,this.textures[l]),U.uniform1i(this.s_texture0_Loc,1),U.enableVertexAttribArray(this.a_texCoord_Loc),U.vertexAttribPointer(this.a_texCoord_Loc,2,U.FLOAT,!1,0,0),U.uniformMatrix4fv(this.u_matrix_Loc,!1,this.getClipBufPre_clipContextMask().matrixForMask);var bt=this.getClipBufPre_clipContextMask().layoutChannelNo,Ct=this.getChannelFlagAsColor(bt);U.uniform4f(this.u_channelFlag,Ct.r,Ct.g,Ct.b,Ct.a);var Rt=this.getClipBufPre_clipContextMask().layoutBounds;U.uniform4f(this.u_baseColor_Loc,Rt.x*2-1,Rt.y*2-1,Rt._$EL()*2-1,Rt._$5T()*2-1),U.uniform1i(this.u_maskFlag_Loc,!0)}else if(z=this.getClipBufPre_clipContextDraw()!=null,z){U.useProgram(this.shaderProgramOff),this._$vS=at(U,this._$vS,D),this._$no=pt(U,this._$no,T),U.enableVertexAttribArray(this.a_position_Loc_Off),U.vertexAttribPointer(this.a_position_Loc_Off,2,U.FLOAT,!1,0,0),this._$NT=at(U,this._$NT,N),U.activeTexture(U.TEXTURE1),U.bindTexture(U.TEXTURE_2D,this.textures[l]),U.uniform1i(this.s_texture0_Loc_Off,1),U.enableVertexAttribArray(this.a_texCoord_Loc_Off),U.vertexAttribPointer(this.a_texCoord_Loc_Off,2,U.FLOAT,!1,0,0),U.uniformMatrix4fv(this.u_clipMatrix_Loc_Off,!1,this.getClipBufPre_clipContextDraw().matrixForDraw),U.uniformMatrix4fv(this.u_matrix_Loc_Off,!1,this.matrix4x4),U.activeTexture(U.TEXTURE2),U.bindTexture(U.TEXTURE_2D,vt.fTexture[this.glno]),U.uniform1i(this.s_texture1_Loc_Off,2);var bt=this.getClipBufPre_clipContextDraw().layoutChannelNo,Ct=this.getChannelFlagAsColor(bt);U.uniform4f(this.u_channelFlag_Loc_Off,Ct.r,Ct.g,Ct.b,Ct.a),U.uniform4f(this.u_baseColor_Loc_Off,gt,At,lt,Pt)}else U.useProgram(this.shaderProgram),this._$vS=at(U,this._$vS,D),this._$no=pt(U,this._$no,T),U.enableVertexAttribArray(this.a_position_Loc),U.vertexAttribPointer(this.a_position_Loc,2,U.FLOAT,!1,0,0),this._$NT=at(U,this._$NT,N),U.activeTexture(U.TEXTURE1),U.bindTexture(U.TEXTURE_2D,this.textures[l]),U.uniform1i(this.s_texture0_Loc,1),U.enableVertexAttribArray(this.a_texCoord_Loc),U.vertexAttribPointer(this.a_texCoord_Loc,2,U.FLOAT,!1,0,0),U.uniformMatrix4fv(this.u_matrix_Loc,!1,this.matrix4x4),U.uniform4f(this.u_baseColor_Loc,gt,At,lt,Pt),U.uniform1i(this.u_maskFlag_Loc,!1);this.culling?this.gl.enable(U.CULL_FACE):this.gl.disable(U.CULL_FACE),this.gl.enable(U.BLEND);var ne,kt,Dt,B;if(this.clipBufPre_clipContextMask!=null)ne=U.ONE,kt=U.ONE_MINUS_SRC_ALPHA,Dt=U.ONE,B=U.ONE_MINUS_SRC_ALPHA;else switch(X){case Xe._$ms:ne=U.ONE,kt=U.ONE_MINUS_SRC_ALPHA,Dt=U.ONE,B=U.ONE_MINUS_SRC_ALPHA;break;case Xe._$ns:ne=U.ONE,kt=U.ONE,Dt=U.ZERO,B=U.ONE;break;case Xe._$_s:ne=U.DST_COLOR,kt=U.ONE_MINUS_SRC_ALPHA,Dt=U.ZERO,B=U.ONE;break}U.blendEquationSeparate(U.FUNC_ADD,U.FUNC_ADD),U.blendFuncSeparate(ne,kt,Dt,B),this.anisotropyExt&&U.texParameteri(U.TEXTURE_2D,this.anisotropyExt.TEXTURE_MAX_ANISOTROPY_EXT,this.maxAnisotropy);var Ft=T.length;U.drawElements(U.TRIANGLES,Ft,U.UNSIGNED_SHORT,0),U.bindTexture(U.TEXTURE_2D,null)}};function at(l,f,T){return f==null&&(f=l.createBuffer()),l.bindBuffer(l.ARRAY_BUFFER,f),l.bufferData(l.ARRAY_BUFFER,T,l.DYNAMIC_DRAW),f}function pt(l,f,T){return f==null&&(f=l.createBuffer()),l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,f),l.bufferData(l.ELEMENT_ARRAY_BUFFER,T,l.DYNAMIC_DRAW),f}hr.prototype._$Rs=function(){throw new Error("_$Rs")},hr.prototype._$Ds=function(l){throw new Error("_$Ds")},hr.prototype._$K2=function(){for(var l=0;l<this.textures.length;l++){var f=this.textures[l];f!=0&&(this.gl._$K2(1,this.textures,l),this.textures[l]=null)}},hr.prototype.setTexture=function(l,f){this.textures[l]=f},hr.prototype.initShader=function(){var l=this.gl;this.loadShaders2(),this.a_position_Loc=l.getAttribLocation(this.shaderProgram,"a_position"),this.a_texCoord_Loc=l.getAttribLocation(this.shaderProgram,"a_texCoord"),this.u_matrix_Loc=l.getUniformLocation(this.shaderProgram,"u_mvpMatrix"),this.s_texture0_Loc=l.getUniformLocation(this.shaderProgram,"s_texture0"),this.u_channelFlag=l.getUniformLocation(this.shaderProgram,"u_channelFlag"),this.u_baseColor_Loc=l.getUniformLocation(this.shaderProgram,"u_baseColor"),this.u_maskFlag_Loc=l.getUniformLocation(this.shaderProgram,"u_maskFlag"),this.a_position_Loc_Off=l.getAttribLocation(this.shaderProgramOff,"a_position"),this.a_texCoord_Loc_Off=l.getAttribLocation(this.shaderProgramOff,"a_texCoord"),this.u_matrix_Loc_Off=l.getUniformLocation(this.shaderProgramOff,"u_mvpMatrix"),this.u_clipMatrix_Loc_Off=l.getUniformLocation(this.shaderProgramOff,"u_ClipMatrix"),this.s_texture0_Loc_Off=l.getUniformLocation(this.shaderProgramOff,"s_texture0"),this.s_texture1_Loc_Off=l.getUniformLocation(this.shaderProgramOff,"s_texture1"),this.u_channelFlag_Loc_Off=l.getUniformLocation(this.shaderProgramOff,"u_channelFlag"),this.u_baseColor_Loc_Off=l.getUniformLocation(this.shaderProgramOff,"u_baseColor")},hr.prototype.disposeShader=function(){var l=this.gl;this.shaderProgram&&(l.deleteProgram(this.shaderProgram),this.shaderProgram=null),this.shaderProgramOff&&(l.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=null)},hr.prototype.compileShader=function(l,f){var T=this.gl,M,D=f,N=T.createShader(l);if(N==null)return h._$Ji("_$L0 to create shader"),null;T.shaderSource(N,D),T.compileShader(N);var M=T.getShaderParameter(N,T.COMPILE_STATUS);if(!M){var X=T.getShaderInfoLog(N);return h._$Ji("_$L0 to compile shader : "+X),T.deleteShader(N),null}return N},hr.prototype.loadShaders2=function(){var l=this.gl;if(this.shaderProgram=l.createProgram(),!this.shaderProgram||(this.shaderProgramOff=l.createProgram(),!this.shaderProgramOff))return!1;var f="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_mvpMatrix * a_position;    v_texCoord = a_texCoord;}",T="precision mediump float;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform vec4       u_channelFlag;uniform vec4       u_baseColor;uniform bool       u_maskFlag;void main(){    vec4 smpColor;     if(u_maskFlag){        float isInside =             step(u_baseColor.x, v_ClipPos.x/v_ClipPos.w)          * step(u_baseColor.y, v_ClipPos.y/v_ClipPos.w)          * step(v_ClipPos.x/v_ClipPos.w, u_baseColor.z)          * step(v_ClipPos.y/v_ClipPos.w, u_baseColor.w);        smpColor = u_channelFlag * texture2D(s_texture0 , v_texCoord).a * isInside;    }else{        smpColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;    }    gl_FragColor = smpColor;}",D="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform mat4       u_mvpMatrix;uniform mat4       u_ClipMatrix;void main(){    gl_Position = u_mvpMatrix * a_position;    v_ClipPos = u_ClipMatrix * a_position;    v_texCoord = a_texCoord ;}",N="precision mediump float ;varying vec2       v_texCoord;varying vec4       v_ClipPos;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_channelFlag;uniform vec4       u_baseColor ;void main(){    vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;    vec4 clipMask = texture2D(s_texture1, v_ClipPos.xy / v_ClipPos.w) * u_channelFlag;    float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;    col_formask = col_formask * maskVal;    gl_FragColor = col_formask;}";if(this.vertShader=this.compileShader(l.VERTEX_SHADER,f),!this.vertShader)return h._$Ji("Vertex shader compile _$li!"),!1;if(this.vertShaderOff=this.compileShader(l.VERTEX_SHADER,D),!this.vertShaderOff)return h._$Ji("OffVertex shader compile _$li!"),!1;if(this.fragShader=this.compileShader(l.FRAGMENT_SHADER,T),!this.fragShader)return h._$Ji("Fragment shader compile _$li!"),!1;if(this.fragShaderOff=this.compileShader(l.FRAGMENT_SHADER,N),!this.fragShaderOff)return h._$Ji("OffFragment shader compile _$li!"),!1;l.attachShader(this.shaderProgram,this.vertShader),l.attachShader(this.shaderProgram,this.fragShader),l.attachShader(this.shaderProgramOff,this.vertShaderOff),l.attachShader(this.shaderProgramOff,this.fragShaderOff),l.linkProgram(this.shaderProgram),l.linkProgram(this.shaderProgramOff);var M=l.getProgramParameter(this.shaderProgram,l.LINK_STATUS);if(!M){var X=l.getProgramInfoLog(this.shaderProgram);return h._$Ji("_$L0 to link program: "+X),this.vertShader&&(l.deleteShader(this.vertShader),this.vertShader=0),this.fragShader&&(l.deleteShader(this.fragShader),this.fragShader=0),this.shaderProgram&&(l.deleteProgram(this.shaderProgram),this.shaderProgram=0),this.vertShaderOff&&(l.deleteShader(this.vertShaderOff),this.vertShaderOff=0),this.fragShaderOff&&(l.deleteShader(this.fragShaderOff),this.fragShaderOff=0),this.shaderProgramOff&&(l.deleteProgram(this.shaderProgramOff),this.shaderProgramOff=0),!1}return!0},hr.prototype.createFramebuffer=function(){var l=this.gl,f=vt.clippingMaskBufferSize,T=l.createFramebuffer();l.bindFramebuffer(l.FRAMEBUFFER,T);var D=l.createRenderbuffer();l.bindRenderbuffer(l.RENDERBUFFER,D),l.renderbufferStorage(l.RENDERBUFFER,l.RGBA4,f,f),l.framebufferRenderbuffer(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.RENDERBUFFER,D);var N=l.createTexture();return l.bindTexture(l.TEXTURE_2D,N),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,f,f,0,l.RGBA,l.UNSIGNED_BYTE,null),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,N,0),l.bindTexture(l.TEXTURE_2D,null),l.bindRenderbuffer(l.RENDERBUFFER,null),l.bindFramebuffer(l.FRAMEBUFFER,null),vt.fTexture[this.glno]=N,{framebuffer:T,renderbuffer:D,texture:vt.fTexture[this.glno]}};function Mt(l){pe||(this._$P=new Int8Array(8),this._$R0=new DataView(this._$P.buffer),this._$3i=new Int8Array(1e3),this._$hL=0,this._$v0=0,this._$S2=0,this._$Ko=new Array,this._$T=l,this._$F=0)}Mt.prototype._$fP=function(){var l=this._$ST(),f,T,D;if(l&128)if((f=this._$ST())&128)if((T=this._$ST())&128){if((D=this._$ST())&128)throw new Ur("_$L _$0P  _");return(l&127)<<21|(f&127)<<14|(T&127)<<7|D&255}else return(l&127)<<14|(f&127)<<7|T&255;else return(l&127)<<7|f&127;else return l&255},Mt.prototype.getFormatVersion=function(){return this._$S2},Mt.prototype._$gr=function(l){this._$S2=l},Mt.prototype._$3L=function(){return this._$fP()},Mt.prototype._$mP=function(){return this._$zT(),this._$F+=8,this._$T.getFloat64(this._$F-8)},Mt.prototype._$_T=function(){return this._$zT(),this._$F+=4,this._$T.getFloat32(this._$F-4)},Mt.prototype._$6L=function(){return this._$zT(),this._$F+=4,this._$T.getInt32(this._$F-4)},Mt.prototype._$ST=function(){return this._$zT(),this._$T.getInt8(this._$F++)},Mt.prototype._$9T=function(){return this._$zT(),this._$F+=2,this._$T.getInt16(this._$F-2)},Mt.prototype._$2T=function(){throw this._$zT(),this._$F+=8,new Ur("_$L _$q read long")},Mt.prototype._$po=function(){return this._$zT(),this._$T.getInt8(this._$F++)!=0};var ct=!0;Mt.prototype._$bT=function(){this._$zT();var l=this._$3L(),f=null;if(ct)try{var T=new ArrayBuffer(l*2);f=new Uint16Array(T);for(var D=0;D<l;++D)f[D]=this._$T.getUint8(this._$F++);return String.fromCharCode.apply(null,f)}catch{ct=!1}try{var N=new Array;if(f==null)for(var D=0;D<l;++D)N[D]=this._$T.getUint8(this._$F++);else for(var D=0;D<l;++D)N[D]=f[D];return String.fromCharCode.apply(null,N)}catch(M){console.log("read utf8 / _$rT _$L0 !! : "+M)}},Mt.prototype._$cS=function(){this._$zT();for(var l=this._$3L(),f=new Int32Array(l),T=0;T<l;T++)f[T]=this._$T.getInt32(this._$F),this._$F+=4;return f},Mt.prototype._$Tb=function(){this._$zT();for(var l=this._$3L(),f=new Float32Array(l),T=0;T<l;T++)f[T]=this._$T.getFloat32(this._$F),this._$F+=4;return f},Mt.prototype._$5b=function(){this._$zT();for(var l=this._$3L(),f=new Float64Array(l),T=0;T<l;T++)f[T]=this._$T.getFloat64(this._$F),this._$F+=8;return f},Mt.prototype._$nP=function(){return this._$Jb(-1)},Mt.prototype._$Jb=function(l){if(this._$zT(),l<0&&(l=this._$3L()),l==Et._$7P){var f=this._$6L();if(0<=f&&f<this._$Ko.length)return this._$Ko[f];throw new Ur("_$sL _$4i @_$m0")}else{var T=this._$4b(l);return this._$Ko.push(T),T}},Mt.prototype._$4b=function(l){if(l==0)return null;if(l==50){var f=this._$bT(),T=he.getID(f);return T}else if(l==51){var f=this._$bT(),T=_r.getID(f);return T}else if(l==134){var f=this._$bT(),T=_.getID(f);return T}else if(l==60){var f=this._$bT(),T=I.getID(f);return T}if(l>=48){var D=Et._$9o(l);return D!=null?(D._$F0(this),D):null}switch(l){case 1:return this._$bT();case 10:return this._$6L(),new o;case 11:return new J(this._$mP(),this._$mP(),this._$mP(),this._$mP());case 12:return new J(this._$_T(),this._$_T(),this._$_T(),this._$_T());case 13:return new Tt(this._$mP(),this._$mP());case 14:return new Tt(this._$_T(),this._$_T());case 15:for(var N=this._$3L(),T=new Array(N),M=0;M<N;M++)T[M]=this._$nP();return T;case 17:var T=new Kt(this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP(),this._$mP());return T;case 21:return new d(this._$6L(),this._$6L(),this._$6L(),this._$6L());case 22:return new Zi(this._$6L(),this._$6L());case 23:throw new Error("_$L _$ro ");case 16:case 25:return this._$cS();case 26:return this._$5b();case 27:return this._$Tb();case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 18:case 19:case 20:case 24:case 28:throw new Ur("_$6 _$q : _$nP() of 2-9 ,18,19,20,24,28 : "+l);default:throw new Ur("_$6 _$q : _$nP() NO _$i : "+l)}},Mt.prototype._$8L=function(){return this._$hL==0?this._$v0=this._$ST():this._$hL==8&&(this._$v0=this._$ST(),this._$hL=0),(this._$v0>>7-this._$hL++&1)==1},Mt.prototype._$zT=function(){this._$hL!=0&&(this._$hL=0)};function Ae(){}Ae._$2S=Math.PI/180,Ae._$bS=Math.PI/180,Ae._$wS=180/Math.PI,Ae._$NS=180/Math.PI,Ae.PI_F=Math.PI,Ae._$kT=[0,.012368,.024734,.037097,.049454,.061803,.074143,.086471,.098786,.111087,.12337,.135634,.147877,.160098,.172295,.184465,.196606,.208718,.220798,.232844,.244854,.256827,.268761,.280654,.292503,.304308,.316066,.327776,.339436,.351044,.362598,.374097,.385538,.396921,.408243,.419502,.430697,.441826,.452888,.463881,.474802,.485651,.496425,.507124,.517745,.528287,.538748,.549126,.559421,.56963,.579752,.589785,.599728,.609579,.619337,.629,.638567,.648036,.657406,.666676,.675843,.684908,.693867,.70272,.711466,.720103,.72863,.737045,.745348,.753536,.76161,.769566,.777405,.785125,.792725,.800204,.807561,.814793,.821901,.828884,.835739,.842467,.849066,.855535,.861873,.868079,.874153,.880093,.885898,.891567,.897101,.902497,.907754,.912873,.917853,.922692,.92739,.931946,.936359,.940629,.944755,.948737,.952574,.956265,.959809,.963207,.966457,.96956,.972514,.97532,.977976,.980482,.982839,.985045,.987101,.989006,.990759,.992361,.993811,.995109,.996254,.997248,.998088,.998776,.999312,.999694,.999924,1],Ae._$92=function(l,f){var T=Math.atan2(l[1],l[0]),D=Math.atan2(f[1],f[0]);return Ae._$tS(T,D)},Ae._$tS=function(l,f){for(var T=l-f;T<-Math.PI;)T+=2*Math.PI;for(;T>Math.PI;)T-=2*Math.PI;return T},Ae._$9=function(l){return Math.sin(l)},Ae.fcos=function(l){return Math.cos(l)};function n(l){pe||(this._$e0=null,this._$IP=null,this._$Us=null,this._$7s=null,this._$IS=[!1],this._$VS=null,this._$AT=!0,this.baseOpacity=1,this.clipBufPre_clipContext=null,this._$e0=l)}n.prototype._$u2=function(){return this._$IS[0]},n.prototype._$yo=function(){return this._$AT&&!this._$IS[0]},n.prototype._$GT=function(){return this._$e0};function Jt(){}Jt._$W2=0,Jt.SYSTEM_INFO=null,Jt.USER_AGENT=navigator.userAgent,Jt.isIPhone=function(){return Jt.SYSTEM_INFO||Jt.setup(),Jt.SYSTEM_INFO._isIPhone},Jt.isIOS=function(){return Jt.SYSTEM_INFO||Jt.setup(),Jt.SYSTEM_INFO._isIPhone||Jt.SYSTEM_INFO._isIPad},Jt.isAndroid=function(){return Jt.SYSTEM_INFO||Jt.setup(),Jt.SYSTEM_INFO._isAndroid},Jt.getOSVersion=function(){return Jt.SYSTEM_INFO||Jt.setup(),Jt.SYSTEM_INFO.version},Jt.getOS=function(){return Jt.SYSTEM_INFO||Jt.setup(),Jt.SYSTEM_INFO._isIPhone||Jt.SYSTEM_INFO._isIPad?"iOS":Jt.SYSTEM_INFO._isAndroid?"Android":"_$Q0 OS"},Jt.setup=function(){var l=Jt.USER_AGENT;function f(N,M){for(var X=N.substring(M).split(/[ _,;\.]/),H=0,U=0;U<=2&&!isNaN(X[U]);U++){var z=parseInt(X[U]);if(z<0||z>999){h._$li("err : "+z+" @UtHtml5.setup()"),H=0;break}H+=z*Math.pow(1e3,2-U)}return H}var T,D=Jt.SYSTEM_INFO={userAgent:l};if((T=l.indexOf("iPhone OS "))>=0)D.os="iPhone",D._isIPhone=!0,D.version=f(l,T+10);else if((T=l.indexOf("iPad"))>=0){if(T=l.indexOf("CPU OS"),T<0){h._$li(" err : "+l+" @UtHtml5.setup()");return}D.os="iPad",D._isIPad=!0,D.version=f(l,T+7)}else(T=l.indexOf("Android"))>=0?(D.os="Android",D._isAndroid=!0,D.version=f(l,T+8)):(D.os="-",D.version=-1)},window.UtSystem=Gt,window.UtDebug=h,window.LDTransform=Hr,window.LDGL=Ve,window.Live2D=vt,window.Live2DModelWebGL=Ot,window.Live2DModelJS=_e,window.Live2DMotion=ce,window.MotionQueueManager=Li,window.PhysicsHair=S,window.AMotion=s,window.PartsDataID=_,window.DrawDataID=he,window.BaseDataID=_r,window.ParamID=I,vt.init();var pe=!1})();Live2D;var nl;(function(t){var e=function(){function S(){}return S.getVersion=function(){return E.ccall("csmGetVersion","number",[],[])},S.getLatestMocVersion=function(){return E.ccall("csmGetLatestMocVersion","number",[],[])},S.getMocVersion=function(b,x){return E.ccall("csmGetMocVersion","number",["number","number"],[b,x])},S.getSizeofModel=function(b){return E.ccall("csmGetSizeofModel","number",["number"],[b])},S.reviveMocInPlace=function(b,x){return E.ccall("csmReviveMocInPlace","number",["number","number"],[b,x])},S.initializeModelInPlace=function(b,x,$){return E.ccall("csmInitializeModelInPlace","number",["number","number","number"],[b,x,$])},S.getParameterCount=function(b){return E.ccall("csmGetParameterCount","number",["number"],[b])},S.getParameterIds=function(b){return E.ccall("csmGetParameterIds","number",["number"],[b])},S.getParameterMinimumValues=function(b){return E.ccall("csmGetParameterMinimumValues","number",["number"],[b])},S.getParameterTypes=function(b){return E.ccall("csmGetParameterTypes","number",["number"],[b])},S.getParameterMaximumValues=function(b){return E.ccall("csmGetParameterMaximumValues","number",["number"],[b])},S.getParameterDefaultValues=function(b){return E.ccall("csmGetParameterDefaultValues","number",["number"],[b])},S.getParameterValues=function(b){return E.ccall("csmGetParameterValues","number",["number"],[b])},S.getParameterKeyCounts=function(b){return E.ccall("csmGetParameterKeyCounts","number",["number"],[b])},S.getParameterKeyValues=function(b){return E.ccall("csmGetParameterKeyValues","number",["number"],[b])},S.getPartCount=function(b){return E.ccall("csmGetPartCount","number",["number"],[b])},S.getPartIds=function(b){return E.ccall("csmGetPartIds","number",["number"],[b])},S.getPartOpacities=function(b){return E.ccall("csmGetPartOpacities","number",["number"],[b])},S.getPartParentPartIndices=function(b){return E.ccall("csmGetPartParentPartIndices","number",["number"],[b])},S.getDrawableCount=function(b){return E.ccall("csmGetDrawableCount","number",["number"],[b])},S.getDrawableIds=function(b){return E.ccall("csmGetDrawableIds","number",["number"],[b])},S.getDrawableConstantFlags=function(b){return E.ccall("csmGetDrawableConstantFlags","number",["number"],[b])},S.getDrawableDynamicFlags=function(b){return E.ccall("csmGetDrawableDynamicFlags","number",["number"],[b])},S.getDrawableTextureIndices=function(b){return E.ccall("csmGetDrawableTextureIndices","number",["number"],[b])},S.getDrawableDrawOrders=function(b){return E.ccall("csmGetDrawableDrawOrders","number",["number"],[b])},S.getDrawableRenderOrders=function(b){return E.ccall("csmGetDrawableRenderOrders","number",["number"],[b])},S.getDrawableOpacities=function(b){return E.ccall("csmGetDrawableOpacities","number",["number"],[b])},S.getDrawableMaskCounts=function(b){return E.ccall("csmGetDrawableMaskCounts","number",["number"],[b])},S.getDrawableMasks=function(b){return E.ccall("csmGetDrawableMasks","number",["number"],[b])},S.getDrawableVertexCounts=function(b){return E.ccall("csmGetDrawableVertexCounts","number",["number"],[b])},S.getDrawableVertexPositions=function(b){return E.ccall("csmGetDrawableVertexPositions","number",["number"],[b])},S.getDrawableVertexUvs=function(b){return E.ccall("csmGetDrawableVertexUvs","number",["number"],[b])},S.getDrawableIndexCounts=function(b){return E.ccall("csmGetDrawableIndexCounts","number",["number"],[b])},S.getDrawableIndices=function(b){return E.ccall("csmGetDrawableIndices","number",["number"],[b])},S.getDrawableMultiplyColors=function(b){return E.ccall("csmGetDrawableMultiplyColors","number",["number"],[b])},S.getDrawableScreenColors=function(b){return E.ccall("csmGetDrawableScreenColors","number",["number"],[b])},S.getDrawableParentPartIndices=function(b){return E.ccall("csmGetDrawableParentPartIndices","number",["number"],[b])},S.mallocMoc=function(b){return E.ccall("csmMallocMoc","number",["number"],[b])},S.mallocModelAndInitialize=function(b){return E.ccall("csmMallocModelAndInitialize","number",["number"],[b])},S.malloc=function(b){return E.ccall("csmMalloc","number",["number"],[b])},S.setLogFunction=function(b){E.ccall("csmSetLogFunction",null,["number"],[b])},S.updateModel=function(b){E.ccall("csmUpdateModel",null,["number"],[b])},S.readCanvasInfo=function(b,x,$,j){E.ccall("csmReadCanvasInfo",null,["number","number","number","number"],[b,x,$,j])},S.resetDrawableDynamicFlags=function(b){E.ccall("csmResetDrawableDynamicFlags",null,["number"],[b])},S.free=function(b){E.ccall("csmFree",null,["number"],[b])},S}();t.AlignofMoc=64,t.AlignofModel=16,t.MocVersion_Unknown=0,t.MocVersion_30=1,t.MocVersion_33=2,t.MocVersion_40=3,t.MocVersion_42=4,t.ParameterType_Normal=0,t.ParameterType_BlendShape=1;var r=function(){function S(){}return S.csmGetVersion=function(){return e.getVersion()},S.csmGetLatestMocVersion=function(){return e.getLatestMocVersion()},S.csmGetMocVersion=function(b,x){return e.getMocVersion(b._ptr,x.byteLength)},S}();t.Version=r;var i=function(){function S(){}return S.csmSetLogFunction=function(b){S.logFunction=b;var x=E.addFunction(S.wrapLogFunction,"vi");e.setLogFunction(x)},S.csmGetLogFunction=function(){return S.logFunction},S.wrapLogFunction=function(b){var x=E.UTF8ToString(b);S.logFunction(x)},S}();t.Logging=i;var o=function(){function S(b){var x=e.mallocMoc(b.byteLength);if(x){var $=new Uint8Array(E.HEAPU8.buffer,x,b.byteLength);$.set(new Uint8Array(b)),this._ptr=e.reviveMocInPlace(x,b.byteLength),this._ptr||e.free(x)}}return S.fromArrayBuffer=function(b){if(!b)return null;var x=new S(b);return x._ptr?x:null},S.prototype._release=function(){e.free(this._ptr),this._ptr=0},S}();t.Moc=o;var s=function(){function S(b){this._ptr=e.mallocModelAndInitialize(b._ptr),this._ptr&&(this.parameters=new c(this._ptr),this.parts=new d(this._ptr),this.drawables=new _(this._ptr),this.canvasinfo=new h(this._ptr))}return S.fromMoc=function(b){var x=new S(b);return x._ptr?x:null},S.prototype.update=function(){e.updateModel(this._ptr)},S.prototype.release=function(){e.free(this._ptr),this._ptr=0},S}();t.Model=s;var h=function(){function S(b){if(b){var x=new Float32Array(2),$=x.length*x.BYTES_PER_ELEMENT,j=e.malloc($),Y=new Uint8Array(E.HEAPU8.buffer,j,$);Y.set(new Uint8Array(x.buffer));var Q=new Float32Array(2),it=Q.length*Q.BYTES_PER_ELEMENT,J=e.malloc(it),K=new Uint8Array(E.HEAPU8.buffer,J,it);K.set(new Uint8Array(Q.buffer));var Tt=new Float32Array(1),yt=Tt.length*Tt.BYTES_PER_ELEMENT,ft=e.malloc(yt),St=new Uint8Array(E.HEAPU8.buffer,ft,yt);St.set(new Uint8Array(Tt.buffer)),e.readCanvasInfo(b,Y.byteOffset,K.byteOffset,St.byteOffset),x=new Float32Array(Y.buffer,Y.byteOffset,Y.length),Q=new Float32Array(K.buffer,K.byteOffset,K.length),Tt=new Float32Array(St.buffer,St.byteOffset,St.length),this.CanvasWidth=x[0],this.CanvasHeight=x[1],this.CanvasOriginX=Q[0],this.CanvasOriginY=Q[1],this.PixelsPerUnit=Tt[0],e.free(Y.byteOffset),e.free(K.byteOffset),e.free(St.byteOffset)}}return S}();t.CanvasInfo=h;var c=function(){function S(b){var x=0,$=null;this.count=e.getParameterCount(b),x=e.getParameterCount(b),this.ids=new Array(x);for(var j=new Uint32Array(E.HEAPU32.buffer,e.getParameterIds(b),x),Y=0;Y<j.length;Y++)this.ids[Y]=E.UTF8ToString(j[Y]);x=e.getParameterCount(b),this.minimumValues=new Float32Array(E.HEAPF32.buffer,e.getParameterMinimumValues(b),x),x=e.getParameterCount(b),this.types=new Int32Array(E.HEAP32.buffer,e.getParameterTypes(b),x),x=e.getParameterCount(b),this.maximumValues=new Float32Array(E.HEAPF32.buffer,e.getParameterMaximumValues(b),x),x=e.getParameterCount(b),this.defaultValues=new Float32Array(E.HEAPF32.buffer,e.getParameterDefaultValues(b),x),x=e.getParameterCount(b),this.values=new Float32Array(E.HEAPF32.buffer,e.getParameterValues(b),x),x=e.getParameterCount(b),this.keyCounts=new Int32Array(E.HEAP32.buffer,e.getParameterKeyCounts(b),x),x=e.getParameterCount(b),$=new Int32Array(E.HEAP32.buffer,e.getParameterKeyCounts(b),x),this.keyValues=new Array(x);for(var Q=new Uint32Array(E.HEAPU32.buffer,e.getParameterKeyValues(b),x),Y=0;Y<Q.length;Y++)this.keyValues[Y]=new Float32Array(E.HEAPF32.buffer,Q[Y],$[Y])}return S}();t.Parameters=c;var d=function(){function S(b){var x=0;this.count=e.getPartCount(b),x=e.getPartCount(b),this.ids=new Array(x);for(var $=new Uint32Array(E.HEAPU32.buffer,e.getPartIds(b),x),j=0;j<$.length;j++)this.ids[j]=E.UTF8ToString($[j]);x=e.getPartCount(b),this.opacities=new Float32Array(E.HEAPF32.buffer,e.getPartOpacities(b),x),x=e.getPartCount(b),this.parentIndices=new Int32Array(E.HEAP32.buffer,e.getPartParentPartIndices(b),x)}return S}();t.Parts=d;var _=function(){function S(b){this._modelPtr=b;var x=0,$=null;this.count=e.getDrawableCount(b),x=e.getDrawableCount(b),this.ids=new Array(x);for(var j=new Uint32Array(E.HEAPU32.buffer,e.getDrawableIds(b),x),Y=0;Y<j.length;Y++)this.ids[Y]=E.UTF8ToString(j[Y]);x=e.getDrawableCount(b),this.constantFlags=new Uint8Array(E.HEAPU8.buffer,e.getDrawableConstantFlags(b),x),x=e.getDrawableCount(b),this.dynamicFlags=new Uint8Array(E.HEAPU8.buffer,e.getDrawableDynamicFlags(b),x),x=e.getDrawableCount(b),this.textureIndices=new Int32Array(E.HEAP32.buffer,e.getDrawableTextureIndices(b),x),x=e.getDrawableCount(b),this.drawOrders=new Int32Array(E.HEAP32.buffer,e.getDrawableDrawOrders(b),x),x=e.getDrawableCount(b),this.renderOrders=new Int32Array(E.HEAP32.buffer,e.getDrawableRenderOrders(b),x),x=e.getDrawableCount(b),this.opacities=new Float32Array(E.HEAPF32.buffer,e.getDrawableOpacities(b),x),x=e.getDrawableCount(b),this.maskCounts=new Int32Array(E.HEAP32.buffer,e.getDrawableMaskCounts(b),x),x=e.getDrawableCount(b),this.vertexCounts=new Int32Array(E.HEAP32.buffer,e.getDrawableVertexCounts(b),x),x=e.getDrawableCount(b),this.indexCounts=new Int32Array(E.HEAP32.buffer,e.getDrawableIndexCounts(b),x),x=e.getDrawableCount(b),this.multiplyColors=new Float32Array(E.HEAPF32.buffer,e.getDrawableMultiplyColors(b),x*4),x=e.getDrawableCount(b),this.screenColors=new Float32Array(E.HEAPF32.buffer,e.getDrawableScreenColors(b),x*4),x=e.getDrawableCount(b),this.parentPartIndices=new Int32Array(E.HEAP32.buffer,e.getDrawableParentPartIndices(b),x),x=e.getDrawableCount(b),$=new Int32Array(E.HEAP32.buffer,e.getDrawableMaskCounts(b),x),this.masks=new Array(x);for(var Q=new Uint32Array(E.HEAPU32.buffer,e.getDrawableMasks(b),x),Y=0;Y<Q.length;Y++)this.masks[Y]=new Int32Array(E.HEAP32.buffer,Q[Y],$[Y]);x=e.getDrawableCount(b),$=new Int32Array(E.HEAP32.buffer,e.getDrawableVertexCounts(b),x),this.vertexPositions=new Array(x);for(var it=new Uint32Array(E.HEAPU32.buffer,e.getDrawableVertexPositions(b),x),Y=0;Y<it.length;Y++)this.vertexPositions[Y]=new Float32Array(E.HEAPF32.buffer,it[Y],$[Y]*2);x=e.getDrawableCount(b),$=new Int32Array(E.HEAP32.buffer,e.getDrawableVertexCounts(b),x),this.vertexUvs=new Array(x);for(var J=new Uint32Array(E.HEAPU32.buffer,e.getDrawableVertexUvs(b),x),Y=0;Y<J.length;Y++)this.vertexUvs[Y]=new Float32Array(E.HEAPF32.buffer,J[Y],$[Y]*2);x=e.getDrawableCount(b),$=new Int32Array(E.HEAP32.buffer,e.getDrawableIndexCounts(b),x),this.indices=new Array(x);for(var K=new Uint32Array(E.HEAPU32.buffer,e.getDrawableIndices(b),x),Y=0;Y<K.length;Y++)this.indices[Y]=new Uint16Array(E.HEAPU16.buffer,K[Y],$[Y])}return S.prototype.resetDynamicFlags=function(){e.resetDrawableDynamicFlags(this._modelPtr)},S}();t.Drawables=_;var y=function(){function S(){}return S.hasBlendAdditiveBit=function(b){return(b&1)==1},S.hasBlendMultiplicativeBit=function(b){return(b&2)==2},S.hasIsDoubleSidedBit=function(b){return(b&4)==4},S.hasIsInvertedMaskBit=function(b){return(b&8)==8},S.hasIsVisibleBit=function(b){return(b&1)==1},S.hasVisibilityDidChangeBit=function(b){return(b&2)==2},S.hasOpacityDidChangeBit=function(b){return(b&4)==4},S.hasDrawOrderDidChangeBit=function(b){return(b&8)==8},S.hasRenderOrderDidChangeBit=function(b){return(b&16)==16},S.hasVertexPositionsDidChangeBit=function(b){return(b&32)==32},S.hasBlendColorDidChangeBit=function(b){return(b&64)==64},S}();t.Utils=y;var I=function(){var S=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(b){b=b||{};var x,$,St={};for($ in x=x||(b!==void 0?b:{}))x.hasOwnProperty($)&&(St[$]=x[$]);var j,Y,Q,J=!1,it=typeof window=="object",Ot=typeof importScripts=="function",J=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&!it&&!Ot,K=!it&&!J&&!Ot,Tt="",yt=(J?(Tt=__dirname+"/",Y=function(at,pt){Ur(at)},Q=function(at){return ae((at=(at=Y(at,!0)).buffer?at:new Uint8Array(at)).buffer),at},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(at){throw at}),process.on("unhandledRejection",ue),x.inspect=function(){return"[Emscripten Module object]"}):K?(typeof read<"u"&&(Y=function(at){var pt=Ur(at);return pt?vt(pt):read(at)}),Q=function(at){var pt;if(!(pt=Ur(at))){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(at));ae(typeof(pt=read(at,"binary"))=="object")}return pt},typeof print<"u"&&((console=typeof console>"u"?{}:console).log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(it||Ot)&&(Ot?Tt=self.location.href:document.currentScript&&(Tt=document.currentScript.src),Tt=(Tt=S||Tt).indexOf("blob:")!==0?Tt.substr(0,Tt.lastIndexOf("/")+1):"",Y=function(at){try{var pt=new XMLHttpRequest;return pt.open("GET",at,!1),pt.send(null),pt.responseText}catch(Mt){if(at=Ur(at))return vt(at);throw Mt}},Ot&&(Q=function(at){try{var pt=new XMLHttpRequest;return pt.open("GET",at,!1),pt.responseType="arraybuffer",pt.send(null),new Uint8Array(pt.response)}catch(Mt){if(at=Ur(at))return at;throw Mt}}),j=function(at){var pt=Nt,Mt=Xe,ct=new XMLHttpRequest;ct.open("GET",pt,!0),ct.responseType="arraybuffer",ct.onload=function(){var Ae;ct.status==200||ct.status==0&&ct.response?Mt(ct.response):(Ae=Ur(pt))?Mt(Ae.buffer):at()},ct.onerror=at,ct.send(null)}),x.print||console.log.bind(console)),ft=x.printErr||console.warn.bind(console);for($ in St)St.hasOwnProperty($)&&(x[$]=St[$]);var St=null,wt=Array(1),Gt=0,oe=!1;function ae(at,pt){at||ue("Assertion failed: "+pt)}var Yt,Ht,he,Kt,ve=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function st(at,pt,Mt){var ct=pt+Mt;for(Mt=pt;at[Mt]&&!(ct<=Mt);)++Mt;if(16<Mt-pt&&at.subarray&&ve)return ve.decode(at.subarray(pt,Mt));for(ct="";pt<Mt;){var Ae,n,Jt=at[pt++];128&Jt?(Ae=63&at[pt++],(224&Jt)==192?ct+=String.fromCharCode((31&Jt)<<6|Ae):(n=63&at[pt++],(Jt=(240&Jt)==224?(15&Jt)<<12|Ae<<6|n:(7&Jt)<<18|Ae<<12|n<<6|63&at[pt++])<65536?ct+=String.fromCharCode(Jt):(Jt-=65536,ct+=String.fromCharCode(55296|Jt>>10,56320|1023&Jt)))):ct+=String.fromCharCode(Jt)}return ct}function Et(at,pt){return at?st(he,at,pt):""}function _t(at){return 0<at%16777216&&(at+=16777216-at%16777216),at}function le(at){Yt=at,x.HEAP8=Ht=new Int8Array(at),x.HEAP16=new Int16Array(at),x.HEAP32=Kt=new Int32Array(at),x.HEAPU8=he=new Uint8Array(at),x.HEAPU16=new Uint16Array(at),x.HEAPU32=new Uint32Array(at),x.HEAPF32=new Float32Array(at),x.HEAPF64=new Float64Array(at)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le"),it=x.TOTAL_MEMORY||16777216;function Ut(at){for(;0<at.length;){var pt,Mt=at.shift();typeof Mt=="function"?Mt():typeof(pt=Mt.C)=="number"?Mt.w===void 0?x.dynCall_v(pt):x.dynCall_vi(pt,Mt.w):pt(Mt.w===void 0?null:Mt.w)}}it=(Yt=x.buffer||new ArrayBuffer(it)).byteLength,le(Yt),Kt[1052]=5247296;var se=[],Re=[],qt=[],Ge=[];Math.imul&&Math.imul(4294967295,5)===-5||(Math.imul=function(at,pt){var Mt=65535&at,ct=65535&pt;return Mt*ct+((at>>>16)*ct+Mt*(pt>>>16)<<16)|0}),Math.clz32||(Math.clz32=function(at){var pt=32,Mt=at>>16;return Mt&&(pt-=16,at=Mt),(Mt=at>>8)&&(pt-=8,at=Mt),(Mt=at>>4)&&(pt-=4,at=Mt),(Mt=at>>2)&&(pt-=2,at=Mt),at>>1?pt-2:pt-at}),Math.trunc||(Math.trunc=function(at){return at<0?Math.ceil(at):Math.floor(at)});var _e=0,ce=null;function ue(at){throw x.onAbort&&x.onAbort(at),yt(at),ft(at),oe=!0,"abort("+at+"). Build with -s ASSERTIONS=1 for more info."}x.preloadedImages={},x.preloadedAudios={};var Nt=null,ie="data:application/octet-stream;base64,";function er(at){return at.replace(/\b__Z[\w\d_]+/g,function(pt){return pt==pt?pt:pt+" ["+pt+"]"})}function Pe(){var at=Error();if(!at.stack){try{throw Error(0)}catch(pt){at=pt}if(!at.stack)return"(no stack trace available)"}return at.stack.toString()}var Ce=[null,[],[]];function Er(at,pt){var Mt=Ce[at];pt===0||pt===10?((at===1?yt:ft)(st(Mt,0)),Mt.length=0):Mt.push(pt)}function qr(at,pt,Mt,ct){try{for(var Ae=0,n=0;n<Mt;n++){for(var Jt=Kt[pt+8*n>>2],pe=Kt[pt+(8*n+4)>>2],l=0;l<pe;l++)Er(at,he[Jt+l]);Ae+=pe}return Kt[ct>>2]=Ae,0}catch(f){return typeof FS<"u"&&f instanceof FS.A||ue(f),f.B}}function Ve(){return Ht.length}function hi(at){try{var pt=new ArrayBuffer(at);if(pt.byteLength==at)return new Int8Array(pt).set(Ht),Li(pt),le(pt),1}catch{}}var Mr=!(Nt="data:application/octet-stream;base64,AAAAAAAAAAARAAoAERERAAAAAAUAAAAAAAAJAAAAAAsAAAAAAAAAABEADwoREREDCgcAARMJCwsAAAkGCwAACwAGEQAAABEREQAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAARAAoKERERAAoAAAIACQsAAAAJAAsAAAsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAA0AAAAEDQAAAAAJDgAAAAAADgAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAPAAAAAA8AAAAACRAAAAAAABAAABAAABIAAAASEhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAABISEgAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAoAAAAACgAAAAAJCwAAAAAACwAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAwAAAAACQwAAAAAAAwAAAwAADAxMjM0NTY3ODlBQkNERUYFAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAABgKAAAABAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAK/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBbiBlcnJvciBvY2N1cnJlZCBpbiB0aGUgaW50ZXJwb2xhdGlvbiBmb3IgYmxlbmQgc2hhcGVzLiBDb21iaW5hdGlvbkNvdW50IGlzICVkLgBbQ1NNXSBbRV1XYXJwRGVmb3JtZXI6OlRyYW5zZm9ybVRhcmdldCgpIGVycm9yLiBbJWRdIHAwMT0oJS40ZiAsICUuNGYpCgBbQ1NNXSBbRV1Jbml0aWFsaXplRGVmb3JtZXJzKCk6IFVua25vd24gRGVmb3JtZXIgVHlwZS4KAExpdmUyRCBDdWJpc20gU0RLIENvcmUgVmVyc2lvbiAlZC4lZC4lZABNT0MzAFtDU01dIFtFXWNzbVJldml2ZU1vY0luUGxhY2UgaXMgZmFpbGVkLiBDb3JydXB0ZWQgIG1vYzMgZmlsZS4KAFtDU01dIFtFXWNzbVJldml2ZU1vY0luUGxhY2UgaXMgZmFpbGVkLiBUaGUgQ29yZSB1bnN1cHBvcnQgbGF0ZXIgdGhhbiBtb2MzIHZlcjpbJWRdLiBUaGlzIG1vYzMgdmVyIGlzIFslZF0uCgBbQ1NNXSBbRV1jc21HZXRNb2NWZXJzaW9uIGlzIGZhaWxlZC4gQ29ycnVwdGVkIG1vYzMgZmlsZS4KAFtDU01dIFtFXSVzOiAlcwoAY3NtR2V0TW9jVmVyc2lvbgAiYWRkcmVzcyIgaXMgbnVsbC4AY3NtUmV2aXZlTW9jSW5QbGFjZQAiYWRkcmVzcyIgYWxpZ25tZW50IGlzIGludmFsaWQuACJzaXplIiBpcyBpbnZhbGlkLgBjc21SZWFkQ2FudmFzSW5mbwAibW9kZWwiIGlzIGludmFsaWQuACJvdXRTaXplSW5QaXhlbHMiIGlzIG51bGwuACJvdXRPcmlnaW5JblBpeGVscyIgaXMgbnVsbC4AIm91dFBpeGVsc1BlclVuaXQiIGlzIG51bGwuAGNzbUdldFNpemVvZk1vZGVsACJtb2MiIGlzIGludmFsaWQuAGNzbUluaXRpYWxpemVNb2RlbEluUGxhY2UAInNpemUiIGlzIGludmFsaWQAY3NtVXBkYXRlTW9kZWwAY3NtR2V0UGFyYW1ldGVyQ291bnQAY3NtR2V0UGFyYW1ldGVySWRzAGNzbUdldFBhcmFtZXRlclR5cGVzAGNzbUdldFBhcmFtZXRlck1pbmltdW1WYWx1ZXMAY3NtR2V0UGFyYW1ldGVyTWF4aW11bVZhbHVlcwBjc21HZXRQYXJhbWV0ZXJEZWZhdWx0VmFsdWVzAGNzbUdldFBhcmFtZXRlclZhbHVlcwBjc21HZXRQYXJ0Q291bnQAY3NtR2V0UGFydElkcwBjc21HZXRQYXJ0T3BhY2l0aWVzAGNzbUdldFBhcnRQYXJlbnRQYXJ0SW5kaWNlcwBjc21HZXREcmF3YWJsZUNvdW50AGNzbUdldERyYXdhYmxlSWRzAGNzbUdldERyYXdhYmxlQ29uc3RhbnRGbGFncwBjc21HZXREcmF3YWJsZUR5bmFtaWNGbGFncwBjc21HZXREcmF3YWJsZVRleHR1cmVJbmRpY2VzAGNzbUdldERyYXdhYmxlRHJhd09yZGVycwBjc21HZXREcmF3YWJsZVJlbmRlck9yZGVycwBjc21HZXREcmF3YWJsZU9wYWNpdGllcwBjc21HZXREcmF3YWJsZU1hc2tDb3VudHMAY3NtR2V0RHJhd2FibGVNYXNrcwBjc21HZXREcmF3YWJsZVZlcnRleENvdW50cwBjc21HZXREcmF3YWJsZVZlcnRleFBvc2l0aW9ucwBjc21HZXREcmF3YWJsZVZlcnRleFV2cwBjc21HZXREcmF3YWJsZUluZGV4Q291bnRzAGNzbUdldERyYXdhYmxlSW5kaWNlcwBjc21HZXREcmF3YWJsZU11bHRpcGx5Q29sb3JzAGNzbUdldERyYXdhYmxlU2NyZWVuQ29sb3JzAGNzbUdldERyYXdhYmxlUGFyZW50UGFydEluZGljZXMAY3NtUmVzZXREcmF3YWJsZUR5bmFtaWNGbGFncwBjc21HZXRQYXJhbWV0ZXJLZXlDb3VudHMAY3NtR2V0UGFyYW1ldGVyS2V5VmFsdWVzAFtDU01dIFtXXVJvdGF0aW9uRGVmb3JtZXI6IE5vdCBmb3VuZCB0cmFuc2Zvcm1lZCBEaXJlY3Rpb24uCgBbQ1NNXSBbRV1VcGRhdGVEZWZvcm1lckhpZXJhcmNoeSgpOiBVbmtub3duIERlZm9ybWVyIFR5cGUuCgAlcwoALSsgICAwWDB4AChudWxsKQAtMFgrMFggMFgtMHgrMHggMHgAaW5mAElORgBuYW4ATkFOAC4=");function vt(at){for(var pt=[],Mt=0;Mt<at.length;Mt++){var ct=at[Mt];255<ct&&(Mr&&ae(!1,"Character code "+ct+" ("+String.fromCharCode(ct)+")  at offset "+Mt+" not in 0x00-0xFF."),ct&=255),pt.push(String.fromCharCode(ct))}return pt.join("")}var cn=typeof atob=="function"?atob:function(at){var pt="",Mt=0;at=at.replace(/[^A-Za-z0-9\+\/=]/g,"");do var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(at.charAt(Mt++)),Jt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(at.charAt(Mt++)),ct="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(at.charAt(Mt++)),Ae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(at.charAt(Mt++)),n=n<<2|Jt>>4,Jt=(15&Jt)<<4|ct>>2,pe=(3&ct)<<6|Ae;while(pt+=String.fromCharCode(n),ct!==64&&(pt+=String.fromCharCode(Jt)),Ae!==64&&(pt+=String.fromCharCode(pe)),Mt<at.length);return pt};function Ur(at){if(String.prototype.startsWith?at.startsWith(ie):at.indexOf(ie)===0){if(at=at.slice(ie.length),typeof J=="boolean"&&J){try{var pt=Buffer.from(at,"base64")}catch{pt=new Buffer(at,"base64")}var Mt=new Uint8Array(pt.buffer,pt.byteOffset,pt.byteLength)}else try{for(var ct=cn(at),Ae=new Uint8Array(ct.length),pt=0;pt<ct.length;++pt)Ae[pt]=ct.charCodeAt(pt);Mt=Ae}catch{throw Error("Converting base64 string to bytes failed.")}return Mt}}var Xe,dn,Zi,Ot=function(at,pt,Mt){var ct=new at.Int8Array(Mt),Ae=new at.Int16Array(Mt),n=new at.Int32Array(Mt),Jt=new at.Uint8Array(Mt),pe=new at.Uint16Array(Mt),l=new at.Float32Array(Mt),f=new at.Float64Array(Mt),T=0|pt.v,D=at.Math.floor,N=at.Math.pow,M=at.Math.cos,X=at.Math.sin,H=at.Math.atan2,U=at.Math.imul,z=at.Math.clz32,ot=pt.a,et=pt.b,rt=pt.c,gt=pt.d,At=pt.e,lt=pt.f,Pt=pt.g,bt=pt.h,Ct=pt.i,Rt=pt.j,ne=pt.k,kt=pt.l,Dt=pt.m,B=4416;function Ft(a){var u,g,C,P,p,w,R,A,v,O,L,k,q,G,W,V,F,tt,ht=0,Z=0,ut=0|n[(a|=0)+500>>2];if(!((0|ut)<=0)){R=0|n[a+504>>2],A=0|n[a+444>>2],g=0|n[a+536>>2],Z=0;do if(C=0|n[R+(24*Z|0)+12>>2],P=0|n[A+(n[R+(24*Z|0)+4>>2]<<2)>>2],p=0|n[A+(n[R+(24*Z|0)+8>>2]<<2)>>2],w=0|n[R+(24*Z|0)+16>>2],a=0|n[R+(24*Z|0)+20>>2],u=+l[g+(Z<<2)>>2],0<(0|C))for(ht=0;F=+l[w+(ht<<2)>>2],k=+l[w+((v=1|ht)<<2)>>2],V=(0|pe[a+(ht<<1)>>1])<<1&65534,W=+l[(tt=P+(V<<2)|0)>>2],L=+l[(V=P+((1|V)<<2)|0)>>2],v=(0|pe[a+(v<<1)>>1])<<1&65534,G=+l[(q=p+(v<<2)|0)>>2],O=+l[(v=p+((1|v)<<2)|0)>>2],l[tt>>2]=W+F*(G-W)*u,l[V>>2]=L+F*(O-L)*u,l[q>>2]=G+k*(W-G)*u,l[v>>2]=O+k*(L-O)*u,(0|(ht=ht+2|0))<(0|C););while((0|(Z=Z+1|0))!=(0|ut))}}function je(a){var u=0|n[(a|=0)>>2];(0|Jt[4+u>>0])<4||rr(a,0|n[a+596>>2],0|n[a+600>>2],0|n[984+u>>2],0|n[a+152>>2],0|n[796+u>>2])}function rr(a,u,g,C,P,p){a|=0,C|=0,P|=0,p|=0;var w,R,A,v,O,L,k,q,G,W=0,V=0,F=0,tt=0,ht=0,Z=B;if(B=B+16|0,q=Z+8|0,k=Z,L=(g|=0)+(12*(u|=0)|0)|0,(0|u)<=0)B=Z;else{do{u=0|n[g>>2],R=0|n[P+(u<<2)>>2],v=(u=0|n[p+(u<<2)>>2])<<1,ht=0|n[g+4>>2],W=0|n[g+8>>2],A=0|n[1028+(0|n[a>>2])>>2],O=W+(48*ht|0)|0;t:do if(0<(0|ht)){if((0|u)<=0){for(;;)if(3<=(u=0|n[W+8>>2])>>>0&&(n[q>>2]=u,zt(0,784,q)),O>>>0<=(W=W+48|0)>>>0)break t}do{V=C+(n[W+4>>2]<<2)|0,u=0|n[W+8>>2];e:do if(0|u)switch(ht=A+(n[V+(n[W+12>>2]<<2)>>2]<<2)|0,0|u){case 1:for(V=W+20|0,u=W+44|0,F=0;l[(tt=R+(F<<2)|0)>>2]=+l[tt>>2]+ +l[u>>2]*(+l[ht+(F<<2)>>2]*+l[V>>2]),(0|(F=F+1|0))!=(0|v););break;case 2:for(V=A+(n[V+(n[W+16>>2]<<2)>>2]<<2)|0,F=W+20|0,w=W+24|0,u=W+44|0,tt=0;l[(G=R+(tt<<2)|0)>>2]=+l[G>>2]+ +l[u>>2]*(+l[ht+(tt<<2)>>2]*+l[F>>2]+ +l[V+(tt<<2)>>2]*+l[w>>2]),(0|(tt=tt+1|0))!=(0|v););break;default:n[k>>2]=u,zt(0,784,k);break e}while(0)}while((W=W+48|0)>>>0<O>>>0)}while(0)}while((g=g+12|0)>>>0<L>>>0);B=Z}}function Qe(a){var u=0|n[(a|=0)>>2];(0|Jt[4+u>>0])<4||rr(a,0|n[a+604>>2],0|n[a+608>>2],0|n[1024+u>>2],0|n[a+444>>2],0|n[892+u>>2])}function zt(a,u,g){a|=0,u|=0,g|=0;var C,P,p=B;B=B+272|0,a=p+16|0,P=p,B=((C=0|n[904])&&(n[P>>2]=g,$i(a,u,P),$0[1&C](a)),p)}function ge(a,u,g){g|=0;var C,P=0,p=0,w=0,R=0,A=0,v=0,O=0,L=0,q=0,k=0,q=0|ct[(a|=0)+4>>0];if(n[(u|=0)>>2]=628,k=0|n[(L=a+704|0)>>2],0<(0|(A=0|n[k>>2]))){for(P=0|n[a+1048>>2],p=0|n[a+720>>2],R=w=0;R=(1<<n[P+(n[p+(w<<2)>>2]<<2)>>2])+R|0,(0|(w=w+1|0))!=(0|A););P=R<<2}else P=0;if(n[u+4>>2]=12*A,n[u+8>>2]=n[k>>2]<<2,n[u+12>>2]=n[k>>2]<<2,n[u+16>>2]=n[k>>2]<<2,n[u+20>>2]=n[k>>2]<<2,n[u+24>>2]=n[k>>2]<<2,n[u+28>>2]=P,n[u+32>>2]=n[k>>2]<<2,n[u+36>>2]=P,n[u+40>>2]=P,n[u+44>>2]=n[(C=k+4|0)>>2]<<5,n[u+48>>2]=n[C>>2]<<2,n[u+52>>2]=n[C>>2]<<2,n[u+56>>2]=n[C>>2]<<2,n[u+60>>2]=n[C>>2]<<4,n[u+64>>2]=n[C>>2]<<4,0<(0|(O=0|n[(C=k+8|0)>>2]))){for(p=0|n[a+796>>2],w=0|n[a+1048>>2],R=0|n[a+780>>2],P=v=A=0;P=(15+(n[p+(A<<2)>>2]<<3)&-16)+P|0,v=(1<<n[w+(n[R+(A<<2)>>2]<<2)>>2])+v|0,(0|(A=A+1|0))!=(0|O););p=v<<2}else P=p=0;if(n[u+68>>2]=24*O,n[u+72>>2]=n[C>>2]<<2,n[u+76>>2]=n[C>>2]<<2,n[u+80>>2]=n[C>>2]<<2,n[u+84>>2]=P,n[u+88>>2]=n[C>>2]<<4,n[u+92>>2]=n[C>>2]<<4,n[u+96>>2]=n[C>>2]<<2,n[u+100>>2]=p,n[u+104>>2]=n[C>>2]<<2,n[u+108>>2]=p,n[u+112>>2]=p,n[u+116>>2]=p,n[u+120>>2]=p,n[u+124>>2]=p,n[u+128>>2]=p,n[u+132>>2]=p,n[u+136>>2]=p,n[u+140>>2]=p,n[u+144>>2]=n[C>>2]<<2,n[u+148>>2]=n[C>>2]<<2,n[u+152>>2]=n[C>>2]<<2,n[u+156>>2]=n[C>>2]<<2,n[u+160>>2]=n[C>>2]<<2,n[u+164>>2]=n[C>>2]<<2,0<(0|(A=0|n[(v=k+12|0)>>2]))){for(P=0|n[a+1048>>2],p=0|n[a+812>>2],R=w=0;R=(1<<n[P+(n[p+(w<<2)>>2]<<2)>>2])+R|0,(0|(w=w+1|0))!=(0|A););P=R<<2}else P=0;if(n[u+168>>2]=12*A,n[u+172>>2]=n[v>>2]<<2,n[u+176>>2]=n[v>>2]<<2,n[u+180>>2]=n[v>>2]<<2,n[u+184>>2]=n[v>>2]<<2,n[u+188>>2]=n[v>>2]<<2,n[u+192>>2]=n[v>>2]<<2,n[u+196>>2]=n[v>>2]<<2,n[u+200>>2]=n[v>>2]<<2,n[u+204>>2]=n[v>>2]<<4,n[u+208>>2]=n[v>>2]<<4,n[u+212>>2]=n[v>>2]<<2,n[u+216>>2]=P,n[u+220>>2]=n[v>>2]<<2,n[u+224>>2]=P,n[u+228>>2]=P,n[u+232>>2]=P,n[u+236>>2]=P,n[u+240>>2]=P,n[u+244>>2]=P,n[u+248>>2]=P,n[u+252>>2]=P,n[u+256>>2]=P,n[u+260>>2]=P,n[u+264>>2]=P,n[u+268>>2]=P,n[u+272>>2]=n[v>>2]<<2,n[u+276>>2]=n[v>>2]<<2,n[u+280>>2]=n[v>>2]<<2,n[u+284>>2]=n[v>>2]<<2,n[u+288>>2]=n[v>>2]<<2,n[u+292>>2]=n[v>>2]<<2,0<(0|(O=0|n[(C=k+16|0)>>2]))){for(p=0|n[a+892>>2],w=0|n[a+1048>>2],R=0|n[a+852>>2],P=v=A=0;P=(15+(n[p+(A<<2)>>2]<<3)&-16)+P|0,v=(1<<n[w+(n[R+(A<<2)>>2]<<2)>>2])+v|0,(0|(A=A+1|0))!=(0|O););p=v<<2}else P=p=0;if(n[u+296>>2]=20*O,n[u+300>>2]=n[C>>2]<<2,n[u+304>>2]=n[C>>2],n[u+308>>2]=n[C>>2]<<2,n[u+312>>2]=n[C>>2]<<2,n[u+316>>2]=n[C>>2]<<2,n[u+320>>2]=P,n[u+324>>2]=n[C>>2]<<2,n[u+328>>2]=n[C>>2]<<4,n[u+332>>2]=n[C>>2]<<4,n[u+336>>2]=n[C>>2]<<2,n[u+340>>2]=n[C>>2]<<2,n[u+344>>2]=n[C>>2]<<2,n[u+348>>2]=n[C>>2]<<4,n[u+352>>2]=n[C>>2]<<4,n[u+356>>2]=n[C>>2]<<2,n[u+360>>2]=p,n[u+364>>2]=n[C>>2]<<2,n[u+368>>2]=p,n[u+372>>2]=p,n[u+376>>2]=p,n[u+380>>2]=p,n[u+384>>2]=p,n[u+388>>2]=p,n[u+392>>2]=p,n[u+396>>2]=p,n[u+400>>2]=p,n[u+404>>2]=p,n[u+408>>2]=n[C>>2]<<2,n[u+412>>2]=n[C>>2]<<2,n[u+416>>2]=n[C>>2]<<2,n[u+420>>2]=n[C>>2]<<2,n[u+424>>2]=n[C>>2]<<2,n[u+428>>2]=n[C>>2]<<2,L=0|n[L>>2],n[u+432>>2]=52*(0|n[(p=L+20|0)>>2]),P=(C=3<(255&q))?0:n[p>>2]<<2,n[u+436>>2]=P,n[u+440>>2]=n[p>>2]<<2,n[u+444>>2]=28*(0|n[L+52>>2]),0<(0|(A=0|n[k+48>>2]))){for(P=0|n[a+1048>>2],R=w=p=0;w=(q=0|n[P+(p<<2)>>2])+w|0,R=(1<<q)+R|0,(0|(p=p+1|0))!=(0|A););p=w<<2,P=R<<2}else P=p=0;if(n[u+448>>2]=36*A,n[u+452>>2]=p,n[u+456>>2]=P,n[u+460>>2]=P,n[u+488>>2]=28*(0|n[(p=k+72|0)>>2]),0<(0|(p=0|n[p>>2]))){for(w=0|n[a+1152>>2],R=0|n[a+1160>>2],P=0|n[a+1164>>2],O=v=A=0;v=(0|v)<(0|(q=0|n[w+(A<<2)>>2]))?q:v,O=(0|(q=(0|n[R+(A<<2)>>2])-(0|n[P+(A<<2)>>2])|0))<(0|O)?O:q+1|0,(0|(A=A+1|0))!=(0|p););p=v<<2,P=O<<2}else P=p=0;if(n[u+492>>2]=n[k+76>>2]<<4,n[u+496>>2]=P,n[u+500>>2]=p,n[u+504>>2]=P,0<(0|(A=0|n[(v=k+80|0)>>2]))){for(P=0|n[a+1048>>2],p=0|n[a+1188>>2],R=w=0;R=(1<<n[P+(n[p+(w<<2)>>2]<<2)>>2])+R|0,(0|(w=w+1|0))!=(0|A););P=R<<2}else P=0;if(n[u+508>>2]=24*A,n[u+512>>2]=n[v>>2]<<2,n[u+516>>2]=n[v>>2]<<2,n[u+520>>2]=P,n[u+524>>2]=n[v>>2]<<2,n[u+528>>2]=P,n[u+532>>2]=P,C){if(n[u+464>>2]=20*(0|n[L+120>>2]),n[u+468>>2]=28*(0|n[L+100>>2]),0<(0|(R=0|n[k+104>>2]))){for(P=0|n[a+1080>>2],w=p=0;w=(0|n[P+(p<<2)>>2])+w|0,(0|(p=p+1|0))!=(0|R););P=w<<2}else P=0;n[u+472>>2]=48*R,n[u+476>>2]=P,n[u+480>>2]=12*(0|n[L+108>>2]),n[u+484>>2]=12*(0|n[L+112>>2]),P=p=n[u+540>>2]=0}else{if(0<(0|(C=0|n[(L=k+20|0)>>2]))){v=0|n[a+948>>2],O=0|n[a+952>>2],R=0|n[a+1036>>2],P=A=0;do if(a=0|n[O+(A<<2)>>2],w=(p=R+(n[v+(A<<2)>>2]<<2)|0)+(a<<2)|0,0<(0|a))for(;P=(0|n[p>>2])+P|0,(p=p+4|0)>>>0<w>>>0;);while((0|(A=A+1|0))!=(0|C))}else P=0;n[u+540>>2]=C<<2,p=P<<2,P=n[L>>2]<<2}for(n[u+536>>2]=P,n[u+544>>2]=p,p=P=0;p=(a=15+(0|n[(k=u+(P<<2)|0)>>2])&-16)+(n[k>>2]=p)|0,(0|(P=P+1|0))!=137;);n[g>>2]=p}function me(a,u,g){a|=0,u|=0,g|=0;var C,P,p,w,R,A,v=0,O=0,L=0,k=0,q=0,G=0,W=0,V=0,F=0,tt=0,ht=0,Z=0,ut=0,xt=0,Xt=0,Qt=0,It=0,Wt=0,Vt=0,dt=0,$t=0,Zt=0,Bt=0,$e=0,Oe=0,we=0,lr=0,nr=0,Ze=0,Ue=0,ur=0,Ar=0,Je=0,or=0,Ee=0,Le=0,nt=0,Nr=B;if(B=B+560|0,Bt=Nr+552|0,v=(F=Nr)+556|0,di(0|F,0,548),ge(a,F,v),g>>>0<(v=0|n[v>>2])>>>0)return B=Nr,(nt=0)|nt;if(di(0|u,0,0|v),nt=u+(0|n[F>>2])|0,n[(P=nt+8|0)>>2]=u+(0|n[F+4>>2]),n[nt+40>>2]=u+(0|n[F+8>>2]),n[nt+44>>2]=u+(0|n[F+12>>2]),n[nt+48>>2]=u+(0|n[F+16>>2]),n[($t=nt+52|0)>>2]=u+(0|n[F+20>>2]),n[(Zt=nt+16|0)>>2]=u+(0|n[F+24>>2]),n[nt+24>>2]=u+(0|n[F+28>>2]),n[nt+28>>2]=u+(0|n[F+32>>2]),n[nt+32>>2]=u+(0|n[F+36>>2]),n[nt+36>>2]=u+(0|n[F+40>>2]),L=0|n[(Le=a+704|0)>>2],n[(p=nt+308|0)>>2]=u+(0|n[F+44>>2]),n[nt+312>>2]=u+(0|n[F+48>>2]),n[nt+316>>2]=u+(0|n[F+52>>2]),n[nt+320>>2]=u+(0|n[F+56>>2]),n[nt+324>>2]=u+(0|n[F+60>>2]),n[nt+328>>2]=u+(0|n[F+64>>2]),n[(we=nt+60|0)>>2]=u+(0|n[F+68>>2]),n[nt+144>>2]=u+(0|n[F+72>>2]),n[nt+148>>2]=u+(0|n[F+76>>2]),v=u+(0|n[F+80>>2])|0,n[(k=nt+152|0)>>2]=v,0<(0|(L=0|n[L+8>>2]))&&(q=u+(0|n[F+84>>2])|0,G=a+796|0,n[v>>2]=q,(0|L)!=1))for(v=0,O=1,g=q;g=g+(15+(n[(0|n[G>>2])+(v<<2)>>2]<<3)&-16)|0,n[(0|n[k>>2])+(O<<2)>>2]=g,!((0|L)<=(0|(v=O+1|0)));)or=O,O=v,v=or;if(n[nt+156>>2]=u+(0|n[F+88>>2]),n[nt+160>>2]=u+(0|n[F+92>>2]),n[($e=nt+68|0)>>2]=u+(0|n[F+96>>2]),n[nt+76>>2]=u+(0|n[F+100>>2]),n[nt+80>>2]=u+(0|n[F+104>>2]),n[nt+84>>2]=u+(0|n[F+108>>2]),n[nt+88>>2]=u+(0|n[F+112>>2]),n[nt+92>>2]=u+(0|n[F+116>>2]),n[nt+96>>2]=u+(0|n[F+120>>2]),n[nt+100>>2]=u+(0|n[F+124>>2]),n[nt+104>>2]=u+(0|n[F+128>>2]),n[nt+108>>2]=u+(0|n[F+132>>2]),n[nt+112>>2]=u+(0|n[F+136>>2]),n[nt+116>>2]=u+(0|n[F+140>>2]),n[nt+120>>2]=u+(0|n[F+144>>2]),n[nt+124>>2]=u+(0|n[F+148>>2]),n[nt+128>>2]=u+(0|n[F+152>>2]),n[nt+132>>2]=u+(0|n[F+156>>2]),n[nt+136>>2]=u+(0|n[F+160>>2]),n[nt+140>>2]=u+(0|n[F+164>>2]),n[(w=nt+168|0)>>2]=u+(0|n[F+168>>2]),n[nt+264>>2]=u+(0|n[F+172>>2]),n[nt+268>>2]=u+(0|n[F+176>>2]),n[nt+272>>2]=u+(0|n[F+180>>2]),n[nt+276>>2]=u+(0|n[F+184>>2]),n[nt+280>>2]=u+(0|n[F+188>>2]),n[nt+284>>2]=u+(0|n[F+192>>2]),n[nt+288>>2]=u+(0|n[F+196>>2]),n[nt+292>>2]=u+(0|n[F+200>>2]),n[nt+296>>2]=u+(0|n[F+204>>2]),n[nt+300>>2]=u+(0|n[F+208>>2]),n[(Oe=nt+176|0)>>2]=u+(0|n[F+212>>2]),n[nt+184>>2]=u+(0|n[F+216>>2]),n[nt+188>>2]=u+(0|n[F+220>>2]),n[nt+192>>2]=u+(0|n[F+224>>2]),n[nt+196>>2]=u+(0|n[F+228>>2]),n[nt+200>>2]=u+(0|n[F+232>>2]),n[nt+204>>2]=u+(0|n[F+236>>2]),n[nt+208>>2]=u+(0|n[F+240>>2]),n[nt+212>>2]=u+(0|n[F+244>>2]),n[nt+216>>2]=u+(0|n[F+248>>2]),n[nt+220>>2]=u+(0|n[F+252>>2]),n[nt+224>>2]=u+(0|n[F+256>>2]),n[nt+228>>2]=u+(0|n[F+260>>2]),n[nt+232>>2]=u+(0|n[F+264>>2]),n[nt+236>>2]=u+(0|n[F+268>>2]),n[nt+240>>2]=u+(0|n[F+272>>2]),n[nt+244>>2]=u+(0|n[F+276>>2]),n[nt+248>>2]=u+(0|n[F+280>>2]),n[nt+252>>2]=u+(0|n[F+284>>2]),n[nt+256>>2]=u+(0|n[F+288>>2]),n[nt+260>>2]=u+(0|n[F+292>>2]),L=0|n[Le>>2],n[(nr=nt+336|0)>>2]=u+(0|n[F+296>>2]),n[nt+424>>2]=u+(0|n[F+300>>2]),n[nt+432>>2]=u+(0|n[F+304>>2]),n[nt+436>>2]=u+(0|n[F+308>>2]),n[nt+440>>2]=u+(0|n[F+312>>2]),v=u+(0|n[F+316>>2])|0,n[(k=nt+444|0)>>2]=v,0<(0|(L=0|n[L+16>>2]))&&(W=u+(0|n[F+320>>2])|0,V=a+892|0,n[v>>2]=W,(0|L)!=1))for(v=0,O=1,g=W;g=g+(15+(n[(0|n[V>>2])+(v<<2)>>2]<<3)&-16)|0,n[(0|n[k>>2])+(O<<2)>>2]=g,!((0|L)<=(0|(v=O+1|0)));)or=O,O=v,v=or;if(n[nt+448>>2]=u+(0|n[F+324>>2]),n[(Ze=nt+452|0)>>2]=u+(0|n[F+328>>2]),n[(Ue=nt+456|0)>>2]=u+(0|n[F+332>>2]),n[nt+460>>2]=u+(0|n[F+336>>2]),n[nt+464>>2]=u+(0|n[F+340>>2]),n[nt+468>>2]=u+(0|n[F+344>>2]),n[nt+472>>2]=u+(0|n[F+348>>2]),n[nt+476>>2]=u+(0|n[F+352>>2]),n[(lr=nt+344|0)>>2]=u+(0|n[F+356>>2]),n[nt+352>>2]=u+(0|n[F+360>>2]),n[nt+356>>2]=u+(0|n[F+364>>2]),n[nt+360>>2]=u+(0|n[F+368>>2]),n[nt+364>>2]=u+(0|n[F+372>>2]),n[nt+368>>2]=u+(0|n[F+376>>2]),n[nt+372>>2]=u+(0|n[F+380>>2]),n[nt+376>>2]=u+(0|n[F+384>>2]),n[nt+380>>2]=u+(0|n[F+388>>2]),n[nt+384>>2]=u+(0|n[F+392>>2]),n[nt+388>>2]=u+(0|n[F+396>>2]),n[nt+392>>2]=u+(0|n[F+400>>2]),n[nt+396>>2]=u+(0|n[F+404>>2]),n[nt+400>>2]=u+(0|n[F+408>>2]),n[nt+404>>2]=u+(0|n[F+412>>2]),n[nt+408>>2]=u+(0|n[F+416>>2]),n[nt+412>>2]=u+(0|n[F+420>>2]),n[nt+416>>2]=u+(0|n[F+424>>2]),n[nt+420>>2]=u+(0|n[F+428>>2]),Vt=0|n[F+436>>2],C=0|n[F+440>>2],n[(or=nt+544|0)>>2]=u+(0|n[F+432>>2]),n[(dt=nt+548|0)>>2]=u+Vt,n[(Vt=nt+552|0)>>2]=u+C,n[(C=nt+560|0)>>2]=u+(0|n[F+444>>2]),v=0|n[Le>>2],L=u+(0|n[F+448>>2])|0,n[(Je=nt+568|0)>>2]=L,0<(0|(v=0|n[v+48>>2])))for(g=0|n[a+1048>>2],k=u+(0|n[F+452>>2])|0,G=u+((q=0)|n[F+456>>2])|0,V=u+(0|n[F+460>>2])|0;n[L+(36*q|0)>>2]=k,n[L+(36*q|0)+16>>2]=G,n[L+(36*q|0)+20>>2]=V,W=1<<(O=0|n[g+(q<<2)>>2]),(0|(q=q+1|0))!=(0|v);)k=k+(O<<2)|0,G=G+(W<<2)|0,V=V+(W<<2)|0;if(v=0|n[Le>>2],O=u+(0|n[F+488>>2])|0,n[(R=nt+484|0)>>2]=O,0<(0|(v=0|n[v+72>>2])))for(g=0|n[a+1152>>2],k=u+((L=0)|n[F+492>>2])|0;k=(n[O+(28*L|0)+12>>2]=k)+(n[g+(L<<2)>>2]<<4)|0,(0|(L=L+1|0))!=(0|v););if(n[nt+488>>2]=u+(0|n[F+496>>2]),n[nt+492>>2]=u+(0|n[F+500>>2]),n[nt+496>>2]=u+(0|n[F+504>>2]),n[(ur=nt+504|0)>>2]=u+(0|n[F+508>>2]),n[nt+536>>2]=u+(0|n[F+512>>2]),n[(Ar=nt+512|0)>>2]=u+(0|n[F+516>>2]),n[nt+520>>2]=u+(0|n[F+520>>2]),n[nt+524>>2]=u+(0|n[F+524>>2]),n[nt+528>>2]=u+(0|n[F+528>>2]),n[nt+532>>2]=u+(0|n[F+532>>2]),Wt=3<(0|Jt[(A=a+4|0)>>0])){if(n[nt+576>>2]=u+(0|n[F+464>>2]),n[nt+584>>2]=u+(0|n[F+468>>2]),v=0|n[F+476>>2],L=0|n[Le>>2],q=u+(0|n[F+472>>2])|0,n[nt+592>>2]=q,0<(0|(L=0|n[L+104>>2])))for(k=0|n[a+1080>>2],v=u+v|0,g=0;n[q+(48*g|0)+40>>2]=v,(0|(O=g+1|0))!=(0|L);)v=v+(n[k+(g<<2)>>2]<<2)|0,g=O;n[nt+600>>2]=u+(0|n[F+480>>2]),n[nt+608>>2]=u+(0|n[F+484>>2]),g=0|n[Le>>2],v=0|n[g+20>>2]}else if(g=0|n[F+536>>2],O=0|n[F+544>>2],n[nt+616>>2]=u+(0|n[F+540>>2]),n[(F=nt+612|0)>>2]=u+g,g=0|n[Le>>2],0<(0|(v=0|n[g+20>>2])))for(G=a+948|0,W=a+952|0,q=a+1036|0,k=u+O|(V=0);;){if(v=0|n[(0|n[G>>2])+(V<<2)>>2],O=(It=0|n[(0|n[W>>2])+(V<<2)>>2])+v|0,0<(0|It)){for(g=0|n[q>>2],L=0;L=(0|n[g+(v<<2)>>2])+L|0,(0|(v=v+1|0))<(0|O););v=(0|n[F>>2])+(V<<2)|0,L?(g=k,O=L):Ee=27}else v=(0|n[F>>2])+(V<<2)|0,Ee=27;if((0|Ee)==27&&(O=g=Ee=0),n[v>>2]=g,g=0|n[Le>>2],(0|(v=0|n[g+20>>2]))<=(0|(V=V+1|0)))break;k=k+(O<<2)|0}n[nt>>2]=a,n[nt+620>>2]=1,n[nt+624>>2]=1&ct[20+(0|n[a+708>>2])>>0],k=(n[nt+540>>2]=v)+-1|0;t:do if(0<(0|v)){if(u=0|n[or>>2],tt=0|n[a+928>>2],ht=0|n[a+924>>2],ut=0|n[a+936>>2],xt=0|n[a+932>>2],Xt=0|n[a+940>>2],Qt=0|n[a+952>>2],It=a+948|0,F=0|n[Vt>>2],V=nt+584|0,W=a+956|0,!Wt)for(;;){if(n[u+(52*k|0)>>2]=0,n[u+(52*k|0)+4>>2]=n[(O=tt+(k<<2)|0)>>2],n[u+(52*k|0)+8>>2]=n[(Vt=ht+(k<<2)|0)>>2],l[u+(52*k|0)+12>>2]=+l[Vt>>2]-+l[O>>2],n[u+(52*k|0)+16>>2]=n[ut+(k<<2)>>2],n[u+(52*k|0)+44>>2]=n[(O=xt+(k<<2)|0)>>2],Z=+N(.10000000149011612,0|n[Xt+(k<<2)>>2]),l[u+(52*k|0)+20>>2]=Z,l[u+(52*k|0)+24>>2]=1.5*Z,Vt=0|n[Qt+(k<<2)>>2],L=(n[u+(52*k|0)+32>>2]=Vt)?(0|n[C>>2])+(28*(0|n[(0|n[It>>2])+(k<<2)>>2])|0)|0:0,n[u+(52*k|0)+28>>2]=L,n[u+(52*k|0)+48>>2]=1,n[F+(k<<2)>>2]=n[O>>2],!(0<(0|k)))break t;k=k+-1|0}for(q=0|n[a+944>>2],G=0|n[a+960>>2];n[u+(52*k|0)>>2]=n[q+(k<<2)>>2],n[u+(52*k|0)+4>>2]=n[(L=tt+(k<<2)|0)>>2],n[u+(52*k|0)+8>>2]=n[(Vt=ht+(k<<2)|0)>>2],l[u+(52*k|0)+12>>2]=+l[Vt>>2]-+l[L>>2],n[u+(52*k|0)+16>>2]=n[ut+(k<<2)>>2],n[u+(52*k|0)+44>>2]=n[(L=xt+(k<<2)|0)>>2],Z=+N(.10000000149011612,0|n[Xt+(k<<2)>>2]),l[u+(52*k|0)+20>>2]=Z,l[u+(52*k|0)+24>>2]=1.5*Z,Vt=0|n[Qt+(k<<2)>>2],O=(n[u+(52*k|0)+32>>2]=Vt)?(0|n[C>>2])+(28*(0|n[(0|n[It>>2])+(k<<2)>>2])|0)|0:0,n[u+(52*k|0)+28>>2]=O,Vt=0|n[G+(k<<2)>>2],O=(n[u+(52*k|0)+40>>2]=Vt)?(0|n[V>>2])+(28*(0|n[(0|n[W>>2])+(k<<2)>>2])|0)|0:0,n[u+(52*k|0)+36>>2]=O,n[u+(52*k|0)+48>>2]=1,n[F+(k<<2)>>2]=n[L>>2],0<(0|k);)k=k+-1|0}while(0);if(Wt?(n[dt>>2]=n[a+944>>2],q=g,G=a):(di(0|n[dt>>2],0,v<<2|0),G=0|n[nt>>2],q=0|n[G+704>>2]),v=0|n[q+52>>2],0<(0|(n[nt+556>>2]=v)))for(g=0|n[C>>2],O=0|n[G+1036>>2],L=0|n[G+1132>>2],k=0|n[G+1032>>2];n[g+(28*(v=(dt=v)+-1|0)|0)>>2]=n[O+(v<<2)>>2],n[g+(28*v|0)+4>>2]=L+(n[k+(v<<2)>>2]<<2),n[g+(28*v|0)+8>>2]=0,l[g+(28*v|0)+12>>2]=0,n[g+(28*v|0)+16>>2]=0,n[g+(28*v|0)+20>>2]=1,(n[g+(28*v|0)+24>>2]=1)<(0|dt););if(v=0|n[q+48>>2],0<(0|(n[nt+564>>2]=v))){W=G+1048|0,V=G+1040|0,G=G+1044|0;do if(q=v,g=0|n[Je>>2],O=0|n[(0|n[W>>2])+((v=v+-1|0)<<2)>>2],0<(0|(n[g+(36*v|0)+4>>2]=O)))for(L=g+(36*v|0)|0,k=0;n[(0|n[L>>2])+(k<<2)>>2]=(0|n[C>>2])+(28*(0|n[(0|n[V>>2])+((0|n[(0|n[G>>2])+(v<<2)>>2])+k<<2)>>2])|0),(0|(k=k+1|0))!=(0|O););while(n[g+(36*v|0)+8>>2]=1<<O,n[g+(36*v|0)+24>>2]=1,(n[g+(36*v|0)+28>>2]=1)<(0|q));tt=0|n[nt>>2],q=0|n[tt+704>>2]}else tt=G;if(g=0|n[q>>2],0<(0|(n[(u=nt+4|0)>>2]=g))){for(L=0|n[P>>2],V=0|n[Je>>2],F=0|n[tt+720>>2],k=0|n[tt+740>>2],G=0|n[tt+736>>2],W=0|n[tt+732>>2],v=0|n[$t>>2],O=g;n[L+(12*(O=($t=O)+-1|0)|0)>>2]=V+(36*(0|n[F+(O<<2)>>2])|0),n[L+(12*O|0)+4>>2]=n[k+(O<<2)>>2],n[L+(12*O|0)+8>>2]=n[G+(O<<2)>>2],l[v+(O<<2)>>2]=0|n[W+(O<<2)>>2]?1:0,1<(0|$t););for(O=0|n[Zt>>2],v=0;$t=0|n[V+(36*(0|n[F+((g=(Zt=g)+-1|0)<<2)>>2])|0)+8>>2],v=(n[O+(g<<2)>>2]=$t)+v|0,1<(0|Zt););g=0|n[u>>2]}else v=0;if(n[nt+20>>2]=v,n[nt+12>>2]=g,v=0|n[q+4>>2],0<(0|(n[nt+304>>2]=v))){G=tt+752|0,V=tt+764|0,W=tt+768|0,q=tt+772|0,F=tt+776|0,k=tt+760|0;do switch(L=v,g=0|n[p>>2],n[g+((v=v+-1|0)<<5)>>2]=(0|n[Je>>2])+(36*(0|n[(0|n[G>>2])+(v<<2)>>2])|0),n[g+(v<<5)+4>>2]=n[(0|n[V>>2])+(v<<2)>>2],n[g+(v<<5)+8>>2]=n[(0|n[W>>2])+(v<<2)>>2],Zt=0|n[(0|n[q>>2])+(v<<2)>>2],n[g+(v<<5)+12>>2]=Zt,O=0|n[(0|n[F>>2])+(v<<2)>>2],n[g+(v<<5)+16>>2]=O,n[g+(v<<5)+28>>2]=n[(0|n[k>>2])+(v<<2)>>2],0|Zt){case 0:n[(0|n[we>>2])+(24*O|0)+20>>2]=v,n[g+(v<<5)+20>>2]=2,n[g+(v<<5)+24>>2]=2;break;case 1:n[(0|n[w>>2])+(12*O|0)+8>>2]=v,n[g+(v<<5)+20>>2]=3,n[g+(v<<5)+24>>2]=3;break;default:zt(0,937,Bt)}while(1<(0|L));dt=0|n[nt>>2],Wt=0|n[dt+704>>2]}else Wt=q,dt=tt;if(O=0|n[Wt+8>>2],v=(n[(u=nt+56|0)>>2]=O)+-1|0,F=0<(0|O))if(L=0|n[we>>2],k=0|n[Je>>2],q=0|n[dt+780>>2],G=0|n[dt+800>>2],W=0|n[dt+804>>2],V=0|n[dt+796>>2],1<(0|Jt[dt+4>>0]))for(g=0|n[dt+808>>2];n[L+(24*v|0)>>2]=k+(36*(0|n[q+(v<<2)>>2])|0),n[L+(24*v|0)+4>>2]=n[G+(v<<2)>>2],n[L+(24*v|0)+8>>2]=n[W+(v<<2)>>2],n[L+(24*v|0)+16>>2]=n[V+(v<<2)>>2],n[L+(24*v|0)+12>>2]=n[g+(v<<2)>>2],0<(0|v);)v=v+-1|0;else for(;n[L+(24*v|0)>>2]=k+(36*(0|n[q+(v<<2)>>2])|0),n[L+(24*v|0)+4>>2]=n[G+(v<<2)>>2],n[L+(24*v|0)+8>>2]=n[W+(v<<2)>>2],n[L+(24*v|0)+16>>2]=n[V+(v<<2)>>2],(n[L+(24*v|0)+12>>2]=0)<(0|v);)v=v+-1|0;if(g=0|n[Wt+12>>2],0<(0|(n[(W=nt+164|0)>>2]=g)))for(v=0|n[w>>2],L=0|n[Je>>2],k=0|n[dt+812>>2],q=0|n[dt+828>>2],G=g;n[v+(12*(G=(Bt=G)+-1|0)|0)>>2]=L+(36*(0|n[k+(G<<2)>>2])|0),n[v+(12*G|0)+4>>2]=n[q+(G<<2)>>2],1<(0|Bt););if(F){for(L=0|n[we>>2],g=0|n[$e>>2],v=0;$e=0|n[8+(0|n[L+(24*(O=(we=O)+-1|0)|0)>>2])>>2],v=(n[g+(O<<2)>>2]=$e)+v|0,1<(0|we););O=0|n[u>>2],g=0|n[W>>2]}else v=0;if(n[nt+72>>2]=v,n[nt+64>>2]=O,0<(0|g)){for(L=0|n[w>>2],O=0|n[Oe>>2],v=0;Oe=0|n[8+(0|n[L+(12*(g=(we=g)+-1|0)|0)>>2])>>2],v=(n[O+(g<<2)>>2]=Oe)+v|0,1<(0|we););g=0|n[W>>2]}else v=0;if(n[nt+180>>2]=v,n[nt+172>>2]=g,Vt=dt+704|0,v=0|n[Wt+16>>2],0<(0|(n[(F=nt+332|0)>>2]=v))){for(g=0|n[nr>>2],W=0|n[Je>>2],V=0|n[dt+852>>2],O=0|n[dt+876>>2],L=0|n[dt+880>>2],k=0|n[dt+892>>2],q=0|n[dt+872>>2],G=v;n[g+(20*(G=(nr=G)+-1|0)|0)>>2]=W+(36*(0|n[V+(G<<2)>>2])|0),n[g+(20*G|0)+4>>2]=n[O+(G<<2)>>2],n[g+(20*G|0)+8>>2]=n[L+(G<<2)>>2],n[g+(20*G|0)+16>>2]=n[k+(G<<2)>>2],n[g+(20*G|0)+12>>2]=n[q+(G<<2)>>2],1<(0|nr););for(g=0|n[lr>>2],O=0;lr=0|n[W+(36*(0|n[V+((v=(nr=v)+-1|0)<<2)>>2])|0)+8>>2],O=(n[g+(v<<2)>>2]=lr)+O|0,1<(0|nr););if(v=0|n[F>>2],n[nt+348>>2]=O,0<(0|(n[nt+340>>2]=v)))for(L=0|n[Ze>>2],g=0|n[Ue>>2],O=v<<2;l[L+((O=(Ue=O)+-4|0)<<2)>>2]=1,l[L+((nr=Ue+-3|0)<<2)>>2]=1,l[L+((Ze=Ue+-2|0)<<2)>>2]=1,l[L+((Ue=Ue+-1|0)<<2)>>2]=1,l[g+(O<<2)>>2]=0,l[g+(nr<<2)>>2]=0,!(((l[g+(Ze<<2)>>2]=0)|v)<=(l[g+(Ue<<2)>>2]=1));)v=v+-1|0}else n[nt+348>>2]=0,n[nt+340>>2]=v;if(It=0|n[Wt+72>>2],0<(0|(n[nt+480>>2]=It))){v=0|n[R>>2],g=0|n[dt+1152>>2],O=0|n[dt+1156>>2],L=0|n[dt+1160>>2],k=0|n[dt+1164>>2],q=0|n[dt+1148>>2],ht=dt+1172|0,xt=dt+1168|0,ut=dt+1176|0,Xt=0;do if(G=0|n[g+(Xt<<2)>>2],n[v+(28*Xt|0)+4>>2]=G,n[v+(28*Xt|0)>>2]=n[O+(Xt<<2)>>2],Ue=0|n[L+(Xt<<2)>>2],n[v+(28*Xt|0)+16>>2]=Ue,W=0|n[k+(Xt<<2)>>2],n[v+(28*Xt|0)+20>>2]=W,n[v+(28*Xt|0)+24>>2]=Ue+1-W,W=(n[v+(28*Xt|0)+8>>2]=0)|n[q+(Xt<<2)>>2],0<(0|G))for(V=0|n[v+(28*Xt|0)+12>>2],F=0|n[ht>>2],u=0|n[xt>>2],tt=0|n[ut>>2],Qt=0;n[V+(Qt<<4)+4>>2]=n[F+((Ue=Qt+W|0)<<2)>>2],n[V+(Qt<<4)>>2]=n[u+(Ue<<2)>>2],n[V+(Qt<<4)+8>>2]=n[tt+(Ue<<2)>>2],(0|(Qt=Qt+1|(n[V+(Qt<<4)+12>>2]=0)))!=(0|G););while((0|(Xt=Xt+1|0))!=(0|It))}g=0|n[Wt+80>>2],n[(u=nt+500|0)>>2]=g;do if(0<(0|g)){for(W=0|n[ur>>2],V=0|n[Je>>2],F=0|n[dt+1188>>2],v=0|n[dt+1200>>2],O=0|n[dt+1204>>2],L=0|n[dt+1212>>2],k=0|n[dt+1216>>2],q=0|n[dt+1208>>2],G=0|n[dt+1220>>2];n[W+(24*(g=(Je=g)+-1|0)|0)>>2]=V+(36*(0|n[F+(g<<2)>>2])|0),n[W+(24*g|0)+4>>2]=n[v+(g<<2)>>2],n[W+(24*g|0)+8>>2]=n[O+(g<<2)>>2],n[W+(24*g|0)+12>>2]=n[L+(g<<2)>>2],ur=0|n[q+(g<<2)>>2],n[W+(24*g|0)+16>>2]=k+(ur<<2),n[W+(24*g|0)+20>>2]=G+(ur<<1),1<(0|Je););if((0|(g=0|n[u>>2]))<=0){v=0;break}for(O=0|n[Ar>>2],v=0;Ar=0|n[V+(36*(0|n[F+((g=(Je=g)+-1|0)<<2)>>2])|0)+8>>2],v=(n[O+(g<<2)>>2]=Ar)+v|0,1<(0|Je););g=0|n[u>>2]}else v=0;while(0);n[nt+516>>2]=v,n[nt+508>>2]=g;do if(3<(0|Jt[A>>0])){if((255&(v=0|ct[dt+4>>0]))<4)break;if(g=0|n[Wt+120>>2],0<(0|(n[nt+572>>2]=g)))for(V=0|n[nt+576>>2],O=0|n[or>>2],L=0|n[dt+1112>>2],k=0|n[dt+1124>>2],q=0|n[dt+1116>>2],G=0|n[dt+1128>>2],W=0|n[dt+1120>>2];n[V+(20*(g=(Ee=g)+-1|0)|0)>>2]=O+(52*(0|n[L+(g<<2)>>2])|0),or=0|n[q+(g<<2)>>2],n[V+(20*g|0)+4>>2]=k+(or<<2),n[V+(20*g|0)+8>>2]=G+(or<<2),n[V+(20*g|0)+12>>2]=n[W+(g<<2)>>2],1<(0|Ee););if(g=0|n[Wt+100>>2],0<(0|(n[nt+580>>2]=g)))for(O=0|n[nt+584>>2],L=0|n[dt+1056>>2],k=0|n[dt+1132>>2],q=0|n[dt+1052>>2],G=0|n[dt+1060>>2];n[O+(28*(g=(Ee=g)+-1|0)|0)>>2]=n[L+(g<<2)>>2],n[O+(28*g|0)+4>>2]=k+(n[q+(g<<2)>>2]<<2),n[O+(28*g|0)+8>>2]=n[G+(g<<2)>>2],n[O+(28*g|0)+12>>2]=0,l[O+(28*g|0)+16>>2]=0,n[O+(28*g|0)+20>>2]=1,(n[O+(28*g|0)+24>>2]=1)<(0|Ee););if(g=0|n[Wt+104>>2],0<(0|(n[nt+588>>2]=g))){F=nt+592|0,tt=nt+584|0,V=dt+1064|0,ht=dt+1068|0,G=dt+1080|0,u=nt+576|0,W=dt+1108|0,q=dt+1076|0;do if(k=g,v=0|n[F>>2],n[v+(48*(g=g+-1|0)|0)>>2]=(0|n[tt>>2])+(28*(0|n[(0|n[V>>2])+(g<<2)>>2])|0),n[v+(48*g|0)+4>>2]=n[(0|n[ht>>2])+(g<<2)>>2],n[v+(48*g|0)+8>>2]=0,n[v+(48*g|0)+28>>2]=1,n[v+(48*g|0)+32>>2]=1,L=0|n[(0|n[G>>2])+(g<<2)>>2],0<(0|(n[v+(48*g|0)+36>>2]=L)))for(v=v+(48*g|0)+40|0,O=0;n[(0|n[v>>2])+(O<<2)>>2]=(0|n[u>>2])+(20*(0|n[(0|n[W>>2])+((0|n[(0|n[q>>2])+(g<<2)>>2])+O<<2)>>2])|0),(0|(O=O+1|0))!=(0|L););while(1<(0|k));V=0|n[nt>>2],v=0|ct[V+4>>0]}else V=dt;if(W=0|n[Le>>2],g=0|n[W+108>>2],(255&v)<4)break;if(0<(0|(n[nt+596>>2]=g)))for(O=0|n[nt+600>>2],L=0|n[a+1084>>2],k=0|n[a+1092>>2],q=0|n[nt+592>>2],G=0|n[a+1088>>2],v=g;n[O+(12*(v=(Le=v)+-1|0)|0)>>2]=n[L+(v<<2)>>2],n[O+(12*v|0)+4>>2]=n[k+(v<<2)>>2],n[O+(12*v|0)+8>>2]=q+(48*(0|n[G+(v<<2)>>2])|0),1<(0|Le););if(v=0|n[W+112>>2],0<(0|(n[nt+604>>2]=v)))for(O=0|n[nt+608>>2],L=0|n[a+1096>>2],k=0|n[a+1104>>2],q=0|n[nt+592>>2],g=0|n[a+1100>>2];n[O+(12*(v=(a=v)+-1|0)|0)>>2]=n[L+(v<<2)>>2],n[O+(12*v|0)+4>>2]=n[k+(v<<2)>>2],n[O+(12*v|0)+8>>2]=q+(48*(0|n[g+(v<<2)>>2])|0),1<(0|a););if(O=0|n[V+1132>>2],L=0|n[20+(0|n[V+704>>2])>>2],k=nt+612|0,n[nt+616>>2]=n[V+972>>2],v=0|n[V+964>>2],n[k>>2]=v,(0|L)<=0||(n[v>>2]=O+(n[n[(g=V+968|0)>>2]>>2]<<2),(0|L)==1))break;for(v=1;n[(0|n[k>>2])+(v<<2)>>2]=O+(n[(0|n[g>>2])+(v<<2)>>2]<<2),(0|(v=v+1|0))!=(0|L););}else{if((0|n[Wt+20>>2])<=0)break;It=dt+948|0,Wt=dt+952|0,xt=nt+612|0,Xt=dt+1032|0,Qt=dt+1036|0,tt=dt+1132|0,ht=nt+616|0,ut=0;do{if(v=0|n[(0|n[It>>2])+(ut<<2)>>2],F=(a=0|n[(0|n[Wt>>2])+(ut<<2)>>2])+v|0,u=0|n[(0|n[xt>>2])+(ut<<2)>>2],0<(0|a)){W=0|n[Xt>>2],V=0|n[Qt>>2],G=v,v=0;do if(g=0|n[W+(G<<2)>>2],q=(a=0|n[V+(G<<2)>>2])+g|0,0<(0|a)){k=0|n[tt>>2];do{Z=+l[k+(g<<2)>>2],O=u+(v<<2)|0;t:do if(0<(0|v))for(L=u;;){if(+l[L>>2]==Z)break t;if(O>>>0<=(L=L+4|0)>>>0){Ee=146;break}}else Ee=146;while(0)}while((0|Ee)==146&&(Ee=0,l[O>>2]=Z,v=v+1|0),(0|(g=g+1|0))<(0|q))}while((0|(G=G+1|0))<(0|F))}else v=0;(function(Ke,He){Ke|=0;var tr=0,be=0,Kr=0,$n=0,F0=0,Nn=0,fi=0,Br=0,na=0,mh=0;B=(mh=B)+208|0,Kr=(He|=0)<<2,n[(Nn=Br=(fi=mh)+192|0)>>2]=1,n[Nn+4>>2]=0;t:do if(0|Kr){for(n[fi+4>>2]=4,n[fi>>2]=4,tr=He=4,be=2;He=He+4+tr|0,(n[fi+(be<<2)>>2]=He)>>>0<Kr>>>0;)Nn=tr,tr=He,be=be+1|0,He=Nn;if(Ke>>>0<($n=Ke+Kr+-4|0)>>>0){F0=$n,Nn=4+Br|0,tr=Ke,be=He=1;do do if((3&He|0)!=3){if((0|n[fi+((Kr=be+-1|0)<<2)>>2])>>>0<(F0-tr|0)>>>0?_o(tr,be,fi):On(tr,He,0|n[Nn>>2],be,0,fi),(0|be)==1){wn(Br,1),be=0;break}wn(Br,Kr),be=1;break}while(_o(tr,be,fi),In(Br,2),be=be+2|0,0);while(He=1|n[Br>>2],n[Br>>2]=He,(tr=tr+4|0)>>>0<$n>>>0);Kr=0|n[($n=Nn)>>2]}else $n=4+Br|0,Kr=0,tr=Ke,be=He=1;for(On(tr,He,Kr,be,0,fi),Kr=4+Br|0;;){if((0|be)==1&(0|He)==1){if(!(0|n[Kr>>2]))break t;na=21}else(0|be)<2?na=21:(wn(Br,2),Ke=be+-2|0,n[Br>>2]=7^n[Br>>2],In(Br,1),On(tr+(0-(0|n[fi+(Ke<<2)>>2]))+-4|0,0|n[Br>>2],0|n[$n>>2],be+-1|0,1,fi),wn(Br,1),He=1|n[Br>>2],n[Br>>2]=He,On(tr=tr+-4|0,He,0|n[$n>>2],Ke,1,fi),be=Ke);(0|na)==21&&(Ke=(na=0)|qo(Br),In(Br,Ke),He=0|n[Br>>2],tr=tr+-4|0,be=Ke+be|0)}}while(0);B=mh})(u,v),n[(0|n[ht>>2])+(ut<<2)>>2]=v,ut=ut+1|0}while((0|ut)<(0|n[20+(0|n[Vt>>2])>>2]))}while(0);return Qr(nt),B=Nr,0|nt}function fe(a,u){return 0|((a=+l[(a|=0)>>2])<(u=+l[(u|=0)>>2])?-1:u<a&1)}function Se(a){var u=0|ct[(a|=0)+4>>0];n[a+704>>2]=a+(0|n[a+64>>2]),n[a+708>>2]=a+(0|n[a+68>>2]),n[a+712>>2]=a+(0|n[a+72>>2]),n[a+716>>2]=a+(0|n[a+76>>2]),n[a+720>>2]=a+(0|n[a+80>>2]),n[a+724>>2]=a+(0|n[a+84>>2]),n[a+728>>2]=a+(0|n[a+88>>2]),n[a+732>>2]=a+(0|n[a+92>>2]),n[a+736>>2]=a+(0|n[a+96>>2]),n[a+740>>2]=a+(0|n[a+100>>2]),n[a+744>>2]=a+(0|n[a+104>>2]),n[a+748>>2]=a+(0|n[a+108>>2]),n[a+752>>2]=a+(0|n[a+112>>2]),n[a+756>>2]=a+(0|n[a+116>>2]),n[a+760>>2]=a+(0|n[a+120>>2]),n[a+764>>2]=a+(0|n[a+124>>2]),n[a+768>>2]=a+(0|n[a+128>>2]),n[a+772>>2]=a+(0|n[a+132>>2]),n[a+776>>2]=a+(0|n[a+136>>2]),n[a+780>>2]=a+(0|n[a+140>>2]),n[a+784>>2]=a+(0|n[a+144>>2]),n[a+788>>2]=a+(0|n[a+148>>2]),n[a+796>>2]=a+(0|n[a+152>>2]),n[a+800>>2]=a+(0|n[a+156>>2]),n[a+804>>2]=a+(0|n[a+160>>2]),n[a+812>>2]=a+(0|n[a+164>>2]),n[a+816>>2]=a+(0|n[a+168>>2]),n[a+820>>2]=a+(0|n[a+172>>2]),n[a+828>>2]=a+(0|n[a+176>>2]),n[a+832>>2]=a+(0|n[a+180>>2]),n[a+836>>2]=a+(0|n[a+184>>2]),n[a+840>>2]=a+(0|n[a+188>>2]),n[a+844>>2]=a+(0|n[a+192>>2]),n[a+848>>2]=a+(0|n[a+196>>2]),n[a+852>>2]=a+(0|n[a+200>>2]),n[a+856>>2]=a+(0|n[a+204>>2]),n[a+860>>2]=a+(0|n[a+208>>2]),n[a+868>>2]=a+(0|n[a+212>>2]),n[a+872>>2]=a+(0|n[a+216>>2]),n[a+876>>2]=a+(0|n[a+220>>2]),n[a+880>>2]=a+(0|n[a+224>>2]),n[a+884>>2]=a+(0|n[a+228>>2]),n[a+888>>2]=a+(0|n[a+232>>2]),n[a+892>>2]=a+(0|n[a+236>>2]),n[a+896>>2]=a+(0|n[a+240>>2]),n[a+900>>2]=a+(0|n[a+244>>2]),n[a+904>>2]=a+(0|n[a+248>>2]),n[a+908>>2]=a+(0|n[a+252>>2]),n[a+912>>2]=a+(0|n[a+256>>2]),n[a+916>>2]=a+(0|n[a+260>>2]),n[a+920>>2]=a+(0|n[a+264>>2]),n[a+924>>2]=a+(0|n[a+268>>2]),n[a+928>>2]=a+(0|n[a+272>>2]),n[a+932>>2]=a+(0|n[a+276>>2]),n[a+936>>2]=a+(0|n[a+280>>2]),n[a+940>>2]=a+(0|n[a+284>>2]),n[a+948>>2]=a+(0|n[a+288>>2]),n[a+952>>2]=a+(0|n[a+292>>2]),n[a+976>>2]=a+(0|n[a+296>>2]),n[a+980>>2]=a+(0|n[a+300>>2]),n[a+984>>2]=a+(0|n[a+304>>2]),n[a+988>>2]=a+(0|n[a+308>>2]),n[a+992>>2]=a+(0|n[a+312>>2]),n[a+996>>2]=a+(0|n[a+316>>2]),n[a+1e3>>2]=a+(0|n[a+320>>2]),n[a+1004>>2]=a+(0|n[a+324>>2]),n[a+1008>>2]=a+(0|n[a+328>>2]),n[a+1012>>2]=a+(0|n[a+332>>2]),n[a+1016>>2]=a+(0|n[a+336>>2]),n[a+1020>>2]=a+(0|n[a+340>>2]),n[a+1024>>2]=a+(0|n[a+344>>2]),n[a+1028>>2]=a+(0|n[a+348>>2]),n[a+1040>>2]=a+(0|n[a+352>>2]),n[a+1044>>2]=a+(0|n[a+356>>2]),n[a+1048>>2]=a+(0|n[a+360>>2]),n[a+1032>>2]=a+(0|n[a+364>>2]),n[a+1036>>2]=a+(0|n[a+368>>2]),n[a+1132>>2]=a+(0|n[a+372>>2]),n[a+1136>>2]=a+(0|n[a+376>>2]),n[a+1140>>2]=a+(0|n[a+380>>2]),n[a+1144>>2]=a+(0|n[a+384>>2]),n[a+1148>>2]=a+(0|n[a+388>>2]),n[a+1152>>2]=a+(0|n[a+392>>2]),n[a+1156>>2]=a+(0|n[a+396>>2]),n[a+1160>>2]=a+(0|n[a+400>>2]),n[a+1164>>2]=a+(0|n[a+404>>2]),n[a+1168>>2]=a+(0|n[a+408>>2]),n[a+1172>>2]=a+(0|n[a+412>>2]),n[a+1176>>2]=a+(0|n[a+416>>2]),n[a+1180>>2]=a+(0|n[a+420>>2]),n[a+1184>>2]=a+(0|n[a+424>>2]),n[a+1188>>2]=a+(0|n[a+428>>2]),n[a+1192>>2]=a+(0|n[a+432>>2]),n[a+1196>>2]=a+(0|n[a+436>>2]),n[a+1200>>2]=a+(0|n[a+440>>2]),n[a+1204>>2]=a+(0|n[a+444>>2]),n[a+1208>>2]=a+(0|n[a+448>>2]),n[a+1212>>2]=a+(0|n[a+452>>2]),n[a+1216>>2]=a+(0|n[a+456>>2]),n[a+1220>>2]=a+(0|n[a+460>>2]),n[a+1224>>2]=a+(0|n[a+464>>2]),(255&u)<=1||(n[a+808>>2]=a+(0|n[a+468>>2]),(255&u)<=3||(n[a+964>>2]=a+(0|n[a+472>>2]),n[a+968>>2]=a+(0|n[a+476>>2]),n[a+972>>2]=a+(0|n[a+480>>2]),n[a+792>>2]=a+(0|n[a+484>>2]),n[a+824>>2]=a+(0|n[a+488>>2]),n[a+864>>2]=a+(0|n[a+492>>2]),n[a+1228>>2]=a+(0|n[a+496>>2]),n[a+1232>>2]=a+(0|n[a+500>>2]),n[a+1236>>2]=a+(0|n[a+504>>2]),n[a+1240>>2]=a+(0|n[a+508>>2]),n[a+1244>>2]=a+(0|n[a+512>>2]),n[a+1248>>2]=a+(0|n[a+516>>2]),n[a+944>>2]=a+(0|n[a+520>>2]),n[a+956>>2]=a+(0|n[a+524>>2]),n[a+960>>2]=a+(0|n[a+528>>2]),n[a+1052>>2]=a+(0|n[a+532>>2]),n[a+1056>>2]=a+(0|n[a+536>>2]),n[a+1060>>2]=a+(0|n[a+540>>2]),n[a+1064>>2]=a+(0|n[a+544>>2]),n[a+1068>>2]=a+(0|n[a+548>>2]),n[a+1072>>2]=a+(0|n[a+552>>2]),n[a+1076>>2]=a+(0|n[a+556>>2]),n[a+1080>>2]=a+(0|n[a+560>>2]),n[a+1084>>2]=a+(0|n[a+564>>2]),n[a+1088>>2]=a+(0|n[a+568>>2]),n[a+1092>>2]=a+(0|n[a+572>>2]),n[a+1096>>2]=a+(0|n[a+576>>2]),n[a+1100>>2]=a+(0|n[a+580>>2]),n[a+1104>>2]=a+(0|n[a+584>>2]),n[a+1108>>2]=a+(0|n[a+588>>2]),n[a+1112>>2]=a+(0|n[a+592>>2]),n[a+1116>>2]=a+(0|n[a+596>>2]),n[a+1120>>2]=a+(0|n[a+600>>2]),n[a+1124>>2]=a+(0|n[a+604>>2]),n[a+1128>>2]=a+(0|n[a+608>>2])))}function ye(a){a|=0;var u,g,C,P=0,p=0,w=0,R=0,A=0,v=0,O=0,L=0,k=0,q=0,G=0,W=B;if(B=B+32|0,p=W+24|0,n[(G=W)>>2]=4,n[G+4>>2]=2,n[G+8>>2]=2,function(V,F){V|=0,F|=0;var tt=0,ht=0;B=(V=B)+272|0,tt=V+16|0,n[(ht=V)>>2]=F,$i(tt,993,ht),function(Z){Z|=0;var ut=0,xt=0;B=(ut=B)+16|0,n[(xt=ut)>>2]=Z,function(Xt,Qt,It){Xt|=0,Qt|=0,It|=0,B=(Qt=B)+16|0,n[(Xt=Qt)>>2]=It,ii(496,2518,Xt),B=Qt}(0,0,xt),B=ut}(tt),B=V}(0,G),0|zo(a))return zt(0,1038,W+16|0),B=W,(G=0)|G;if(4<(255&(P=0|ct[(w=a+4|0)>>0])))return n[p>>2]=4,n[p+4>>2]=255&P,zt(0,1101,p),B=W,(G=0)|G;if(0|ct[(P=a+5|0)>>0]?(Be(w,1),mt(a+64|0,4,160),ct[P>>0]=0,Se(a),P=0|ct[w>>0],mt(0|n[(p=a+704|0)>>2],4,32),Be(0|n[(G=a+708|0)>>2],4),Be(4+(0|n[G>>2])|0,4),Be(8+(0|n[G>>2])|0,4),Be(12+(0|n[G>>2])|0,4),Be(16+(0|n[G>>2])|0,4),Be(20+(0|n[G>>2])|0,1),mt(0|n[a+720>>2],4,0|n[n[p>>2]>>2]),mt(0|n[a+724>>2],4,0|n[n[p>>2]>>2]),mt(0|n[a+728>>2],4,0|n[n[p>>2]>>2]),mt(0|n[a+732>>2],4,0|n[n[p>>2]>>2]),mt(0|n[a+736>>2],4,0|n[n[p>>2]>>2]),mt(0|n[a+740>>2],4,0|n[n[p>>2]>>2]),mt(0|n[a+752>>2],4,0|n[4+(0|n[p>>2])>>2]),mt(0|n[a+756>>2],4,0|n[4+(0|n[p>>2])>>2]),mt(0|n[a+760>>2],4,0|n[4+(0|n[p>>2])>>2]),mt(0|n[a+764>>2],4,0|n[4+(0|n[p>>2])>>2]),mt(0|n[a+768>>2],4,0|n[4+(0|n[p>>2])>>2]),mt(0|n[a+772>>2],4,0|n[4+(0|n[p>>2])>>2]),mt(0|n[a+776>>2],4,0|n[4+(0|n[p>>2])>>2]),mt(0|n[a+780>>2],4,0|n[8+(0|n[p>>2])>>2]),mt(0|n[a+784>>2],4,0|n[8+(0|n[p>>2])>>2]),mt(0|n[a+788>>2],4,0|n[8+(0|n[p>>2])>>2]),mt(0|n[a+796>>2],4,0|n[8+(0|n[p>>2])>>2]),mt(0|n[a+800>>2],4,0|n[8+(0|n[p>>2])>>2]),mt(0|n[a+804>>2],4,0|n[8+(0|n[p>>2])>>2]),mt(0|n[a+812>>2],4,0|n[12+(0|n[p>>2])>>2]),mt(0|n[a+816>>2],4,0|n[12+(0|n[p>>2])>>2]),mt(0|n[a+820>>2],4,0|n[12+(0|n[p>>2])>>2]),mt(0|n[a+828>>2],4,0|n[12+(0|n[p>>2])>>2]),mt(0|n[a+852>>2],4,0|n[16+(0|n[p>>2])>>2]),mt(0|n[a+856>>2],4,0|n[16+(0|n[p>>2])>>2]),mt(0|n[a+860>>2],4,0|n[16+(0|n[p>>2])>>2]),mt(0|n[a+868>>2],4,0|n[16+(0|n[p>>2])>>2]),mt(0|n[a+872>>2],4,0|n[16+(0|n[p>>2])>>2]),mt(0|n[a+876>>2],4,0|n[16+(0|n[p>>2])>>2]),mt(0|n[a+880>>2],4,0|n[16+(0|n[p>>2])>>2]),mt(0|n[a+884>>2],4,0|n[16+(0|n[p>>2])>>2]),mt(0|n[a+888>>2],1,0|n[16+(0|n[p>>2])>>2]),mt(0|n[a+892>>2],4,0|n[16+(0|n[p>>2])>>2]),mt(0|n[a+896>>2],4,0|n[16+(0|n[p>>2])>>2]),mt(0|n[a+900>>2],4,0|n[16+(0|n[p>>2])>>2]),mt(0|n[a+904>>2],4,0|n[16+(0|n[p>>2])>>2]),mt(0|n[a+908>>2],4,0|n[16+(0|n[p>>2])>>2]),mt(0|n[a+912>>2],4,0|n[16+(0|n[p>>2])>>2]),mt(0|n[a+924>>2],4,0|n[20+(0|n[p>>2])>>2]),mt(0|n[a+928>>2],4,0|n[20+(0|n[p>>2])>>2]),mt(0|n[a+932>>2],4,0|n[20+(0|n[p>>2])>>2]),mt(0|n[a+936>>2],4,0|n[20+(0|n[p>>2])>>2]),mt(0|n[a+940>>2],4,0|n[20+(0|n[p>>2])>>2]),mt(0|n[a+948>>2],4,0|n[20+(0|n[p>>2])>>2]),mt(0|n[a+952>>2],4,0|n[20+(0|n[p>>2])>>2]),mt(0|n[a+976>>2],4,0|n[24+(0|n[p>>2])>>2]),mt(0|n[a+980>>2],4,0|n[28+(0|n[p>>2])>>2]),mt(0|n[a+984>>2],4,0|n[28+(0|n[p>>2])>>2]),mt(0|n[a+988>>2],4,0|n[32+(0|n[p>>2])>>2]),mt(0|n[a+992>>2],4,0|n[32+(0|n[p>>2])>>2]),mt(0|n[a+996>>2],4,0|n[32+(0|n[p>>2])>>2]),mt(0|n[a+1e3>>2],4,0|n[32+(0|n[p>>2])>>2]),mt(0|n[a+1004>>2],4,0|n[32+(0|n[p>>2])>>2]),mt(0|n[a+1008>>2],4,0|n[32+(0|n[p>>2])>>2]),mt(0|n[a+1012>>2],4,0|n[32+(0|n[p>>2])>>2]),mt(0|n[a+1016>>2],4,0|n[36+(0|n[p>>2])>>2]),mt(0|n[a+1020>>2],4,0|n[36+(0|n[p>>2])>>2]),mt(0|n[a+1024>>2],4,0|n[36+(0|n[p>>2])>>2]),mt(0|n[a+1028>>2],4,0|n[40+(0|n[p>>2])>>2]),mt(0|n[a+1040>>2],4,0|n[44+(0|n[p>>2])>>2]),mt(0|n[a+1044>>2],4,0|n[48+(0|n[p>>2])>>2]),mt(0|n[a+1048>>2],4,0|n[48+(0|n[p>>2])>>2]),mt(0|n[a+1032>>2],4,0|n[52+(0|n[p>>2])>>2]),mt(0|n[a+1036>>2],4,0|n[52+(0|n[p>>2])>>2]),mt(0|n[a+1132>>2],4,0|n[56+(0|n[p>>2])>>2]),mt(0|n[a+1136>>2],4,0|n[60+(0|n[p>>2])>>2]),mt(0|n[a+1140>>2],2,0|n[64+(0|n[p>>2])>>2]),mt(0|n[a+1144>>2],4,0|n[68+(0|n[p>>2])>>2]),mt(0|n[a+1148>>2],4,0|n[72+(0|n[p>>2])>>2]),mt(0|n[a+1152>>2],4,0|n[72+(0|n[p>>2])>>2]),mt(0|n[a+1156>>2],4,0|n[72+(0|n[p>>2])>>2]),mt(0|n[a+1160>>2],4,0|n[72+(0|n[p>>2])>>2]),mt(0|n[a+1164>>2],4,0|n[72+(0|n[p>>2])>>2]),mt(0|n[a+1168>>2],4,0|n[76+(0|n[p>>2])>>2]),mt(0|n[a+1172>>2],4,0|n[76+(0|n[p>>2])>>2]),mt(0|n[a+1176>>2],4,0|n[76+(0|n[p>>2])>>2]),mt(0|n[a+1188>>2],4,0|n[80+(0|n[p>>2])>>2]),mt(0|n[a+1192>>2],4,0|n[80+(0|n[p>>2])>>2]),mt(0|n[a+1196>>2],4,0|n[80+(0|n[p>>2])>>2]),mt(0|n[a+1200>>2],4,0|n[80+(0|n[p>>2])>>2]),mt(0|n[a+1204>>2],4,0|n[80+(0|n[p>>2])>>2]),mt(0|n[a+1208>>2],4,0|n[80+(0|n[p>>2])>>2]),mt(0|n[a+1212>>2],4,0|n[80+(0|n[p>>2])>>2]),mt(0|n[a+1216>>2],4,0|n[84+(0|n[p>>2])>>2]),mt(0|n[a+1220>>2],2,0|n[84+(0|n[p>>2])>>2]),mt(0|n[a+1224>>2],4,0|n[88+(0|n[p>>2])>>2]),1<(255&P)&&(mt(0|n[a+808>>2],4,0|n[8+(0|n[p>>2])>>2]),3<(255&P))&&(mt(0|n[a+968>>2],4,0|n[20+(0|n[p>>2])>>2]),mt(0|n[a+972>>2],4,0|n[20+(0|n[p>>2])>>2]),mt(0|n[a+792>>2],4,0|n[8+(0|n[p>>2])>>2]),mt(0|n[a+824>>2],4,0|n[12+(0|n[p>>2])>>2]),mt(0|n[a+864>>2],4,0|n[16+(0|n[p>>2])>>2]),mt(0|n[a+1228>>2],4,0|n[92+(0|n[p>>2])>>2]),mt(0|n[a+1232>>2],4,0|n[92+(0|n[p>>2])>>2]),mt(0|n[a+1236>>2],4,0|n[92+(0|n[p>>2])>>2]),mt(0|n[a+1240>>2],4,0|n[96+(0|n[p>>2])>>2]),mt(0|n[a+1244>>2],4,0|n[96+(0|n[p>>2])>>2]),mt(0|n[a+1248>>2],4,0|n[96+(0|n[p>>2])>>2]),mt(0|n[a+944>>2],4,0|n[20+(0|n[p>>2])>>2]),mt(0|n[a+956>>2],4,0|n[20+(0|n[p>>2])>>2]),mt(0|n[a+960>>2],4,0|n[20+(0|n[p>>2])>>2]),mt(0|n[a+1052>>2],4,0|n[100+(0|n[p>>2])>>2]),mt(0|n[a+1056>>2],4,0|n[100+(0|n[p>>2])>>2]),mt(0|n[a+1060>>2],4,0|n[100+(0|n[p>>2])>>2]),mt(0|n[a+1064>>2],4,0|n[104+(0|n[p>>2])>>2]),mt(0|n[a+1068>>2],4,0|n[104+(0|n[p>>2])>>2]),mt(0|n[a+1072>>2],4,0|n[104+(0|n[p>>2])>>2]),mt(0|n[a+1076>>2],4,0|n[104+(0|n[p>>2])>>2]),mt(0|n[a+1080>>2],4,0|n[104+(0|n[p>>2])>>2]),mt(0|n[a+1084>>2],4,0|n[108+(0|n[p>>2])>>2]),mt(0|n[a+1088>>2],4,0|n[108+(0|n[p>>2])>>2]),mt(0|n[a+1092>>2],4,0|n[108+(0|n[p>>2])>>2]),mt(0|n[a+1096>>2],4,0|n[112+(0|n[p>>2])>>2]),mt(0|n[a+1100>>2],4,0|n[112+(0|n[p>>2])>>2]),mt(0|n[a+1104>>2],4,0|n[112+(0|n[p>>2])>>2]),mt(0|n[a+1108>>2],4,0|n[116+(0|n[p>>2])>>2]),mt(0|n[a+1112>>2],4,0|n[120+(0|n[p>>2])>>2]),mt(0|n[a+1116>>2],4,0|n[120+(0|n[p>>2])>>2]),mt(0|n[a+1120>>2],4,0|n[120+(0|n[p>>2])>>2]),mt(0|n[a+1124>>2],4,0|n[124+(0|n[p>>2])>>2]),mt(0|n[a+1128>>2],4,0|n[124+(0|n[p>>2])>>2]))):(Se(a),p=a+704|0),0|n[905]||(n[905]=1),P=0|n[p>>2],0<(0|n[P>>2]))for(w=a+716|0,R=a+712|0,A=0;n[(0|n[R>>2])+(A<<2)>>2]=(0|n[w>>2])+(A<<6),P=0|n[p>>2],(0|(A=A+1|0))<(0|n[P>>2]););if(0<(0|n[P+4>>2]))for(w=a+748|0,R=a+744|0,A=0;n[(0|n[R>>2])+(A<<2)>>2]=(0|n[w>>2])+(A<<6),P=0|n[p>>2],(0|(A=A+1|0))<(0|n[P+4>>2]););if(0<(0|n[P+16>>2]))for(v=a+848|0,O=a+832|0,q=a+1136|0,C=a+896|0,k=a+836|0,L=a+1140|0,u=a+900|0,g=a+840|0,w=a+1144|0,R=a+908|0,A=a+844|0,G=0;n[(0|n[O>>2])+(G<<2)>>2]=(0|n[v>>2])+(G<<6),n[(0|n[k>>2])+(G<<2)>>2]=(0|n[q>>2])+(n[(0|n[C>>2])+(G<<2)>>2]<<2),n[(0|n[g>>2])+(G<<2)>>2]=(0|n[L>>2])+(n[(0|n[u>>2])+(G<<2)>>2]<<1),n[(0|n[A>>2])+(G<<2)>>2]=(0|n[w>>2])+(n[(0|n[R>>2])+(G<<2)>>2]<<2),P=0|n[p>>2],(0|(G=G+1|0))<(0|n[P+16>>2]););if(0<(0|n[P+20>>2]))for(w=a+920|0,R=a+916|0,A=0;n[(0|n[R>>2])+(A<<2)>>2]=(0|n[w>>2])+(A<<6),P=0|n[p>>2],(0|(A=A+1|0))<(0|n[P+20>>2]););if(0<(0|n[P+80>>2]))for(w=a+1184|0,R=a+1180|0,A=0;n[(0|n[R>>2])+(A<<2)>>2]=(0|n[w>>2])+(A<<6),P=0|n[p>>2],(0|(A=A+1|0))<(0|n[P+80>>2]););if(1&ct[20+(0|n[a+708>>2])>>0]||(0|(L=0|n[P+16>>2]))<=0)return B=W,0|(G=a);P=0|n[a+1140>>2],p=0|n[a+900>>2],w=0|n[a+904>>2],A=0;do if(R=P+(n[p+(A<<2)>>2]<<1)|0,O=(G=0|n[w+(A<<2)>>2])+-1|0,1<(0|G))for(v=0;q=0|Ae[(k=R+(v<<1)|0)>>1],Ae[k>>1]=0|Ae[(G=R+(v+2<<1)|0)>>1],Ae[G>>1]=q,(0|(v=v+3|0))<(0|O););while((0|(A=A+1|0))!=(0|L));p=0|n[a+1136>>2],w=0|n[a+896>>2],R=0|n[a+892>>2],v=0;do if(A=(P=p+(n[w+(v<<2)>>2]<<2)|0)+((G=0|n[R+(v<<2)>>2])<<1<<2)|0,0<(0|G))for(P=P+4|0;l[P>>2]=1-+l[P>>2],(P=P+8|0)>>>0<A>>>0;);while((0|(v=v+1|0))!=(0|L));return B=W,0|a}function Me(a){var u=B;return B=B+16|0,0|zo(a|=0)?(zt(0,1210,u),B=u,(a=0)|a):(a=0|Jt[a+4>>0],B=u,0|a)}function te(a){var u,g,C,P,O=0,v=0,p=0,w=0,R=0,A=0,v=(a|=0)+64|0,O=a+144|0;if(Lt(v,0|n[a+88>>2],0|n[a+148>>2],0|n[O>>2]),pr(v,0|n[a+92>>2],0|n[a+152>>2],0|n[796+(0|n[a>>2])>>2],2,0|n[O>>2]),!((0|Jt[4+(0|n[a>>2])>>0])<4||(Lt(v,0|n[a+96>>2],0|n[(P=a+120|0)>>2],0|n[O>>2]),Lt(v,0|n[a+100>>2],0|n[(p=a+124|0)>>2],0|n[O>>2]),Lt(v,0|n[a+104>>2],0|n[(w=a+128|0)>>2],0|n[O>>2]),Lt(v,0|n[a+108>>2],0|n[(u=a+132|0)>>2],0|n[O>>2]),Lt(v,0|n[a+112>>2],0|n[(g=a+136|0)>>2],0|n[O>>2]),Lt(v,0|n[a+116>>2],0|n[(C=a+140|0)>>2],0|n[O>>2]),O=0|n[a+156>>2],v=0|n[P>>2],p=0|n[p>>2],w=0|n[w>>2],(0|(P=0|n[a+56>>2]))<=0))){for(A=R=0;n[O+(R<<2)>>2]=n[v+(A<<2)>>2],n[O+((1|R)<<2)>>2]=n[p+(A<<2)>>2],n[O+((2|R)<<2)>>2]=n[w+(A<<2)>>2],(0|(A=A+1|0))!=(0|P);)R=R+4|0;for(A=0|n[a+160>>2],R=0|n[u>>2],w=0|n[g>>2],O=0|n[C>>2],p=v=0;n[A+(v<<2)>>2]=n[R+(p<<2)>>2],n[A+((1|v)<<2)>>2]=n[w+(p<<2)>>2],n[A+((2|v)<<2)>>2]=n[O+(p<<2)>>2],(0|(p=p+1|0))!=(0|P);)v=v+4|0}}function de(a){var u,g,C,P,O=0,v=0,p=0,w=0,R=0,A=0,v=(a|=0)+172|0,O=a+264|0;if(Lt(v,0|n[a+196>>2],0|n[a+268>>2],0|n[O>>2]),Lt(v,0|n[a+200>>2],0|n[a+284>>2],0|n[O>>2]),Lt(v,0|n[a+204>>2],0|n[a+276>>2],0|n[O>>2]),Lt(v,0|n[a+208>>2],0|n[a+280>>2],0|n[O>>2]),Lt(v,0|n[a+212>>2],0|n[a+272>>2],0|n[O>>2]),!((0|Jt[4+(0|n[a>>2])>>0])<4||(Lt(v,0|n[a+216>>2],0|n[(P=a+240|0)>>2],0|n[O>>2]),Lt(v,0|n[a+220>>2],0|n[(p=a+244|0)>>2],0|n[O>>2]),Lt(v,0|n[a+224>>2],0|n[(w=a+248|0)>>2],0|n[O>>2]),Lt(v,0|n[a+228>>2],0|n[(u=a+252|0)>>2],0|n[O>>2]),Lt(v,0|n[a+232>>2],0|n[(g=a+256|0)>>2],0|n[O>>2]),Lt(v,0|n[a+236>>2],0|n[(C=a+260|0)>>2],0|n[O>>2]),O=0|n[a+296>>2],v=0|n[P>>2],p=0|n[p>>2],w=0|n[w>>2],(0|(P=0|n[a+164>>2]))<=0))){for(A=R=0;n[O+(R<<2)>>2]=n[v+(A<<2)>>2],n[O+((1|R)<<2)>>2]=n[p+(A<<2)>>2],n[O+((2|R)<<2)>>2]=n[w+(A<<2)>>2],(0|(A=A+1|0))!=(0|P);)R=R+4|0;for(A=0|n[a+300>>2],R=0|n[u>>2],w=0|n[g>>2],O=0|n[C>>2],p=v=0;n[A+(v<<2)>>2]=n[R+(p<<2)>>2],n[A+((1|v)<<2)>>2]=n[w+(p<<2)>>2],n[A+((2|v)<<2)>>2]=n[O+(p<<2)>>2],(0|(p=p+1|0))!=(0|P);)v=v+4|0}}function ee(a){var u,g,C,P,O=0,v=0,p=0,w=0,R=0,A=0,v=(a|=0)+340|0,O=a+424|0;if(Lt(v,0|n[a+364>>2],0|n[a+448>>2],0|n[O>>2]),De(v,0|n[a+368>>2],0|n[a+440>>2],0|n[O>>2]),pr(v,0|n[a+372>>2],0|n[a+444>>2],0|n[892+(0|n[a>>2])>>2],2,0|n[O>>2]),!((0|Jt[4+(0|n[a>>2])>>0])<4||(Lt(v,0|n[a+376>>2],0|n[(P=a+400|0)>>2],0|n[O>>2]),Lt(v,0|n[a+380>>2],0|n[(p=a+404|0)>>2],0|n[O>>2]),Lt(v,0|n[a+384>>2],0|n[(w=a+408|0)>>2],0|n[O>>2]),Lt(v,0|n[a+388>>2],0|n[(u=a+412|0)>>2],0|n[O>>2]),Lt(v,0|n[a+392>>2],0|n[(g=a+416|0)>>2],0|n[O>>2]),Lt(v,0|n[a+396>>2],0|n[(C=a+420|0)>>2],0|n[O>>2]),O=0|n[a+452>>2],v=0|n[P>>2],p=0|n[p>>2],w=0|n[w>>2],(0|(P=0|n[a+332>>2]))<=0))){for(A=R=0;n[O+(R<<2)>>2]=n[v+(A<<2)>>2],n[O+((1|R)<<2)>>2]=n[p+(A<<2)>>2],n[O+((2|R)<<2)>>2]=n[w+(A<<2)>>2],(0|(A=A+1|0))!=(0|P);)R=R+4|0;for(A=0|n[a+456>>2],R=0|n[u>>2],w=0|n[g>>2],O=0|n[C>>2],p=v=0;n[A+(v<<2)>>2]=n[R+(p<<2)>>2],n[A+((1|v)<<2)>>2]=n[w+(p<<2)>>2],n[A+((2|v)<<2)>>2]=n[O+(p<<2)>>2],(0|(p=p+1|0))!=(0|P);)v=v+4|0}}function Lt(a,u,g,C){u|=0,g|=0,C|=0;var P,p,w,R=0,A=0,v=0,O=0,L=0,k=0;if(0<(0|(R=0|n[(a|=0)+8>>2])))for(A=0|n[a+20>>2],v=0|n[a+12>>2],O=0;l[v+(O<<2)>>2]=+l[u+(O<<2)>>2]*+l[A+(O<<2)>>2],(0|(O=O+1|0))!=(0|R););if(!((0|(p=0|n[a>>2]))<=0))if(k=a+16|0,w=0|n[a+4>>2],P=a+12|0,C)for(u=O=0;;){if(0|n[C>>2]){if(A=(a=0|n[(0|n[k>>2])+(u<<2)>>2])+O|0,0<(0|a))for(R=0|n[P>>2],v=O,L=0;L+=+l[R+(v<<2)>>2],(0|(v=v+1|0))<(0|A););else L=0;l[g+(u<<2)>>2]=L}if((0|(R=u+1|0))==(0|p))break;C=C+4|0,O=(0|n[w+(u<<2)>>2])+O|0,u=R}else for(O=0|n[k>>2],a=u=0;;){if(A=(k=0|n[O+(a<<2)>>2])+u|0,0<(0|k))for(R=0|n[P>>2],v=u,L=0;L+=+l[R+(v<<2)>>2],(0|(v=v+1|0))<(0|A););else L=0;if(l[g+(a<<2)>>2]=L,(0|(R=a+1|0))==(0|p))break;u=(0|n[w+(a<<2)>>2])+u|0,a=R}}function De(a,u,g,C){u|=0,g|=0,C|=0;var P,p,w=0,R=0,A=0,v=0,O=0,L=0;if(0<(0|(w=0|n[(a|=0)+8>>2])))for(R=0|n[a+20>>2],A=0|n[a+12>>2],v=0;l[A+(v<<2)>>2]=+l[u+(v<<2)>>2]*+l[R+(v<<2)>>2],(0|(v=v+1|0))!=(0|w););if(!((0|(w=0|n[a>>2]))<=0))if(L=a+16|0,P=0|n[a+4>>2],p=a+12|0,C)for(u=v=0;;){if(0|n[C>>2]){if(R=(A=0|n[(0|n[L>>2])+(u<<2)>>2])+v|0,0<(0|A))for(w=0|n[p>>2],A=v,O=0;O+=+l[w+(A<<2)>>2],(0|(A=A+1|0))<(0|R););else O=0;n[g+(u<<2)>>2]=~~(O+.0010000000474974513),w=0|n[a>>2]}if(!((0|(R=u+1|0))<(0|w)))break;C=C+4|0,v=(0|n[P+(u<<2)>>2])+v|0,u=R}else for(v=0|n[L>>2],C=u=0;;){if(R=(L=0|n[v+(C<<2)>>2])+u|0,0<(0|L))for(w=0|n[p>>2],A=u,O=0;O+=+l[w+(A<<2)>>2],(0|(A=A+1|0))<(0|R););else O=0;if(n[g+(C<<2)>>2]=~~(O+.0010000000474974513),!((0|(w=C+1|0))<(0|n[a>>2])))break;u=(0|n[P+(C<<2)>>2])+u|0,C=w}}function pr(a,u,g,C,P,p){u|=0,g|=0,C|=0,P|=0,p|=0;var w,R,A,v,O,L=0,k=0,q=0,G=0,W=0,V=0,F=0,tt=0,ht=0,Z=0|n[(a|=0)>>2];if(!((0|Z)<=0))if(v=a+16|0,A=0|n[a+4>>2],R=a+20|0,w=P<<2,p)for(tt=F=0;;){if(0|n[p>>2]&&(G=0|n[g+(tt<<2)>>2],a=0|n[C+(tt<<2)>>2],V=0|U(a,P),W=(L=0|n[(0|n[v>>2])+(tt<<2)>>2])+F|0,(q=0<(0|V))&&di(0|G,0,0|U(w,a)),0<(0|L)&&(ht=0|n[R>>2],q))){L=F;do for(a=0|n[u+(L<<2)>>2],k=+l[ht+(L<<2)>>2],q=0;l[(O=G+(q<<2)|0)>>2]=+l[O>>2]+k*+l[a+(q<<2)>>2],(0|(q=q+1|0))!=(0|V););while((0|(L=L+1|0))<(0|W))}if((0|(a=tt+1|0))==(0|Z))break;p=p+4|0,F=(0|n[A+(tt<<2)>>2])+F|0,tt=a}else for(F=V=0;;){if(q=0|n[g+(F<<2)>>2],a=0|n[C+(F<<2)>>2],W=0|U(a,P),G=(p=0|n[(0|n[v>>2])+(F<<2)>>2])+V|0,(L=0<(0|W))&&di(0|q,0,0|U(w,a)),0<(0|p)&&(tt=0|n[R>>2],L)){p=V;do for(a=0|n[u+(p<<2)>>2],k=+l[tt+(p<<2)>>2],L=0;l[(ht=q+(L<<2)|0)>>2]=+l[ht>>2]+k*+l[a+(L<<2)>>2],(0|(L=L+1|0))!=(0|W););while((0|(p=p+1|0))<(0|G))}if((0|(a=F+1|0))==(0|Z))break;V=(0|n[A+(F<<2)>>2])+V|0,F=a}}function Ye(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|function(C){C|=0;var P,p,w=B;return B=B+560|0,P=(p=w)+548|0,di(0|p,0,548),ge(C,p,P),B=w,0|n[P>>2]}(a),B=g,0|u):(n[u>>2]=1515,n[u+4>>2]=1533,zt(0,1269,u),B=g,(u=0)|u)}function Ie(a,u,g){u|=0,g|=0;var C,P,p=0,w=0,R=B;return B=B+32|0,w=R+24|0,P=R+16|0,p=R+8|0,C=R,(a|=0)?u?((p=u)+15&-16|0)!=(0|p)?(n[P>>2]=1551,n[4+P>>2]=1342,zt(0,1269,P),B=R,(w=0)|w):(u=0|me(a,u,g))?(B=R,0|(w=u)):(n[w>>2]=1551,n[w+4>>2]=1577,zt(0,1269,w),B=R,(w=0)|w):(n[p>>2]=1551,n[p+4>>2]=1303,zt(0,1269,p),B=R,(w=0)|w):(n[C>>2]=1551,n[C+4>>2]=1533,zt(0,1269,C),B=R,(w=0)|w)}function sr(a,u,g,C){if(g=+g,C=+C,(u=+H(+(u=+u),+(a=+a))-+H(+C,+g))<-3.1415927410125732)for(;(u+=6.2831854820251465)<-3.1415927410125732;);if(!(3.1415927410125732<u))return+(g=u);for(;3.1415927410125732<(u+=-6.2831854820251465););return+u}function Be(a,u){a|=0,u|=0;var g;if(!((u=a+u+-1|0)>>>0<=a>>>0))for(;g=0|ct[a>>0],ct[a>>0]=0|ct[u>>0],a=a+1|0,ct[u>>0]=g,a>>>0<(u=u+-1|0)>>>0;);}function mt(a,u,g){a|=0,u|=0;var C,P=0,p=0;if(g|=0)do if(g=g+-1|0,(p=a)>>>0<(P=(a=a+u|0)+-1|0)>>>0)for(;C=0|ct[p>>0],ct[p>>0]=0|ct[P>>0],p=p+1|0,ct[P>>0]=C,p>>>0<(P=P+-1|0)>>>0;);while(0|g)}function ir(a){var u,g,C,P=0,p=0,w=0,R=0,V=0,F=0,tt=0,A=0,W=0,v=0,O=0,L=0,k=0,q=0,G=(P=0|n[(g=(a|=0)+336|0)>>2])+(20*(A=0|n[(C=a+332|0)>>2])|0)|0,W=a+424|0,V=0|n[a+48>>2],F=0|n[a+316>>2],tt=0|n[a+308>>2];if(0<(0|A))for(A=0|n[W>>2],w=0|n[a+448>>2],R=0|n[a+444>>2];0|n[A>>2]&&((0|(p=0|n[P+4>>2]))!=-1&&(l[w>>2]=+l[V+(p<<2)>>2]*+l[w>>2]),(0|(p=0|n[P+8>>2]))!=-1&&(l[w>>2]=+l[F+(p<<2)>>2]*+l[w>>2],O=0|n[R>>2],Ln[3&n[tt+(p<<5)+24>>2]](a,p,O,O,0|n[P+16>>2]))),!(G>>>0<=(P=P+20|0)>>>0);)A=A+4|0,w=w+4|0,R=R+4|0;if(!((0|Jt[4+(0|n[a>>2])>>0])<4||(tt=(P=0|n[g>>2])+(20*(O=0|n[C>>2])|0)|0,V=0|n[a+324>>2],F=0|n[a+328>>2],(0|O)<=0)))for(R=0|n[W>>2],p=P,w=0|n[a+452>>2],P=0|n[a+456>>2];0|n[R>>2]&&(0|(v=0|n[p+8>>2]))!=-1&&(L=+l[w>>2]*+l[(C=V+((W=v<<2)<<2)|0)>>2],l[w>>2]=L,k=+l[(O=w+4|0)>>2]*+l[4+C>>2],l[O>>2]=k,q=+l[(a=w+8|0)>>2]*+l[8+C>>2],l[w>>2]=L<0?0:1<L?1:L,l[O>>2]=k<0?0:1<k?1:k,l[a>>2]=q<0?0:1<q?1:q,l[w+12>>2]=1,q=+l[P>>2],k=+l[(W=F+(W<<2)|0)>>2],l[P>>2]=k=q+k-q*k,q=+l[(a=P+4|0)>>2],L=+l[W+4>>2],l[a>>2]=L=q+L-q*L,u=(q=+l[(O=P+8|0)>>2])+(u=+l[W+8>>2])-q*u,l[P>>2]=k<0?0:1<k?1:k,l[a>>2]=L<0?0:1<L?1:L,l[O>>2]=u<0?0:1<u?1:u,l[P+12>>2]=1),!(tt>>>0<=(p=p+20|0)>>>0);)R=R+4|0,w=w+16|0,P=P+16|0}function Cr(a){var u,g=0|n[(a|=0)+332>>2];0|n[a+428>>2]&&(xi(0|n[a+460>>2],0|n[a+436>>2],0|(u=g<<2)),xi(0|n[a+464>>2],0|n[a+440>>2],0|u),xi(0|n[a+468>>2],0|n[a+448>>2],0|u),(0|Jt[4+(0|n[a>>2])>>0])<=3||(xi(0|n[a+472>>2],0|n[a+452>>2],0|(u=g<<4)),xi(0|n[a+476>>2],0|n[a+456>>2],0|u)))}function mr(a){var u,g,C,P,p,w,R,A,v,O,L,ut=0,ht=0,k=0,q=0,G=0,W=0,V=0,F=0,tt=0,ht=0|ct[4+(0|n[(a|=0)>>2])>>0],Z=0|n[a+332>>2],ut=a+428|0;if(0|n[a+620>>2]){if(!(((n[ut>>2]=0)|Z)<=0))for(q=a+424|0,G=a+432|0,ut=a+448|0,ht=0;k=0|n[(0|n[q>>2])+(ht<<2)>>2]&&+l[(0|n[ut>>2])+(ht<<2)>>2]!=0?127:126,ct[(0|n[G>>2])+ht>>0]=k,(0|(ht=ht+1|0))!=(0|Z););}else if(0|n[ut>>2]){if(!(((n[ut>>2]=0)|Z)<=0))if(C=a+424|0,w=a+432|0,p=a+448|0,A=a+468|0,P=a+440|0,R=a+464|0,O=a+436|0,v=a+460|0,u=a+452|0,W=a+472|0,g=a+456|0,G=a+476|0,(255&ht)<=3)for(ut=0;W=(0|n[(0|n[C>>2])+(ut<<2)>>2])==0,tt=+l[(0|n[p>>2])+(ut<<2)>>2],F=(0|n[w>>2])+ut|0,V=(1&ct[F>>0])==(V=tt!=0&(1^W)&1)<<24>>24?V:2|V,V=tt!=+l[(0|n[A>>2])+(ut<<2)>>2]?4|V:V,V=(0|n[(0|n[P>>2])+(ut<<2)>>2])==(0|n[(0|n[R>>2])+(ut<<2)>>2])?V:8|V,V=(0|n[(0|n[O>>2])+(ut<<2)>>2])==(0|n[(0|n[v>>2])+(ut<<2)>>2])?V:16|V,ct[F>>0]=W?V:32|V,(0|(ut=ut+1|0))!=(0|Z););else for(q=k=0;L=(0|n[(0|n[C>>2])+(k<<2)>>2])==0,tt=+l[(0|n[p>>2])+(k<<2)>>2],ht=(0|n[w>>2])+k|0,ut=(1&ct[ht>>0])==(ut=tt!=0&(1^L)&1)<<24>>24?ut:2|ut,ut=tt!=+l[(0|n[A>>2])+(k<<2)>>2]?4|ut:ut,ut=(0|n[(0|n[P>>2])+(k<<2)>>2])==(0|n[(0|n[R>>2])+(k<<2)>>2])?ut:8|ut,ut=(0|n[(0|n[O>>2])+(k<<2)>>2])==(0|n[(0|n[v>>2])+(k<<2)>>2])?ut:16|ut,ut=L?ut:32|ut,L=(0|n[u>>2])+(q<<2)|0,a=(0|n[W>>2])+(q<<2)|0,+l[L>>2]==+l[a>>2]&&+l[4+L>>2]==+l[a+4>>2]&&+l[8+L>>2]==+l[a+8>>2]&&+l[12+L>>2]==+l[a+12>>2]&&(V=(0|n[g>>2])+(q<<2)|0,F=(0|n[G>>2])+(q<<2)|0,+l[V>>2]==+l[F>>2])&&+l[V+4>>2]==+l[F+4>>2]&&+l[V+8>>2]==+l[F+8>>2]&&+l[V+12>>2]==+l[F+12>>2]||(ut|=64),ct[ht>>0]=ut,(0|(k=k+1|0))!=(0|Z);)q=q+4|0}else if(!((0|Z)<=0))for(k=a+424|0,q=a+432|0,ut=a+448|0,ht=0;0|n[(0|n[k>>2])+(ht<<2)>>2]&&+l[(0|n[ut>>2])+(ht<<2)>>2]!=0?(F=(0|n[q>>2])+ht|0,ct[F>>0]=1|ct[F>>0]):(F=(0|n[q>>2])+ht|0,ct[F>>0]=-2&ct[F>>0]),(0|(ht=ht+1|0))!=(0|Z););}function Zr(a){var u,g,C,P,p,w,R,Bt=0,A=0,v=0,O=0,L=0,k=0,q=0,Zt=0,$e=0,Oe=0,we=0,G=0,W=0,V=0,F=0,tt=0,ht=0,Z=0,ut=0,xt=0,Xt=0,Qt=0,It=0,Wt=0,Vt=0,dt=0,$t=0,Zt=0|n[(w=(a|=0)+60|0)>>2],Bt=0|n[a>>2],$e=0|n[Bt+784>>2],Oe=0|n[(R=a+56|0)>>2],we=0|n[Bt+1028>>2];if(0<(0|Oe)){for(tt=a+80|0,ut=a+92|0,Z=a+88|0,xt=a+84|0,ht=Bt+984|0,L=Bt+980|0,q=k=0;;){if(O=0|n[Zt+(24*k|0)>>2],(0|(It=0|n[(Bt=O+24|0)>>2]||0|n[O+28>>2]?15:It))==15&&(n[((It=0)|n[tt>>2])+(k<<2)>>2]=n[(F=O+12|0)>>2],0|n[Bt>>2])&&(G=0|n[$e+(k<<2)>>2],Xt=(W=0|n[O+16>>2])+((Wt=0|n[F>>2])<<2)|0,0<(0|Wt)))for(Bt=W,A=(0|n[Z>>2])+(q<<2)|0,v=(0|n[ut>>2])+(q<<2)|0;Wt=(0|n[Bt>>2])+G|0,n[v>>2]=we+(n[(0|n[ht>>2])+(Wt<<2)>>2]<<2),n[A>>2]=n[(0|n[L>>2])+(Wt<<2)>>2],!(Xt>>>0<=(Bt=Bt+4|0)>>>0);)A=A+4|0,v=v+4|0;if(0|n[O+28>>2]&&(Qt=(V=0|n[O+20>>2])+((Wt=0|n[O+12>>2])<<2)|0,0<(0|Wt)))for(Bt=(0|n[xt>>2])+(q<<2)|0,A=V;n[Bt>>2]=n[A>>2],!(Qt>>>0<=(A=A+4|0)>>>0);)Bt=Bt+4|0;if((0|(k=k+1|0))==(0|Oe))break;q=(0|n[O+8>>2])+q|0}Bt=0|n[a>>2]}if(!((0|Jt[Bt+4>>0])<4||(p=0|n[w>>2],Wt=0|n[Bt+792>>2],(0|(w=0|n[R>>2]))<=0)))for(g=a+96|0,u=a+100|0,R=a+104|0,P=a+108|0,C=a+112|0,It=a+116|0,Xt=Bt+1228|0,ut=Bt+1232|0,Z=Bt+1236|0,Qt=Bt+1240|0,xt=Bt+1244|0,Zt=Bt+1248|0,Oe=$e=0;;){if(Bt=0|n[p+(24*$e|0)>>2],0|n[Bt+24>>2]&&(Vt=0|n[Wt+($e<<2)>>2],$t=(dt=0|n[Bt+16>>2])+((a=0|n[Bt+12>>2])<<2)|0,0<(0|a)))for(A=0|n[Xt>>2],v=0|n[ut>>2],O=0|n[Z>>2],L=0|n[Qt>>2],k=0|n[xt>>2],q=0|n[Zt>>2],we=dt,G=(0|n[R>>2])+(Oe<<2)|0,W=(0|n[u>>2])+(Oe<<2)|0,V=(0|n[g>>2])+(Oe<<2)|0,F=(0|n[It>>2])+(Oe<<2)|0,tt=(0|n[C>>2])+(Oe<<2)|0,ht=(0|n[P>>2])+(Oe<<2)|0;a=(0|n[we>>2])+Vt|0,n[V>>2]=n[A+(a<<2)>>2],n[W>>2]=n[v+(a<<2)>>2],n[G>>2]=n[O+(a<<2)>>2],n[ht>>2]=n[L+(a<<2)>>2],n[tt>>2]=n[k+(a<<2)>>2],n[F>>2]=n[q+(a<<2)>>2],!($t>>>0<=(we=we+4|0)>>>0);)G=G+4|0,W=W+4|0,V=V+4|0,F=F+4|0,tt=tt+4|0,ht=ht+4|0;if((0|($e=$e+1|0))==(0|w))break;Oe=(0|n[Bt+8>>2])+Oe|0}}function li(a){var u,g,C,P,p,w,R=0,A=0,v=0,O=0,L=0,k=0,q=0,G=0,W=0,V=0,F=0,tt=0,ht=0,Z=0,Nr=0,ut=0,xt=0,Xt=0,Qt=0,It=0,Wt=0,Vt=0,dt=0,$t=0,Zt=0,Bt=0,$e=0,Oe=0,we=0,lr=0,nr=0,Ze=0,Ue=0,ur=0,Ar=0,Je=0,or=0,Ee=0,Le=0|n[(a|=0)+168>>2],nt=0|n[a>>2],Nr=0|n[816+nt>>2];if(0<(0|(ut=0|n[(w=a+164|0)>>2])))for($t=a+188|0,It=a+200|0,Oe=a+204|0,lr=a+208|0,P=a+212|0,Zt=a+196|0,p=a+192|0,Qt=992+nt|0,$e=996+nt|0,we=1e3+nt|0,C=1004+nt|0,Bt=988+nt|0,u=1008+nt|0,Wt=a+288|0,g=1012+nt|0,Vt=a+292|0,Ue=Ze=0;;){if(xt=0|n[Le+(12*Ze|0)>>2],(0|(ur=0|n[(R=xt+24|0)>>2]||0|n[xt+28>>2]?14:ur))==14&&(n[((ur=0)|n[$t>>2])+(Ze<<2)>>2]=n[(dt=xt+12|0)>>2],0|n[R>>2])){if(R=0|n[Nr+(Ze<<2)>>2],G=(A=0|n[xt+16>>2])+((Z=0|n[dt>>2])<<2)|0,0<(0|Z))for(v=0|n[Qt>>2],O=0|n[$e>>2],L=0|n[we>>2],k=0|n[C>>2],q=0|n[Bt>>2],W=(0|n[It>>2])+(Ue<<2)|0,V=A,F=(0|n[Zt>>2])+(Ue<<2)|0,tt=(0|n[Oe>>2])+(Ue<<2)|0,ht=(0|n[lr>>2])+(Ue<<2)|0,Z=(0|n[P>>2])+(Ue<<2)|0;Ee=(0|n[V>>2])+R|0,n[W>>2]=n[v+(Ee<<2)>>2],n[tt>>2]=n[O+(Ee<<2)>>2],n[ht>>2]=n[L+(Ee<<2)>>2],n[Z>>2]=n[k+(Ee<<2)>>2],n[F>>2]=n[q+(Ee<<2)>>2],!(G>>>0<=(V=V+4|0)>>>0);)W=W+4|0,F=F+4|0,tt=tt+4|0,ht=ht+4|0,Z=Z+4|0;Ee=(0|n[A>>2])+R|0,n[(0|n[Wt>>2])+(Ze<<2)>>2]=n[(0|n[u>>2])+(Ee<<2)>>2],n[(0|n[Vt>>2])+(Ze<<2)>>2]=n[(0|n[g>>2])+(Ee<<2)>>2]}if(0|n[xt+28>>2]&&(nr=(Xt=0|n[xt+20>>2])+((Ee=0|n[xt+12>>2])<<2)|0,0<(0|Ee)))for(R=(0|n[p>>2])+(Ue<<2)|0,A=Xt;n[R>>2]=n[A>>2],!(nr>>>0<=(A=A+4|0)>>>0);)R=R+4|0;if((0|(Ze=Ze+1|0))==(0|ut))break;Ue=(0|n[xt+8>>2])+Ue|0}if(!((0|Jt[4+nt>>0])<4||(lr=0|n[824+nt>>2],(0|($t=0|n[w>>2]))<=0)))for($e=a+216|0,Bt=a+220|0,Zt=a+224|0,we=a+228|0,Oe=a+232|0,dt=a+236|0,Wt=1228+nt|0,Qt=1232+nt|0,Xt=1236+nt|0,Vt=1240+nt|0,It=1244+nt|0,G=1248+nt|0,V=W=0;;){if(q=0|n[Le+(12*W|0)>>2],0|n[q+24>>2]&&(Je=0|n[lr+(W<<2)>>2],or=(Ar=0|n[q+16>>2])+((Ee=0|n[q+12>>2])<<2)|0,0<(0|Ee)))for(R=0|n[Wt>>2],A=0|n[Qt>>2],v=0|n[Xt>>2],O=0|n[Vt>>2],L=0|n[It>>2],k=0|n[G>>2],F=Ar,tt=(0|n[Zt>>2])+(V<<2)|0,ht=(0|n[Bt>>2])+(V<<2)|0,Z=(0|n[$e>>2])+(V<<2)|0,Nr=(0|n[dt>>2])+(V<<2)|0,ut=(0|n[Oe>>2])+(V<<2)|0,xt=(0|n[we>>2])+(V<<2)|0;Ee=(0|n[F>>2])+Je|0,n[Z>>2]=n[R+(Ee<<2)>>2],n[ht>>2]=n[A+(Ee<<2)>>2],n[tt>>2]=n[v+(Ee<<2)>>2],n[xt>>2]=n[O+(Ee<<2)>>2],n[ut>>2]=n[L+(Ee<<2)>>2],n[Nr>>2]=n[k+(Ee<<2)>>2],!(or>>>0<=(F=F+4|0)>>>0);)tt=tt+4|0,ht=ht+4|0,Z=Z+4|0,Nr=Nr+4|0,ut=ut+4|0,xt=xt+4|0;if((0|(W=W+1|0))==(0|$t))break;V=(0|n[q+8>>2])+V|0}}function ri(a){var u,g,C,P,Bt=0,p=0,w=0,R=0,A=0,v=0,O=0,L=0,Zt=0,$e=0,Oe=0,we=0,k=0,q=0,G=0,W=0,V=0,F=0,tt=0,ht=0,Z=0,ut=0,xt=0,Xt=0,Qt=0,It=0,Wt=0,Vt=0,dt=0,$t=0,Zt=0|n[(C=(a|=0)+336|0)>>2],Bt=0|n[a>>2],$e=0|n[Bt+856>>2],Oe=0|n[(P=a+332|0)>>2],we=0|n[Bt+1028>>2];if(0<(0|Oe)){for(V=a+356|0,ut=a+372|0,ht=a+364|0,F=a+368|0,xt=a+360|0,tt=Bt+1024|0,Z=Bt+1016|0,v=Bt+1020|0,L=O=0;;){if(A=0|n[Zt+(20*O|0)>>2],(0|(It=0|n[(Bt=A+24|0)>>2]||0|n[A+28>>2]?15:It))==15&&(n[((It=0)|n[V>>2])+(O<<2)>>2]=n[(W=A+12|0)>>2],0|n[Bt>>2])&&(k=0|n[$e+(O<<2)>>2],Xt=(q=0|n[A+16>>2])+((Wt=0|n[W>>2])<<2)|0,0<(0|Wt)))for(Bt=(0|n[F>>2])+(L<<2)|0,p=q,w=(0|n[ht>>2])+(L<<2)|0,R=(0|n[ut>>2])+(L<<2)|0;Wt=(0|n[p>>2])+k|0,n[R>>2]=we+(n[(0|n[tt>>2])+(Wt<<2)>>2]<<2),n[w>>2]=n[(0|n[Z>>2])+(Wt<<2)>>2],n[Bt>>2]=n[(0|n[v>>2])+(Wt<<2)>>2],!(Xt>>>0<=(p=p+4|0)>>>0);)Bt=Bt+4|0,w=w+4|0,R=R+4|0;if(0|n[A+28>>2]&&(Qt=(G=0|n[A+20>>2])+((Wt=0|n[A+12>>2])<<2)|0,0<(0|Wt)))for(Bt=(0|n[xt>>2])+(L<<2)|0,p=G;n[Bt>>2]=n[p>>2],!(Qt>>>0<=(p=p+4|0)>>>0);)Bt=Bt+4|0;if((0|(O=O+1|0))==(0|Oe))break;L=(0|n[A+8>>2])+L|0}Bt=0|n[a>>2]}if(!((0|Jt[Bt+4>>0])<4||(g=0|n[C>>2],Wt=0|n[Bt+864>>2],(0|(Xt=0|n[P>>2]))<=0)))for(C=a+376|0,It=a+380|0,Qt=a+384|0,u=a+388|0,P=a+392|0,xt=a+396|0,Z=Bt+1228|0,tt=Bt+1232|0,F=Bt+1236|0,ut=Bt+1240|0,ht=Bt+1244|0,L=Bt+1248|0,$e=Zt=0;;){if(Bt=0|n[g+(20*Zt|0)>>2],0|n[Bt+24>>2]&&(Vt=0|n[Wt+(Zt<<2)>>2],$t=(dt=0|n[Bt+16>>2])+((a=0|n[Bt+12>>2])<<2)|0,0<(0|a)))for(p=0|n[Z>>2],w=0|n[tt>>2],R=0|n[F>>2],A=0|n[ut>>2],v=0|n[ht>>2],O=0|n[L>>2],Oe=dt,we=(0|n[Qt>>2])+($e<<2)|0,k=(0|n[It>>2])+($e<<2)|0,q=(0|n[C>>2])+($e<<2)|0,G=(0|n[xt>>2])+($e<<2)|0,W=(0|n[P>>2])+($e<<2)|0,V=(0|n[u>>2])+($e<<2)|0;a=(0|n[Oe>>2])+Vt|0,n[q>>2]=n[p+(a<<2)>>2],n[k>>2]=n[w+(a<<2)>>2],n[we>>2]=n[R+(a<<2)>>2],n[V>>2]=n[A+(a<<2)>>2],n[W>>2]=n[v+(a<<2)>>2],n[G>>2]=n[O+(a<<2)>>2],!($t>>>0<=(Oe=Oe+4|0)>>>0);)we=we+4|0,k=k+4|0,q=q+4|0,G=G+4|0,W=W+4|0,V=V+4|0;if((0|(Zt=Zt+1|0))==(0|Xt))break;$e=(0|n[Bt+8>>2])+$e|0}}function Qr(a){var u,g,C,P=0;if(Cr(a|=0),function(p){p|=0;var w=0,R=0,A=0,v=0,O=0,L=0,k=0,q=0;if(w=0|n[p+4>>2],O=0|n[p>>2],L=w+(52*O|0)|0,!((0|O)<=0))for(O=0|n[p+12>>2];R=+l[O>>2],v=(0|n[w+16>>2])==0,p=w+4|0,R=v?(q=+l[p>>2],k=+l[w+8>>2],R<q?q:k<R?k:R):(q=+l[w+12>>2],(k=+l[p>>2])+q*((R=(R-k)/q)-(0|~~+D(+R)))),p=w+48|0,+l[(A=w+44|0)>>2]!=R?(n[p>>2]=1,l[A>>2]=R):n[p>>2]=0,v&&(l[O>>2]=R),!(L>>>0<=(w=w+52|0)>>>0);)O=O+4|0}(a+540|0),function(p){p|=0;var w=0,R=0,A=0,v=0,O=0,L=0,k=0,q=0,G=0,W=0,V=0,F=0,tt=0,ht=0,Z=0,ut=0,xt=0,Xt=0;if(w=0|n[p+544>>2],V=0|n[p+540>>2],ut=w+(52*V|0)|0,!((0|V)<=0)){V=(0|n[p+620>>2])==0;do t:do if(!(0|n[w>>2])&&(F=+l[w+44>>2],tt=+l[w+20>>2],ht=+l[w+24>>2],Z=0|n[w+28>>2],G=0|n[w+32>>2],xt=Z+(28*G|0)|0,0<(0|G))){if(!V)for(G=Z;;){O=0|n[G>>2];do if(1<=(0|O)){if(v=0|n[G+4>>2],A=+l[v>>2],R=A-tt,(0|O)==1){O=!(F<tt+A)|!(R<F),R=p=0,W=41;break}if(F<R){v=G+16|0,L=1,R=p=0,W=43;break}if(F<tt+A)R=p=O=0,W=41;else{for(p=1;R=+l[v+(p<<2)>>2],!(F<tt+R);){if(!((0|(p=p+1|0))<(0|O))){W=40;break}A=R}if((0|W)==40){v=G+16|0,p=O+-(L=1)|0,R=0,W=43;break}W=(R=R-tt<F?O=0:(p=p+-1|0,(R-=A)<ht?O=0:(O=0,(F-A)/R)),41)}}else R=p=O=0,W=41;while(0);if((0|W)==41&&(O|(W=0)==(0|n[(v=G+16|0)>>2])?(L=1&O,W=43):(n[G+24>>2]=1,n[G+20>>2]=1,q=G+8|0,k=G+12|0,O=0)),(0|W)==43&&(A=+l[(k=G+12|(W=0))>>2],Xt=A!=R,O=1&((0|n[(q=G+8|0)>>2])!=(0|p)|Xt&(R==0|A==0)),n[G+24>>2]=1&Xt,n[G+20>>2]=O,O=L),l[k>>2]=R,n[q>>2]=p,n[v>>2]=O,xt>>>0<=(G=G+28|0)>>>0)break t}if(!(0|n[w+48>>2])){for(p=Z;;)if(n[p+24>>2]=0,n[p+20>>2]=0,xt>>>0<=(p=p+28|0)>>>0)break t}G=Z;do{O=0|n[G>>2];do if(1<=(0|O)){if(v=0|n[G+4>>2],A=+l[v>>2],R=A-tt,(0|O)==1){O=!(F<tt+A)|!(R<F),R=p=0,W=24;break}if(F<R){v=G+16|0,L=1,R=p=0,W=26;break}if(F<tt+A)R=p=O=0,W=24;else{for(p=1;R=+l[v+(p<<2)>>2],!(F<tt+R);){if(!((0|(p=p+1|0))<(0|O))){W=21;break}A=R}if((0|W)==21){v=G+16|0,p=O+-(L=1)|0,R=0,W=26;break}W=(R=R-tt<F?O=0:(p=p+-1|0,(R-=A)<ht?O=0:(O=0,(F-A)/R)),24)}}else R=p=O=0,W=24;while(0)}while((0|W)==24&&(O|(W=0)==(0|n[(v=G+16|0)>>2])?(L=1&O,W=26):(n[G+24>>2]=1,n[G+20>>2]=1,q=G+8|0,k=G+12|0,O=0)),(0|W)==26&&(A=+l[(k=G+12|(W=0))>>2],Xt=A!=R,O=1&((0|n[(q=G+8|0)>>2])!=(0|p)|Xt&(R==0|A==0)),n[G+24>>2]=1&Xt,n[G+20>>2]=O,O=L),l[k>>2]=R,n[q>>2]=p,n[v>>2]=O,(G=G+28|0)>>>0<xt>>>0)}while(0);while((w=w+52|0)>>>0<ut>>>0)}}(a),Tr(a),function(p){p|=0;var w=0,R=0,A=0,v=0,O=0,L=0,k=0,q=0,G=0,W=0,V=0,F=0,tt=0,ht=0,Z=0,ut=0,xt=0,Xt=0,Qt=0,It=0,Wt=0,Vt=0;if(w=0|n[p+568>>2],tt=0|n[p+564>>2],xt=w+(36*tt|0)|0,!((0|tt)<=0)){tt=(0|n[p+620>>2])==0;do{F=0|n[w+4>>2];t:do if(0<(0|F))for(L=0|n[w>>2],A=p=R=k=0;;){if(v=0|n[L+(k<<2)>>2],0|n[v+16>>2]){A=1,p=R=0;break t}if(A=A||0|n[v+24>>2],p=p||0|n[v+20>>2],R=R+(+l[v+12>>2]!=0&1)|0,(0|F)<=(0|(k=k+1|0))){L=R,It=11;break}}else A=p=L=0,It=11;while(0);t:do if((0|It)==11)if(R=tt?p:1,(It=0)!=((p=tt?A:1)|R|0)&&(Qt=1<<L,n[w+12>>2]=Qt,ht=0|n[w>>2],Z=0|n[w+16>>2],ut=0|n[w+20>>2],Xt=Z+(Qt<<2)|0,(0|L)!=31)){for(di(0|Z,0,((A=Z+4|0)>>>0<Xt>>>0?Xt:A)+~Z+4&-4|0),A=ut+(Qt<<2)|0,v=ut;l[v>>2]=1,(v=v+4|0)>>>0<A>>>0;);if(1<=(0|F)){if(!L)for(L=0,q=1;;){if(v=0|n[ht+(L<<2)>>2],k=0|U(0|n[v+8>>2],q),(O=+l[v+12>>2])==0)for(A=0;n[(V=Z+(A<<2)|0)>>2]=(0|n[V>>2])+k,(0|(A=A+1|0))!=(0|Qt););else n[Z>>2]=(0|n[Z>>2])+k,l[ut>>2]=(1-O)*+l[ut>>2];if(q=0|U(0|n[v>>2],q),(0|(L=L+1|0))==(0|F)){A=0;break t}}W=0,V=A=1;do if(G=0|n[ht+(W<<2)>>2],v=0|n[8+G>>2],q=0|U(v,V),(O=+l[(k=12+G|0)>>2])==0)for(v=0;n[(k=Z+(v<<2)|0)>>2]=(0|n[k>>2])+q,(0|(v=v+1|0))!=(0|Qt););else{for(L=0|U(v+1|0,V),n[Z>>2]=(0|n[Z>>2])+q,l[ut>>2]=(1-O)*+l[ut>>2],v=1;O=+l[k>>2],Vt=(v&A|0)!=0,n[(Wt=Z+(v<<2)|0)>>2]=(Vt?L:q)+(0|n[Wt>>2]),l[(Wt=ut+(v<<2)|0)>>2]=(Vt?O:1-O)*+l[Wt>>2],(0|(v=v+1|0))!=(0|Qt););A<<=1}while(V=0|U(0|n[G>>2],V),(0|(W=W+1|0))!=(0|F));A=0}else A=0}else A=0;while(0)}while(n[w+28>>2]=p,n[w+24>>2]=R,n[w+32>>2]=A,(w=w+36|0)>>>0<xt>>>0)}}(a),Ji(a),g=0|n[a+4>>2],u=(P=0|n[a+52>>2])+(g<<2)|0,0<(0|g))for(;C=+l[P>>2],l[P>>2]=C<0?0:1<C?1:C,(P=P+4|0)>>>0<u>>>0;);(function(p,w,R){p|=0,w|=0,R|=0;var A=0,v=0;if(v=w+(12*p|0)|0,!((0|p)<=0))for(A=R;;){do if(0|n[w+8>>2]){if((0|(p=0|n[w+4>>2]))!=-1&&!(0|n[R+(p<<2)>>2])){p=0;break}p=(0|n[32+(0|n[w>>2])>>2])==0}else p=0;while(0);if(n[A>>2]=1&p,v>>>0<=(w=w+12|0)>>>0)break;A=A+4|0}})(g,0|n[a+8>>2],0|n[a+40>>2]),function(p){var w,R,A,v,O,xt=0,L=0,k=0,q=0,G=0,W=0,V=0,F=0,tt=0,ht=0,Z=0,ut=0|n[(p|=0)+8>>2],xt=0|n[p>>2],Xt=0|n[xt+724>>2],Qt=0|n[p+4>>2];if(!((0|Qt)<=0))for(v=p+28|0,O=p+36|0,A=p+32|0,R=xt+976|0,q=k=0;;){if(w=0|n[ut+(12*k|0)>>2],(0|(Z=0|n[(p=24+w|0)>>2]||0|n[28+w>>2]?6:Z))==6&&(n[((Z=0)|n[v>>2])+(k<<2)>>2]=n[(F=12+w|0)>>2],0|n[p>>2])&&(V=0|n[Xt+(k<<2)>>2],tt=(G=0|n[16+w>>2])+((L=0|n[F>>2])<<2)|0,0<(0|L)))for(p=0|n[R>>2],xt=(0|n[O>>2])+(q<<2)|0,L=G;n[xt>>2]=n[p+((0|n[L>>2])+V<<2)>>2],!(tt>>>0<=(L=L+4|0)>>>0);)xt=xt+4|0;if(0|n[28+w>>2]&&(ht=(W=0|n[20+w>>2])+((L=0|n[12+w>>2])<<2)|0,0<(0|L)))for(p=(0|n[A>>2])+(q<<2)|0,xt=W;n[p>>2]=n[xt>>2],!(ht>>>0<=(xt=xt+4|0)>>>0);)p=p+4|0;if((0|(k=k+1|0))==(0|Qt))break;q=(0|n[8+w>>2])+q|0}}(a),function(p){De((p|=0)+12|0,0|n[p+36>>2],0|n[p+44>>2],0|n[p+40>>2])}(a),function(p){var w=0,R=0,A=0,v=0,O=0,L=0,k=0,q=0,G=0;if(B=(G=B)+16|0,q=G,w=n[(p=p|0)+308>>2]|0,A=n[p+304>>2]|0,k=w+(A<<5)|0,v=n[p+40>>2]|0,O=n[p+312>>2]|0,L=n[p+144>>2]|0,R=n[p+264>>2]|0,(0|A)<=0)B=G;else{for(A=O;;){do if(0|n[w+28>>2]){if((0|(p=0|n[w+4>>2]))!=-1&&!(0|n[v+(p<<2)>>2])){p=0;break}if((0|(p=0|n[w+8>>2]))!=-1&&!(0|n[O+(p<<2)>>2])){p=0;break}p=(0|n[32+(0|n[w>>2])>>2])==0}else p=0;while(0);switch(p&=1,n[A>>2]=p,0|n[w+12>>2]){case 0:n[L+(n[w+16>>2]<<2)>>2]=p;break;case 1:n[R+(n[w+16>>2]<<2)>>2]=p;break;default:zt(0,2458,q)}if(k>>>0<=(w=w+32|0)>>>0)break;A=A+4|0}B=G}}(a),Zr(a),li(a),te(a),de(a),function(p){p|=0;var w=0,R=0,A=0,v=0,O=0;if(w=0|n[p+336>>2],R=0|n[p+332>>2],O=w+(20*R|0)|0,A=0|n[p+40>>2],v=0|n[p+312>>2],!((0|R)<=0))for(R=0|n[p+424>>2];;){do if(0|n[w+12>>2]){if((0|(p=0|n[w+4>>2]))!=-1&&!(0|n[A+(p<<2)>>2])){p=0;break}if((0|(p=0|n[w+8>>2]))!=-1&&!(0|n[v+(p<<2)>>2])){p=0;break}p=(0|n[32+(0|n[w>>2])>>2])==0}else p=0;while(0);if(n[R>>2]=1&p,O>>>0<=(w=w+20|0)>>>0)break;R=R+4|0}}(a),ri(a),ee(a),function(p){var w,R,A,v,O,xt=0,L=0,k=0,q=0,G=0,W=0,V=0,F=0,tt=0,ht=0,Z=0,ut=0|n[(p|=0)+504>>2],xt=0|n[p>>2],Xt=0|n[xt+1192>>2],Qt=0|n[p+500>>2];if(!((0|Qt)<=0))for(v=p+524|0,O=p+532|0,A=p+528|0,R=xt+1224|0,q=k=0;;){if(w=0|n[ut+(24*k|0)>>2],(0|(Z=0|n[(p=24+w|0)>>2]||0|n[28+w>>2]?6:Z))==6&&(n[((Z=0)|n[v>>2])+(k<<2)>>2]=n[(F=12+w|0)>>2],0|n[p>>2])&&(V=0|n[Xt+(k<<2)>>2],tt=(G=0|n[16+w>>2])+((L=0|n[F>>2])<<2)|0,0<(0|L)))for(p=0|n[R>>2],xt=(0|n[O>>2])+(q<<2)|0,L=G;n[xt>>2]=n[p+((0|n[L>>2])+V<<2)>>2],!(tt>>>0<=(L=L+4|0)>>>0);)xt=xt+4|0;if(0|n[28+w>>2]&&(ht=(W=0|n[20+w>>2])+((L=0|n[12+w>>2])<<2)|0,0<(0|L)))for(p=(0|n[A>>2])+(q<<2)|0,xt=W;n[p>>2]=n[xt>>2],!(ht>>>0<=(xt=xt+4|0)>>>0);)p=p+4|0;if((0|(k=k+1|0))==(0|Qt))break;q=(0|n[8+w>>2])+q|0}}(a),function(p){Lt((p|=0)+508|0,0|n[p+532>>2],0|n[p+536>>2],0)}(a),je(a),Qe(a),function(p){var w=0,R=0,A=0,v=0,O=0,L=(w=0|n[(p|=0)+8>>2])+(12*(O=0|n[p+4>>2])|0)|0,k=0|n[p+48>>2];if(!((0|O)<=0))for(O=0|n[p+40>>2],R=k,p=0|n[p+52>>2];0|n[O>>2]&&(A=+l[p>>2],l[R>>2]=A,(0|(v=0|n[w+4>>2]))!=-1)&&(l[R>>2]=A*+l[k+(v<<2)>>2]),!(L>>>0<=(w=w+12|0)>>>0);)O=O+4|0,R=R+4|0,p=p+4|0}(a),function(p){var w=0,R=0,A=0,v=0|n[(p|=0)+304>>2];if(!((0|v)<=0))for(w=0|n[p+312>>2],R=0|n[p+308>>2],A=0;0|n[w>>2]&&N0[3&n[R+20>>2]](p,A),(0|(A=A+1|0))!=(0|v);)w=w+4|0,R=R+32|0}(a),ir(a),Ft(a),function(p){p|=0;var w,R,A=0,v=0,O=0,L=0,k=0;if(!(0|n[p+624>>2]||(w=(A=0|n[p+336>>2])+(20*(L=0|n[p+332>>2])|0)|0,(0|L)<=0)))for(L=0|n[p+424>>2],p=0|n[p+444>>2];;){if(0|n[L>>2]&&(O=0|n[p>>2],k=(v=0|n[A+16>>2])<<1,0<(0|v)))for(v=1;l[(R=O+(v<<2)|0)>>2]=-+l[R>>2],(0|(v=v+2|0))<(0|k););if(w>>>0<=(A=A+20|0)>>>0)break;L=L+4|0,p=p+4|0}}(a),function(p){p|=0;var w=0,R=0,A=0,v=0,O=0,L=0,k=0,q=0,G=0,W=0,V=0,F=0,tt=0,ht=0,Z=0,ut=0;if(Z=0|n[p+480>>2],ut=0|n[p+484>>2],q=ut+(28*Z|0)|0,w=0|n[p+440>>2],R=0|n[p+44>>2],A=0|n[p+40>>2],v=0|n[p+424>>2],!((0|Z)<=0)){G=ut;do if(0<(0|(O=0|n[G+4>>2])))for(L=0|n[G+12>>2],k=G+20|0,W=0;ht=0|n[L+(W<<4)+4>>2],tt=(0|n[L+(W<<4)>>2])==1,n[L+(W<<4)+12>>2]=n[(0|n[(tt?A:v)+(ht<<2)>>2]?(tt?R:w)+(ht<<2)|0:k)>>2],(0|(W=W+1|0))!=(0|O););while((G=G+28|0)>>>0<q>>>0);F=0|n[p+436>>2],tt=p+488|0,ht=p+492|0,W=p+496|0,V=0;do{if(0<(0|n[(p=ut+(28*V|0)+24|0)>>2])){for(w=0|n[tt>>2],A=0;n[w+(A<<2)>>2]=-1,A=A+1|0,R=0|n[p>>2],(0|A)<(0|R););if(0<(0|R))for(w=0|n[W>>2],R=0;n[w+(R<<2)>>2]=-1,(0|(R=R+1|0))<(0|n[p>>2]););}if(0<(0|n[(G=ut+(28*V|0)+4|0)>>2])){for(q=0|n[ht>>2],R=0;n[q+(R<<2)>>2]=-1,R=R+1|0,w=0|n[G>>2],(0|R)<(0|w););if(0<(0|w))for(A=0|n[ut+(28*V|0)+12>>2],O=ut+(28*V|0)+20|0,v=0|n[W>>2],k=0;R=(0|n[A+(k<<4)+12>>2])-(0|n[O>>2])|0,w=(0|(w=0|n[(L=v+(R<<2)|0)>>2]))==-1?(0|n[tt>>2])+(R<<2)|0:q+(w<<2)|0,n[w>>2]=k,(0|(k=(n[L>>2]=k)+1|0))<(0|n[G>>2]););}if(0<(0|(w=0|n[p>>2]))){k=0|n[tt>>2],q=ut+(28*V|0)+12|0,R=(L=0)|n[ut+(28*V|0)+8>>2];do if((0|(A=0|n[k+(L<<2)>>2]))!=-1){for(v=0|n[q>>2],O=0|n[ht>>2];w=(0|n[v+(A<<4)>>2])==1?(w=0|n[v+(A<<4)+8>>2],n[ut+(28*w|0)+8>>2]=R,0|n[ut+(28*w|0)>>2]):(n[F+(n[v+(A<<4)+4>>2]<<2)>>2]=R,1),R=w+R|0,!((0|(A=0|n[O+((G=A)<<2)>>2]))<=(0|G)|(0|A)==-1););w=0|n[p>>2]}while((0|(L=L+1|0))<(0|w))}}while((0|(V=V+1|0))!=(0|Z))}}(a),mr(a),n[a+620>>2]=0}function Tr(a){a|=0;var u,g,C=0,P=0,p=0,w=0,R=0,A=0,v=0,O=0,L=0,k=0,q=0,G=0,W=0,V=0,F=0;if(!((0|Jt[4+(0|n[a>>2])>>0])<4||(g=(C=0|n[a+544>>2])+(52*(u=0|n[a+540>>2])|0)|0,(0|u)<=0))){u=(0|n[a+620>>2])==0;do t:do if((0|n[C>>2])==1&&(G=+l[C+44>>2],W=0|n[C+36>>2],v=0|n[C+40>>2],V=W+(28*v|0)|0,0<(0|v))){if(!u)for(A=W;;){p=0|n[A>>2];do if(2<=(0|p)&&(k=0|n[A+4>>2],!(G<=(q=+l[k>>2])))){for(w=1,R=q;;){if(a=w+1|0,G<(P=+l[k+(w<<2)>>2])){v=25;break}if(!((0|a)<(0|p))){v=26;break}w=a,R=P}if((0|v)==25){a=w+-1|0,P=(G-R)/(P-R);break}if((0|v)==26){a=p+-1|0,P=0;break}}else P=a=0;while(0);if(R=+l[(w=A+16|0)>>2],p=1&((0|n[(v=A+12|0)>>2])!=(0|a)|(F=R!=P)&(P==0|R==0)),n[A+24>>2]=1&F,n[A+20>>2]=p,l[w>>2]=P,n[v>>2]=a,V>>>0<=(A=A+28|0)>>>0)break t}if(!(0|n[C+48>>2])){for(a=W;;)if(n[a+24>>2]=0,V>>>(n[a+20>>2]=0)<=(a=a+28|0)>>>0)break t}A=W;do{p=0|n[A>>2];do if(2<=(0|p)&&(O=0|n[A+4>>2],!(G<=(L=+l[O>>2])))){for(w=1,R=L;;){if(a=w+1|0,G<(P=+l[O+(w<<2)>>2])){v=17;break}if(!((0|a)<(0|p))){v=18;break}w=a,R=P}if((0|v)==17){a=w+-1|0,P=(G-R)/(P-R);break}if((0|v)==18){a=p+-1|0,P=0;break}}else P=a=0;while(0)}while(R=+l[(v=A+16|0)>>2],w=1&((0|n[(F=A+12|0)>>2])!=(0|a)|(p=R!=P)&(P==0|R==0)),n[A+24>>2]=1&p,n[A+20>>2]=w,l[v>>2]=P,n[F>>2]=a,(A=A+28|0)>>>0<V>>>0)}while(0);while((C=C+52|0)>>>0<g>>>0)}}function Ji(a){a|=0;var u,g,C,P,p=0,w=0,R=0,A=0,v=0,O=0,L=0,k=0,q=0,G=0,W=0,V=0;if(!((0|Jt[4+(0|n[a>>2])>>0])<4||(P=(p=0|n[a+592>>2])+(48*(C=0|n[a+588>>2])|0)|0,(0|C)<=0))){C=(0|n[a+620>>2])==0;do{if(a=0|n[p>>2],R=C?0|n[a+24>>2]:1,(k=C?0|n[a+20>>2]:1)|R){L=0|n[a+12>>2],w=+l[a+16>>2],O=(0|L)==(0|(a=0|n[a+8>>2]));do if(w!=0){if(v=L+1|0,O){w=(R=a=n[p+8>>2]=1)-w,O=11;break}a=(0|v)==(0|a)?1:2,O=10;break}while(a=1&(1^O),O=10,0);(0|O)==10&&(O=0,n[p+8>>2]=a,R?(v=L,a=k,O=11):(v=L,a=k,R=0)),(0|O)==11&&(l[p+20>>2]=1-w,l[p+24>>2]=w),a?(n[p+12>>2]=v,n[p+16>>2]=v+1):a=0}else a=k;u=0|n[p+36>>2];t:do if(0<(0|u)){if(g=0|n[p+40>>2],!C)for(V=0,w=1;;){W=0|n[g+(V<<2)>>2],O=0|n[W+4>>2],L=0|n[W+8>>2],k=0|n[W+12>>2],G=+l[44+(0|n[W>>2])>>2];do if(1<=(0|k)){if((0|k)==1){A=+l[L>>2];break}if(G<=(A=+l[O>>2])){A=+l[L>>2];break}for(v=1;;){if(G<(q=+l[O+(v<<2)>>2])){O=40;break}if(!((0|(v=v+1|0))<(0|k))){O=41;break}A=q}if((0|O)==40){A=(1-(A=(G-A)/(q-A)))*+l[L+(v+-1<<2)>>2]+A*+l[L+(v<<2)>>2];break}if((0|O)==41){A=+l[L+(k+-1<<2)>>2];break}}else A=1;while(0);if(w=w<(l[W+16>>2]=A)?w:A,(0|(V=V+1|0))==(0|u))break t}V=0,w=1;do if(W=0|n[g+(V<<2)>>2],v=0|n[W>>2],0|n[v+48>>2]){O=0|n[W+4>>2],L=0|n[W+8>>2],k=0|n[W+12>>2],G=+l[v+44>>2];do if(1<=(0|k)){if((0|k)==1){A=+l[L>>2];break}if(G<=(A=+l[O>>2])){A=+l[L>>2];break}for(v=1;;){if(G<(q=+l[O+(v<<2)>>2])){O=28;break}if(!((0|(v=v+1|0))<(0|k))){O=27;break}A=q}if((0|O)==27){A=+l[L+(k+-1<<2)>>2];break}if((0|O)==28){A=(1-(A=(G-A)/(q-A)))*+l[L+(v+-1<<2)>>2]+A*+l[L+(v<<2)>>2];break}}else A=1;while(0);l[W+16>>2]=A}else A=+l[W+16>>2];while(w=w<A?w:A,(0|(V=V+1|0))!=(0|u))}else w=1;while(0)}while(l[p+44>>2]=w,n[p+28>>2]=a,n[p+32>>2]=R,(p=p+48|0)>>>0<P>>>0)}}function $i(a,u,g){a|=0,u|=0,g|=0;var C,P,p,w=0,R=B;B=B+144|0,xi(0|(P=R),640,144),n[P+48>>2]=w=(w=-2-a|0)>>>0<256?w:256,n[(C=P+20|0)>>2]=a,p=(n[P+44>>2]=a)+w|0,n[(a=P+16|0)>>2]=p,n[P+28>>2]=p,ii(P,u,g),0|w&&(p=0|n[C>>2],ct[p+(((0|p)==(0|n[a>>2]))<<31>>31)>>0]=0),B=R}function ii(a,u,g){ui(a|=0,u|=0,g|=0)}function Ni(a,u,g,C,P,p){a|=0,u=+u,g|=0,C|=0,P|=0,p|=0;var w,R=0,A=0,v=0,O=0,L=0,k=0,q=0,G=0,W=0,V=0,F=0,tt=0,ht=0,Z=0,ut=0,xt=0,Xt=0,Qt=0,It=0,Wt=0,Vt=0,dt=B;B=B+560|0,O=dt+32|0,It=(v=(Wt=Vt=dt)+540|0)+12|(n[(F=dt+536|0)>>2]=0),Vo(u),Xt=(0|(R=0|rt()))<0?(Vo(u=-u),R=0|rt(),Qt=1,2539):(Qt=(2049&P|0)!=0&1,2048&P|0?2542:1&P|0?2545:2540);do if(!0&(2146435072&R|0)==2146435072)Vt=(32&p|0)!=0,$r(a,32,g,R=Qt+3|0,-65537&P),Dr(a,Xt,Qt),Dr(a,u!=u|!1?Vt?2566:2570:Vt?2558:2562,3),$r(a,32,g,R,8192^P);else{if((R=(G=2*+Wo(u,F))!=0)&&(n[F>>2]=(0|n[F>>2])-1),(0|(ht=32|p))==97){W=0|(k=32&p)?Xt+9|0:Xt,q=2|Qt,R=12-C|0;do if(!(11<C>>>0|(0|R)==0)){for(u=8;u*=16,(0|(R=R+-1|0))!=0;);if((0|ct[W>>0])==45){u=-(u+(-G-u));break}u=G+u-u;break}while(u=G,0);for((0|(R=0|Ki(R=(0|(A=0|n[F>>2]))<0?0-A|0:A,((0|R)<0)<<31>>31,It)))==(0|It)&&(ct[(R=v+11|0)>>0]=48),ct[R+-1>>0]=43+(A>>31&2),ct[(L=R+-2|0)>>0]=p+15,A=(0|C)<1,v=(8&P|0)==0,R=Vt;O=R+1|0,ct[R>>0]=k|Jt[480+(Qt=~~u)>>0],u=16*(u-(0|Qt)),(O-Wt|0)!=1||v&A&u==0||(ct[O>>0]=46,O=R+2|0),u!=0;)R=O;$r(a,32,g,It=(R=0|C&&(-2-Wt+O|0)<(0|C)?C+2+(A=It)-(v=L)|0:(A=It)-Wt-(v=L)+O|0)+q|0,P),Dr(a,W,q),$r(a,48,g,It,65536^P),Dr(a,Vt,Wt=O-Wt|0),$r(a,48,R-(Wt+(Vt=A-v|0))|0,0,0),Dr(a,L,Vt),$r(a,32,g,It,8192^P),R=It;break}for(A=(0|C)<0?6:C,u=R?(v=(0|n[F>>2])-28|0,n[F>>2]=v,268435456*G):(v=0|n[F>>2],G),O=w=(0|v)<0?O:O+288|0;n[O>>2]=ut=~~u>>>0,O=O+4|0,(u=1e9*(u-(ut>>>0)))!=0;);if(ut=w,0<(0|v)){R=w;do{if(k=(0|v)<29?v:29,R>>>0<=(v=O+-4|0)>>>0){for(L=0;V=0|Yr(0|(V=0|C0(0|n[v>>2],0,0|k)),0|rt(),0|L,0),Z=0|Yr(0|V,0|(tt=0|rt()),0|(Z=0|Cn(0|(L=0|ph(0|V,0|tt,1e9,0)),0|rt(),-1e9,-1)),0|rt()),rt(),n[v>>2]=Z,R>>>0<=(v=v+-4|0)>>>0;);L&&(n[(R=R+-4|0)>>2]=L)}t:do if(R>>>0<O>>>0)for(;;){if(0|n[(v=O+-4|0)>>2])break t;if(!(R>>>0<v>>>0)){O=v;break}O=v}while(0)}while(v=(0|n[F>>2])-k|0,0<(0|(n[F>>2]=v)))}else R=w;if((0|v)<0){C=1+((A+25|0)/9|0)|0,V=(0|ht)==102;do if(W=(0|(W=0-v|0))<9?W:9,R>>>0<O>>>0){for(k=(1<<W)-1|0,L=W?1e9>>>W:1e9,q=0,v=R;Z=0|n[v>>2],n[v>>2]=(W?Z>>>W:Z)+q,q=0|U(Z&k,L),(v=v+4|0)>>>0<O>>>0;);R=0|n[R>>2]?R:R+4|0,q&&(n[O>>2]=q,O=O+4|0)}else R=0|n[R>>2]?R:R+4|0;while(O=(0|C)<((Z=O-(v=V?w:R)|0)>>2|0)?v+(C<<2)|0:O,v=(0|n[F>>2])+W|0,(0|(n[F>>2]=v))<0);V=O}else V=O;if(R>>>0<V>>>0){if(v=9*((v=ut-R|0)>>2)|0,10<=(L=0|n[R>>2])>>>0)for(O=10;v=v+1|0,(O=10*O|0)>>>0<=L>>>0;);}else v=0;if((0|(O=A-((0|ht)==102?0:v)+(((tt=(0|A)!=0)&(F=(0|ht)==103))<<31>>31)|0))<((9*((Z=V-ut|0)>>2)|0)-9|0)){if(C=w+4+((O=(0|(Z=O+9216|0))/9|0)+-1024<<2)|0,(0|(O=Z+(0|U(O,-9))|0))<8)for(L=10;L=10*L|0,(0|O)<7;)O=O+1|0;else L=10;if((q=(C+4|0)==(0|V))&(0|(k=(k=0|n[C>>2])-(W=0|U(O=(k>>>0)/(L>>>0)|0,L))|0))==0)O=C;else if(G=1&O|0?9007199254740994:9007199254740992,u=k>>>0<(Z=L>>>1)>>>0?.5:q&(0|k)==(0|Z)?1:1.5,Qt&&(G=(Z=(0|ct[Xt>>0])==45)?-G:G,u=Z?-u:u),n[C>>2]=W,G+u!=G){if(999999999<(n[C>>2]=Z=W+L|0)>>>0)for(v=C;(O=v+-4|0)>>>(n[v>>2]=0)<R>>>0&&(n[(R=R+-4|0)>>2]=0),Z=1+(0|n[O>>2])|0,999999999<(n[O>>2]=Z)>>>0;)v=O;else O=C;if(v=9*((v=ut-R|0)>>2)|0,10<=(k=0|n[R>>2])>>>0)for(L=10;v=v+1|0,(L=10*L|0)>>>0<=k>>>0;);}else O=C;Z=R,R=(ht=O+4|0)>>>0<V>>>0?ht:V}else Z=R,R=V;W=0-v|0;t:do if(Z>>>0<R>>>0)for(;;){if(0|n[(O=R+-4|0)>>2]){V=1,ht=R;break t}if(!(Z>>>0<O>>>0)){V=0,ht=O;break}R=O}else V=0,ht=R;while(0);do if(F){if(L=(0|v)<(0|(R=A+(1&(1^tt))|0))&-5<(0|v)?(A=R+-1-v|0,p+-1|0):(A=R+-1|0,p+-2|0),!(8&P)){if(V&&0|(xt=0|n[ht+-4>>2]))if((xt>>>0)%10|0)O=0;else for(R=10,O=0;O=O+1|0,!((xt>>>0)%((R=10*R|0)>>>0)|0););else O=9;if(R=(9*((R=ht-ut|0)>>2)|0)-9|0,(32|L)==102){A=(0|A)<(0|(p=0<(0|(p=R-O|0))?p:0))?A:p;break}A=(0|A)<(0|(p=0<(0|(p=R+v-O|0))?p:0))?A:p;break}}else L=p;while(0);if(k=(C=(0|A)!=0)?1:P>>>3&1,q=(32|L)==102)R=(tt=0)<(0|v)?v:0;else{if(((O=It)-(R=0|Ki(R=(0|v)<0?W:v,((0|R)<0)<<31>>31,It))|0)<2)for(;ct[(R=R+-1|0)>>0]=48,(O-R|0)<2;);ct[R+-1>>0]=43+(v>>31&2),ct[(R=R+-2|0)>>0]=L,R=O-(tt=R)|0}if($r(a,32,g,R=Qt+1+A+k+R|0,P),Dr(a,Xt,Qt),$r(a,48,g,R,65536^P),q){q=W=Vt+9|0,L=Vt+8|0,O=k=w>>>0<Z>>>0?w:Z;do if(v=0|Ki(0|n[O>>2],0,W),(0|O)==(0|k))(0|v)==(0|W)&&(ct[L>>0]=48,v=L);else if(Vt>>>0<v>>>0)for(di(0|Vt,48,v-Wt|0);Vt>>>0<(v=v+-1|0)>>>0;);while(Dr(a,v,q-v|0),(O=O+4|0)>>>0<=w>>>0);if((8&P|0)==0&(1^C)||Dr(a,2574,1),O>>>0<ht>>>0&0<(0|A))for(;;){if(Vt>>>0<(v=0|Ki(0|n[O>>2],0,W))>>>0)for(di(0|Vt,48,v-Wt|0);Vt>>>0<(v=v+-1|0)>>>0;);if(Dr(a,v,(0|A)<9?A:9),v=A+-9|0,!((O=O+4|0)>>>0<ht>>>0&9<(0|A))){A=v;break}A=v}$r(a,48,A+9|0,9,0)}else{if(Z>>>0<(C=V?ht:Z+4|0)>>>0&-1<(0|A)){F=(8&P|0)==0,V=W=Vt+9|0,L=0-Wt|0,q=Vt+8|0,k=Z;do{(0|(v=0|Ki(0|n[k>>2],0,W)))==(0|W)&&(ct[q>>0]=48,v=q);do if((0|k)==(0|Z)){if(O=v+1|0,Dr(a,v,1),F&(0|A)<1){v=O;break}Dr(a,2574,1),v=O}else{if(v>>>0<=Vt>>>0)break;for(di(0|Vt,48,v+L|0);Vt>>>0<(v=v+-1|0)>>>0;);}while(0)}while(Dr(a,v,(0|(Wt=V-v|0))<(0|A)?Wt:A),(k=k+4|0)>>>0<C>>>0&-1<(0|(A=A-Wt|0)))}$r(a,48,A+18|0,18,0),Dr(a,tt,It-tt|0)}$r(a,32,g,R,8192^P)}while(0);return B=dt,0|((0|R)<(0|g)?g:R)}function ui(a,u,g){a|=0,u|=0,g|=0;var C,P,p,w,R,A,v,O,L=0,k=0,q=B;for(B=B+224|0,R=q+208|0,v=q+80|0,k=(L=O=(A=q)+160|0)+40|0;(0|(L=L+4|(n[L>>2]=0)))<(0|k););n[R>>2]=n[g>>2],0<=(0|We(0,u,R,v,O))&&(w=32&(g=0|n[a>>2]),(0|ct[a+74>>0])<1&&(n[a>>2]=-33&g),0|n[(k=a+48|0)>>2]?We(a,u,R,v,O):(g=0|n[(L=a+44|0)>>2],n[L>>2]=A,n[(C=a+28|0)>>2]=A,n[(p=a+20|0)>>2]=A,n[k>>2]=80,n[(P=a+16|0)>>2]=A+80,We(a,u,R,v,O),0|g&&(ia[3&n[a+36>>2]](a,0,0),n[L>>2]=g,n[k>>2]=0,n[P>>2]=0,n[C>>2]=0,n[p>>2]=0)),n[a>>2]=n[a>>2]|w),B=q}function We(a,u,g,C,P){a|=0,g|=0,C|=0,P|=0;var p,w,R,A,v,O,L,k,q,G=0,W=0,V=0,F=0,tt=0,ht=0,Z=0,ut=0,xt=0,Xt=0,Qt=0,It=0,Wt=0,Vt=B;B=B+64|0,O=Vt+40|0,q=(w=Vt)+48|0,L=Vt+60|0,n[(k=Vt+56|0)>>2]=u|=0,v=(0|a)!=0,A=p=w+40|0,w=w+39|0,R=4+q|0,F=G=u=0;t:for(;;){do{do if(-1<(0|u)){if((2147483647-u|0)<(0|G)){n[922]=61,u=-1;break}u=G+u|0;break}while(0);if(Z=0|n[k>>2],!((G=0|ct[Z>>0])<<24>>24)){It=91;break t}W=Z;e:for(;;){switch(G<<24>>24){case 37:It=10;break e;case 0:G=W;break e}n[k>>2]=Qt=W+1|0,G=0|ct[Qt>>0],W=Qt}e:do if((0|It)==10){It=0,G=V=W;do if((0|ct[V+1>>0])!=37)break e;while(G=G+1|0,n[k>>2]=V=V+2|0,(0|ct[V>>0])==37)}while(0)}while(G=G-Z|0,v&&Dr(a,Z,G),(0|G)!=0);if(V=0|n[k>>2],ht=0|Jr(G=0|ct[V+1>>0])?(W=(ht=(0|ct[V+2>>0])==36)?3:1,xt=ht?G+-48|0:-1,ht?1:F):(xt=-(W=1),F),n[k>>2]=W=V+W|0,31<(V=((G=0|ct[W>>0])<<24>>24)-32|0)>>>0|(1<<V&75913|0)==0)tt=0;else for(G=0;;){if(F=1<<V|G,n[k>>2]=W=W+1|0,31<(V=((G=0|ct[W>>0])<<24>>24)-32|0)>>>0|(1<<V&75913|0)==0){tt=F;break}G=F}if(G<<24>>24==42){if(0|Jr(G=0|ct[(V=W+1|0)>>0])&&(0|ct[W+2>>0])==36)n[P+(G+-48<<2)>>2]=10,F=1,G=W+3|0,W=0|n[C+((0|ct[V>>0])-48<<3)>>2];else{if(0|ht){u=-1;break}v?(F=3+(0|n[g>>2])&-4,W=0|n[F>>2],n[g>>2]=F+4,F=0,G=V):(G=V,W=F=0)}V=n[k>>2]=G,ut=(Xt=(0|W)<0)?8192|tt:tt,Qt=F,Xt=Xt?0-W|0:W}else{if((0|(G=0|bi(k)))<0){u=-1;break}V=0|n[k>>2],ut=tt,Qt=ht,Xt=G}do if((0|ct[V>>0])==46){if((0|ct[(G=V+1|0)>>0])!=42){n[k>>2]=G,tt=0|bi(k),G=0|n[k>>2];break}if(0|Jr(W=0|ct[(G=V+2|0)>>0])&&(0|ct[V+3>>0])==36){n[P+(W+-48<<2)>>2]=10,tt=0|n[C+((0|ct[G>>0])-48<<3)>>2],n[k>>2]=G=V+4|0;break}if(0|Qt){u=-1;break t}v?(ht=3+(0|n[g>>2])&-4,W=0|n[ht>>2],n[g>>2]=ht+4):W=0,n[k>>2]=G,tt=W}else G=V,tt=-1;while(0);for(ht=0;;){if(57<((0|ct[G>>0])-65|0)>>>0){u=-1;break t}if(n[k>>2]=W=G+1|0,!(((F=255&(V=0|ct[(0|ct[G>>0])-65+(16+(58*ht|0))>>0]))+-1|0)>>>0<8))break;G=W,ht=F}if(!(V<<24>>24)){u=-1;break}W=-1<(0|xt);do if(V<<24>>24==19){if(W){u=-1;break t}It=52}else{if(W){n[P+(xt<<2)>>2]=F,xt=0|n[(F=C+(xt<<3)|0)+4>>2],n[(It=O)>>2]=n[F>>2],n[It+4>>2]=xt,It=52;break}if(!v){u=0;break t}jo(O,F,g),It=53}while(0);(0|It)==52&&(It=0,v?It=53:G=0);e:do if((0|It)==53){V=(It=0)!=(0|ht)&(15&(V=0|ct[G>>0])|0)==3?-33&V:V,G=-65537&ut,xt=8192&ut|0?G:ut;r:do switch(0|V){case 110:switch((255&ht)<<24>>24){case 0:case 1:n[n[O>>2]>>2]=u,G=0;break e;case 2:G=0|n[O>>2],n[G>>2]=u,n[G+4>>2]=((0|u)<0)<<31>>31,G=0;break e;case 3:Ae[n[O>>2]>>1]=u,G=0;break e;case 4:ct[n[O>>2]>>0]=u,G=0;break e;case 6:n[n[O>>2]>>2]=u,G=0;break e;case 7:G=0|n[O>>2],n[G>>2]=u,n[G+4>>2]=((0|u)<0)<<31>>31,G=0;break e;default:G=0;break e}case 112:G=8|xt,W=8<tt>>>0?tt:8,F=120,It=65;break;case 88:case 120:G=xt,W=tt,F=V,It=65;break;case 111:tt=(8&(G=xt)|0)==0|(0|(V=A-(ht=0|function(dt,$t,Zt){if(Zt|=0,!((0|(dt|=0))==0&(0|($t|=0))==0))for(;ct[(Zt=Zt+-1|0)>>0]=7&dt|48,dt=0|ra(0|dt,0|$t,3),$t=0|rt(),!((0|dt)==0&(0|$t)==0););return 0|Zt}(Z=0|n[(ut=O)>>2],ut=0|n[ut+4>>2],p))|0))<(0|tt)?tt:V+1|0,V=0,W=2522,It=71;break;case 105:case 100:if(G=0|n[(W=O)>>2],(0|(W=0|n[W+4>>2]))<0){G=0|Dn(0,0,0|G,0|W),W=0|rt(),n[(V=O)>>2]=G,n[V+4>>2]=W,V=1,F=2522,It=70;break r}V=(2049&xt|0)!=0&1,F=2048&xt|0?2523:1&xt|0?2524:2522,It=70;break r;case 117:G=0|n[(W=O)>>2],W=0|n[W+4>>2],V=0,F=2522,It=70;break;case 99:ct[w>>0]=n[O>>2],Z=w,ht=G,F=1,V=0,W=2522,G=A;break;case 115:Z=ut=0|(ut=0|n[O>>2])?ut:2532,ht=G,F=(Wt=(0|(xt=0|function(dt,$t){dt|=0;var Zt=0,Bt=0;Zt=(0|($t|=0))!=0;i:do if(Zt&(3&dt|0)!=0)for(;;){if(!(0|ct[dt>>0]))break i;if(!((Zt=(0|($t=$t+-1|0))!=0)&(3&(dt=dt+1|0)|0)!=0)){Bt=5;break}}else Bt=5;while(0);i:do if((0|Bt)==5){do if(Zt){if(!(0|ct[dt>>0])){if($t)break i;break}n:do if(3<$t>>>0)for(;;){if((-2139062144&(Zt=0|n[dt>>2])^-2139062144)&Zt+-16843009|0)break n;if(dt=dt+4|0,($t=$t+-4|0)>>>0<=3){Bt=11;break}}else Bt=11;while(0);if((0|Bt)==11&&!$t)break;for(;;){if(!(0|ct[dt>>0]))break i;if(!($t=$t+-1|0))break;dt=dt+1|0}}while(0);dt=0}while(0);return 0|dt}(ut,tt)))==0)?tt:xt-ut|0,V=0,W=2522,G=Wt?ut+tt|0:xt;break;case 67:n[q>>2]=n[O>>2],n[R>>2]=0,V=n[O>>2]=q,tt=-1,It=78;break;case 83:if(tt){V=0|n[O>>2],It=78;break r}$r(a,32,Xt,0,xt),G=0,It=88;break r;case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:G=0|Ni(a,+f[O>>3],Xt,tt,xt,V);break e;default:ht=xt,F=tt,V=0,W=2522,G=A}while(0);r:do if((0|It)==65)ht=0|Ks(Z=0|n[(ut=O)>>2],ut=0|n[ut+4>>2],p,32&F),tt=W,V=(Wt=(8&G|0)==0|(0|Z)==0&(0|ut)==0)?0:2,W=Wt?2522:2522+(F>>>4)|0,It=71;else if((0|It)==70)ht=0|Ki(Z=G,ut=W,p),G=xt,W=F,It=71;else if((0|It)==78){for(G=It=0,ht=V;W=0|n[ht>>2];){if((F=(0|(W=0|Yo(L,W)))<0)|(tt-G|0)>>>0<W>>>0){It=82;break}if(!((G=W+G|0)>>>0<tt>>>0))break;ht=ht+4|0}if((0|It)==82&&(It=0,F)){u=-1;break t}if($r(a,32,Xt,G,xt),G)for(F=0;;){if(!(W=0|n[V>>2])){It=88;break r}if((0|G)<(0|(F=(W=0|Yo(L,W))+F|0))){It=88;break r}if(Dr(a,L,W),G>>>0<=F>>>0){It=88;break}V=V+4|0}else G=0,It=88}while(0);if((0|It)==71)Wt=(It=0)!=(0|tt)|(F=(0|Z)!=0|(0|ut)!=0),F=A-ht+(1&(1^F))|0,Z=Wt?ht:p,ht=-1<(0|tt)?-65537&G:G,F=Wt?(0|F)<(0|tt)?tt:F:0,G=A;else if((0|It)==88){It=0,$r(a,32,Xt,G,8192^xt),G=(0|G)<(0|Xt)?Xt:G;break}$r(a,32,G=(0|Xt)<(0|(Wt=(ut=(0|F)<(0|(xt=G-Z|0))?xt:F)+V|0))?Wt:Xt,Wt,ht),Dr(a,W,V),$r(a,48,G,Wt,65536^ht),$r(a,48,ut,xt,0),Dr(a,Z,xt),$r(a,32,G,Wt,8192^ht)}while(0);F=Qt}t:do if((0|It)==91&&!a)if(F){for(u=1;G=0|n[P+(u<<2)>>2];)if(jo(C+(u<<3)|0,G,g),10<=(u=u+1|0)>>>0){u=1;break t}for(G=0;;){if(u=u+1|0,0|G){u=-1;break t}if(10<=u>>>0){u=1;break t}G=0|n[P+(u<<2)>>2]}}else u=0;while(0);return B=Vt,0|u}function Dr(a,u,g){u|=0,g|=0,32&n[(a|=0)>>2]||ea(u,g,a)}function Jr(a){return((a|=0)+-48|0)>>>0<10|0}function bi(a){var u=0,C=0,g=0,C=0|n[(a|=0)>>2];if(0|Jr((u=0|ct[C>>0])<<24>>24))for(g=u,u=0;u=(10*u|0)-48+(g<<24>>24)|0,n[a>>2]=C=C+1|0,(0|Jr((g=0|ct[C>>0])<<24>>24))!=0;);else u=0;return 0|u}function jo(a,u,g){a|=0,u|=0,g|=0;var C,P=0,p=0;t:do if(u>>>0<=20)switch(0|u){case 9:P=3+(0|n[g>>2])&-4,u=0|n[P>>2],n[g>>2]=P+4,n[a>>2]=u;break t;case 10:P=3+(0|n[g>>2])&-4,u=0|n[P>>2],n[g>>2]=P+4,n[(P=a)>>2]=u,n[P+4>>2]=((0|u)<0)<<31>>31;break t;case 11:P=3+(0|n[g>>2])&-4,u=0|n[P>>2],n[g>>2]=P+4,n[(P=a)>>2]=u,n[P+4>>2]=0;break t;case 12:P=7+(0|n[g>>2])&-8,p=0|n[(u=P)>>2],u=0|n[u+4>>2],n[g>>2]=P+8,n[(P=a)>>2]=p,n[P+4>>2]=u;break t;case 13:p=3+(0|n[g>>2])&-4,P=0|n[p>>2],n[g>>2]=p+4,n[(p=a)>>2]=P=(65535&P)<<16>>16,n[p+4>>2]=((0|P)<0)<<31>>31;break t;case 14:p=3+(0|n[g>>2])&-4,P=0|n[p>>2],n[g>>2]=p+4,n[(p=a)>>2]=65535&P,n[p+4>>2]=0;break t;case 15:p=3+(0|n[g>>2])&-4,P=0|n[p>>2],n[g>>2]=p+4,n[(p=a)>>2]=P=(255&P)<<24>>24,n[p+4>>2]=((0|P)<0)<<31>>31;break t;case 16:p=3+(0|n[g>>2])&-4,P=0|n[p>>2],n[g>>2]=p+4,n[(p=a)>>2]=255&P,n[p+4>>2]=0;break t;case 17:p=7+(0|n[g>>2])&-8,C=+f[p>>3],n[g>>2]=p+8,f[a>>3]=C;break t;case 18:(function(w,R){w|=0;var A=7+(0|n[(R|=0)>>2])&-8,v=+f[A>>3];n[R>>2]=8+A,f[w>>3]=v})(a,g);break t;default:break t}while(0)}function Ks(a,u,g,C){if(g|=0,C|=0,!((0|(a|=0))==0&(0|(u|=0))==0))for(;ct[(g=g+-1|0)>>0]=0|Jt[480+(15&a)>>0]|C,!((0|(a=0|ra(0|a,0|u,4)))==0&(0|(u=0|rt()))==0););return 0|g}function Ki(a,u,g){g|=0;var C,P=0,p=0;if(0<(u|=0)>>>0|(0|u)==0&4294967295<(a|=0)>>>0)for(;p=0|Yr(0|(C=a),0|(P=u),0|(p=0|Cn(0|(a=0|ph(0|a,0|u,10,0)),0|(u=0|rt()),-10,-1)),0|rt()),rt(),ct[(g=g+-1|0)>>0]=255&p|48,9<P>>>0|(0|P)==9&4294967295<C>>>0;);if(a)for(;P=255&((p=a)+(0|U(a=(a>>>0)/10|0,-10))|48),ct[(g=g+-1|0)>>0]=P,10<=p>>>0;);return 0|g}function $r(a,u,g,C,P){a|=0,u|=0;var p,w=B;if(B=B+256|0,p=w,(0|(C|=0))<(0|(g|=0))&(73728&(P|=0)|0)==0){if(di(0|p,u<<24>>24|0,0|((P=g-C|0)>>>0<256?P:256)),255<P>>>0){for(C=P;Dr(a,p,256),255<(C=C+-256|0)>>>0;);P&=255}Dr(a,p,P)}B=w}function Yo(a,u){return u|=0,0|(a=(a|=0)?0|ta(a,u):0)}function ta(a,u){a|=0,u|=0;do if(a){if(u>>>0<128){ct[a>>0]=u,a=1;break}if(!(0|n[916])){if((-128&u|0)==57216){ct[a>>0]=u,a=1;break}n[922]=25,a=-1;break}if(u>>>0<2048){ct[a>>0]=u>>>6|192,ct[a+1>>0]=63&u|128,a=2;break}if(u>>>0<55296|(-8192&u|0)==57344){ct[a>>0]=u>>>12|224,ct[a+1>>0]=u>>>6&63|128,ct[a+2>>0]=63&u|128,a=3;break}if((u+-65536|0)>>>0<1048576){ct[a>>0]=u>>>18|240,ct[a+1>>0]=u>>>12&63|128,ct[a+2>>0]=u>>>6&63|128,ct[a+3>>0]=63&u|128,a=4;break}n[922]=25,a=-1;break}while(a=1,0);return 0|a}function ea(a,u,g){a|=0,u|=0;var C,P=0,p=0,w=0;(P=0|n[(p=(g|=0)+16|0)>>2])?w=5:0|function(R){var A=0,v=0;return v=0|ct[(A=74+(R|=0)|0)>>0],ct[A>>0]=255+v|v,A=8&(A=0|n[R>>2])?(n[R>>2]=32|A,-1):(n[R+8>>2]=0,n[R+4>>2]=0,A=0|n[R+44>>2],n[R+28>>2]=A,n[R+20>>2]=A,n[R+16>>2]=A+(0|n[R+48>>2]),0),0|A}(g)||(P=0|n[p>>2],w=5);t:do if((0|w)==5){if((P-(p=w=0|n[(C=g+20|0)>>2])|0)>>>0<u>>>0){ia[3&n[g+36>>2]](g,a,u);break}e:do if((0|ct[g+75>>0])<0|(0|u)==0)P=u;else{for(w=u;(0|ct[a+(P=w+-1|0)>>0])!=10;){if(!P){P=u;break e}w=P}if((0|ia[3&n[g+36>>2]](g,a,w))>>>0<w>>>0)break t;p=0|n[C>>2],P=u-w|0,a=a+w|0}while(0);xi(0|p,0|a,0|P),n[C>>2]=(0|n[C>>2])+P}while(0)}function Vo(a){return f[T>>3]=a=+a,a=0|n[T>>2],et(0|n[T+4>>2]),0|a}function Wo(a,u){u|=0;var g,C,P=0;switch(f[T>>3]=a=+a,C=0|ra(0|(P=0|n[T>>2]),0|(g=0|n[T+4>>2]),52),rt(),2047&C){case 0:P=a!=0?(a=+Wo(18446744073709552e3*a,u),(0|n[u>>2])-64|0):0,n[u>>2]=P;break;case 2047:break;default:n[u>>2]=(2047&C)-1022,n[T>>2]=P,n[T+4>>2]=-2146435073&g|1071644672,a=+f[T>>3]}return+a}function zo(a){var u,P=0,g=0,C=0,P=0|ct[(a|=0)>>0];t:do if(P<<24>>24)for(g=a,C=4,a=1033;;){if(!(P<<24>>24==(u=0|ct[a>>0])<<24>>24&(0|(C=C+-1|0))!=0&u<<24>>24!=0))break t;if(a=a+1|0,!((P=0|ct[(g=g+1|0)>>0])<<24>>24)){P=0;break}}else P=0,a=1033;while(0);return(255&P)-(0|Jt[a>>0])|0}function _o(a,u,g){u|=0,g|=0;var C,P,p,w=0,R=0,A=B;B=B+240|0,n[(p=A)>>2]=a|=0;t:do if(1<(0|u))for(R=w=a,a=1;;){if(-1<(0|fe(w,C=(R=R+-4|0)+(0-(0|n[g+((P=u+-2|0)<<2)>>2]))|0))&&-1<(0|fe(w,R))||(w=p+(a<<2)|0,a=a+1|0,(0|(u=-1<(0|fe(C,R))?(R=n[w>>2]=C,u+-1|0):(n[w>>2]=R,P)))<=1))break t;w=0|n[p>>2]}else a=1;while(0);fn(p,a),B=A}function In(a,u){var g=0,C=0,P=(a|=0)+4|0;31<(u|=0)>>>0?(g=0|n[P>>2],n[a>>2]=g,u=u+-32|(C=n[P>>2]=0)):(g=0|n[a>>2],C=0|n[P>>2]),n[a>>2]=C<<32-u|(u?g>>>u:g),n[P>>2]=u?C>>>u:C}function On(a,u,g,C,P,p){a|=0,g|=0,C|=0,P|=0,p|=0;var w,R,A,v=0,O=0,L=B;B=B+240|0,n[(R=(A=L)+232|0)>>2]=u|=0,n[(w=4+R|0)>>2]=g,n[A>>2]=a;t:do if((0|u)!=1|(0|g)!=0&&(v=a+(0-(0|n[p+(C<<2)>>2]))|0,1<=(0|fe(v,a))))for(u=v,O=1,v=(0|P)==0;;){if(v&1<(0|C)){if(-1<(0|fe(v=a+-4|0,u))){u=a,v=O,g=10;break t}if(-1<(0|fe(v+(0-(0|n[p+(C+-2<<2)>>2]))|0,u))){u=a,v=O,g=10;break t}}if(g=O+1|0,n[A+(O<<2)>>2]=u,In(R,P=0|qo(R)),C=P+C|0,!((0|n[R>>2])!=1|(0|n[w>>2])!=0)){v=g,g=10;break t}if((0|fe(v=u+(0-(0|n[p+(C<<2)>>2]))|0,0|n[A>>2]))<1){v=g,g=10;break}a=u,u=v,O=g,v=1}else g=9;while(0);(0|g)==9&&!(0|P)&&(u=a,v=1,g=10),(0|g)==10&&(fn(A,v),_o(u,C,p)),B=L}function wn(a,u){var g=0,C=0,P=(a|=0)+4|0;31<(u|=0)>>>0?(g=0|n[a>>2],n[P>>2]=g,u=u+-32|(C=n[a>>2]=0)):(g=0|n[P>>2],C=0|n[a>>2]),n[P>>2]=((P=32-u|0)?C>>>P:C)|g<<u,n[a>>2]=C<<u}function qo(a){var u;return(u=0|Zo((0|n[(a|=0)>>2])-1|0))?0|u:0|(0|(a=0|Zo(0|n[a+4>>2]))?a+32|0:0)}function Zo(a){var u=0;if(a|=0)if(1&a)u=0;else for(u=0;u=u+1|0,!(2&a);)a>>>=1;else u=32;return 0|u}function fn(a,u){a|=0;var g,C=0,P=B;if(B=B+256|0,C=P,2<=(0|(u|=0)))for(xi(0|(n[a+(u<<2)>>2]=C),0|n[a>>2],4),C=0;xi(0|n[(g=a+(C<<2)|0)>>2],0|n[a+((C=C+1|0)<<2)>>2],4),n[g>>2]=4+(0|n[g>>2]),(0|C)!=(0|u););B=P}function Mn(a){a|=0;var u=0,g=0,C=0,P=0,p=0,w=0,R=0,A=0,v=0,O=0,L=0,k=0,q=0,G=0,W=0,V=0,F=0,tt=0,ht=0,Z=0,ut=B;B=B+16|0,k=ut;do if(a>>>0<245){if(L=0|n[923],3&(g=(a=(v=a>>>0<11?16:a+11&-8)>>>3)?L>>>a:L)|0)return a=0|n[(u=(P=3732+((C=(1&g^1)+a|0)<<1<<2)|0)+8|0)>>2],(0|(g=0|n[(p=a+8|0)>>2]))==(0|P)?n[923]=L&~(1<<C):(n[g+12>>2]=P,n[u>>2]=g),n[a+4>>2]=3|(Z=C<<3),n[(Z=a+Z+4|0)>>2]=1|n[Z>>2],B=ut,0|(Z=p);if((O=0|n[925])>>>0<v>>>0){if(0|g)return p=0|n[(u=(g=3732+((C=((a=(C=(R=(C=((C=g<<a&((C=2<<a)|0-C))&0-C)-1|0)>>>12&16)?C>>>R:C)>>>5&8)|R|(p=(C=a?C>>>a:C)>>>2&4)|(u=(C=p?C>>>p:C)>>>1&2)|(g=(C=u?C>>>u:C)>>>1&1))+(g?C>>>g:C)|0)<<1<<2)|0)+8|0)>>2],(0|(a=0|n[(R=p+8|0)>>2]))==(0|g)?n[923]=a=L&~(1<<C):(n[a+12>>2]=g,n[u>>2]=a,a=L),w=(Z=C<<3)-v|0,n[p+4>>2]=3|v,n[(P=p+v|0)+4>>2]=1|w,n[p+Z>>2]=w,0|O&&(C=0|n[928],g=3732+((u=O>>>3)<<1<<2)|0,a=a&(u=1<<u)?0|n[(u=a=g+8|0)>>2]:(n[923]=a|u,u=g+8|0,g),n[u>>2]=C,n[a+12>>2]=C,n[C+8>>2]=a,n[C+12>>2]=g),n[925]=w,n[928]=P,B=ut,0|(Z=R);if(p=0|n[924]){for(A=0|n[3996+(((C=(A=(P=(A=(p&0-p)-1|0)>>>12&16)?A>>>P:A)>>>5&8)|P|(w=(A=C?A>>>C:A)>>>2&4)|(g=(A=w?A>>>w:A)>>>1&2)|(R=(A=g?A>>>g:A)>>>1&1))+(R?A>>>R:A)<<2)>>2],R=(-8&n[A+4>>2])-v|0,g=A;!(!(a=0|n[g+16>>2])&&!(a=0|n[g+20>>2]));)R=(w=(g=(-8&n[a+4>>2])-v|0)>>>0<R>>>0)?g:R,g=a,A=w?a:A;if(A>>>0<(w=A+v|0)>>>0){P=0|n[A+24>>2],u=0|n[A+12>>2];do if((0|u)==(0|A)){if(!(u=0|n[(a=A+20|0)>>2])&&!(u=0|n[(a=A+16|0)>>2])){g=0;break}for(;;)if(g=0|n[(C=u+20|0)>>2])u=g,a=C;else{if(!(g=0|n[(C=u+16|0)>>2]))break;u=g,a=C}n[a>>2]=0,g=u}else g=0|n[A+8>>2],n[g+12>>2]=u,n[u+8>>2]=g,g=u;while(0);do if(0|P){if(u=0|n[A+28>>2],(0|A)==(0|n[(a=3996+(u<<2)|0)>>2])){if(!(n[a>>2]=g)){n[924]=p&~(1<<u);break}}else if(!(n[((0|n[(Z=P+16|0)>>2])==(0|A)?Z:P+20|0)>>2]=g))break;n[g+24>>2]=P,0|(u=0|n[A+16>>2])&&(n[g+16>>2]=u,n[u+24>>2]=g),0|(u=0|n[A+20>>2])&&(n[g+20>>2]=u,n[u+24>>2]=g)}while(0);return R>>>0<16?(n[A+4>>2]=3|(Z=R+v|0),n[(Z=A+Z+4|0)>>2]=1|n[Z>>2]):(n[A+4>>2]=3|v,n[w+4>>2]=1|R,n[w+R>>2]=R,0|O&&(C=0|n[928],g=3732+((u=O>>>3)<<1<<2)|0,a=(u=1<<u)&L?0|n[(u=a=g+8|0)>>2]:(n[923]=u|L,u=g+8|0,g),n[u>>2]=C,n[a+12>>2]=C,n[C+8>>2]=a,n[C+12>>2]=g),n[925]=R,n[928]=w),B=ut,0|(Z=A+8|0)}L=v}else L=v}else L=v}else if(a>>>0<=4294967231)if(v=-8&(a=a+11|0),C=0|n[924]){g=0-v|0,A=(a>>>=8)?16777215<v>>>0?31:1&((V=(A=14-((R=(R=(A=a<<(L=(L=a+1048320|0)>>>16&8))+520192|0)>>>16&4)|L|(V=(V=(A<<=R)+245760|0)>>>16&2))+((A<<=V)>>>15)|0)+7|0)?v>>>V:v)|A<<1:0,a=0|n[3996+(A<<2)>>2];t:do if(a)for(w=v<<(((P=0)|A)==31?0:25-(A>>>1)|0),R=a,a=0;;){if((p=(-8&n[R+4>>2])-v|0)>>>0<g>>>0){if(!p){g=0,a=P=R,V=65;break t}g=p,a=R}if(P=(0|(V=0|n[R+20>>2]))==0|(0|V)==(0|(R=0|n[R+16+(w>>>31<<2)>>2]))?P:V,!R){V=61;break}w<<=1}else a=P=0,V=61;while(0);if((0|V)==61){if((0|P)==0&(0|a)==0){if(!(a=((a=2<<A)|0-a)&C)){L=v;break}P=0|n[3996+(((w=(P=(R=(P=(a&0-a)-1|0)>>>12&16)?P>>>R:P)>>>5&8)|R|(A=(P=w?P>>>w:P)>>>2&4)|(L=(P=A?P>>>A:P)>>>1&2)|(a=(P=L?P>>>L:P)>>>1&1))+(a?P>>>a:P)<<2)>>2],a=0}P?V=65:(R=g,p=a)}if((0|V)==65)for(;;){if(g=(p=(L=(-8&n[P+4>>2])-v|0)>>>0<g>>>0)?L:g,p=p?P:a,!(a=(a=0|n[P+16>>2])||0|n[P+20>>2])){R=g;break}P=a,a=p}if(0|p&&R>>>0<((0|n[925])-v|0)>>>0&&p>>>0<(O=p+v|0)>>>0){w=0|n[p+24>>2],u=0|n[p+12>>2];do if((0|u)==(0|p)){if(!(u=0|n[(a=p+20|0)>>2])&&!(u=0|n[(a=p+16|0)>>2])){u=0;break}for(;;)if(g=0|n[(P=u+20|0)>>2])u=g,a=P;else{if(!(g=0|n[(P=u+16|0)>>2]))break;u=g,a=P}n[a>>2]=0}else Z=0|n[p+8>>2],n[Z+12>>2]=u,n[u+8>>2]=Z;while(0);do if(w){if(a=0|n[p+28>>2],(0|p)==(0|n[(g=3996+(a<<2)|0)>>2])){if(!(n[g>>2]=u)){C&=~(1<<a),n[924]=C;break}}else if(!(n[((0|n[(Z=w+16|0)>>2])==(0|p)?Z:w+20|0)>>2]=u))break;n[u+24>>2]=w,0|(a=0|n[p+16>>2])&&(n[u+16>>2]=a,n[a+24>>2]=u),(a=0|n[p+20>>2])&&(n[u+20>>2]=a,n[a+24>>2]=u)}while(0);t:do if(R>>>0<16)n[p+4>>2]=3|(Z=R+v|0),n[(Z=p+Z+4|0)>>2]=1|n[Z>>2];else{if(n[p+4>>2]=3|v,n[O+4>>2]=1|R,u=(n[O+R>>2]=R)>>>3,R>>>0<256){g=3732+(u<<1<<2)|0,a=(a=0|n[923])&(u=1<<u)?0|n[(u=a=g+8|0)>>2]:(n[923]=a|u,u=g+8|0,g),n[u>>2]=O,n[a+12>>2]=O,n[O+8>>2]=a,n[O+12>>2]=g;break}if(u=3996+((g=(u=R>>>8)?16777215<R>>>0?31:1&((Z=(g=14-((tt=(tt=(g=u<<(ht=(ht=u+1048320|0)>>>16&8))+520192|0)>>>16&4)|ht|(Z=(Z=(g<<=tt)+245760|0)>>>16&2))+((g<<=Z)>>>15)|0)+7|0)?R>>>Z:R)|g<<1:0)<<2)|0,n[O+28>>2]=g,n[(a=O+16|0)+4>>2]=0,n[a>>2]=0,!(C&(a=1<<g))){n[924]=C|a,n[u>>2]=O,n[O+24>>2]=u,n[O+12>>2]=O,n[O+8>>2]=O;break}u=0|n[u>>2];e:do if((-8&n[u+4>>2]|0)!=(0|R)){for(C=R<<((0|g)==31?0:25-(g>>>1)|0);a=0|n[(g=u+16+(C>>>31<<2)|0)>>2];){if((-8&n[a+4>>2]|0)==(0|R)){u=a;break e}C<<=1,u=a}n[g>>2]=O,n[O+24>>2]=u,n[O+12>>2]=O,n[O+8>>2]=O;break t}while(0);Z=0|n[(ht=u+8|0)>>2],n[Z+12>>2]=O,n[ht>>2]=O,n[O+8>>2]=Z,n[O+12>>2]=u,n[O+24>>2]=0}while(0);return B=ut,0|(Z=p+8|0)}L=v}else L=v;else L=-1;while(0);if(L>>>0<=(g=0|n[925])>>>0)return u=0|n[928],15<(a=g-L|0)>>>0?(n[928]=Z=u+L|0,n[925]=a,n[Z+4>>2]=1|a,n[u+g>>2]=a,n[u+4>>2]=3|L):(n[925]=0,n[928]=0,n[u+4>>2]=3|g,n[(Z=u+g+4|0)>>2]=1|n[Z>>2]),B=ut,0|(Z=u+8|0);if(L>>>0<(w=0|n[926])>>>0)return n[926]=tt=w-L|0,Z=0|n[929],n[929]=ht=Z+L|0,n[ht+4>>2]=1|tt,n[Z+4>>2]=3|L,B=ut,0|(Z=Z+8|0);if(R=L+48|0,(v=(p=(a=0|n[1041]?0|n[1043]:(n[1043]=4096,n[1042]=4096,n[1044]=-1,n[1045]=-1,n[1046]=0,n[1034]=0,n[1041]=-16&k^1431655768,4096))+(A=L+47|0)|0)&(C=0-a|0))>>>0<=L>>>0||0|(a=0|n[1033])&&(k=(O=0|n[1031])+v|0)>>>0<=O>>>0|a>>>0<k>>>0)return B=ut,(Z=0)|Z;t:do if(4&n[1034])u=0,V=143;else{g=0|n[929];e:do if(g){for(P=4140;!((a=0|n[P>>2])>>>0<=g>>>0&&(a+(0|n[(W=P+4|0)>>2])|0)>>>0>g>>>0);){if(!(a=0|n[P+8>>2])){V=128;break e}P=a}if((u=p-w&C)>>>0<2147483647)if((0|(a=0|ci(u)))==((0|n[P>>2])+(0|n[W>>2])|0)){if((0|a)!=-1){w=a,p=u,V=145;break t}}else C=a,V=136;else u=0}else V=128;while(0);do if((0|V)==128)if((0|(g=0|ci(0)))!=-1&&(u=g,G=(u=((G=(q=0|n[1042])+-1|0)&u|0?(G+u&0-q)-u|0:0)+v|0)+(q=0|n[1031])|0,L>>>0<u>>>0&u>>>0<2147483647)){if(0|(W=0|n[1033])&&G>>>0<=q>>>0|W>>>0<G>>>0){u=0;break}if((0|(a=0|ci(u)))==(0|g)){w=g,p=u,V=145;break t}C=a,V=136}else u=0;while(0);do if((0|V)==136){if(g=0-u|0,!(u>>>0<R>>>0&u>>>0<2147483647&(0|C)!=-1)){if((0|C)==-1){u=0;break}w=C,p=u,V=145;break t}if(2147483647<=(a=A-u+(a=0|n[1043])&0-a)>>>0){w=C,p=u,V=145;break t}if((0|ci(a))==-1){ci(g),u=0;break}w=C,p=a+u|0,V=145;break t}while(0);n[1034]=4|n[1034],V=143}while(0);if((0|V)==143&&v>>>0<2147483647&&!((0|(F=0|ci(v)))==-1|1^(tt=(L+40|0)>>>0<(ht=(W=0|ci(0))-F|0)>>>0)|F>>>0<W>>>0&(0|F)!=-1&(0|W)!=-1^1)&&(w=F,p=tt?ht:u,V=145),(0|V)==145){u=(0|n[1031])+p|0,(n[1031]=u)>>>0>(0|n[1032])>>>0&&(n[1032]=u),A=0|n[929];t:do if(A){for(P=4140;;){if((0|w)==((u=0|n[P>>2])+(a=0|n[(C=P+4|0)>>2])|0)){V=154;break}if(!(g=0|n[P+8>>2]))break;P=g}if((0|V)==154&&!(8&n[P+12>>2]|0)&&A>>>0<w>>>0&u>>>0<=A>>>0){n[C>>2]=a+p,ht=A+(tt=7&(tt=A+8|0)|0?0-tt&7:0)|0,tt=(Z=(0|n[926])+p|0)-tt|0,n[929]=ht,n[926]=tt,n[ht+4>>2]=1|tt,n[A+Z+4>>2]=40,n[930]=n[1045];break}for(w>>>0<(0|n[927])>>>0&&(n[927]=w),g=w+p|0,a=4140;;){if((0|n[a>>2])==(0|g)){V=162;break}if(!(u=0|n[a+8>>2]))break;a=u}if((0|V)==162&&!(8&n[a+12>>2]|0)){n[a>>2]=w,n[(O=a+4|0)>>2]=(0|n[O>>2])+p,v=(O=w+(7&(O=w+8|0)|0?0-O&7:0)|0)+L|0,R=(u=g+(7&(u=g+8|0)|0?0-u&7:0)|0)-O-L|0,n[O+4>>2]=3|L;e:do if((0|A)==(0|u))Z=(0|n[926])+R|0,n[926]=Z,n[929]=v,n[v+4>>2]=1|Z;else{if((0|n[928])==(0|u)){Z=(0|n[925])+R|0,n[925]=Z,n[928]=v,n[v+4>>2]=1|Z,n[v+Z>>2]=Z;break}if((3&(a=0|n[u+4>>2])|0)==1){w=-8&a,C=a>>>3;r:do{if(a>>>0<256){if(a=0|n[u+8>>2],(0|(g=0|n[u+12>>2]))==(0|a)){n[923]=n[923]&~(1<<C);break}n[a+12>>2]=g,n[g+8>>2]=a;break}p=0|n[u+24>>2],a=0|n[u+12>>2];do if((0|a)==(0|u)){if(!(a=0|n[(g=(C=u+16|0)+4|0)>>2])){if(!(a=0|n[C>>2])){a=0;break}g=C}for(;;)if(C=0|n[(P=a+20|0)>>2])a=C,g=P;else{if(!(C=0|n[(P=a+16|0)>>2]))break;a=C,g=P}n[g>>2]=0}else Z=0|n[u+8>>2],n[Z+12>>2]=a,n[a+8>>2]=Z;while(0);if(!p)break;C=3996+((g=0|n[u+28>>2])<<2)|0;do{if((0|n[C>>2])==(0|u)){if(0|(n[C>>2]=a))break;n[924]=n[924]&~(1<<g);break r}if(!(n[((0|n[(Z=p+16|0)>>2])==(0|u)?Z:p+20|0)>>2]=a))break r}while(0)}while(n[a+24>>2]=p,0|(g=0|n[(C=u+16|0)>>2])&&(n[a+16>>2]=g,n[g+24>>2]=a),(g=0|n[C+4>>2])&&(n[a+20>>2]=g,n[g+24>>2]=a,0));u=u+w|0,P=w+R|0}else P=R;if(n[(u=u+4|0)>>2]=-2&n[u>>2],n[v+4>>2]=1|P,u=(n[v+P>>2]=P)>>>3,P>>>0<256){g=3732+(u<<1<<2)|0,a=(a=0|n[923])&(u=1<<u)?0|n[(u=a=g+8|0)>>2]:(n[923]=a|u,u=g+8|0,g),n[u>>2]=v,n[a+12>>2]=v,n[v+8>>2]=a,n[v+12>>2]=g;break}u=P>>>8;do if(u){if(16777215<P>>>0){C=31;break}C=1&((Z=(C=14-((tt=(tt=(C=u<<(ht=(ht=u+1048320|0)>>>16&8))+520192|0)>>>16&4)|ht|(Z=(Z=(C<<=tt)+245760|0)>>>16&2))+((C<<=Z)>>>15)|0)+7|0)?P>>>Z:P)|C<<1}else C=0;while(0);if(a=3996+(C<<2)|0,n[v+28>>2]=C,n[(u=v+16|0)+4>>2]=0,!((u=(n[u>>2]=0)|n[924])&(g=1<<C))){n[924]=u|g,n[a>>2]=v,n[v+24>>2]=a,n[v+12>>2]=v,n[v+8>>2]=v;break}u=0|n[a>>2];r:do if((-8&n[u+4>>2]|0)!=(0|P)){for(C=P<<((0|C)==31?0:25-(C>>>1)|0);a=0|n[(g=u+16+(C>>>31<<2)|0)>>2];){if((-8&n[a+4>>2]|0)==(0|P)){u=a;break r}C<<=1,u=a}n[g>>2]=v,n[v+24>>2]=u,n[v+12>>2]=v,n[v+8>>2]=v;break e}while(0);Z=0|n[(ht=u+8|0)>>2],n[Z+12>>2]=v,n[ht>>2]=v,n[v+8>>2]=Z,n[v+12>>2]=u,n[v+24>>2]=0}while(0);return B=ut,0|(Z=O+8|0)}for(a=4140;!((u=0|n[a>>2])>>>0<=A>>>0&&A>>>0<(Z=u+(0|n[a+4>>2])|0)>>>0);)a=0|n[a+8>>2];for(u=(a=(a=(P=Z+-47|0)+(7&(a=P+8|0)|0?0-a&7:0)|0)>>>0<(P=A+16|0)>>>0?A:a)+8|0,ht=w+(tt=7&(tt=w+8|0)|0?0-tt&7:0)|0,tt=(g=p+-40|0)-tt|0,n[929]=ht,n[926]=tt,n[ht+4>>2]=1|tt,n[w+g+4>>2]=40,n[930]=n[1045],n[(g=a+4|0)>>2]=27,n[u>>2]=n[1035],n[u+4>>2]=n[1036],n[u+8>>2]=n[1037],n[u+12>>2]=n[1038],n[1035]=w,n[1036]=p,n[1038]=0,n[1037]=u,u=a+24|0;n[(u=(ht=u)+4|0)>>2]=7,(ht+8|0)>>>0<Z>>>0;);if((0|a)!=(0|A)){if(p=a-A|0,n[g>>2]=-2&n[g>>2],n[A+4>>2]=1|p,u=(n[a>>2]=p)>>>3,p>>>0<256){g=3732+(u<<1<<2)|0,a=(a=0|n[923])&(u=1<<u)?0|n[(u=a=g+8|0)>>2]:(n[923]=a|u,u=g+8|0,g),n[u>>2]=A,n[a+12>>2]=A,n[A+8>>2]=a,n[A+12>>2]=g;break}if(g=3996+((C=(u=p>>>8)?16777215<p>>>0?31:1&((Z=(C=14-((tt=(tt=(C=u<<(ht=(ht=u+1048320|0)>>>16&8))+520192|0)>>>16&4)|ht|(Z=(Z=(C<<=tt)+245760|0)>>>16&2))+((C<<=Z)>>>15)|0)+7|0)?p>>>Z:p)|C<<1:0)<<2)|0,n[A+28>>2]=C,n[A+20>>2]=0,!((u=(n[P>>2]=0)|n[924])&(a=1<<C))){n[924]=u|a,n[g>>2]=A,n[A+24>>2]=g,n[A+12>>2]=A,n[A+8>>2]=A;break}u=0|n[g>>2];e:do if((-8&n[u+4>>2]|0)!=(0|p)){for(C=p<<((0|C)==31?0:25-(C>>>1)|0);a=0|n[(g=u+16+(C>>>31<<2)|0)>>2];){if((-8&n[a+4>>2]|0)==(0|p)){u=a;break e}C<<=1,u=a}n[g>>2]=A,n[A+24>>2]=u,n[A+12>>2]=A,n[A+8>>2]=A;break t}while(0);Z=0|n[(ht=u+8|0)>>2],n[Z+12>>2]=A,n[ht>>2]=A,n[A+8>>2]=Z,n[A+12>>2]=u,n[A+24>>2]=0}}else(0|(Z=0|n[927]))==0|w>>>0<Z>>>0&&(n[927]=w),n[1035]=w,n[1036]=p,n[1038]=0,n[932]=n[1041],n[931]=-1,n[936]=3732,n[935]=3732,n[938]=3740,n[937]=3740,n[940]=3748,n[939]=3748,n[942]=3756,n[941]=3756,n[944]=3764,n[943]=3764,n[946]=3772,n[945]=3772,n[948]=3780,n[947]=3780,n[950]=3788,n[949]=3788,n[952]=3796,n[951]=3796,n[954]=3804,n[953]=3804,n[956]=3812,n[955]=3812,n[958]=3820,n[957]=3820,n[960]=3828,n[959]=3828,n[962]=3836,n[961]=3836,n[964]=3844,n[963]=3844,n[966]=3852,n[965]=3852,n[968]=3860,n[967]=3860,n[970]=3868,n[969]=3868,n[972]=3876,n[971]=3876,n[974]=3884,n[973]=3884,n[976]=3892,n[975]=3892,n[978]=3900,n[977]=3900,n[980]=3908,n[979]=3908,n[982]=3916,n[981]=3916,n[984]=3924,n[983]=3924,n[986]=3932,n[985]=3932,n[988]=3940,n[987]=3940,n[990]=3948,n[989]=3948,n[992]=3956,n[991]=3956,n[994]=3964,n[993]=3964,n[996]=3972,n[995]=3972,n[998]=3980,n[997]=3980,ht=w+(tt=7&(tt=w+8|0)|0?0-tt&7:0)|0,tt=(Z=p+-40|0)-tt|0,n[929]=ht,n[926]=tt,n[ht+4>>2]=1|tt,n[w+Z+4>>2]=40,n[930]=n[1045];while(0);if(L>>>0<(u=0|n[926])>>>0)return n[926]=tt=u-L|0,Z=0|n[929],n[929]=ht=Z+L|0,n[ht+4>>2]=1|tt,n[Z+4>>2]=3|L,B=ut,0|(Z=Z+8|0)}return n[922]=48,B=ut,(Z=0)|Z}function _n(a){var u=0,g=0,C=0,P=0,p=0,w=0,R=0,A=0,v=0;if(a|=0){C=0|n[927],v=(g=a+-8|0)+(u=-8&(a=0|n[a+-4>>2]))|0;do if(1&a)A=R=g;else{if(P=0|n[g>>2],!(3&a)||(w=P+u|0,(p=g+(0-P)|0)>>>0<C>>>0))return;if((0|n[928])==(0|p)){if((3&(a=0|n[(u=v+4|0)>>2])|0)==3)return n[925]=w,n[u>>2]=-2&a,n[p+4>>2]=1|w,void(n[p+w>>2]=w);A=R=p,u=w;break}if(g=P>>>3,P>>>0<256){if(a=0|n[p+8>>2],(0|(u=0|n[p+12>>2]))==(0|a)){n[923]=n[923]&~(1<<g),A=R=p,u=w;break}n[a+12>>2]=u,n[u+8>>2]=a,A=R=p,u=w;break}P=0|n[p+24>>2],a=0|n[p+12>>2];do if((0|a)==(0|p)){if(!(a=0|n[(u=(g=p+16|0)+4|0)>>2])){if(!(a=0|n[g>>2])){g=0;break}u=g}for(;;)if(g=0|n[(C=a+20|0)>>2])a=g,u=C;else{if(!(g=0|n[(C=a+16|0)>>2]))break;a=g,u=C}n[u>>2]=0,g=a}else g=0|n[p+8>>2],n[g+12>>2]=a,n[a+8>>2]=g,g=a;while(0);if(P){if(a=0|n[p+28>>2],(0|n[(u=3996+(a<<2)|0)>>2])==(0|p)){if(!(n[u>>2]=g)){n[924]=n[924]&~(1<<a),A=R=p,u=w;break}}else if(!(n[((0|n[(A=P+16|0)>>2])==(0|p)?A:P+20|0)>>2]=g)){A=R=p,u=w;break}n[g+24>>2]=P,0|(a=0|n[(u=p+16|0)>>2])&&(n[g+16>>2]=a,n[a+24>>2]=g),u=(A=R=((a=0|n[u+4>>2])&&(n[g+20>>2]=a,n[a+24>>2]=g),p),w)}else A=R=p,u=w}while(0);if(!(v>>>0<=R>>>0)&&1&(g=0|n[(a=v+4|0)>>2])){if(2&g)n[a>>2]=-2&g,n[A+4>>2]=1|u,P=n[R+u>>2]=u;else{if((0|n[929])==(0|v))return v=(0|n[926])+u|0,n[926]=v,n[929]=A,n[A+4>>2]=1|v,void((0|A)==(0|n[928])&&(n[928]=0,n[925]=0));if((0|n[928])==(0|v))return v=(0|n[925])+u|0,n[925]=v,n[928]=R,n[A+4>>2]=1|v,void(n[R+v>>2]=v);P=(-8&g)+u|0,C=g>>>3;do{if(g>>>0<256){if(u=0|n[v+8>>2],(0|(a=0|n[v+12>>2]))==(0|u)){n[923]=n[923]&~(1<<C);break}n[u+12>>2]=a,n[a+8>>2]=u;break}p=0|n[v+24>>2],a=0|n[v+12>>2];do if((0|a)==(0|v)){if(!(a=0|n[(u=(g=v+16|0)+4|0)>>2])){if(!(a=0|n[g>>2])){g=0;break}u=g}for(;;)if(g=0|n[(C=a+20|0)>>2])a=g,u=C;else{if(!(g=0|n[(C=a+16|0)>>2]))break;a=g,u=C}n[u>>2]=0,g=a}else g=0|n[v+8>>2],n[g+12>>2]=a,n[a+8>>2]=g,g=a;while(0);if(0|p){if(a=0|n[v+28>>2],(0|n[(u=3996+(a<<2)|0)>>2])==(0|v)){if(!(n[u>>2]=g)){n[924]=n[924]&~(1<<a);break}}else if(!(n[((0|n[(w=p+16|0)>>2])==(0|v)?w:p+20|0)>>2]=g))break;n[g+24>>2]=p,0|(a=0|n[(u=v+16|0)>>2])&&(n[g+16>>2]=a,n[a+24>>2]=g),0|(a=0|n[u+4>>2])&&(n[g+20>>2]=a,n[a+24>>2]=g)}}while(0);if(n[A+4>>2]=1|P,n[R+P>>2]=P,(0|A)==(0|n[928]))return void(n[925]=P)}if(a=P>>>3,P>>>0<256)return g=3732+(a<<1<<2)|0,u=(u=0|n[923])&(a=1<<a)?0|n[(a=u=g+8|0)>>2]:(n[923]=u|a,a=g+8|0,g),n[a>>2]=A,n[u+12>>2]=A,n[A+8>>2]=u,void(n[A+12>>2]=g);u=3996+((C=(a=P>>>8)?16777215<P>>>0?31:1&((v=(C=14-((w=(w=(C=a<<(R=(R=a+1048320|0)>>>16&8))+520192|0)>>>16&4)|R|(v=(v=(C<<=w)+245760|0)>>>16&2))+((C<<=v)>>>15)|0)+7|0)?P>>>v:P)|C<<1:0)<<2)|0,n[A+28>>2]=C,n[A+20>>2]=0,a=(n[A+16>>2]=0)|n[924],g=1<<C;t:do if(a&g){a=0|n[u>>2];e:do if((-8&n[a+4>>2]|0)!=(0|P)){for(C=P<<((0|C)==31?0:25-(C>>>1)|0);u=0|n[(g=a+16+(C>>>31<<2)|0)>>2];){if((-8&n[u+4>>2]|0)==(0|P)){a=u;break e}C<<=1,a=u}n[g>>2]=A,n[A+24>>2]=a,n[A+12>>2]=A,n[A+8>>2]=A;break t}while(0);v=0|n[(R=a+8|0)>>2],n[v+12>>2]=A,n[R>>2]=A,n[A+8>>2]=v,n[A+12>>2]=a,n[A+24>>2]=0}else n[924]=a|g,n[u>>2]=A,n[A+24>>2]=u,n[A+12>>2]=A,n[A+8>>2]=A;while(0);if(v=(0|n[931])-1|0,!(0|(n[931]=v))){for(a=4148;a=0|n[a>>2];)a=a+8|0;n[931]=-1}}}}function Qo(a,u){var A=0,g=0,C=0,P=0,p=0,w=0,R=0,R=(a|=0)+(u|=0)|0,A=0|n[a+4>>2];do if(1&A)w=a,a=u;else{if(g=0|n[a>>2],!(3&A))return;if(p=g+u|0,(0|n[928])==(0|(P=a+(0-g)|0))){if((3&(A=0|n[(a=R+4|0)>>2])|0)==3)return n[925]=p,n[a>>2]=-2&A,n[P+4>>2]=1|p,void(n[R>>2]=p);w=P,a=p;break}if(u=g>>>3,g>>>0<256){if(A=0|n[P+8>>2],(0|(a=0|n[P+12>>2]))==(0|A)){n[923]=n[923]&~(1<<u),w=P,a=p;break}n[A+12>>2]=a,n[a+8>>2]=A,w=P,a=p;break}C=0|n[P+24>>2],A=0|n[P+12>>2];do if((0|A)==(0|P)){if(!(A=0|n[(a=(u=P+16|0)+4|0)>>2])){if(!(A=0|n[u>>2])){u=0;break}a=u}for(;;)if(u=0|n[(g=A+20|0)>>2])A=u,a=g;else{if(!(u=0|n[(g=A+16|0)>>2]))break;A=u,a=g}n[a>>2]=0,u=A}else u=0|n[P+8>>2],n[u+12>>2]=A,n[A+8>>2]=u,u=A;while(0);if(C){if(A=0|n[P+28>>2],(0|n[(a=3996+(A<<2)|0)>>2])==(0|P)){if(!(n[a>>2]=u)){n[924]=n[924]&~(1<<A),w=P,a=p;break}}else if(!(n[((0|n[(w=C+16|0)>>2])==(0|P)?w:C+20|0)>>2]=u)){w=P,a=p;break}n[u+24>>2]=C,0|(A=0|n[(a=P+16|0)>>2])&&(n[u+16>>2]=A,n[A+24>>2]=u),a=(w=((A=0|n[a+4>>2])&&(n[u+20>>2]=A,n[A+24>>2]=u),P),p)}else w=P,a=p}while(0);if(2&(u=0|n[(A=R+4|0)>>2]))n[A>>2]=-2&u,n[w+4>>2]=1|a,n[w+a>>2]=a;else{if((0|n[929])==(0|R))return R=(0|n[926])+a|0,n[926]=R,n[929]=w,n[w+4>>2]=1|R,void((0|w)==(0|n[928])&&(n[928]=0,n[925]=0));if((0|n[928])==(0|R))return R=(0|n[925])+a|0,n[925]=R,n[928]=w,n[w+4>>2]=1|R,void(n[w+R>>2]=R);P=(-8&u)+a|0,g=u>>>3;do{if(u>>>0<256){if(a=0|n[R+8>>2],(0|(A=0|n[R+12>>2]))==(0|a)){n[923]=n[923]&~(1<<g);break}n[a+12>>2]=A,n[A+8>>2]=a;break}C=0|n[R+24>>2],A=0|n[R+12>>2];do if((0|A)==(0|R)){if(!(A=0|n[(a=(u=R+16|0)+4|0)>>2])){if(!(A=0|n[u>>2])){u=0;break}a=u}for(;;)if(u=0|n[(g=A+20|0)>>2])A=u,a=g;else{if(!(u=0|n[(g=A+16|0)>>2]))break;A=u,a=g}n[a>>2]=0,u=A}else u=0|n[R+8>>2],n[u+12>>2]=A,n[A+8>>2]=u,u=A;while(0);if(0|C){if(A=0|n[R+28>>2],(0|n[(a=3996+(A<<2)|0)>>2])==(0|R)){if(!(n[a>>2]=u)){n[924]=n[924]&~(1<<A);break}}else if(!(n[((0|n[(p=C+16|0)>>2])==(0|R)?p:C+20|0)>>2]=u))break;n[u+24>>2]=C,0|(A=0|n[(a=R+16|0)>>2])&&(n[u+16>>2]=A,n[A+24>>2]=u),0|(A=0|n[a+4>>2])&&(n[u+20>>2]=A,n[A+24>>2]=u)}}while(0);if(n[w+4>>2]=1|P,n[w+P>>2]=P,(0|w)==(0|n[928]))return void(n[925]=P);a=P}if(A=a>>>3,a>>>0<256)return u=3732+(A<<1<<2)|0,a=(a=0|n[923])&(A=1<<A)?0|n[(A=a=u+8|0)>>2]:(n[923]=a|A,A=u+8|0,u),n[A>>2]=w,n[a+12>>2]=w,n[w+8>>2]=a,void(n[w+12>>2]=u);if(u=3996+((C=(A=a>>>8)?16777215<a>>>0?31:1&((R=(C=14-((P=(P=(C=A<<(p=(p=A+1048320|0)>>>16&8))+520192|0)>>>16&4)|p|(R=(R=(C<<=P)+245760|0)>>>16&2))+((C<<=R)>>>15)|0)+7|0)?a>>>R:a)|C<<1:0)<<2)|0,n[w+28>>2]=C,n[w+20>>2]=0,!((A=(n[w+16>>2]=0)|n[924])&(g=1<<C)))return n[924]=A|g,n[u>>2]=w,n[w+24>>2]=u,n[w+12>>2]=w,void(n[w+8>>2]=w);A=0|n[u>>2];t:do if((-8&n[A+4>>2]|0)!=(0|a)){for(C=a<<((0|C)==31?0:25-(C>>>1)|0);u=0|n[(g=A+16+(C>>>31<<2)|0)>>2];){if((-8&n[u+4>>2]|0)==(0|a)){A=u;break t}C<<=1,A=u}return n[g>>2]=w,n[w+24>>2]=A,n[w+12>>2]=w,void(n[w+8>>2]=w)}while(0);R=0|n[(p=A+8|0)>>2],n[R+12>>2]=w,n[p>>2]=w,n[w+8>>2]=R,n[w+12>>2]=A,n[w+24>>2]=0}function Jo(a,u,g){a|=0;var C;return(3&(u|=0)|0)!=0|(0|(C=u>>>2))==0||1073741823+C&C|0?0|(a=28):!((-64-u|0)>>>0<(g|=0)>>>0)&&(u=0|function(P,p){p|=0;var w,R=0,A=0,v=0,O=0,L=0;if((R=16<(P|=0)>>>0?P:16)+-1&R)for(P=16;P>>>0<R>>>0;)P<<=1;else P=R;if((-64-P|0)>>>0<=p>>>0)return n[922]=48,(O=0)|O;if(!(R=0|Mn(12+(w=p>>>0<11?16:p+11&-8)+P|0)))return(O=0)|O;v=R+-8|0;do if(P+-1&R){if(A=15<((A=(R+P+-1&0-P)-8|0)-(p=v)|0)>>>0?A:A+P|0,R=(-8&(L=0|n[(P=R+-4|0)>>2]))-(p=A-p|0)|0,3&L){n[(L=A+4|0)>>2]=R|1&n[L>>2]|2,n[(R=A+R+4|0)>>2]=1|n[R>>2],n[P>>2]=p|1&n[P>>2]|2,n[L>>2]=1|n[L>>2],Qo(v,p),P=p=A;break}n[A>>2]=(0|n[v>>2])+p,n[A+4>>2]=R,P=p=A;break}while(P=p=v,0);return 3&(P=0|n[(R=P+4|0)>>2])|0&&(16+w|0)>>>0<(O=-8&P)>>>0&&(L=O-w|0,v=p+w|0,n[R>>2]=w|1&P|2,n[v+4>>2]=3|L,n[(O=p+O+4|0)>>2]=1|n[O>>2],Qo(v,L)),0|(L=p+8|0)}(16<u>>>0?u:16,g))?(n[a>>2]=u,(a=0)|a):0|(a=48)}function ci(a){var u,g=0;return(a=(u=0|n[(g=4208)>>2])+(a|=0)|0)>>>0>(0|ne())>>>0&&!(0|Dt(0|a))?(n[922]=48,0|(g=-1)):(n[g>>2]=a,0|(g=u))}function Cn(a,u,g,C){u|=0,C|=0;var P=0,p=0;return g=0|function(w,R){var A,v,O,L;return w=((O=0|U(v=65535&(R|=0),A=65535&(w|=0)))>>>16)+(0|U(v,L=w>>>16))|0,R=0|U(v=R>>>16,A),0|(et((w>>>16)+(0|U(v,L))+(((65535&w)+R|0)>>>16)|0),w+R<<16|65535&O|0)}(P=a|=0,p=g|=0),a=0|rt(),0|(et((0|U(u,p))+(0|U(C,P))+a|0&a|0),0|g)}function Yr(a,u,g,C){return 0|(et((u|=0)+(C|=0)+((g=(a|=0)+(g|=0)>>>0)>>>0<a>>>0|0)>>>0|0),0|g)}function Dn(a,u,g,C){return 0|(et(0|(C=(u|=0)-(C|=0)-((a|=0)>>>0<(g|=0)>>>0|0)>>>0)),a-g>>>0|0)}function Ko(a){return 0|((a|=0)?31-(0|z(a^a-1))|0:32)}function _h(a,u,g,C,P){P|=0;var p=0,q=0,G=0,w=0,R=0,k=0,A=0,v=0,O=0,L=0,k=a|=0,q=g|=0,G=v=C|=0;if(!(R=w=u|=0))return p=(0|P)!=0,G?(p&&(n[P>>2]=0|a,n[P+4>>2]=0&u),(P=v=0)|(et(0|v),P)):(p&&(n[P>>2]=(k>>>0)%(q>>>0),n[P+4>>2]=0),P=(k>>>(v=0))/(q>>>0)>>>0,0|(et(0|v),P));p=(0|G)==0;do{if(q){if(!p){if((p=(0|z(0|G))-(0|z(0|R))|0)>>>0<=31){a=k>>>((q=A=p+1|0)>>>0)&(u=p-31>>31)|R<<(G=31-p|0),u&=R>>>(A>>>0),p=0,G=k<<G;break}return P&&(n[P>>2]=0|a,n[P+4>>2]=w|0&u),(P=v=0)|(et(0|v),P)}if((p=q-1|0)&q|0){a=(A=32-(G=33+(0|z(0|q))-(0|z(0|R))|0)|0)-1>>31&R>>>((O=G-32|0)>>>0)|(R<<A|k>>>((q=G)>>>0))&(u=O>>31),u&=R>>>(G>>>0),p=k<<(L=64-G|0)&(w=A>>31),G=(R<<L|k>>>(O>>>0))&w|k<<A&G-33>>31;break}return 0|P&&(n[P>>2]=p&k,n[P+4>>2]=0),(0|q)==1?(L=0|a,0|(et(0|(O=w|0&u)),L)):(O=R>>>((L=0|Ko(0|q))>>>0)|0,L=R<<32-L|k>>>(L>>>0)|0,0|(et(0|O),L))}if(p)return 0|P&&(n[P>>2]=(R>>>0)%(q>>>0),n[P+4>>2]=0),L=(R>>>(O=0))/(q>>>0)>>>0,0|(et(0|O),L);if(!k)return 0|P&&(n[P>>2]=0,n[P+4>>2]=(R>>>0)%(G>>>0)),L=(R>>>(O=0))/(G>>>0)>>>0,0|(et(0|O),L);if(!((p=G-1|0)&G))return 0|P&&(n[P>>2]=0|a,n[P+4>>2]=p&R|0&u),L=R>>>(((O=0)|Ko(0|G))>>>0),0|(et(0|O),L);if((p=(0|z(0|G))-(0|z(0|R))|0)>>>0<=30){a=R<<(G=31-p|0)|k>>>((q=u=p+1|0)>>>0),u=R>>>(u>>>0),p=0,G=k<<G;break}return P&&(n[P>>2]=0|a,n[P+4>>2]=w|0&u),(L=O=0)|(et(0|O),L)}while(0);if(q){for(R=0|Yr(0|(A=0|g),0|(k=v|0&C),-1,-1),g=0|rt(),w=G,G=0;w=p>>>31|(C=w)<<1,p=G|p<<1,Dn(0|R,0|g,0|(C=a<<1|C>>>31|0),0|(v=a>>>31|u<<1|0)),G=1&(O=(L=0|rt())>>31|((0|L)<0?-1:0)<<1),a=0|Dn(0|C,0|v,O&A|0,(((0|L)<0?-1:0)>>31|((0|L)<0?-1:0)<<1)&k|0),u=0|rt(),(0|(q=q-1|0))!=0;);R=w,w=0}else R=G,G=w=0;return(q=0)|P&&(n[P>>2]=a,n[P+4>>2]=u),L=-2&(p<<1|0)|G,0|(et(0|(O=(0|p)>>>31|(R|q)<<1|0&(q<<1|p>>>31)|w)),L)}function ph(a,u,g,C){return 0|_h(a|=0,u|=0,g|=0,C|=0,0)}function ra(a,u,g){return a|=0,u|=0,(0|(g|=0))<32?(et(u>>>g|0),a>>>g|(u&(1<<g)-1)<<32-g):(et(0),u>>>g-32|0)}function C0(a,u,g){return a|=0,u|=0,(0|(g|=0))<32?(et(u<<g|(a&(1<<g)-1<<32-g)>>>32-g|0),a<<g):(et(a<<g-32|0),0)}function _1(){return 4208}function xi(a,u,g){a|=0,u|=0;var C,P,p;if(8192<=(0|(g|=0)))return kt(0|a,0|u,0|g),0|a;if(p=0|a,P=a+g|0,(3&a)==(3&u)){for(;3&a;){if(!g)return 0|p;ct[a>>0]=0|ct[u>>0],a=a+1|0,u=u+1|0,g=g-1|0}for(C=(g=-4&P|0)-64|0;(0|a)<=(0|C);)n[a>>2]=n[u>>2],n[a+4>>2]=n[u+4>>2],n[a+8>>2]=n[u+8>>2],n[a+12>>2]=n[u+12>>2],n[a+16>>2]=n[u+16>>2],n[a+20>>2]=n[u+20>>2],n[a+24>>2]=n[u+24>>2],n[a+28>>2]=n[u+28>>2],n[a+32>>2]=n[u+32>>2],n[a+36>>2]=n[u+36>>2],n[a+40>>2]=n[u+40>>2],n[a+44>>2]=n[u+44>>2],n[a+48>>2]=n[u+48>>2],n[a+52>>2]=n[u+52>>2],n[a+56>>2]=n[u+56>>2],n[a+60>>2]=n[u+60>>2],a=a+64|0,u=u+64|0;for(;(0|a)<(0|g);)n[a>>2]=n[u>>2],a=a+4|0,u=u+4|0}else for(g=P-4|0;(0|a)<(0|g);)ct[a>>0]=0|ct[u>>0],ct[a+1>>0]=0|ct[u+1>>0],ct[a+2>>0]=0|ct[u+2>>0],ct[a+3>>0]=0|ct[u+3>>0],a=a+4|0,u=u+4|0;for(;(0|a)<(0|P);)ct[a>>0]=0|ct[u>>0],a=a+1|0,u=u+1|0;return 0|p}function di(a,u,g){var C,P,p,w=(a|=0)+(g|=0)|0;if(u=(u|0)&255,67<=(0|g)){for(;3&a;)ct[a>>0]=u,a=a+1|0;for(p=u|u<<8|u<<16|u<<24,P=(C=-4&w|0)-64|0;(0|a)<=(0|P);)n[a>>2]=p,n[a+4>>2]=p,n[a+8>>2]=p,n[a+12>>2]=p,n[a+16>>2]=p,n[a+20>>2]=p,n[a+24>>2]=p,n[a+28>>2]=p,n[a+32>>2]=p,n[a+36>>2]=p,n[a+40>>2]=p,n[a+44>>2]=p,n[a+48>>2]=p,n[a+52>>2]=p,n[a+56>>2]=p,n[a+60>>2]=p,a=a+64|0;for(;(0|a)<(0|C);)n[a>>2]=p,a=a+4|0}for(;(0|a)<(0|w);)ct[a>>0]=u,a=a+1|0;return w-g|0}function D0(a){return ot(0),0}function L0(a,u,g,C){return ot(2),0}var p1=[D0,function(a){return 0|gt(0,0|(a|=0))},function(a){return 0},D0],ia=[function(a,u,g){return ot(1),0},function(a,u,g){return 0|At(0,0|(a|=0),0|(u|=0),0|(g|=0))},function(a,u,g){u|=0,g|=0;var C,P,p,w,R,A,v,O=0,L=0,k=0,q=0,G=B;for(B=B+32|0,P=(L=G)+16|0,O=0|n[(p=(a|=0)+28|0)>>2],n[L>>2]=O,O=(0|n[(w=a+20|0)>>2])-O|0,n[L+4>>2]=O,n[L+8>>2]=u,C=a+60|0,O=O+(n[L+12>>(k=2)]=g)|0;;){if((0|O)==(0|(u=0|function(W){return 0|(W=(W|=0)<<16>>16?(n[922]=65535&W,-1):0)}(0|Rt(0|n[C>>2],0|L,0|k,0|P))?n[P>>2]=-1:0|n[P>>2]))){u=6;break}if((0|u)<0){u=8;break}q=0|n[L+4>>2],n[(A=(R=q>>>0<u>>>0)?L+8|0:L)>>2]=(0|n[A>>2])+(q=u-(R?q:0)|0),n[(v=A+4|0)>>2]=(0|n[v>>2])-q,L=A,k=k+(R<<31>>31)|0,O=O-u|0}return(0|u)==6?(q=0|n[a+44>>2],n[a+16>>2]=q+(0|n[a+48>>2]),n[p>>2]=q,n[w>>2]=q):(0|u)==8&&(n[a+16>>2]=0,n[p>>2]=0,n[w>>2]=0,n[a>>2]=32|n[a>>2],g=(0|k)==2?0:g-(0|n[L+4>>2])|0),B=G,0|g},function(a,u,g){var C,P;return xi(0|(P=0|n[(C=(a|=0)+20|0)>>2]),0|(u|=0),0|(a=(g|=0)>>>0<(a=(0|n[a+16>>2])-P|0)>>>0?g:a)),n[C>>2]=(0|n[C>>2])+a,0|g}],m1=[L0,function(a,u,g,C){return 0|lt(0,0|(a|=0),0|(u|=0),0|(g|=0),0|(C|=0))},function(a,u,g,C){return et(0),0},L0],$0=[function(a){ot(3)},function(a){Pt(0,0|(a|=0))}],N0=[function(a,u){ot(4)},function(a,u){bt(0,0|(a|=0),0|(u|=0))},function(a,u){var g,A=0,v=0,O=0,C=0,P=0,p=0,w=0,R=0,A=0|n[(g=(a|=0)+308|0)>>2],v=0|n[a+316>>2],O=0|n[a+320>>2];(0|(C=0|n[(P=A+((u|=0)<<5)+8|0)>>2]))==-1?(n[v+(u<<2)>>2]=n[(0|n[a+148>>2])+(n[A+(u<<5)+16>>2]<<2)>>2],l[O+(u<<2)>>2]=1):(w=0|n[(p=A+(u<<5)+16|0)>>2],R=0|n[(0|n[a+152>>2])+(w<<2)>>2],Ln[3&n[A+(C<<5)+24>>2]](a,C,R,R,0|n[(0|n[a+60>>2])+(24*w|0)+16>>2]),P=0|n[P>>2],l[v+(u<<2)>>2]=+l[(0|n[a+148>>2])+(n[p>>2]<<2)>>2]*+l[v+(P<<2)>>2],n[O+(u<<2)>>2]=n[O+(P<<2)>>2]),(0|Jt[4+(0|n[a>>2])>>0])<4||(A=0|n[g>>2],v=0|n[a+324>>2],g=0|n[a+328>>2],O=u<<2,C=n[A+(u<<5)+16>>2]<<2,(0|(A=0|n[A+(u<<5)+8>>2]))==-1?(A=0|n[a+156>>2],n[v+(O<<2)>>2]=n[A+(C<<2)>>2],n[v+((u=1|O)<<2)>>2]=n[A+((P=1|C)<<2)>>2],n[v+((R=2|O)<<2)>>2]=n[A+((w=2|C)<<2)>>2],l[v+((A=3|O)<<2)>>2]=1,p=0|n[a+160>>2],n[g+(O<<2)>>2]=n[p+(C<<2)>>2],n[g+(u<<2)>>2]=n[p+(P<<2)>>2],n[g+(R<<2)>>2]=n[p+(w<<2)>>2]):(w=A<<2,p=(0|n[a+156>>2])+(C<<2)|0,l[(A=v+(O<<2)|0)>>2]=+l[p>>2]*+l[(R=v+(w<<2)|0)>>2],l[A+4>>2]=+l[p+4>>2]*+l[R+4>>2],l[A+8>>2]=+l[p+8>>2]*+l[R+8>>2],l[v+((A=3|O)<<2)>>2]=1,p=(0|n[a+160>>2])+(C<<2)|0,u=+l[p>>2],P=+l[(w=g+(w<<2)|0)>>2],l[(R=g+(O<<2)|0)>>2]=u+P-u*P,P=+l[p+4>>2],u=+l[w+4>>2],l[R+4>>2]=P+u-P*u,u=+l[p+8>>2],P=+l[w+8>>2],l[R+8>>2]=u+P-u*P),l[g+(A<<2)>>2]=1)},function(a,u){var g,C,P,p,w,R,A,v,O,L,k,q,G,W,V,F=0,tt=0,ht=0,Z=0,ut=0,xt=0,Xt=0,Qt=0,It=0,Wt=0,Vt=0,dt=0,$t=0,Zt=B;if(B=B+48|0,A=Zt+8|0,w=Zt+40|0,p=Zt+32|0,P=(R=Zt)+24|0,dt=Zt+16|0,F=0|n[(k=(a|=0)+308|0)>>2],O=0|n[a+316>>2],L=0|n[a+320>>2],(0|(C=0|n[(W=F+((u|=0)<<5)+8|0)>>2]))==-1)$t=0|n[F+(u<<5)+16>>2],n[O+(u<<2)>>2]=n[(0|n[a+268>>2])+($t<<2)>>2],n[L+(u<<2)>>2]=n[(0|n[a+272>>2])+($t<<2)>>2];else{for(v=0|n[(V=F+(u<<5)+16|0)>>2],ut=0|n[(0|n[(q=a+276|0)>>2])+(v<<2)>>2],n[dt>>2]=ut,v=0|n[(0|n[(G=a+280|0)>>2])+(v<<2)>>2],n[(Wt=dt+4|0)>>2]=v,Vt=(0|n[F+(C<<5)+12>>2])==1?-10:-.10000000149011612,n[w>>2]=ut,n[(ut=4+w|0)>>2]=v,Ln[3&n[(v=F+(C<<5)+24|0)>>2]](a,C,w,p,1),ht=4+P|0,F=4+p|0,tt=R+4|0,Z=9,It=1;l[P>>2]=(Qt=0*It)+ +l[w>>2],l[ht>>2]=(g=Vt*It)+ +l[ut>>2],Ln[3&n[v>>2]](a,C,P,R,1),Xt=+l[R>>2]-+l[p>>2],l[R>>2]=Xt,xt=+l[tt>>2]-+l[F>>2],!(Xt!=0|(l[tt>>2]=xt)!=0);){if(l[P>>2]=+l[w>>2]-Qt,l[ht>>2]=+l[ut>>2]-g,Ln[3&n[v>>2]](a,C,P,R,1),xt=+l[R>>2]-+l[p>>2],l[R>>2]=xt,Qt=+l[tt>>2]-+l[F>>2],xt!=0|(l[tt>>2]=Qt)!=0){$t=6;break}if(!Z){$t=8;break}Z=Z+-1|0,It*=.10000000149011612}(0|$t)==6?(Xt=-xt,xt=-Qt):(0|$t)==8&&(zt(0,2397,A),xt=Xt=0),Vt=180*+sr(0,Vt,Xt,xt)/3.1415927410125732,Ln[3&n[v>>2]](a,0|n[W>>2],dt,dt,1),$t=0|n[V>>2],n[(0|n[q>>2])+($t<<2)>>2]=n[dt>>2],n[(0|n[G>>2])+($t<<2)>>2]=n[Wt>>2],dt=(0|n[a+284>>2])+($t<<2)|0,l[dt>>2]=+l[dt>>2]-Vt,dt=0|n[W>>2],l[O+(u<<2)>>2]=+l[(0|n[a+268>>2])+($t<<2)>>2]*+l[O+(dt<<2)>>2],$t=(0|n[a+272>>2])+($t<<2)|0,Vt=+l[$t>>2]*+l[L+(dt<<2)>>2],l[L+(u<<2)>>2]=Vt,l[$t>>2]=Vt}B=((0|Jt[4+(0|n[a>>2])>>0])<4||(F=0|n[k>>2],tt=0|n[a+324>>2],ut=0|n[a+328>>2],ht=u<<2,Z=n[F+(u<<5)+16>>2]<<2,(0|(F=0|n[F+(u<<5)+8>>2]))==-1?(F=0|n[a+296>>2],n[tt+(ht<<2)>>2]=n[F+(Z<<2)>>2],n[tt+((dt=1|ht)<<2)>>2]=n[F+((Wt=1|Z)<<2)>>2],n[tt+((u=2|ht)<<2)>>2]=n[F+(($t=2|Z)<<2)>>2],l[tt+((F=3|ht)<<2)>>2]=1,a=0|n[a+300>>2],n[ut+(ht<<2)>>2]=n[a+(Z<<2)>>2],n[ut+(dt<<2)>>2]=n[a+(Wt<<2)>>2],n[ut+(u<<2)>>2]=n[a+($t<<2)>>2]):(dt=F<<2,$t=(0|n[a+296>>2])+(Z<<2)|0,l[(F=tt+(ht<<2)|0)>>2]=+l[$t>>2]*+l[(u=tt+(dt<<2)|0)>>2],l[F+4>>2]=+l[$t+4>>2]*+l[u+4>>2],l[F+8>>2]=+l[$t+8>>2]*+l[u+8>>2],l[tt+((F=3|ht)<<2)>>2]=1,$t=(0|n[a+300>>2])+(Z<<2)|0,It=+l[$t>>2],Vt=+l[(a=ut+(dt<<2)|0)>>2],l[(u=ut+(ht<<2)|0)>>2]=It+Vt-It*Vt,Vt=+l[$t+4>>2],It=+l[a+4>>2],l[u+4>>2]=Vt+It-Vt*It,It=+l[$t+8>>2],Vt=+l[a+8>>2],l[u+8>>2]=It+Vt-It*Vt),l[ut+(F<<2)>>2]=1),Zt)}],Ln=[function(a,u,g,C,P){ot(5)},function(a,u,g,C,P){Ct(0,0|(a|=0),0|(u|=0),0|(g|=0),0|(C|=0),0|(P|=0))},function(a,u,g,C,P){g|=0,C|=0;var p,w,R,A,v,O,L,k,q,G,W,V,F,tt,ht,Z,ut,xt,Xt,Qt,It,Wt,Vt,dt=0,$t=0,Zt=0,Bt=0,$e=0,Oe=0,we=0,lr=0,nr=0,Ze=0,Ue=0,ur=0,Ar=0,Je=0,or=0,Ee=0,Le=0,nt=0,Nr=0,Ke=0,He=0,tr=0,be=0,Kr=B;if(B=B+32|0,Xt=Kr,u=0|n[(0|n[(a|=0)+308>>2])+((u|=0)<<5)+16>>2],dt=0|n[a+60>>2],F=0|n[(0|n[a+152>>2])+(u<<2)>>2],tt=0|n[dt+(24*u|0)+8>>2],ht=0|n[dt+(24*u|0)+4>>2],Z=1+tt|0,(0|(P|=0))<=0)B=Kr;else{ut=0|tt,xt=0|ht,V=(0|n[dt+(24*u|0)+12>>2])==0,w=F+(tt<<3)|0,R=F+((q=0|U(ht,Z))<<3)|0,A=F+((k=q+tt|0)<<3)|0,v=4+F|0,O=F+(tt<<3)+4|0,L=F+(q<<3)+4|0,k=F+(k<<3)+4|0,W=tt-1|0,G=ht-1|0,ur=Ar=Je=or=$t=Zt=Ue=Ze=nr=lr=He=Ke=we=Oe=$e=Bt=tr=nt=0;do{Ee=(p=+l[g+(tr<<3)>>2])*ut,Nr=(Le=+l[g+(tr<<3)+4>>2])*xt,a=!(1<=p),dt=!(1<=Le);do{if(dt&a&!(p<0)&!(Le<0)){if(a=~~Ee,u=(0|U(Z,dt=~~Nr))+a|0,Zt=Ee-(0|a),$t=Nr-(0|dt),!V){l[C+(tr<<3)>>2]=(Ee=1-$t)*((Le=1-Zt)*+l[F+(u<<3)>>2])+Ee*(Zt*+l[F+((be=u+1|0)<<3)>>2])+$t*(Le*+l[F+((a=u+Z|0)<<3)>>2])+$t*(Zt*+l[F+((dt=a+1|0)<<3)>>2]),Le=Ee*(Le*+l[F+(u<<3)+4>>2])+Ee*(Zt*+l[F+(be<<3)+4>>2])+$t*(Le*+l[F+(a<<3)+4>>2]),Ee=$t*(Zt*+l[F+(dt<<3)+4>>2]);break}if(Zt+$t<=1){l[C+(tr<<3)>>2]=(Le=1-Zt-$t)*+l[F+(u<<3)>>2]+Zt*+l[F+((dt=u+1|0)<<3)>>2]+$t*+l[F+((be=u+Z|0)<<3)>>2],Le=Le*+l[F+(u<<3)+4>>2]+Zt*+l[F+(dt<<3)+4>>2],Ee=$t*+l[F+(be<<3)+4>>2];break}l[C+(tr<<3)>>2]=(Nr=Zt+-1+$t)*+l[F+((a=(dt=u+Z|0)+1|0)<<3)>>2]+(Le=1-Zt)*+l[F+(dt<<3)>>2]+(Ee=1-$t)*+l[F+((be=u+1|0)<<3)>>2],Le=Nr*+l[F+(a<<3)+4>>2]+Le*+l[F+(dt<<3)+4>>2],Ee*=+l[F+(be<<3)+4>>2];break}if(nt||(Vt=+l[F>>2],Wt=+l[w>>2],It=+l[R>>2],Ke=+l[A>>2],Qt=+l[v>>2],ur=(Je=+l[O>>2])-(or=+l[L>>2]),nt=1,Ke=.25*(Vt+Wt+It+Ke)-.5*(Vt=Ke-Vt),He=.25*(Qt+Je+or+(He=+l[k>>2]))-.5*(Qt=He-Qt),or=.5*((Ar=Wt-It)+Vt),Je=.5*(ur+Qt),Ar=.5*(Vt-Ar),ur=.5*(Qt-ur)),!(Le<3&-2<p&p<3&-2<Le)){l[C+(tr<<3)>>2]=Le*Ar+(p*or+Ke),Le*=ur,Ee=p*Je+He;break}do{if(p<=0){if(Le<=0){Bt=Ke-(Oe=2*Ar),$e=He-(we=2*ur),Oe=(Ze=Ke-2*or)-Oe,we=(Ue=He-2*Je)-we,lr=+l[F>>2],nr=+l[v>>2],Zt=.5*(2+p),$t=.5*(Le+2);break}if(dt){we=($t=0|(dt=(0|ht)==(0|(dt=~~Nr))?G:dt))/xt,Zt=(0|(be=dt+1|0))/xt,dt=0|U(dt,Z),be=0|U(be,Z),Bt=+l[F+(dt<<3)>>2],$e=+l[F+(dt<<3)+4>>2],Oe=we*Ar+(Ze=Ke-2*or),we=we*ur+(Ue=He-2*Je),lr=+l[F+(be<<3)>>2],nr=+l[F+(be<<3)+4>>2],Ze=Zt*Ar+Ze,Ue=Zt*ur+Ue,Zt=.5*(2+p),$t=Nr-$t;break}Bt=+l[R>>2],$e=+l[L>>2],Oe=Ar+(Ze=Ke-2*or),we=ur+(Ue=He-2*Je),lr=($t=3*Ar)+Ke,nr=(Zt=3*ur)+He,Ze=$t+Ze,Ue=Zt+Ue,Zt=.5*(2+p),$t=.5*(Le+-1);break}if(u=Le<=0,a){if(u){Bt=($e=(0|(dt=(be=(0|tt)==(0|(be=~~Ee))?W:be)+1|0))/ut)*or+Ke-(Oe=2*Ar),$e=$e*Je+He-(we=2*ur),Oe=(lr=(Zt=0|be)/ut)*or+Ke-Oe,we=lr*Je+He-we,lr=+l[F+(dt<<3)>>2],nr=+l[F+(dt<<3)+4>>2],Ze=+l[F+(be<<3)>>2],Ue=+l[F+(be<<3)+4>>2],Zt=Ee-Zt,$t=.5*(Le+2);break}if(dt){n[Xt>>2]=tr,f[Xt+8>>3]=p,f[Xt+16>>3]=Le,zt(0,865,Xt);break}Zt=0|(be=(0|tt)==(0|(be=~~Ee))?W:be),nr=(0|(dt=be+1|0))/ut,Bt=+l[F+((dt=dt+q|0)<<3)>>2],$e=+l[F+(dt<<3)+4>>2],Oe=+l[F+((be=be+q|0)<<3)>>2],we=+l[F+(be<<3)+4>>2],lr=(Ze=3*Ar)+(nr*or+Ke),nr=($t=3*ur)+(nr*Je+He),Ze+=(Ue=Zt/ut)*or+Ke,Ue=$t+(Ue*Je+He),Zt=Ee-Zt,$t=.5*(Le+-1);break}if(u){Bt=(lr=3*or+Ke)-(Oe=2*Ar),$e=(nr=3*Je+He)-(we=2*ur),Oe=or+Ke-Oe,we=Je+He-we,Ze=+l[w>>2],Ue=+l[O>>2],Zt=.5*(p-1),$t=.5*(Le+2);break}if(dt){$e=($t=0|(dt=(0|ht)==(0|(dt=~~Nr))?G:dt))/xt,Ze=(0|(be=dt+1|0))/xt,dt=(0|U(dt,Z))+tt|0,be=(0|U(be,Z))+tt|0,Bt=$e*Ar+(lr=3*or+Ke),$e=$e*ur+(nr=3*Je+He),Oe=+l[F+(dt<<3)>>2],we=+l[F+(dt<<3)+4>>2],lr=Ze*Ar+lr,nr=Ze*ur+nr,Ze=+l[F+(be<<3)>>2],Ue=+l[F+(be<<3)+4>>2],Zt=.5*(p-1),$t=Nr-$t;break}Bt=Ar+(lr=3*or+Ke),$e=ur+(nr=3*Je+He),Oe=+l[A>>2],we=+l[k>>2],lr=(Ze=3*Ar)+lr,nr=(Ue=3*ur)+nr,Ze+=or+Ke,Ue+=Je+He,Zt=.5*(p-1),$t=.5*(Le+-1);break}while(0);if(Zt+$t<=1){l[C+(tr<<3)>>2]=Oe+(Bt-Oe)*Zt+(Ze-Oe)*$t,Le=we+($e-we)*Zt,Ee=(Ue-we)*$t;break}l[C+(tr<<3)>>2]=lr+(Ze-lr)*(Le=1-Zt)+(Bt-lr)*(Ee=1-$t),Le=nr+(Ue-nr)*Le,Ee*=$e-nr;break}while(0)}while(l[C+(tr<<3)+4>>2]=Le+Ee,(0|(tr=tr+1|0))!=(0|P));B=Kr}},function(a,u,g,C,P){a|=0,u|=0,g|=0,C|=0,P|=0;var p,w,R,A,v=0,O=0,L=0,k=0;if(u=0|n[(0|n[a+308>>2])+(u<<5)+16>>2],O=3.1415927410125732*(+l[(0|n[a+168>>2])+(12*u|0)+4>>2]+ +l[(0|n[a+284>>2])+(u<<2)>>2])/180,v=+X(O),O=+M(O),w=(O*=p=+l[(0|n[a+272>>2])+(u<<2)>>2])*(L=0|n[(0|n[a+288>>2])+(u<<2)>>2]?-1:1),p=(v*=p)*(k=0|n[(0|n[a+292>>2])+(u<<2)>>2]?-1:1),L*=v,k*=O,O=+l[(0|n[a+276>>2])+(u<<2)>>2],v=+l[(0|n[a+280>>2])+(u<<2)>>2],!((0|P)<=0))for(u=0;A=+l[g+(u<<3)>>2],R=+l[g+(u<<3)+4>>2],l[C+(u<<3)>>2]=w*A-p*R+O,l[C+(u<<3)+4>>2]=L*A+k*R+v,(0|(u=u+1|0))!=(0|P););}];return{___errno_location:function(){return 3688},___muldi3:Cn,___udivdi3:ph,_bitshift64Lshr:ra,_bitshift64Shl:C0,_csmFree:function(a){_n(a|=0)},_csmGetDrawableConstantFlags:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[888+(0|n[a>>2])>>2],B=g,0|u):(n[u>>2]=1896,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetDrawableCount:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[a+332>>2],B=g,0|u):(n[u>>2]=1858,n[u+4>>2]=1411,zt(0,1269,u),B=g,0|(u=-1))},_csmGetDrawableDrawOrders:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[a+440>>2],B=g,0|u):(n[u>>2]=1980,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetDrawableDynamicFlags:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[a+432>>2],B=g,0|u):(n[u>>2]=1924,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetDrawableIds:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[832+(0|n[a>>2])>>2],B=g,0|u):(n[u>>2]=1878,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetDrawableIndexCounts:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[904+(0|n[a>>2])>>2],B=g,0|u):(n[u>>2]=2182,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetDrawableIndices:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[840+(0|n[a>>2])>>2],B=g,0|u):(n[u>>2]=2208,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetDrawableMaskCounts:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[912+(0|n[a>>2])>>2],B=g,0|u):(n[u>>2]=2056,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetDrawableMasks:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[844+(0|n[a>>2])>>2],B=g,0|u):(n[u>>2]=2081,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetDrawableMultiplyColors:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[a+452>>2],B=g,0|u):(n[u>>2]=2230,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetDrawableOpacities:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[a+448>>2],B=g,0|u):(n[u>>2]=2032,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetDrawableParentPartIndices:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[876+(0|n[a>>2])>>2],B=g,0|u):(n[u>>2]=2286,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetDrawableRenderOrders:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[a+436>>2],B=g,0|u):(n[u>>2]=2005,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetDrawableScreenColors:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[a+456>>2],B=g,0|u):(n[u>>2]=2259,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetDrawableTextureIndices:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[884+(0|n[a>>2])>>2],B=g,0|u):(n[u>>2]=1951,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetDrawableVertexCounts:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[892+(0|n[a>>2])>>2],B=g,0|u):(n[u>>2]=2101,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetDrawableVertexPositions:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[a+444>>2],B=g,0|u):(n[u>>2]=2128,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetDrawableVertexUvs:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[836+(0|n[a>>2])>>2],B=g,0|u):(n[u>>2]=2158,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetLatestMocVersion:function(){return 4},_csmGetMocVersion:function(a,u){u|=0;var g=B;return B=B+16|0,u=g,(a|=0)?(a=0|Me(a),B=g,0|a):(n[u>>2]=1286,n[u+4>>2]=1303,zt(0,1269,u),B=g,(a=0)|a)},_csmGetParameterCount:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[a+540>>2],B=g,0|u):(n[u>>2]=1610,n[u+4>>2]=1411,zt(0,1269,u),B=g,0|(u=-1))},_csmGetParameterDefaultValues:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[932+(0|n[a>>2])>>2],B=g,0|u):(n[u>>2]=1729,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetParameterIds:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[916+(0|n[a>>2])>>2],B=g,0|u):(n[u>>2]=1631,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetParameterKeyCounts:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[a+616>>2],B=g,0|u):(n[u>>2]=2347,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetParameterKeyValues:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[a+612>>2],B=g,0|u):(n[u>>2]=2372,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetParameterMaximumValues:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[924+(0|n[a>>2])>>2],B=g,0|u):(n[u>>2]=1700,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetParameterMinimumValues:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[928+(0|n[a>>2])>>2],B=g,0|u):(n[u>>2]=1671,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetParameterTypes:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[a+548>>2],B=g,0|u):(n[u>>2]=1650,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetParameterValues:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[a+552>>2],B=g,0|u):(n[u>>2]=1758,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetPartCount:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[a+4>>2],B=g,0|u):(n[u>>2]=1780,n[u+4>>2]=1411,zt(0,1269,u),B=g,0|(u=-1))},_csmGetPartIds:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[712+(0|n[a>>2])>>2],B=g,0|u):(n[u>>2]=1796,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetPartOpacities:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[a+52>>2],B=g,0|u):(n[u>>2]=1810,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetPartParentPartIndices:function(a){var u=0,g=B;return B=B+16|0,u=g,(a|=0)?(u=0|n[740+(0|n[a>>2])>>2],B=g,0|u):(n[u>>2]=1830,n[u+4>>2]=1411,zt(0,1269,u),B=g,(u=0)|u)},_csmGetSizeofModel:Ye,_csmGetVersion:function(){return 67239938},_csmInitializeModelInPlace:Ie,_csmMalloc:function(a){return 0|Mn(a|=0)},_csmMallocMoc:function(a){var u,g=B;return B=B+16|0,Jo(u=g,64,a|=0),B=g,0|n[u>>2]},_csmMallocModelAndInitialize:function(a){var u=0,g=0,C=B;return B=B+16|0,u=C,0|(a|=0)&&!(0|Jo(u,16,g=0|Ye(a)))?(u=0|Ie(a,a=0|n[u>>2],g))||(_n(a),u=0):u=0,B=C,0|u},_csmReadCanvasInfo:function(a,u,g,C){u|=0,g|=0,C|=0;var P,p,w,R=0,A=B;if(B=B+32|0,p=A+24|0,R=A+16|0,w=A+8|0,P=A,a|=0)return u?g?void(B=(C?(R=0|n[708+(0|n[a>>2])>>2],n[u>>2]=n[R+12>>2],n[u+4>>2]=n[R+16>>2],n[g>>2]=n[R+4>>2],n[g+4>>2]=n[R+8>>2],n[C>>2]=n[R>>2]):(n[p>>2]=1393,n[4+p>>2]=1487,zt(0,1269,p)),A)):(n[R>>2]=1393,n[R+4>>2]=1458,zt(0,1269,R),void(B=A)):(n[w>>2]=1393,n[4+w>>2]=1431,zt(0,1269,w),void(B=A));n[P>>2]=1393,n[P+4>>2]=1411,zt(0,1269,P),B=A},_csmResetDrawableDynamicFlags:function(a){var u,g=B;B=B+16|0,u=g,B=((a|=0)?n[a+428>>2]=1:(n[u>>2]=2318,n[u+4>>2]=1411,zt(0,1269,u)),g)},_csmReviveMocInPlace:function(a,u){u|=0;var g,C=0,P=0,p=B;return B=B+32|0,P=p+16|0,g=p+8|0,C=p,(a|=0)?((C=a)+63&-64|0)!=(0|C)?(n[g>>2]=1322,n[4+g>>2]=1342,zt(0,1269,g),B=p,(P=0)|P):0|u&&(u+63&-64|0)==(0|u)?(P=0|ye(a),B=p,0|P):(n[P>>2]=1322,n[P+4>>2]=1374,zt(0,1269,P),B=p,(P=0)|P):(n[C>>2]=1322,n[C+4>>2]=1303,zt(0,1269,C),B=p,(P=0)|P)},_csmSetLogFunction:function(a){n[904]=a|=0},_csmUpdateModel:function(a){var u,g=B;B=B+16|0,u=g,B=((a|=0)?Qr(a):(n[u>>2]=1595,n[u+4>>2]=1411,zt(0,1269,u)),g)},_emscripten_get_sbrk_ptr:_1,_emscripten_replace_memory:function(a){return ct=new Int8Array(a),Jt=new Uint8Array(a),Ae=new Int16Array(a),pe=new Uint16Array(a),n=new Int32Array(a),l=new Float32Array(a),f=new Float64Array(a),!0},_free:_n,_i64Add:Yr,_i64Subtract:Dn,_malloc:Mn,_memcpy:xi,_memset:di,dynCall_ii:function(a,u){return 0|p1[3&(a|=0)](0|(u|=0))},dynCall_iiii:function(a,u,g,C){return 0|ia[3&(a|=0)](0|(u|=0),0|(g|=0),0|(C|=0))},dynCall_iiiii:function(a,u,g,C,P){return 0|m1[3&(a|=0)](0|(u|=0),0|(g|=0),0|(C|=0),0|(P|=0))},dynCall_vi:function(a,u){$0[1&(a|=0)](0|(u|=0))},dynCall_vii:function(a,u,g){N0[3&(a|=0)](0|(u|=0),0|(g|=0))},dynCall_viiiii:function(a,u,g,C,P,p){Ln[3&(a|=0)](0|(u|=0),0|(g|=0),0|(C|=0),0|(P|=0),0|(p|=0))},establishStackSpace:function(a,u){B=a|=0},stackAlloc:function(a){var u=B;return B=(B=B+(a|=0)|0)+15&-16,0|u},stackRestore:function(a){B=a|=0},stackSave:function(){return 0|B}}}({Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Float32Array,Float64Array},{a:ue,b:function(at){Gt=at},c:function(){return Gt},d:function(at,pt){return wt[at](pt)},e:function(at,pt,Mt,ct){return wt[at](pt,Mt,ct)},f:function(at,pt,Mt,ct,Ae){return wt[at](pt,Mt,ct,Ae)},g:function(at,pt){wt[at](pt)},h:function(at,pt,Mt){wt[at](pt,Mt)},i:function(at,pt,Mt,ct,Ae,n){wt[at](pt,Mt,ct,Ae,n)},j:function(){return qr.apply(null,arguments)},k:Ve,l:function(at,pt,Mt){he.set(he.subarray(pt,pt+Mt),at)},m:function(at){if(2130706432<at)return!1;for(var pt=Math.max(Ve(),16777216);pt<at;)pt=pt<=536870912?_t(2*pt):Math.min(_t((3*pt+2147483648)/4),2130706432);return!!hi(pt)},n:qr,o:function(){ue("OOM")},p:function(at){return at},q:er,r:hi,s:function(){var at=x._fflush;at&&at(0),Ce[1].length&&Er(1,10),Ce[2].length&&Er(2,10)},t:Pe,u:function(){var at=Pe();return x.extraStackTrace&&(at+=`
`+x.extraStackTrace()),er(at)},v:4400},Yt),Li=(x.___errno_location=Ot.___errno_location,x.___muldi3=Ot.___muldi3,x.___udivdi3=Ot.___udivdi3,x._bitshift64Lshr=Ot._bitshift64Lshr,x._bitshift64Shl=Ot._bitshift64Shl,x._csmFree=Ot._csmFree,x._csmGetDrawableConstantFlags=Ot._csmGetDrawableConstantFlags,x._csmGetDrawableCount=Ot._csmGetDrawableCount,x._csmGetDrawableDrawOrders=Ot._csmGetDrawableDrawOrders,x._csmGetDrawableDynamicFlags=Ot._csmGetDrawableDynamicFlags,x._csmGetDrawableIds=Ot._csmGetDrawableIds,x._csmGetDrawableIndexCounts=Ot._csmGetDrawableIndexCounts,x._csmGetDrawableIndices=Ot._csmGetDrawableIndices,x._csmGetDrawableMaskCounts=Ot._csmGetDrawableMaskCounts,x._csmGetDrawableMasks=Ot._csmGetDrawableMasks,x._csmGetDrawableMultiplyColors=Ot._csmGetDrawableMultiplyColors,x._csmGetDrawableOpacities=Ot._csmGetDrawableOpacities,x._csmGetDrawableParentPartIndices=Ot._csmGetDrawableParentPartIndices,x._csmGetDrawableRenderOrders=Ot._csmGetDrawableRenderOrders,x._csmGetDrawableScreenColors=Ot._csmGetDrawableScreenColors,x._csmGetDrawableTextureIndices=Ot._csmGetDrawableTextureIndices,x._csmGetDrawableVertexCounts=Ot._csmGetDrawableVertexCounts,x._csmGetDrawableVertexPositions=Ot._csmGetDrawableVertexPositions,x._csmGetDrawableVertexUvs=Ot._csmGetDrawableVertexUvs,x._csmGetLatestMocVersion=Ot._csmGetLatestMocVersion,x._csmGetMocVersion=Ot._csmGetMocVersion,x._csmGetParameterCount=Ot._csmGetParameterCount,x._csmGetParameterDefaultValues=Ot._csmGetParameterDefaultValues,x._csmGetParameterIds=Ot._csmGetParameterIds,x._csmGetParameterKeyCounts=Ot._csmGetParameterKeyCounts,x._csmGetParameterKeyValues=Ot._csmGetParameterKeyValues,x._csmGetParameterMaximumValues=Ot._csmGetParameterMaximumValues,x._csmGetParameterMinimumValues=Ot._csmGetParameterMinimumValues,x._csmGetParameterTypes=Ot._csmGetParameterTypes,x._csmGetParameterValues=Ot._csmGetParameterValues,x._csmGetPartCount=Ot._csmGetPartCount,x._csmGetPartIds=Ot._csmGetPartIds,x._csmGetPartOpacities=Ot._csmGetPartOpacities,x._csmGetPartParentPartIndices=Ot._csmGetPartParentPartIndices,x._csmGetSizeofModel=Ot._csmGetSizeofModel,x._csmGetVersion=Ot._csmGetVersion,x._csmInitializeModelInPlace=Ot._csmInitializeModelInPlace,x._csmMalloc=Ot._csmMalloc,x._csmMallocMoc=Ot._csmMallocMoc,x._csmMallocModelAndInitialize=Ot._csmMallocModelAndInitialize,x._csmReadCanvasInfo=Ot._csmReadCanvasInfo,x._csmResetDrawableDynamicFlags=Ot._csmResetDrawableDynamicFlags,x._csmReviveMocInPlace=Ot._csmReviveMocInPlace,x._csmSetLogFunction=Ot._csmSetLogFunction,x._csmUpdateModel=Ot._csmUpdateModel,x._emscripten_get_sbrk_ptr=Ot._emscripten_get_sbrk_ptr,x._emscripten_replace_memory=Ot._emscripten_replace_memory),Qi=(x._free=Ot._free,x._i64Add=Ot._i64Add,x._i64Subtract=Ot._i64Subtract,x._malloc=Ot._malloc,x._memcpy=Ot._memcpy,x._memset=Ot._memset,x.establishStackSpace=Ot.establishStackSpace,x.stackAlloc=Ot.stackAlloc),Hr=x.stackRestore=Ot.stackRestore,_r=x.stackSave=Ot.stackSave;function hr(){function at(){if(!Zi&&(Zi=!0,!oe)){if(Ut(Re),Ut(qt),x.onRuntimeInitialized&&x.onRuntimeInitialized(),x.postRun)for(typeof x.postRun=="function"&&(x.postRun=[x.postRun]);x.postRun.length;){var pt=x.postRun.shift();Ge.unshift(pt)}Ut(Ge)}}if(!(0<_e)){if(x.preRun)for(typeof x.preRun=="function"&&(x.preRun=[x.preRun]);x.preRun.length;)(function(){var pt=x.preRun.shift();se.unshift(pt)})();Ut(se),0<_e||(x.setStatus?(x.setStatus("Running..."),setTimeout(function(){setTimeout(function(){x.setStatus("")},1),at()},1)):at())}}if(x.dynCall_ii=Ot.dynCall_ii,x.dynCall_iiii=Ot.dynCall_iiii,x.dynCall_iiiii=Ot.dynCall_iiiii,x.dynCall_vi=Ot.dynCall_vi,x.dynCall_vii=Ot.dynCall_vii,x.dynCall_viiiii=Ot.dynCall_viiiii,x.asm=Ot,x.ccall=function(at,pt,Mt,ct){var Ae={string:function(f){var T=0;if(f!=null&&f!==0){var D=1+(f.length<<2),N=T=Qi(D),M=he;if(0<D){for(var D=N+D-1,X=0;X<f.length;++X){var H=f.charCodeAt(X);if((H=55296<=H&&H<=57343?65536+((1023&H)<<10)|1023&f.charCodeAt(++X):H)<=127){if(D<=N)break;M[N++]=H}else{if(H<=2047){if(D<=N+1)break;M[N++]=192|H>>6}else{if(H<=65535){if(D<=N+2)break;M[N++]=224|H>>12}else{if(D<=N+3)break;M[N++]=240|H>>18,M[N++]=128|H>>12&63}M[N++]=128|H>>6&63}M[N++]=128|63&H}}M[N]=0}}return T},array:function(f){var T=Qi(f.length);return Ht.set(f,T),T}},n=function(f){var T=x["_"+f];return ae(T,"Cannot call unknown function "+f+", make sure it is exported"),T}(at),Jt=[];if(at=0,ct)for(var pe=0;pe<ct.length;pe++){var l=Ae[Mt[pe]];l?(at===0&&(at=_r()),Jt[pe]=l(ct[pe])):Jt[pe]=ct[pe]}return Mt=function(f){return pt==="string"?Et(f):pt==="boolean"?!!f:f}(Mt=n.apply(null,Jt)),at!==0&&Hr(at),Mt},x.UTF8ToString=Et,x.addFunction=function(at){for(var pt=0;pt<1;pt++)if(!wt[pt])return wt[pt]=at,1+pt;throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},Nt&&((String.prototype.startsWith?Nt.startsWith(ie):Nt.indexOf(ie)===0)||(it=Nt,Nt=x.locateFile?x.locateFile(it,Tt):Tt+it),J||K?(Ot=Q(Nt),he.set(Ot,8)):(_e++,x.monitorRunDependencies&&x.monitorRunDependencies(_e),Xe=function(at){at.byteLength&&(at=new Uint8Array(at)),he.set(at,8),x.memoryInitializerRequest&&delete x.memoryInitializerRequest.response,_e--,x.monitorRunDependencies&&x.monitorRunDependencies(_e),_e==0&&ce&&(at=ce,ce=null,at())},dn=function(){j(function(){throw"could not load memory initializer "+Nt})},(Tt=Ur(Nt))?Xe(Tt.buffer):x.memoryInitializerRequest?(it=function(){var at=x.memoryInitializerRequest,pt=at.response;if(at.status!==200&&at.status!==0){if(!(pt=Ur(x.memoryInitializerRequestURL)))return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+at.status+", retrying "+Nt),void dn();pt=pt.buffer}Xe(pt)},x.memoryInitializerRequest.response?setTimeout(it,0):x.memoryInitializerRequest.addEventListener("load",it)):dn())),x.then=function(at){var pt;return Zi?at(x):(pt=x.onRuntimeInitialized,x.onRuntimeInitialized=function(){pt&&pt(),at(x)}),x},ce=function at(){Zi||hr(),Zi||(ce=at)},x.run=hr,x.preInit)for(typeof x.preInit=="function"&&(x.preInit=[x.preInit]);0<x.preInit.length;)x.preInit.pop()();return hr(),b}}();typeof exports=="object"&&typeof module=="object"?module.exports=I:typeof define=="function"&&define.amd?define([],function(){return I}):typeof exports=="object"&&(exports._em_module=I);var E=I()})(nl||(nl={}));window.Live2DCubismCore=nl;function y1(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){return e.reject(r)})})}function E1(t){var e=this;return new e(function(r,i){if(!(t&&typeof t.length<"u"))return i(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var o=Array.prototype.slice.call(t);if(o.length===0)return r([]);var s=o.length;function h(d,_){if(_&&(typeof _=="object"||typeof _=="function")){var y=_.then;if(typeof y=="function"){y.call(_,function(I){h(d,I)},function(I){o[d]={status:"rejected",reason:I},--s===0&&r(o)});return}}o[d]={status:"fulfilled",value:_},--s===0&&r(o)}for(var c=0;c<o.length;c++)h(c,o[c])})}function C_(t,e){this.name="AggregateError",this.errors=t,this.message=e||""}C_.prototype=Error.prototype;function T1(t){var e=this;return new e(function(r,i){if(!(t&&typeof t.length<"u"))return i(new TypeError("Promise.any accepts an array"));var o=Array.prototype.slice.call(t);if(o.length===0)return i();for(var s=[],h=0;h<o.length;h++)try{e.resolve(o[h]).then(r).catch(function(c){s.push(c),s.length===o.length&&i(new C_(s,"All promises were rejected"))})}catch(c){i(c)}})}var A1=setTimeout;function D_(t){return!!(t&&typeof t.length<"u")}function b1(){}function x1(t,e){return function(){t.apply(e,arguments)}}function wr(t){if(!(this instanceof wr))throw new TypeError("Promises must be constructed via new");if(typeof t!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],$_(t,this)}function L_(t,e){for(;t._state===3;)t=t._value;if(t._state===0){t._deferreds.push(e);return}t._handled=!0,wr._immediateFn(function(){var r=t._state===1?e.onFulfilled:e.onRejected;if(r===null){(t._state===1?ol:Ss)(e.promise,t._value);return}var i;try{i=r(t._value)}catch(o){Ss(e.promise,o);return}ol(e.promise,i)})}function ol(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&(typeof e=="object"||typeof e=="function")){var r=e.then;if(e instanceof wr){t._state=3,t._value=e,sl(t);return}else if(typeof r=="function"){$_(x1(r,e),t);return}}t._state=1,t._value=e,sl(t)}catch(i){Ss(t,i)}}function Ss(t,e){t._state=2,t._value=e,sl(t)}function sl(t){t._state===2&&t._deferreds.length===0&&wr._immediateFn(function(){t._handled||wr._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;e<r;e++)L_(t,t._deferreds[e]);t._deferreds=null}function S1(t,e,r){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.promise=r}function $_(t,e){var r=!1;try{t(function(i){r||(r=!0,ol(e,i))},function(i){r||(r=!0,Ss(e,i))})}catch(i){if(r)return;r=!0,Ss(e,i)}}wr.prototype.catch=function(t){return this.then(null,t)};wr.prototype.then=function(t,e){var r=new this.constructor(b1);return L_(this,new S1(t,e,r)),r};wr.prototype.finally=y1;wr.all=function(t){return new wr(function(e,r){if(!D_(t))return r(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(t);if(i.length===0)return e([]);var o=i.length;function s(c,d){try{if(d&&(typeof d=="object"||typeof d=="function")){var _=d.then;if(typeof _=="function"){_.call(d,function(y){s(c,y)},r);return}}i[c]=d,--o===0&&e(i)}catch(y){r(y)}}for(var h=0;h<i.length;h++)s(h,i[h])})};wr.any=T1;wr.allSettled=E1;wr.resolve=function(t){return t&&typeof t=="object"&&t.constructor===wr?t:new wr(function(e){e(t)})};wr.reject=function(t){return new wr(function(e,r){r(t)})};wr.race=function(t){return new wr(function(e,r){if(!D_(t))return r(new TypeError("Promise.race accepts an array"));for(var i=0,o=t.length;i<o;i++)wr.resolve(t[i]).then(e,r)})};wr._immediateFn=typeof setImmediate=="function"&&function(t){setImmediate(t)}||function(t){A1(t,0)};wr._unhandledRejectionFn=function(t){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var U0=Object.getOwnPropertySymbols,R1=Object.prototype.hasOwnProperty,P1=Object.prototype.propertyIsEnumerable;function I1(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function O1(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var i=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(i.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(s){o[s]=s}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var w1=O1()?Object.assign:function(t,e){for(var r,i=I1(t),o,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var h in r)R1.call(r,h)&&(i[h]=r[h]);if(U0){o=U0(r);for(var c=0;c<o.length;c++)P1.call(r,o[c])&&(i[o[c]]=r[o[c]])}}return i};/*!
 * @pixi/polyfill - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */typeof globalThis>"u"&&(typeof self<"u"?self.globalThis=self:typeof global<"u"&&(global.globalThis=global));globalThis.Promise||(globalThis.Promise=wr);Object.assign||(Object.assign=w1);var M1=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()});if(!(globalThis.performance&&globalThis.performance.now)){var C1=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-C1}}var vh=Date.now(),B0=["ms","moz","webkit","o"];for(var yh=0;yh<B0.length&&!globalThis.requestAnimationFrame;++yh){var Eh=B0[yh];globalThis.requestAnimationFrame=globalThis[Eh+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[Eh+"CancelAnimationFrame"]||globalThis[Eh+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(t){if(typeof t!="function")throw new TypeError(t+"is not a function");var e=Date.now(),r=M1+vh-e;return r<0&&(r=0),vh=e,globalThis.self.setTimeout(function(){vh=Date.now(),t(performance.now())},r)});globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(t){return clearTimeout(t)});Math.sign||(Math.sign=function(t){return t=Number(t),t===0||isNaN(t)?t:t>0?1:-1});Number.isInteger||(Number.isInteger=function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t});globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array);globalThis.Float32Array||(globalThis.Float32Array=Array);globalThis.Uint32Array||(globalThis.Uint32Array=Array);globalThis.Uint16Array||(globalThis.Uint16Array=Array);globalThis.Uint8Array||(globalThis.Uint8Array=Array);globalThis.Int32Array||(globalThis.Int32Array=Array);/*!
 * @pixi/settings - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var G0;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(G0||(G0={}));var k0;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(k0||(k0={}));var X0;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(X0||(X0={}));var H0;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(H0||(H0={}));var j0;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(j0||(j0={}));var Y0;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Y0||(Y0={}));var V0;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(V0||(V0={}));var W0;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(W0||(W0={}));var z0;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(z0||(z0={}));var al;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(al||(al={}));var hl;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(hl||(hl={}));var ll;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(ll||(ll={}));var q0;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(q0||(q0={}));var Z0;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(Z0||(Z0={}));var ul;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(ul||(ul={}));var ys;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(ys||(ys={}));var Q0;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(Q0||(Q0={}));var J0;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(J0||(J0={}));var cl;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(cl||(cl={}));var K0;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(K0||(K0={}));var N_={createCanvas:function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return(t=document.baseURI)!==null&&t!==void 0?t:window.location.href},fetch:function(t,e){return fetch(t,e)}},Th=/iPhone/i,tc=/iPod/i,ec=/iPad/i,rc=/\biOS-universal(?:.+)Mac\b/i,Ah=/\bAndroid(?:.+)Mobile\b/i,ic=/Android/i,po=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,oa=/Silk/i,tn=/Windows Phone/i,nc=/\bWindows(?:.+)ARM\b/i,oc=/BlackBerry/i,sc=/BB10/i,ac=/Opera Mini/i,hc=/\b(CriOS|Chrome)(?:.+)Mobile/i,lc=/Mobile(?:.+)Firefox\b/i,uc=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function D1(t){return function(e){return e.test(t)}}function L1(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,i=r.split("[FBAN");typeof i[1]<"u"&&(r=i[0]),i=r.split("Twitter"),typeof i[1]<"u"&&(r=i[0]);var o=D1(r),s={apple:{phone:o(Th)&&!o(tn),ipod:o(tc),tablet:!o(Th)&&(o(ec)||uc(e))&&!o(tn),universal:o(rc),device:(o(Th)||o(tc)||o(ec)||o(rc)||uc(e))&&!o(tn)},amazon:{phone:o(po),tablet:!o(po)&&o(oa),device:o(po)||o(oa)},android:{phone:!o(tn)&&o(po)||!o(tn)&&o(Ah),tablet:!o(tn)&&!o(po)&&!o(Ah)&&(o(oa)||o(ic)),device:!o(tn)&&(o(po)||o(oa)||o(Ah)||o(ic))||o(/\bokhttp\b/i)},windows:{phone:o(tn),tablet:o(nc),device:o(tn)||o(nc)},other:{blackberry:o(oc),blackberry10:o(sc),opera:o(ac),firefox:o(lc),chrome:o(hc),device:o(oc)||o(sc)||o(ac)||o(lc)||o(hc)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}var vi=L1(globalThis.navigator);function $1(){return!vi.apple.device}function N1(t){var e=!0;if(vi.tablet||vi.phone){if(vi.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var i=parseInt(r[1],10);i<11&&(e=!1)}}if(vi.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var i=parseInt(r[1],10);i<7&&(e=!1)}}}return e?t:4}var re={ADAPTER:N_,MIPMAP_TEXTURES:ll.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:cl.NONE,SPRITE_MAX_TEXTURES:N1(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:ul.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:hl.CLAMP,SCALE_MODE:al.LINEAR,PRECISION_VERTEX:ys.HIGH,PRECISION_FRAGMENT:vi.apple.device?ys.HIGH:ys.MEDIUM,CAN_UPLOAD_SAME_BUFFER:$1(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},Ci={},F1={get exports(){return Ci},set exports(t){Ci=t}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function o(d,_,y){this.fn=d,this.context=_,this.once=y||!1}function s(d,_,y,I,E){if(typeof y!="function")throw new TypeError("The listener must be a function");var S=new o(y,I||d,E),b=r?r+_:_;return d._events[b]?d._events[b].fn?d._events[b]=[d._events[b],S]:d._events[b].push(S):(d._events[b]=S,d._eventsCount++),d}function h(d,_){--d._eventsCount===0?d._events=new i:delete d._events[_]}function c(){this._events=new i,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],_,y;if(this._eventsCount===0)return d;for(y in _=this._events)e.call(_,y)&&d.push(r?y.slice(1):y);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(_)):d},c.prototype.listeners=function(d){var _=r?r+d:d,y=this._events[_];if(!y)return[];if(y.fn)return[y.fn];for(var I=0,E=y.length,S=new Array(E);I<E;I++)S[I]=y[I].fn;return S},c.prototype.listenerCount=function(d){var _=r?r+d:d,y=this._events[_];return y?y.fn?1:y.length:0},c.prototype.emit=function(d,_,y,I,E,S){var b=r?r+d:d;if(!this._events[b])return!1;var x=this._events[b],$=arguments.length,j,Y;if(x.fn){switch(x.once&&this.removeListener(d,x.fn,void 0,!0),$){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,_),!0;case 3:return x.fn.call(x.context,_,y),!0;case 4:return x.fn.call(x.context,_,y,I),!0;case 5:return x.fn.call(x.context,_,y,I,E),!0;case 6:return x.fn.call(x.context,_,y,I,E,S),!0}for(Y=1,j=new Array($-1);Y<$;Y++)j[Y-1]=arguments[Y];x.fn.apply(x.context,j)}else{var Q=x.length,it;for(Y=0;Y<Q;Y++)switch(x[Y].once&&this.removeListener(d,x[Y].fn,void 0,!0),$){case 1:x[Y].fn.call(x[Y].context);break;case 2:x[Y].fn.call(x[Y].context,_);break;case 3:x[Y].fn.call(x[Y].context,_,y);break;case 4:x[Y].fn.call(x[Y].context,_,y,I);break;default:if(!j)for(it=1,j=new Array($-1);it<$;it++)j[it-1]=arguments[it];x[Y].fn.apply(x[Y].context,j)}}return!0},c.prototype.on=function(d,_,y){return s(this,d,_,y,!1)},c.prototype.once=function(d,_,y){return s(this,d,_,y,!0)},c.prototype.removeListener=function(d,_,y,I){var E=r?r+d:d;if(!this._events[E])return this;if(!_)return h(this,E),this;var S=this._events[E];if(S.fn)S.fn===_&&(!I||S.once)&&(!y||S.context===y)&&h(this,E);else{for(var b=0,x=[],$=S.length;b<$;b++)(S[b].fn!==_||I&&!S[b].once||y&&S[b].context!==y)&&x.push(S[b]);x.length?this._events[E]=x.length===1?x[0]:x:h(this,E)}return this},c.prototype.removeAllListeners=function(d){var _;return d?(_=r?r+d:d,this._events[_]&&h(this,_)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c})(F1);var wo={},U1={get exports(){return wo},set exports(t){wo=t}};U1.exports=qa;wo.default=qa;function qa(t,e,r){r=r||2;var i=e&&e.length,o=i?e[0]*r:t.length,s=F_(t,0,o,r,!0),h=[];if(!s||s.next===s.prev)return h;var c,d,_,y,I,E,S;if(i&&(s=H1(t,e,s,r)),t.length>80*r){c=_=t[0],d=y=t[1];for(var b=r;b<o;b+=r)I=t[b],E=t[b+1],I<c&&(c=I),E<d&&(d=E),I>_&&(_=I),E>y&&(y=E);S=Math.max(_-c,y-d),S=S!==0?32767/S:0}return Rs(s,h,r,c,d,S,0),h}function F_(t,e,r,i,o){var s,h;if(o===_l(t,e,r,i)>0)for(s=e;s<r;s+=i)h=cc(s,t[s],t[s+1],h);else for(s=r-i;s>=e;s-=i)h=cc(s,t[s],t[s+1],h);return h&&Za(h,h.next)&&(Is(h),h=h.next),h}function ro(t,e){if(!t)return t;e||(e=t);var r=t,i;do if(i=!1,!r.steiner&&(Za(r,r.next)||Ir(r.prev,r,r.next)===0)){if(Is(r),r=e=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==e);return e}function Rs(t,e,r,i,o,s,h){if(t){!h&&s&&z1(t,i,o,s);for(var c=t,d,_;t.prev!==t.next;){if(d=t.prev,_=t.next,s?G1(t,i,o,s):B1(t)){e.push(d.i/r|0),e.push(t.i/r|0),e.push(_.i/r|0),Is(t),t=_.next,c=_.next;continue}if(t=_,t===c){h?h===1?(t=k1(ro(t),e,r),Rs(t,e,r,i,o,s,2)):h===2&&X1(t,e,r,i,o,s):Rs(ro(t),e,r,i,o,s,1);break}}}}function B1(t){var e=t.prev,r=t,i=t.next;if(Ir(e,r,i)>=0)return!1;for(var o=e.x,s=r.x,h=i.x,c=e.y,d=r.y,_=i.y,y=o<s?o<h?o:h:s<h?s:h,I=c<d?c<_?c:_:d<_?d:_,E=o>s?o>h?o:h:s>h?s:h,S=c>d?c>_?c:_:d>_?d:_,b=i.next;b!==e;){if(b.x>=y&&b.x<=E&&b.y>=I&&b.y<=S&&xo(o,c,s,d,h,_,b.x,b.y)&&Ir(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function G1(t,e,r,i){var o=t.prev,s=t,h=t.next;if(Ir(o,s,h)>=0)return!1;for(var c=o.x,d=s.x,_=h.x,y=o.y,I=s.y,E=h.y,S=c<d?c<_?c:_:d<_?d:_,b=y<I?y<E?y:E:I<E?I:E,x=c>d?c>_?c:_:d>_?d:_,$=y>I?y>E?y:E:I>E?I:E,j=dl(S,b,e,r,i),Y=dl(x,$,e,r,i),Q=t.prevZ,it=t.nextZ;Q&&Q.z>=j&&it&&it.z<=Y;){if(Q.x>=S&&Q.x<=x&&Q.y>=b&&Q.y<=$&&Q!==o&&Q!==h&&xo(c,y,d,I,_,E,Q.x,Q.y)&&Ir(Q.prev,Q,Q.next)>=0||(Q=Q.prevZ,it.x>=S&&it.x<=x&&it.y>=b&&it.y<=$&&it!==o&&it!==h&&xo(c,y,d,I,_,E,it.x,it.y)&&Ir(it.prev,it,it.next)>=0))return!1;it=it.nextZ}for(;Q&&Q.z>=j;){if(Q.x>=S&&Q.x<=x&&Q.y>=b&&Q.y<=$&&Q!==o&&Q!==h&&xo(c,y,d,I,_,E,Q.x,Q.y)&&Ir(Q.prev,Q,Q.next)>=0)return!1;Q=Q.prevZ}for(;it&&it.z<=Y;){if(it.x>=S&&it.x<=x&&it.y>=b&&it.y<=$&&it!==o&&it!==h&&xo(c,y,d,I,_,E,it.x,it.y)&&Ir(it.prev,it,it.next)>=0)return!1;it=it.nextZ}return!0}function k1(t,e,r){var i=t;do{var o=i.prev,s=i.next.next;!Za(o,s)&&U_(o,i,i.next,s)&&Ps(o,s)&&Ps(s,o)&&(e.push(o.i/r|0),e.push(i.i/r|0),e.push(s.i/r|0),Is(i),Is(i.next),i=t=s),i=i.next}while(i!==t);return ro(i)}function X1(t,e,r,i,o,s){var h=t;do{for(var c=h.next.next;c!==h.prev;){if(h.i!==c.i&&Q1(h,c)){var d=B_(h,c);h=ro(h,h.next),d=ro(d,d.next),Rs(h,e,r,i,o,s,0),Rs(d,e,r,i,o,s,0);return}c=c.next}h=h.next}while(h!==t)}function H1(t,e,r,i){var o=[],s,h,c,d,_;for(s=0,h=e.length;s<h;s++)c=e[s]*i,d=s<h-1?e[s+1]*i:t.length,_=F_(t,c,d,i,!1),_===_.next&&(_.steiner=!0),o.push(Z1(_));for(o.sort(j1),s=0;s<o.length;s++)r=Y1(o[s],r);return r}function j1(t,e){return t.x-e.x}function Y1(t,e){var r=V1(t,e);if(!r)return e;var i=B_(r,t);return ro(i,i.next),ro(r,r.next)}function V1(t,e){var r=e,i=t.x,o=t.y,s=-1/0,h;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var c=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(c<=i&&c>s&&(s=c,h=r.x<r.next.x?r:r.next,c===i))return h}r=r.next}while(r!==e);if(!h)return null;var d=h,_=h.x,y=h.y,I=1/0,E;r=h;do i>=r.x&&r.x>=_&&i!==r.x&&xo(o<y?i:s,o,_,y,o<y?s:i,o,r.x,r.y)&&(E=Math.abs(o-r.y)/(i-r.x),Ps(r,t)&&(E<I||E===I&&(r.x>h.x||r.x===h.x&&W1(h,r)))&&(h=r,I=E)),r=r.next;while(r!==d);return h}function W1(t,e){return Ir(t.prev,t,e.prev)<0&&Ir(e.next,t,t.next)<0}function z1(t,e,r,i){var o=t;do o.z===0&&(o.z=dl(o.x,o.y,e,r,i)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,q1(o)}function q1(t){var e,r,i,o,s,h,c,d,_=1;do{for(r=t,t=null,s=null,h=0;r;){for(h++,i=r,c=0,e=0;e<_&&(c++,i=i.nextZ,!!i);e++);for(d=_;c>0||d>0&&i;)c!==0&&(d===0||!i||r.z<=i.z)?(o=r,r=r.nextZ,c--):(o=i,i=i.nextZ,d--),s?s.nextZ=o:t=o,o.prevZ=s,s=o;r=i}s.nextZ=null,_*=2}while(h>1);return t}function dl(t,e,r,i,o){return t=(t-r)*o|0,e=(e-i)*o|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Z1(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function xo(t,e,r,i,o,s,h,c){return(o-h)*(e-c)>=(t-h)*(s-c)&&(t-h)*(i-c)>=(r-h)*(e-c)&&(r-h)*(s-c)>=(o-h)*(i-c)}function Q1(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!J1(t,e)&&(Ps(t,e)&&Ps(e,t)&&K1(t,e)&&(Ir(t.prev,t,e.prev)||Ir(t,e.prev,e))||Za(t,e)&&Ir(t.prev,t,t.next)>0&&Ir(e.prev,e,e.next)>0)}function Ir(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Za(t,e){return t.x===e.x&&t.y===e.y}function U_(t,e,r,i){var o=aa(Ir(t,e,r)),s=aa(Ir(t,e,i)),h=aa(Ir(r,i,t)),c=aa(Ir(r,i,e));return!!(o!==s&&h!==c||o===0&&sa(t,r,e)||s===0&&sa(t,i,e)||h===0&&sa(r,t,i)||c===0&&sa(r,e,i))}function sa(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function aa(t){return t>0?1:t<0?-1:0}function J1(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&U_(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function Ps(t,e){return Ir(t.prev,t,t.next)<0?Ir(t,e,t.next)>=0&&Ir(t,t.prev,e)>=0:Ir(t,e,t.prev)<0||Ir(t,t.next,e)<0}function K1(t,e){var r=t,i=!1,o=(t.x+e.x)/2,s=(t.y+e.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&o<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==t);return i}function B_(t,e){var r=new fl(t.i,t.x,t.y),i=new fl(e.i,e.x,e.y),o=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=o,o.prev=r,i.next=r,r.prev=i,s.next=i,i.prev=s,i}function cc(t,e,r,i){var o=new fl(t,e,r);return i?(o.next=i.next,o.prev=i,i.next.prev=o,i.next=o):(o.prev=o,o.next=o),o}function Is(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function fl(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}qa.deviation=function(t,e,r,i){var o=e&&e.length,s=o?e[0]*r:t.length,h=Math.abs(_l(t,0,s,r));if(o)for(var c=0,d=e.length;c<d;c++){var _=e[c]*r,y=c<d-1?e[c+1]*r:t.length;h-=Math.abs(_l(t,_,y,r))}var I=0;for(c=0;c<i.length;c+=3){var E=i[c]*r,S=i[c+1]*r,b=i[c+2]*r;I+=Math.abs((t[E]-t[b])*(t[S+1]-t[E+1])-(t[E]-t[S])*(t[b+1]-t[E+1]))}return h===0&&I===0?0:Math.abs((I-h)/h)};function _l(t,e,r,i){for(var o=0,s=e,h=r-i;s<r;s+=i)o+=(t[h]-t[s])*(t[s+1]+t[h+1]),h=s;return o}qa.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,o=0;o<t.length;o++){for(var s=0;s<t[o].length;s++)for(var h=0;h<e;h++)r.vertices.push(t[o][s][h]);o>0&&(i+=t[o-1].length,r.holes.push(i))}return r};var Fa={},tm={get exports(){return Fa},set exports(t){Fa=t}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(t,e){(function(r){var i=e&&!e.nodeType&&e,o=t&&!t.nodeType&&t,s=typeof gh=="object"&&gh;(s.global===s||s.window===s||s.self===s)&&(r=s);var h,c=2147483647,d=36,_=1,y=26,I=38,E=700,S=72,b=128,x="-",$=/^xn--/,j=/[^\x20-\x7E]/,Y=/[\x2E\u3002\uFF0E\uFF61]/g,Q={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},it=d-_,J=Math.floor,K=String.fromCharCode,Tt;function yt(st){throw RangeError(Q[st])}function ft(st,Et){for(var _t=st.length,le=[];_t--;)le[_t]=Et(st[_t]);return le}function St(st,Et){var _t=st.split("@"),le="";_t.length>1&&(le=_t[0]+"@",st=_t[1]),st=st.replace(Y,".");var Ut=st.split("."),se=ft(Ut,Et).join(".");return le+se}function wt(st){for(var Et=[],_t=0,le=st.length,Ut,se;_t<le;)Ut=st.charCodeAt(_t++),Ut>=55296&&Ut<=56319&&_t<le?(se=st.charCodeAt(_t++),(se&64512)==56320?Et.push(((Ut&1023)<<10)+(se&1023)+65536):(Et.push(Ut),_t--)):Et.push(Ut);return Et}function Gt(st){return ft(st,function(Et){var _t="";return Et>65535&&(Et-=65536,_t+=K(Et>>>10&1023|55296),Et=56320|Et&1023),_t+=K(Et),_t}).join("")}function oe(st){return st-48<10?st-22:st-65<26?st-65:st-97<26?st-97:d}function ae(st,Et){return st+22+75*(st<26)-((Et!=0)<<5)}function Yt(st,Et,_t){var le=0;for(st=_t?J(st/E):st>>1,st+=J(st/Et);st>it*y>>1;le+=d)st=J(st/it);return J(le+(it+1)*st/(st+I))}function Ht(st){var Et=[],_t=st.length,le,Ut=0,se=b,Re=S,qt,Ge,_e,ce,ue,Nt,ie,er,Pe;for(qt=st.lastIndexOf(x),qt<0&&(qt=0),Ge=0;Ge<qt;++Ge)st.charCodeAt(Ge)>=128&&yt("not-basic"),Et.push(st.charCodeAt(Ge));for(_e=qt>0?qt+1:0;_e<_t;){for(ce=Ut,ue=1,Nt=d;_e>=_t&&yt("invalid-input"),ie=oe(st.charCodeAt(_e++)),(ie>=d||ie>J((c-Ut)/ue))&&yt("overflow"),Ut+=ie*ue,er=Nt<=Re?_:Nt>=Re+y?y:Nt-Re,!(ie<er);Nt+=d)Pe=d-er,ue>J(c/Pe)&&yt("overflow"),ue*=Pe;le=Et.length+1,Re=Yt(Ut-ce,le,ce==0),J(Ut/le)>c-se&&yt("overflow"),se+=J(Ut/le),Ut%=le,Et.splice(Ut++,0,se)}return Gt(Et)}function he(st){var Et,_t,le,Ut,se,Re,qt,Ge,_e,ce,ue,Nt=[],ie,er,Pe,Ce;for(st=wt(st),ie=st.length,Et=b,_t=0,se=S,Re=0;Re<ie;++Re)ue=st[Re],ue<128&&Nt.push(K(ue));for(le=Ut=Nt.length,Ut&&Nt.push(x);le<ie;){for(qt=c,Re=0;Re<ie;++Re)ue=st[Re],ue>=Et&&ue<qt&&(qt=ue);for(er=le+1,qt-Et>J((c-_t)/er)&&yt("overflow"),_t+=(qt-Et)*er,Et=qt,Re=0;Re<ie;++Re)if(ue=st[Re],ue<Et&&++_t>c&&yt("overflow"),ue==Et){for(Ge=_t,_e=d;ce=_e<=se?_:_e>=se+y?y:_e-se,!(Ge<ce);_e+=d)Ce=Ge-ce,Pe=d-ce,Nt.push(K(ae(ce+Ce%Pe,0))),Ge=J(Ce/Pe);Nt.push(K(ae(Ge,0))),se=Yt(_t,er,le==Ut),_t=0,++le}++_t,++Et}return Nt.join("")}function Kt(st){return St(st,function(Et){return $.test(Et)?Ht(Et.slice(4).toLowerCase()):Et})}function ve(st){return St(st,function(Et){return j.test(Et)?"xn--"+he(Et):Et})}if(h={version:"1.3.2",ucs2:{decode:wt,encode:Gt},decode:Ht,encode:he,toASCII:ve,toUnicode:Kt},i&&o)if(t.exports==i)o.exports=h;else for(Tt in h)h.hasOwnProperty(Tt)&&(i[Tt]=h[Tt]);else r.punycode=h})(gh)})(tm,Fa);var em={isString:function(t){return typeof t=="string"},isObject:function(t){return typeof t=="object"&&t!==null},isNull:function(t){return t===null},isNullOrUndefined:function(t){return t==null}},Os={};function rm(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var im=function(t,e,r,i){e=e||"&",r=r||"=";var o={};if(typeof t!="string"||t.length===0)return o;var s=/\+/g;t=t.split(e);var h=1e3;i&&typeof i.maxKeys=="number"&&(h=i.maxKeys);var c=t.length;h>0&&c>h&&(c=h);for(var d=0;d<c;++d){var _=t[d].replace(s,"%20"),y=_.indexOf(r),I,E,S,b;y>=0?(I=_.substr(0,y),E=_.substr(y+1)):(I=_,E=""),S=decodeURIComponent(I),b=decodeURIComponent(E),rm(o,S)?Array.isArray(o[S])?o[S].push(b):o[S]=[o[S],b]:o[S]=b}return o},ts=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},nm=function(t,e,r,i){return e=e||"&",r=r||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(o){var s=encodeURIComponent(ts(o))+r;return Array.isArray(t[o])?t[o].map(function(h){return s+encodeURIComponent(ts(h))}).join(e):s+encodeURIComponent(ts(t[o]))}).join(e):i?encodeURIComponent(ts(i))+r+encodeURIComponent(ts(t)):""};Os.decode=Os.parse=im;Os.encode=Os.stringify=nm;var om=Fa,Bi=em,sm=Qa,am=vm,hm=gm;function wi(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var lm=/^([a-z0-9.+-]+:)/i,um=/:[0-9]*$/,cm=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,dm=["<",">",'"',"`"," ","\r",`
`,"	"],fm=["{","}","|","\\","^","`"].concat(dm),pl=["'"].concat(fm),dc=["%","/","?",";","#"].concat(pl),fc=["/","?","#"],_m=255,_c=/^[+a-z0-9A-Z_-]{0,63}$/,pm=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,mm={javascript:!0,"javascript:":!0},ml={javascript:!0,"javascript:":!0},Po={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},gl=Os;function Qa(t,e,r){if(t&&Bi.isObject(t)&&t instanceof wi)return t;var i=new wi;return i.parse(t,e,r),i}wi.prototype.parse=function(t,e,r){if(!Bi.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),o=i!==-1&&i<t.indexOf("#")?"?":"#",s=t.split(o),h=/\\/g;s[0]=s[0].replace(h,"/"),t=s.join(o);var c=t;if(c=c.trim(),!r&&t.split("#").length===1){var d=cm.exec(c);if(d)return this.path=c,this.href=c,this.pathname=d[1],d[2]?(this.search=d[2],e?this.query=gl.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var _=lm.exec(c);if(_){_=_[0];var y=_.toLowerCase();this.protocol=y,c=c.substr(_.length)}if(r||_||c.match(/^\/\/[^@\/]+@[^@\/]+/)){var I=c.substr(0,2)==="//";I&&!(_&&ml[_])&&(c=c.substr(2),this.slashes=!0)}if(!ml[_]&&(I||_&&!Po[_])){for(var E=-1,S=0;S<fc.length;S++){var b=c.indexOf(fc[S]);b!==-1&&(E===-1||b<E)&&(E=b)}var x,$;E===-1?$=c.lastIndexOf("@"):$=c.lastIndexOf("@",E),$!==-1&&(x=c.slice(0,$),c=c.slice($+1),this.auth=decodeURIComponent(x)),E=-1;for(var S=0;S<dc.length;S++){var b=c.indexOf(dc[S]);b!==-1&&(E===-1||b<E)&&(E=b)}E===-1&&(E=c.length),this.host=c.slice(0,E),c=c.slice(E),this.parseHost(),this.hostname=this.hostname||"";var j=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!j)for(var Y=this.hostname.split(/\./),S=0,Q=Y.length;S<Q;S++){var it=Y[S];if(it&&!it.match(_c)){for(var J="",K=0,Tt=it.length;K<Tt;K++)it.charCodeAt(K)>127?J+="x":J+=it[K];if(!J.match(_c)){var yt=Y.slice(0,S),ft=Y.slice(S+1),St=it.match(pm);St&&(yt.push(St[1]),ft.unshift(St[2])),ft.length&&(c="/"+ft.join(".")+c),this.hostname=yt.join(".");break}}}this.hostname.length>_m?this.hostname="":this.hostname=this.hostname.toLowerCase(),j||(this.hostname=om.toASCII(this.hostname));var wt=this.port?":"+this.port:"",Gt=this.hostname||"";this.host=Gt+wt,this.href+=this.host,j&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),c[0]!=="/"&&(c="/"+c))}if(!mm[y])for(var S=0,Q=pl.length;S<Q;S++){var oe=pl[S];if(c.indexOf(oe)!==-1){var ae=encodeURIComponent(oe);ae===oe&&(ae=escape(oe)),c=c.split(oe).join(ae)}}var Yt=c.indexOf("#");Yt!==-1&&(this.hash=c.substr(Yt),c=c.slice(0,Yt));var Ht=c.indexOf("?");if(Ht!==-1?(this.search=c.substr(Ht),this.query=c.substr(Ht+1),e&&(this.query=gl.parse(this.query)),c=c.slice(0,Ht)):e&&(this.search="",this.query={}),c&&(this.pathname=c),Po[y]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var wt=this.pathname||"",he=this.search||"";this.path=wt+he}return this.href=this.format(),this};function gm(t){return Bi.isString(t)&&(t=Qa(t)),t instanceof wi?t.format():wi.prototype.format.call(t)}wi.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",i=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&Bi.isObject(this.query)&&Object.keys(this.query).length&&(s=gl.stringify(this.query));var h=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Po[e])&&o!==!1?(o="//"+(o||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):o||(o=""),i&&i.charAt(0)!=="#"&&(i="#"+i),h&&h.charAt(0)!=="?"&&(h="?"+h),r=r.replace(/[?#]/g,function(c){return encodeURIComponent(c)}),h=h.replace("#","%23"),e+o+r+h+i};function vm(t,e){return Qa(t,!1,!0).resolve(e)}wi.prototype.resolve=function(t){return this.resolveObject(Qa(t,!1,!0)).format()};wi.prototype.resolveObject=function(t){if(Bi.isString(t)){var e=new wi;e.parse(t,!1,!0),t=e}for(var r=new wi,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];r[s]=this[s]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),c=0;c<h.length;c++){var d=h[c];d!=="protocol"&&(r[d]=t[d])}return Po[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!Po[t.protocol]){for(var _=Object.keys(t),y=0;y<_.length;y++){var I=_[y];r[I]=t[I]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!ml[t.protocol]){for(var Q=(t.pathname||"").split("/");Q.length&&!(t.host=Q.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),Q[0]!==""&&Q.unshift(""),Q.length<2&&Q.unshift(""),r.pathname=Q.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var E=r.pathname||"",S=r.search||"";r.path=E+S}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var b=r.pathname&&r.pathname.charAt(0)==="/",x=t.host||t.pathname&&t.pathname.charAt(0)==="/",$=x||b||r.host&&t.pathname,j=$,Y=r.pathname&&r.pathname.split("/")||[],Q=t.pathname&&t.pathname.split("/")||[],it=r.protocol&&!Po[r.protocol];if(it&&(r.hostname="",r.port=null,r.host&&(Y[0]===""?Y[0]=r.host:Y.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(Q[0]===""?Q[0]=t.host:Q.unshift(t.host)),t.host=null),$=$&&(Q[0]===""||Y[0]==="")),x)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,Y=Q;else if(Q.length)Y||(Y=[]),Y.pop(),Y=Y.concat(Q),r.search=t.search,r.query=t.query;else if(!Bi.isNullOrUndefined(t.search)){if(it){r.hostname=r.host=Y.shift();var J=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;J&&(r.auth=J.shift(),r.host=r.hostname=J.shift())}return r.search=t.search,r.query=t.query,(!Bi.isNull(r.pathname)||!Bi.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!Y.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var K=Y.slice(-1)[0],Tt=(r.host||t.host||Y.length>1)&&(K==="."||K==="..")||K==="",yt=0,ft=Y.length;ft>=0;ft--)K=Y[ft],K==="."?Y.splice(ft,1):K===".."?(Y.splice(ft,1),yt++):yt&&(Y.splice(ft,1),yt--);if(!$&&!j)for(;yt--;yt)Y.unshift("..");$&&Y[0]!==""&&(!Y[0]||Y[0].charAt(0)!=="/")&&Y.unshift(""),Tt&&Y.join("/").substr(-1)!=="/"&&Y.push("");var St=Y[0]===""||Y[0]&&Y[0].charAt(0)==="/";if(it){r.hostname=r.host=St?"":Y.length?Y.shift():"";var J=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;J&&(r.auth=J.shift(),r.host=r.hostname=J.shift())}return $=$||r.host&&Y.length,$&&!St&&Y.unshift(""),Y.length?r.pathname=Y.join("/"):(r.pathname=null,r.path=null),(!Bi.isNull(r.pathname)||!Bi.isNull(r.search))&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r};wi.prototype.parseHost=function(){var t=this.host,e=um.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var ji;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(ji||(ji={}));var Mo;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(Mo||(Mo={}));var ws;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(ws||(ws={}));var xe;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(xe||(xe={}));var yi;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(yi||(yi={}));var jt;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(jt||(jt={}));var En;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(En||(En={}));var Te;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(Te||(Te={}));var Ms;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(Ms||(Ms={}));var ki;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(ki||(ki={}));var Hi;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Hi||(Hi={}));var Yi;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Yi||(Yi={}));var Ti;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Ti||(Ti={}));var nn;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(nn||(nn={}));var Ua;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Ua||(Ua={}));var Oi;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Oi||(Oi={}));var Gr;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(Gr||(Gr={}));var vl;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(vl||(vl={}));var Fr;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(Fr||(Fr={}));var Mi;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Mi||(Mi={}));/*!
 * @pixi/utils - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Xi={parse:sm,format:hm,resolve:am};function Si(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function ym(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Em(t,e,r){return t.replace(new RegExp(ym(e),"g"),r)}function Tm(t,e){for(var r="",i=0,o=-1,s=0,h,c=0;c<=t.length;++c){if(c<t.length)h=t.charCodeAt(c);else{if(h===47)break;h=47}if(h===47){if(!(o===c-1||s===1))if(o!==c-1&&s===2){if(r.length<2||i!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){var d=r.lastIndexOf("/");if(d!==r.length-1){d===-1?(r="",i=0):(r=r.slice(0,d),i=r.length-1-r.lastIndexOf("/")),o=c,s=0;continue}}else if(r.length===2||r.length===1){r="",i=0,o=c,s=0;continue}}e&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+t.slice(o+1,c):r=t.slice(o+1,c),i=c-o-1;o=c,s=0}else h===46&&s!==-1?++s:s=-1}return r}var G_={toPosix:function(t){return Em(t,"\\","/")},isUrl:function(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:function(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},hasProtocol:function(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol:function(t){Si(t),t=this.toPosix(t);var e="",r=/^file:\/\/\//.exec(t),i=/^[^/:]+:\/\//.exec(t),o=/^[^/:]+:\//.exec(t);if(r||i||o){var s=(r==null?void 0:r[0])||(i==null?void 0:i[0])||(o==null?void 0:o[0]);e=s,t=t.slice(s.length)}return e},toAbsolute:function(t,e,r){if(this.isDataUrl(t))return t;var i=this.toPosix(e??re.ADAPTER.getBaseUrl()),o=this.toPosix(r??this.rootname(i));if(Si(t),t=this.toPosix(t),t.startsWith("/"))return G_.join(o,t.slice(1));var s=this.isAbsolute(t)?t:this.join(i,t);return s},normalize:function(t){if(t=this.toPosix(t),Si(t),t.length===0)return".";var e="",r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));var i=t.endsWith("/");return t=Tm(t,!1),t.length>0&&i&&(t+="/"),r?"/"+t:e+t},isAbsolute:function(t){return Si(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join:function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(e.length===0)return".";for(var i,o=0;o<e.length;++o){var s=e[o];Si(s),s.length>0&&(i===void 0?i=s:i+="/"+s)}return i===void 0?".":this.normalize(i)},dirname:function(t){if(Si(t),t.length===0)return".";t=this.toPosix(t);var e=t.charCodeAt(0),r=e===47,i=-1,o=!0,s=this.getProtocol(t),h=t;t=t.slice(s.length);for(var c=t.length-1;c>=1;--c)if(e=t.charCodeAt(c),e===47){if(!o){i=c;break}}else o=!1;return i===-1?r?"/":this.isUrl(h)?s+t:s:r&&i===1?"//":s+t.slice(0,i)},rootname:function(t){Si(t),t=this.toPosix(t);var e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){var r=t.indexOf("/",e.length);r!==-1?e=t.slice(0,r):e=t,e.endsWith("/")||(e+="/")}return e},basename:function(t,e){Si(t),e&&Si(e),t=this.toPosix(t);var r=0,i=-1,o=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var h=e.length-1,c=-1;for(s=t.length-1;s>=0;--s){var d=t.charCodeAt(s);if(d===47){if(!o){r=s+1;break}}else c===-1&&(o=!1,c=s+1),h>=0&&(d===e.charCodeAt(h)?--h===-1&&(i=s):(h=-1,i=c))}return r===i?i=c:i===-1&&(i=t.length),t.slice(r,i)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!o){r=s+1;break}}else i===-1&&(o=!1,i=s+1);return i===-1?"":t.slice(r,i)},extname:function(t){Si(t),t=this.toPosix(t);for(var e=-1,r=0,i=-1,o=!0,s=0,h=t.length-1;h>=0;--h){var c=t.charCodeAt(h);if(c===47){if(!o){r=h+1;break}continue}i===-1&&(o=!1,i=h+1),c===46?e===-1?e=h:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||i===-1||s===0||s===1&&e===i-1&&e===r+1?"":t.slice(e,i)},parse:function(t){Si(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=this.toPosix(t);var r=t.charCodeAt(0),i=this.isAbsolute(t),o;e.root=this.rootname(t),i||this.hasProtocol(t)?o=1:o=0;for(var s=-1,h=0,c=-1,d=!0,_=t.length-1,y=0;_>=o;--_){if(r=t.charCodeAt(_),r===47){if(!d){h=_+1;break}continue}c===-1&&(d=!1,c=_+1),r===46?s===-1?s=_:y!==1&&(y=1):s!==-1&&(y=-1)}return s===-1||c===-1||y===0||y===1&&s===c-1&&s===h+1?c!==-1&&(h===0&&i?e.base=e.name=t.slice(1,c):e.base=e.name=t.slice(h,c)):(h===0&&i?(e.name=t.slice(1,s),e.base=t.slice(1,c)):(e.name=t.slice(h,s),e.base=t.slice(h,c)),e.ext=t.slice(s,c)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"};re.RETINA_PREFIX=/@([0-9\.]+)x/;re.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var yl=!1,pc="6.5.2";function k_(){yl=!0}function X_(t){var e;if(!yl){if(re.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var r=[`
 %c %c %c PixiJS `+pc+" -  "+t+`   %c  %c  http://www.pixijs.com/  %c %c %c%c 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,r)}else globalThis.console&&globalThis.console.log("PixiJS "+pc+" - "+t+" - http://www.pixijs.com/");yl=!0}}var bh;function H_(){return typeof bh>"u"&&(bh=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:re.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!re.ADAPTER.getWebGLRenderingContext())return!1;var e=re.ADAPTER.createCanvas(),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),i=!!(r&&r.getContextAttributes().stencil);if(r){var o=r.getExtension("WEBGL_lose_context");o&&o.loseContext()}return r=null,i}catch{return!1}}()),bh}var Am="#f0f8ff",bm="#faebd7",xm="#00ffff",Sm="#7fffd4",Rm="#f0ffff",Pm="#f5f5dc",Im="#ffe4c4",Om="#000000",wm="#ffebcd",Mm="#0000ff",Cm="#8a2be2",Dm="#a52a2a",Lm="#deb887",$m="#5f9ea0",Nm="#7fff00",Fm="#d2691e",Um="#ff7f50",Bm="#6495ed",Gm="#fff8dc",km="#dc143c",Xm="#00ffff",Hm="#00008b",jm="#008b8b",Ym="#b8860b",Vm="#a9a9a9",Wm="#006400",zm="#a9a9a9",qm="#bdb76b",Zm="#8b008b",Qm="#556b2f",Jm="#ff8c00",Km="#9932cc",tg="#8b0000",eg="#e9967a",rg="#8fbc8f",ig="#483d8b",ng="#2f4f4f",og="#2f4f4f",sg="#00ced1",ag="#9400d3",hg="#ff1493",lg="#00bfff",ug="#696969",cg="#696969",dg="#1e90ff",fg="#b22222",_g="#fffaf0",pg="#228b22",mg="#ff00ff",gg="#dcdcdc",vg="#f8f8ff",yg="#daa520",Eg="#ffd700",Tg="#808080",Ag="#008000",bg="#adff2f",xg="#808080",Sg="#f0fff0",Rg="#ff69b4",Pg="#cd5c5c",Ig="#4b0082",Og="#fffff0",wg="#f0e68c",Mg="#fff0f5",Cg="#e6e6fa",Dg="#7cfc00",Lg="#fffacd",$g="#add8e6",Ng="#f08080",Fg="#e0ffff",Ug="#fafad2",Bg="#d3d3d3",Gg="#90ee90",kg="#d3d3d3",Xg="#ffb6c1",Hg="#ffa07a",jg="#20b2aa",Yg="#87cefa",Vg="#778899",Wg="#778899",zg="#b0c4de",qg="#ffffe0",Zg="#00ff00",Qg="#32cd32",Jg="#faf0e6",Kg="#ff00ff",tv="#800000",ev="#66cdaa",rv="#0000cd",iv="#ba55d3",nv="#9370db",ov="#3cb371",sv="#7b68ee",av="#00fa9a",hv="#48d1cc",lv="#c71585",uv="#191970",cv="#f5fffa",dv="#ffe4e1",fv="#ffe4b5",_v="#ffdead",pv="#000080",mv="#fdf5e6",gv="#808000",vv="#6b8e23",yv="#ffa500",Ev="#ff4500",Tv="#da70d6",Av="#eee8aa",bv="#98fb98",xv="#afeeee",Sv="#db7093",Rv="#ffefd5",Pv="#ffdab9",Iv="#cd853f",Ov="#ffc0cb",wv="#dda0dd",Mv="#b0e0e6",Cv="#800080",Dv="#663399",Lv="#ff0000",$v="#bc8f8f",Nv="#4169e1",Fv="#8b4513",Uv="#fa8072",Bv="#f4a460",Gv="#2e8b57",kv="#fff5ee",Xv="#a0522d",Hv="#c0c0c0",jv="#87ceeb",Yv="#6a5acd",Vv="#708090",Wv="#708090",zv="#fffafa",qv="#00ff7f",Zv="#4682b4",Qv="#d2b48c",Jv="#008080",Kv="#d8bfd8",ty="#ff6347",ey="#40e0d0",ry="#ee82ee",iy="#f5deb3",ny="#ffffff",oy="#f5f5f5",sy="#ffff00",ay="#9acd32",hy={aliceblue:Am,antiquewhite:bm,aqua:xm,aquamarine:Sm,azure:Rm,beige:Pm,bisque:Im,black:Om,blanchedalmond:wm,blue:Mm,blueviolet:Cm,brown:Dm,burlywood:Lm,cadetblue:$m,chartreuse:Nm,chocolate:Fm,coral:Um,cornflowerblue:Bm,cornsilk:Gm,crimson:km,cyan:Xm,darkblue:Hm,darkcyan:jm,darkgoldenrod:Ym,darkgray:Vm,darkgreen:Wm,darkgrey:zm,darkkhaki:qm,darkmagenta:Zm,darkolivegreen:Qm,darkorange:Jm,darkorchid:Km,darkred:tg,darksalmon:eg,darkseagreen:rg,darkslateblue:ig,darkslategray:ng,darkslategrey:og,darkturquoise:sg,darkviolet:ag,deeppink:hg,deepskyblue:lg,dimgray:ug,dimgrey:cg,dodgerblue:dg,firebrick:fg,floralwhite:_g,forestgreen:pg,fuchsia:mg,gainsboro:gg,ghostwhite:vg,goldenrod:yg,gold:Eg,gray:Tg,green:Ag,greenyellow:bg,grey:xg,honeydew:Sg,hotpink:Rg,indianred:Pg,indigo:Ig,ivory:Og,khaki:wg,lavenderblush:Mg,lavender:Cg,lawngreen:Dg,lemonchiffon:Lg,lightblue:$g,lightcoral:Ng,lightcyan:Fg,lightgoldenrodyellow:Ug,lightgray:Bg,lightgreen:Gg,lightgrey:kg,lightpink:Xg,lightsalmon:Hg,lightseagreen:jg,lightskyblue:Yg,lightslategray:Vg,lightslategrey:Wg,lightsteelblue:zg,lightyellow:qg,lime:Zg,limegreen:Qg,linen:Jg,magenta:Kg,maroon:tv,mediumaquamarine:ev,mediumblue:rv,mediumorchid:iv,mediumpurple:nv,mediumseagreen:ov,mediumslateblue:sv,mediumspringgreen:av,mediumturquoise:hv,mediumvioletred:lv,midnightblue:uv,mintcream:cv,mistyrose:dv,moccasin:fv,navajowhite:_v,navy:pv,oldlace:mv,olive:gv,olivedrab:vv,orange:yv,orangered:Ev,orchid:Tv,palegoldenrod:Av,palegreen:bv,paleturquoise:xv,palevioletred:Sv,papayawhip:Rv,peachpuff:Pv,peru:Iv,pink:Ov,plum:wv,powderblue:Mv,purple:Cv,rebeccapurple:Dv,red:Lv,rosybrown:$v,royalblue:Nv,saddlebrown:Fv,salmon:Uv,sandybrown:Bv,seagreen:Gv,seashell:kv,sienna:Xv,silver:Hv,skyblue:jv,slateblue:Yv,slategray:Vv,slategrey:Wv,snow:zv,springgreen:qv,steelblue:Zv,tan:Qv,teal:Jv,thistle:Kv,tomato:ty,turquoise:ey,violet:ry,wheat:iy,white:ny,whitesmoke:oy,yellow:sy,yellowgreen:ay};function io(t,e){return e===void 0&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(t&255)/255,e}function Au(t){var e=t.toString(16);return e="000000".substring(0,6-e.length)+e,"#"+e}function bu(t){return typeof t=="string"&&(t=hy[t.toLowerCase()]||t,t[0]==="#"&&(t=t.slice(1))),parseInt(t,16)}function ly(t){return(t[0]*255<<16)+(t[1]*255<<8)+(t[2]*255|0)}function uy(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[xe.NORMAL_NPM]=xe.NORMAL,t[xe.ADD_NPM]=xe.ADD,t[xe.SCREEN_NPM]=xe.SCREEN,e[xe.NORMAL]=xe.NORMAL_NPM,e[xe.ADD]=xe.ADD_NPM,e[xe.SCREEN]=xe.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}var xu=uy();function Su(t,e){return xu[e?1:0][t]}function j_(t,e,r,i){return r=r||new Float32Array(4),i||i===void 0?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r}function Ja(t,e){if(e===1)return(e*255<<24)+t;if(e===0)return 0;var r=t>>16&255,i=t>>8&255,o=t&255;return r=r*e+.5|0,i=i*e+.5|0,o=o*e+.5|0,(e*255<<24)+(r<<16)+(i<<8)+o}function Ru(t,e,r,i){return r=r||new Float32Array(4),r[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(t&255)/255,(i||i===void 0)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}function Y_(t,e){e===void 0&&(e=null);var r=t*6;if(e=e||new Uint16Array(r),e.length!==r)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+r);for(var i=0,o=0;i<r;i+=6,o+=4)e[i+0]=o+0,e[i+1]=o+1,e[i+2]=o+2,e[i+3]=o+0,e[i+4]=o+2,e[i+5]=o+3;return e}function Ka(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}var cy={Float32Array,Uint32Array,Int32Array,Uint8Array};function dy(t,e){for(var r=0,i=0,o={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var h=new ArrayBuffer(r*4),c=null,d=0,s=0;s<t.length;s++){var _=e[s],y=t[s],I=Ka(y);o[I]||(o[I]=new cy[I](h)),c=o[I];for(var E=0;E<y.length;E++){var S=(E/_|0)*i+d,b=E%_;c[S+b]=y[E]}d+=_}return new Float32Array(h)}function Cs(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function El(t){return!(t&t-1)&&!!t}function Tl(t){var e=(t>65535?1:0)<<4;t>>>=e;var r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function to(t,e,r){var i=t.length,o;if(!(e>=i||r===0)){r=e+r>i?i-e:r;var s=i-r;for(o=e;o<s;++o)t[o]=t[o+r];t.length=s}}function Kn(t){return t===0?0:t<0?-1:1}var fy=0;function bn(){return++fy}var mc={};function ai(t,e,r){if(r===void 0&&(r=3),!mc[e]){var i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t):(i=i.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+`
Deprecated since v`+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t),console.warn(i))),mc[e]=!0}}var Al={},si=Object.create(null),mi=Object.create(null);function _y(){var t;for(t in si)si[t].destroy();for(t in mi)mi[t].destroy()}function py(){var t;for(t in si)delete si[t];for(t in mi)delete mi[t]}var bl=function(){function t(e,r,i){this.canvas=re.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=i||re.RESOLUTION,this.resize(e,r)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(e,r){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(r*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),t}();function V_(t){var e=t.width,r=t.height,i=t.getContext("2d"),o=i.getImageData(0,0,e,r),s=o.data,h=s.length,c={top:null,left:null,right:null,bottom:null},d=null,_,y,I;for(_=0;_<h;_+=4)s[_+3]!==0&&(y=_/4%e,I=~~(_/4/e),c.top===null&&(c.top=I),(c.left===null||y<c.left)&&(c.left=y),(c.right===null||c.right<y)&&(c.right=y+1),(c.bottom===null||c.bottom<I)&&(c.bottom=I));return c.top!==null&&(e=c.right-c.left,r=c.bottom-c.top+1,d=i.getImageData(c.left,c.top,e,r)),{height:r,width:e,data:d}}var W_=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function my(t){var e=W_.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}var ha;function z_(t,e){if(e===void 0&&(e=globalThis.location),t.indexOf("data:")===0)return"";e=e||globalThis.location,ha||(ha=document.createElement("a")),ha.href=t;var r=Xi.parse(ha.href),i=!r.port&&e.port===""||r.port===e.port;return r.hostname!==e.hostname||!i||r.protocol!==e.protocol?"anonymous":""}function Ds(t,e){var r=re.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):e!==void 0?e:1}const gy=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:mi,CanvasRenderTarget:bl,DATA_URI:W_,EventEmitter:Ci,ProgramCache:Al,TextureCache:si,clearTextureCache:py,correctBlendMode:Su,createIndicesForQuads:Y_,decomposeDataUri:my,deprecation:ai,destroyTextureCache:_y,determineCrossOrigin:z_,get earcut(){return wo},getBufferType:Ka,getResolutionOfUrl:Ds,hex2rgb:io,hex2string:Au,interleaveTypedArrays:dy,isMobile:vi,isPow2:El,isWebGLSupported:H_,log2:Tl,nextPow2:Cs,path:G_,premultiplyBlendMode:xu,premultiplyRgba:j_,premultiplyTint:Ja,premultiplyTintToRgba:Ru,removeItems:to,rgb2hex:ly,sayHello:X_,sign:Kn,skipHello:k_,string2hex:bu,trimCanvas:V_,uid:bn,url:Xi},Symbol.toStringTag,{value:"Module"}));/*!
 * @pixi/math - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ls=Math.PI*2,q_=180/Math.PI,Z_=Math.PI/180,Xr;(function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"})(Xr||(Xr={}));var fr=function(){function t(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this.x=0,this.y=0,this.x=e,this.y=r}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(e){return this.set(e.x,e.y),this},t.prototype.copyTo=function(e){return e.set(this.x,this.y),e},t.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},t.prototype.set=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),this.x=e,this.y=r,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),la=[new fr,new fr,new fr,new fr],qe=function(){function t(e,r,i,o){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),o===void 0&&(o=0),this.x=Number(e),this.y=Number(r),this.width=Number(i),this.height=Number(o),this.type=Xr.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},t.prototype.copyTo=function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},t.prototype.contains=function(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height},t.prototype.intersects=function(e,r){if(!r){var i=this.x<e.x?e.x:this.x,o=this.right>e.right?e.right:this.right;if(o<=i)return!1;var s=this.y<e.y?e.y:this.y,h=this.bottom>e.bottom?e.bottom:this.bottom;return h>s}var c=this.left,d=this.right,_=this.top,y=this.bottom;if(d<=c||y<=_)return!1;var I=la[0].set(e.left,e.top),E=la[1].set(e.left,e.bottom),S=la[2].set(e.right,e.top),b=la[3].set(e.right,e.bottom);if(S.x<=I.x||E.y<=I.y)return!1;var x=Math.sign(r.a*r.d-r.b*r.c);if(x===0||(r.apply(I,I),r.apply(E,E),r.apply(S,S),r.apply(b,b),Math.max(I.x,E.x,S.x,b.x)<=c||Math.min(I.x,E.x,S.x,b.x)>=d||Math.max(I.y,E.y,S.y,b.y)<=_||Math.min(I.y,E.y,S.y,b.y)>=y))return!1;var $=x*(E.y-I.y),j=x*(I.x-E.x),Y=$*c+j*_,Q=$*d+j*_,it=$*c+j*y,J=$*d+j*y;if(Math.max(Y,Q,it,J)<=$*I.x+j*I.y||Math.min(Y,Q,it,J)>=$*b.x+j*b.y)return!1;var K=x*(I.y-S.y),Tt=x*(S.x-I.x),yt=K*c+Tt*_,ft=K*d+Tt*_,St=K*c+Tt*y,wt=K*d+Tt*y;return!(Math.max(yt,ft,St,wt)<=K*I.x+Tt*I.y||Math.min(yt,ft,St,wt)>=K*b.x+Tt*b.y)},t.prototype.pad=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this},t.prototype.fit=function(e){var r=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),o=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(i-r,0),this.y=o,this.height=Math.max(s-o,0),this},t.prototype.ceil=function(e,r){e===void 0&&(e=1),r===void 0&&(r=.001);var i=Math.ceil((this.x+this.width-r)*e)/e,o=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=i-this.x,this.height=o-this.y,this},t.prototype.enlarge=function(e){var r=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),o=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=i-r,this.y=o,this.height=s-o,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),Q_=function(){function t(e,r,i){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=e,this.y=r,this.radius=i,this.type=Xr.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(e,r){if(this.radius<=0)return!1;var i=this.radius*this.radius,o=this.x-e,s=this.y-r;return o*=o,s*=s,o+s<=i},t.prototype.getBounds=function(){return new qe(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),J_=function(){function t(e,r,i,o){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),o===void 0&&(o=0),this.x=e,this.y=r,this.width=i,this.height=o,this.type=Xr.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(e,r){if(this.width<=0||this.height<=0)return!1;var i=(e-this.x)/this.width,o=(r-this.y)/this.height;return i*=i,o*=o,i+o<=1},t.prototype.getBounds=function(){return new qe(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),Es=function(){function t(){for(var e=arguments,r=[],i=0;i<arguments.length;i++)r[i]=e[i];var o=Array.isArray(r[0])?r[0]:r;if(typeof o[0]!="number"){for(var s=[],h=0,c=o.length;h<c;h++)s.push(o[h].x,o[h].y);o=s}this.points=o,this.type=Xr.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=this.points.slice(),r=new t(e);return r.closeStroke=this.closeStroke,r},t.prototype.contains=function(e,r){for(var i=!1,o=this.points.length/2,s=0,h=o-1;s<o;h=s++){var c=this.points[s*2],d=this.points[s*2+1],_=this.points[h*2],y=this.points[h*2+1],I=d>r!=y>r&&e<(_-c)*((r-d)/(y-d))+c;I&&(i=!i)}return i},t.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(e,r){return e+", "+r},"")+"]")},t}(),K_=function(){function t(e,r,i,o,s){e===void 0&&(e=0),r===void 0&&(r=0),i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=20),this.x=e,this.y=r,this.width=i,this.height=o,this.radius=s,this.type=Xr.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){var i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+i&&r<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;var o=e-(this.x+i),s=r-(this.y+i),h=i*i;if(o*o+s*s<=h||(o=e-(this.x+this.width-i),o*o+s*s<=h)||(s=r-(this.y+this.height-i),o*o+s*s<=h)||(o=e-(this.x+i),o*o+s*s<=h))return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},t}(),yn=function(){function t(e,r,i,o){i===void 0&&(i=0),o===void 0&&(o=0),this._x=i,this._y=o,this.cb=e,this.scope=r}return t.prototype.clone=function(e,r){return e===void 0&&(e=this.cb),r===void 0&&(r=this.scope),new t(e,r,this._x,this._y)},t.prototype.set=function(e,r){return e===void 0&&(e=0),r===void 0&&(r=e),(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(e){return e.set(this._x,this._y),e},t.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),Sr=function(){function t(e,r,i,o,s,h){e===void 0&&(e=1),r===void 0&&(r=0),i===void 0&&(i=0),o===void 0&&(o=1),s===void 0&&(s=0),h===void 0&&(h=0),this.array=null,this.a=e,this.b=r,this.c=i,this.d=o,this.tx=s,this.ty=h}return t.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},t.prototype.set=function(e,r,i,o,s,h){return this.a=e,this.b=r,this.c=i,this.d=o,this.tx=s,this.ty=h,this},t.prototype.toArray=function(e,r){this.array||(this.array=new Float32Array(9));var i=r||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(e,r){r=r||new fr;var i=e.x,o=e.y;return r.x=this.a*i+this.c*o+this.tx,r.y=this.b*i+this.d*o+this.ty,r},t.prototype.applyInverse=function(e,r){r=r||new fr;var i=1/(this.a*this.d+this.c*-this.b),o=e.x,s=e.y;return r.x=this.d*i*o+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,r.y=this.a*i*s+-this.b*i*o+(-this.ty*this.a+this.tx*this.b)*i,r},t.prototype.translate=function(e,r){return this.tx+=e,this.ty+=r,this},t.prototype.scale=function(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this},t.prototype.rotate=function(e){var r=Math.cos(e),i=Math.sin(e),o=this.a,s=this.c,h=this.tx;return this.a=o*r-this.b*i,this.b=o*i+this.b*r,this.c=s*r-this.d*i,this.d=s*i+this.d*r,this.tx=h*r-this.ty*i,this.ty=h*i+this.ty*r,this},t.prototype.append=function(e){var r=this.a,i=this.b,o=this.c,s=this.d;return this.a=e.a*r+e.b*o,this.b=e.a*i+e.b*s,this.c=e.c*r+e.d*o,this.d=e.c*i+e.d*s,this.tx=e.tx*r+e.ty*o+this.tx,this.ty=e.tx*i+e.ty*s+this.ty,this},t.prototype.setTransform=function(e,r,i,o,s,h,c,d,_){return this.a=Math.cos(c+_)*s,this.b=Math.sin(c+_)*s,this.c=-Math.sin(c-d)*h,this.d=Math.cos(c-d)*h,this.tx=e-(i*this.a+o*this.c),this.ty=r-(i*this.b+o*this.d),this},t.prototype.prepend=function(e){var r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){var i=this.a,o=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=o*e.a+this.d*e.c,this.d=o*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this},t.prototype.decompose=function(e){var r=this.a,i=this.b,o=this.c,s=this.d,h=e.pivot,c=-Math.atan2(-o,s),d=Math.atan2(i,r),_=Math.abs(c+d);return _<1e-5||Math.abs(Ls-_)<1e-5?(e.rotation=d,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=c,e.skew.y=d),e.scale.x=Math.sqrt(r*r+i*i),e.scale.y=Math.sqrt(o*o+s*s),e.position.x=this.tx+(h.x*r+h.y*o),e.position.y=this.ty+(h.x*i+h.y*s),e},t.prototype.invert=function(){var e=this.a,r=this.b,i=this.c,o=this.d,s=this.tx,h=e*o-r*i;return this.a=o/h,this.b=-r/h,this.c=-i/h,this.d=e/h,this.tx=(i*this.ty-o*s)/h,this.ty=-(e*this.ty-r*s)/h,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyFrom=function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),Hn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],jn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Yn=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Vn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],xl=[],tp=[],ua=Math.sign;function vy(){for(var t=0;t<16;t++){var e=[];xl.push(e);for(var r=0;r<16;r++)for(var i=ua(Hn[t]*Hn[r]+Yn[t]*jn[r]),o=ua(jn[t]*Hn[r]+Vn[t]*jn[r]),s=ua(Hn[t]*Yn[r]+Yn[t]*Vn[r]),h=ua(jn[t]*Yn[r]+Vn[t]*Vn[r]),c=0;c<16;c++)if(Hn[c]===i&&jn[c]===o&&Yn[c]===s&&Vn[c]===h){e.push(c);break}}for(var t=0;t<16;t++){var d=new Sr;d.set(Hn[t],jn[t],Yn[t],Vn[t],0,0),tp.push(d)}}vy();var xr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return Hn[t]},uY:function(t){return jn[t]},vX:function(t){return Yn[t]},vY:function(t){return Vn[t]},inv:function(t){return t&8?t&15:-t&7},add:function(t,e){return xl[t][e]},sub:function(t,e){return xl[t][xr.inv(e)]},rotate180:function(t){return t^4},isVertical:function(t){return(t&3)===2},byDirection:function(t,e){return Math.abs(t)*2<=Math.abs(e)?e>=0?xr.S:xr.N:Math.abs(e)*2<=Math.abs(t)?t>0?xr.E:xr.W:e>0?t>0?xr.SE:xr.SW:t>0?xr.NE:xr.NW},matrixAppendRotationInv:function(t,e,r,i){r===void 0&&(r=0),i===void 0&&(i=0);var o=tp[xr.inv(e)];o.tx=r,o.ty=i,t.append(o)}},th=function(){function t(){this.worldTransform=new Sr,this.localTransform=new Sr,this.position=new yn(this.onChange,this,0,0),this.scale=new yn(this.onChange,this,1,1),this.pivot=new yn(this.onChange,this,0,0),this.skew=new yn(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},t.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(e){var r=this.localTransform;if(this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var i=e.worldTransform,o=this.worldTransform;o.a=r.a*i.a+r.b*i.c,o.b=r.a*i.b+r.b*i.d,o.c=r.c*i.a+r.d*i.c,o.d=r.c*i.b+r.d*i.d,o.tx=r.tx*i.a+r.ty*i.c+i.tx,o.ty=r.tx*i.b+r.ty*i.d+i.ty,this._parentID=e._worldID,this._worldID++}},t.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}();/*!
 * @pixi/display - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */re.SORTABLE_CHILDREN=!1;var $s=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?qe.EMPTY:(e=e||new qe(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},t.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},t.prototype.addPointMatrix=function(e,r){var i=e.a,o=e.b,s=e.c,h=e.d,c=e.tx,d=e.ty,_=i*r.x+s*r.y+c,y=o*r.x+h*r.y+d;this.minX=Math.min(this.minX,_),this.maxX=Math.max(this.maxX,_),this.minY=Math.min(this.minY,y),this.maxY=Math.max(this.maxY,y)},t.prototype.addQuad=function(e){var r=this.minX,i=this.minY,o=this.maxX,s=this.maxY,h=e[0],c=e[1];r=h<r?h:r,i=c<i?c:i,o=h>o?h:o,s=c>s?c:s,h=e[2],c=e[3],r=h<r?h:r,i=c<i?c:i,o=h>o?h:o,s=c>s?c:s,h=e[4],c=e[5],r=h<r?h:r,i=c<i?c:i,o=h>o?h:o,s=c>s?c:s,h=e[6],c=e[7],r=h<r?h:r,i=c<i?c:i,o=h>o?h:o,s=c>s?c:s,this.minX=r,this.minY=i,this.maxX=o,this.maxY=s},t.prototype.addFrame=function(e,r,i,o,s){this.addFrameMatrix(e.worldTransform,r,i,o,s)},t.prototype.addFrameMatrix=function(e,r,i,o,s){var h=e.a,c=e.b,d=e.c,_=e.d,y=e.tx,I=e.ty,E=this.minX,S=this.minY,b=this.maxX,x=this.maxY,$=h*r+d*i+y,j=c*r+_*i+I;E=$<E?$:E,S=j<S?j:S,b=$>b?$:b,x=j>x?j:x,$=h*o+d*i+y,j=c*o+_*i+I,E=$<E?$:E,S=j<S?j:S,b=$>b?$:b,x=j>x?j:x,$=h*r+d*s+y,j=c*r+_*s+I,E=$<E?$:E,S=j<S?j:S,b=$>b?$:b,x=j>x?j:x,$=h*o+d*s+y,j=c*o+_*s+I,E=$<E?$:E,S=j<S?j:S,b=$>b?$:b,x=j>x?j:x,this.minX=E,this.minY=S,this.maxX=b,this.maxY=x},t.prototype.addVertexData=function(e,r,i){for(var o=this.minX,s=this.minY,h=this.maxX,c=this.maxY,d=r;d<i;d+=2){var _=e[d],y=e[d+1];o=_<o?_:o,s=y<s?y:s,h=_>h?_:h,c=y>c?y:c}this.minX=o,this.minY=s,this.maxX=h,this.maxY=c},t.prototype.addVertices=function(e,r,i,o){this.addVerticesMatrix(e.worldTransform,r,i,o)},t.prototype.addVerticesMatrix=function(e,r,i,o,s,h){s===void 0&&(s=0),h===void 0&&(h=s);for(var c=e.a,d=e.b,_=e.c,y=e.d,I=e.tx,E=e.ty,S=this.minX,b=this.minY,x=this.maxX,$=this.maxY,j=i;j<o;j+=2){var Y=r[j],Q=r[j+1],it=c*Y+_*Q+I,J=y*Q+d*Y+E;S=Math.min(S,it-s),x=Math.max(x,it+s),b=Math.min(b,J-h),$=Math.max($,J+h)}this.minX=S,this.minY=b,this.maxX=x,this.maxY=$},t.prototype.addBounds=function(e){var r=this.minX,i=this.minY,o=this.maxX,s=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>o?e.maxX:o,this.maxY=e.maxY>s?e.maxY:s},t.prototype.addBoundsMask=function(e,r){var i=e.minX>r.minX?e.minX:r.minX,o=e.minY>r.minY?e.minY:r.minY,s=e.maxX<r.maxX?e.maxX:r.maxX,h=e.maxY<r.maxY?e.maxY:r.maxY;if(i<=s&&o<=h){var c=this.minX,d=this.minY,_=this.maxX,y=this.maxY;this.minX=i<c?i:c,this.minY=o<d?o:d,this.maxX=s>_?s:_,this.maxY=h>y?h:y}},t.prototype.addBoundsMatrix=function(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)},t.prototype.addBoundsArea=function(e,r){var i=e.minX>r.x?e.minX:r.x,o=e.minY>r.y?e.minY:r.y,s=e.maxX<r.x+r.width?e.maxX:r.x+r.width,h=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(i<=s&&o<=h){var c=this.minX,d=this.minY,_=this.maxX,y=this.maxY;this.minX=i<c?i:c,this.minY=o<d?o:d,this.maxX=s>_?s:_,this.maxY=h>y?h:y}},t.prototype.pad=function(e,r){e===void 0&&(e=0),r===void 0&&(r=e),this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)},t.prototype.addFramePad=function(e,r,i,o,s,h){e-=s,r-=h,i+=s,o+=h,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>o?this.maxY:o},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Sl=function(t,e){return Sl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},Sl(t,e)};function Pu(t,e){Sl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Lr=function(t){Pu(e,t);function e(){var r=t.call(this)||this;return r.tempDisplayObjectParent=null,r.transform=new th,r.alpha=1,r.visible=!0,r.renderable=!0,r.cullable=!1,r.cullArea=null,r.parent=null,r.worldAlpha=1,r._lastSortedIndex=0,r._zIndex=0,r.filterArea=null,r.filters=null,r._enabledFilters=null,r._bounds=new $s,r._localBounds=null,r._boundsID=0,r._boundsRect=null,r._localBoundsRect=null,r._mask=null,r._maskRefCount=0,r._destroyed=!1,r.isSprite=!1,r.isMask=!1,r}return e.mixin=function(r){for(var i=Object.keys(r),o=0;o<i.length;++o){var s=i[o];Object.defineProperty(e.prototype,s,Object.getOwnPropertyDescriptor(r,s))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(r,i){return r||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new qe),i=this._boundsRect),this._bounds.getRectangle(i)},e.prototype.getLocalBounds=function(r){r||(this._localBoundsRect||(this._localBoundsRect=new qe),r=this._localBoundsRect),this._localBounds||(this._localBounds=new $s);var i=this.transform,o=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var s=this._bounds,h=this._boundsID;this._bounds=this._localBounds;var c=this.getBounds(!1,r);return this.parent=o,this.transform=i,this._bounds=s,this._bounds.updateID+=this._boundsID-h,c},e.prototype.toGlobal=function(r,i,o){return o===void 0&&(o=!1),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(r,i)},e.prototype.toLocal=function(r,i,o,s){return i&&(r=i.toGlobal(r,o,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(r,o)},e.prototype.setParent=function(r){if(!r||!r.addChild)throw new Error("setParent: Argument must be a Container");return r.addChild(this),r},e.prototype.setTransform=function(r,i,o,s,h,c,d,_,y){return r===void 0&&(r=0),i===void 0&&(i=0),o===void 0&&(o=1),s===void 0&&(s=1),h===void 0&&(h=0),c===void 0&&(c=0),d===void 0&&(d=0),_===void 0&&(_=0),y===void 0&&(y=0),this.position.x=r,this.position.y=i,this.scale.x=o||1,this.scale.y=s||1,this.rotation=h,this.skew.x=c,this.skew.y=d,this.pivot.x=_,this.pivot.y=y,this},e.prototype.destroy=function(r){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new Iu),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var r=this.parent;return this.parent=this._tempDisplayObjectParent,r},e.prototype.disableTempParent=function(r){this.parent=r},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(r){this.transform.position.x=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(r){this.transform.position.y=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(r){this.transform.position.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(r){this.transform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(r){this.transform.pivot.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(r){this.transform.skew.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(r){this.transform.rotation=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*q_},set:function(r){this.transform.rotation=r*Z_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(r){this._zIndex=r,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var r=this;do{if(!r.visible)return!1;r=r.parent}while(r);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(r){if(this._mask!==r){if(this._mask){var i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount--,i._maskRefCount===0&&(i.renderable=!0,i.isMask=!1))}if(this._mask=r,this._mask){var i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount===0&&(i.renderable=!1,i.isMask=!0),i._maskRefCount++)}}},enumerable:!1,configurable:!0}),e}(Ci),Iu=function(t){Pu(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.sortDirty=null,r}return e}(Lr);Lr.prototype.displayObjectUpdateTransform=Lr.prototype.updateTransform;/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var gc;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(gc||(gc={}));var vc;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(vc||(vc={}));var yc;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(yc||(yc={}));var Ec;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(Ec||(Ec={}));var Tc;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Tc||(Tc={}));var Ac;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Ac||(Ac={}));var bc;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(bc||(bc={}));var xc;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(xc||(xc={}));var Sc;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(Sc||(Sc={}));var Rc;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(Rc||(Rc={}));var Pc;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Pc||(Pc={}));var Ic;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Ic||(Ic={}));var Oc;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Oc||(Oc={}));var wc;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(wc||(wc={}));var Mc;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Mc||(Mc={}));var Cc;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Cc||(Cc={}));var Rl;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(Rl||(Rl={}));var Dc;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(Dc||(Dc={}));var Lc;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(Lc||(Lc={}));var $c;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})($c||($c={}));function yy(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}var Ai=function(t){Pu(e,t);function e(){var r=t.call(this)||this;return r.children=[],r.sortableChildren=re.SORTABLE_CHILDREN,r.sortDirty=!1,r}return e.prototype.onChildrenChange=function(r){},e.prototype.addChild=function(){for(var r=arguments,i=[],o=0;o<arguments.length;o++)i[o]=r[o];if(i.length>1)for(var s=0;s<i.length;s++)this.addChild(i[s]);else{var h=i[0];h.parent&&h.parent.removeChild(h),h.parent=this,this.sortDirty=!0,h.transform._parentID=-1,this.children.push(h),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",h,this,this.children.length-1),h.emit("added",this)}return i[0]},e.prototype.addChildAt=function(r,i){if(i<0||i>this.children.length)throw new Error(r+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length);return r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this.children.splice(i,0,r),this._boundsID++,this.onChildrenChange(i),r.emit("added",this),this.emit("childAdded",r,this,i),r},e.prototype.swapChildren=function(r,i){if(r!==i){var o=this.getChildIndex(r),s=this.getChildIndex(i);this.children[o]=i,this.children[s]=r,this.onChildrenChange(o<s?o:s)}},e.prototype.getChildIndex=function(r){var i=this.children.indexOf(r);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i},e.prototype.setChildIndex=function(r,i){if(i<0||i>=this.children.length)throw new Error("The index "+i+" supplied is out of bounds "+this.children.length);var o=this.getChildIndex(r);to(this.children,o,1),this.children.splice(i,0,r),this.onChildrenChange(i)},e.prototype.getChildAt=function(r){if(r<0||r>=this.children.length)throw new Error("getChildAt: Index ("+r+") does not exist.");return this.children[r]},e.prototype.removeChild=function(){for(var r=arguments,i=[],o=0;o<arguments.length;o++)i[o]=r[o];if(i.length>1)for(var s=0;s<i.length;s++)this.removeChild(i[s]);else{var h=i[0],c=this.children.indexOf(h);if(c===-1)return null;h.parent=null,h.transform._parentID=-1,to(this.children,c,1),this._boundsID++,this.onChildrenChange(c),h.emit("removed",this),this.emit("childRemoved",h,this,c)}return i[0]},e.prototype.removeChildAt=function(r){var i=this.getChildAt(r);return i.parent=null,i.transform._parentID=-1,to(this.children,r,1),this._boundsID++,this.onChildrenChange(r),i.emit("removed",this),this.emit("childRemoved",i,this,r),i},e.prototype.removeChildren=function(r,i){r===void 0&&(r=0),i===void 0&&(i=this.children.length);var o=r,s=i,h=s-o,c;if(h>0&&h<=s){c=this.children.splice(o,h);for(var d=0;d<c.length;++d)c[d].parent=null,c[d].transform&&(c[d].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(var d=0;d<c.length;++d)c[d].emit("removed",this),this.emit("childRemoved",c[d],this,d);return c}else if(h===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var r=!1,i=0,o=this.children.length;i<o;++i){var s=this.children[i];s._lastSortedIndex=i,!r&&s.zIndex!==0&&(r=!0)}r&&this.children.length>1&&this.children.sort(yy),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var r=0,i=this.children.length;r<i;++r){var o=this.children[r];o.visible&&o.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var r=0;r<this.children.length;r++){var i=this.children[r];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){var o=i._mask.isMaskData?i._mask.maskObject:i._mask;o?(o.calculateBounds(),this._bounds.addBoundsMask(i._bounds,o._bounds)):this._bounds.addBounds(i._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(r,i){i===void 0&&(i=!1);var o=t.prototype.getLocalBounds.call(this,r);if(!i)for(var s=0,h=this.children.length;s<h;++s){var c=this.children[s];c.visible&&c.updateTransform()}return o},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(r){var i=r.renderTexture.sourceFrame;if(i.width>0&&i.height>0){var o,s;if(this.cullArea?(o=this.cullArea,s=this.worldTransform):this._render!==e.prototype._render&&(o=this.getBounds(!0)),o&&i.intersects(o,s))this._render(r);else if(this.cullArea)return;for(var h=0,c=this.children.length;h<c;++h){var d=this.children[h],_=d.cullable;d.cullable=_||!this.cullArea,d.render(r),d.cullable=_}}},e.prototype.render=function(r){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(r);else if(this.cullable)this._renderWithCulling(r);else{this._render(r);for(var i=0,o=this.children.length;i<o;++i)this.children[i].render(r)}},e.prototype.renderAdvanced=function(r){var i=this.filters,o=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<i.length;s++)i[s].enabled&&this._enabledFilters.push(i[s])}var h=i&&this._enabledFilters&&this._enabledFilters.length||o&&(!o.isMaskData||o.enabled&&(o.autoDetect||o.type!==Rl.NONE));if(h&&r.batch.flush(),i&&this._enabledFilters&&this._enabledFilters.length&&r.filter.push(this,this._enabledFilters),o&&r.mask.push(this,this._mask),this.cullable)this._renderWithCulling(r);else{this._render(r);for(var s=0,c=this.children.length;s<c;++s)this.children[s].render(r)}h&&r.batch.flush(),o&&r.mask.pop(this),i&&this._enabledFilters&&this._enabledFilters.length&&r.filter.pop()},e.prototype._render=function(r){},e.prototype.destroy=function(r){t.prototype.destroy.call(this),this.sortDirty=!1;var i=typeof r=="boolean"?r:r&&r.children,o=this.removeChildren(0,this.children.length);if(i)for(var s=0;s<o.length;++s)o[s].destroy(r)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(r){var i=this.getLocalBounds().width;i!==0?this.scale.x=r/i:this.scale.x=1,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(r){var i=this.getLocalBounds().height;i!==0?this.scale.y=r/i:this.scale.y=1,this._height=r},enumerable:!1,configurable:!0}),e}(Lr);Ai.prototype.containerUpdateTransform=Ai.prototype.updateTransform;/*!
 * @pixi/extensions - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/extensions is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ts=function(){return Ts=Object.assign||function(t){for(var e=arguments,r,i=1,o=arguments.length;i<o;i++){r=e[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ts.apply(this,arguments)},ar;(function(t){t.Application="application",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Loader="loader",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser"})(ar||(ar={}));var Nc=function(t){if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");var e=typeof t.extension!="object"?{type:t.extension}:t.extension;t=Ts(Ts({},e),{ref:t})}if(typeof t=="object")t=Ts({},t);else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},zi={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var t=arguments,e=this,r=[],i=0;i<arguments.length;i++)r[i]=t[i];return r.map(Nc).forEach(function(o){o.type.forEach(function(s){var h,c;return(c=(h=e._removeHandlers)[s])===null||c===void 0?void 0:c.call(h,o)})}),this},add:function(){for(var t=arguments,e=this,r=[],i=0;i<arguments.length;i++)r[i]=t[i];return r.map(Nc).forEach(function(o){o.type.forEach(function(s){var h=e._addHandlers,c=e._queue;h[s]?h[s](o):(c[s]=c[s]||[],c[s].push(o))})}),this},handle:function(t,e,r){var i=this._addHandlers=this._addHandlers||{},o=this._removeHandlers=this._removeHandlers||{};if(i[t]||o[t])throw new Error("Extension type "+t+" already has a handler");i[t]=e,o[t]=r;var s=this._queue;return s[t]&&(s[t].forEach(function(h){return e(h)}),delete s[t]),this},handleByMap:function(t,e){return this.handle(t,function(r){e[r.name]=r.ref},function(r){delete e[r.name]})},handleByList:function(t,e){return this.handle(t,function(r){var i,o;e.push(r.ref),t===ar.Loader&&((o=(i=r.ref).add)===null||o===void 0||o.call(i))},function(r){var i=e.indexOf(r.ref);i!==-1&&e.splice(i,1)})}};/*!
 * @pixi/runner - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Wr=function(){function t(e){this.items=[],this._name=e,this._aliasCount=0}return t.prototype.emit=function(e,r,i,o,s,h,c,d){if(arguments.length>8)throw new Error("max arguments reached");var _=this,y=_.name,I=_.items;this._aliasCount++;for(var E=0,S=I.length;E<S;E++)I[E][y](e,r,i,o,s,h,c,d);return I===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this},t.prototype.remove=function(e){var r=this.items.indexOf(e);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this},t.prototype.contains=function(e){return this.items.indexOf(e)!==-1},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(Wr.prototype,{dispatch:{value:Wr.prototype.emit},run:{value:Wr.prototype.emit}});/*!
 * @pixi/ticker - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */re.TARGET_FPMS=.06;var Vi;(function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"})(Vi||(Vi={}));var xh=function(){function t(e,r,i,o){r===void 0&&(r=null),i===void 0&&(i=0),o===void 0&&(o=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=i,this.once=o}return t.prototype.match=function(e,r){return r===void 0&&(r=null),this.fn===e&&this.context===r},t.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r},t.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},t.prototype.destroy=function(e){e===void 0&&(e=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var r=this.next;return this.next=e?null:r,this.previous=null,r},t}(),jr=function(){function t(){var e=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new xh(null,null,1/0),this.deltaMS=1/re.TARGET_FPMS,this.elapsedMS=1/re.TARGET_FPMS,this._tick=function(r){e._requestId=null,e.started&&(e.update(r),e.started&&e._requestId===null&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(e,r,i){return i===void 0&&(i=Vi.NORMAL),this._addListener(new xh(e,r,i))},t.prototype.addOnce=function(e,r,i){return i===void 0&&(i=Vi.NORMAL),this._addListener(new xh(e,r,i,!0))},t.prototype._addListener=function(e){var r=this._head.next,i=this._head;if(!r)e.connect(i);else{for(;r;){if(e.priority>r.priority){e.connect(i);break}i=r,r=r.next}e.previous||e.connect(i)}return this._startIfPossible(),this},t.prototype.remove=function(e,r){for(var i=this._head.next;i;)i.match(e,r)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var e=0,r=this._head;r=r.next;)e++;return e},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(e){e===void 0&&(e=performance.now());var r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){var i=e-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=e-i%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*re.TARGET_FPMS;for(var o=this._head,s=o.next;s;)s=s.emit(this.deltaTime);o.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var r=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,r)/1e3,re.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(e===0)this._minElapsedMS=0;else{var r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),ep=function(){function t(){}return t.init=function(e){var r=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,Vi.LOW)},get:function(){return this._ticker}}),this.stop=function(){r._ticker.stop()},this.start=function(){r._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?jr.shared:new jr,e.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}},t.extension=ar.Application,t}();/*!
 * @pixi/core - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */re.PREFER_ENV=vi.any?ji.WEBGL:ji.WEBGL2;re.STRICT_TEXTURE_CACHE=!1;var Ns=[];function eh(t,e){if(!t)return null;var r="";if(typeof t=="string"){var i=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);i&&(r=i[1].toLowerCase())}for(var o=Ns.length-1;o>=0;--o){var s=Ns[o];if(s.test&&s.test(t,r))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Pl=function(t,e){return Pl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},Pl(t,e)};function yr(t,e){Pl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Il=function(){return Il=Object.assign||function(t){for(var e=arguments,r,i=1,o=arguments.length;i<o;i++){r=e[i];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Il.apply(this,arguments)};function Ey(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(r[i[o]]=t[i[o]]);return r}var no=function(){function t(e,r){e===void 0&&(e=0),r===void 0&&(r=0),this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Wr("setRealSize"),this.onUpdate=new Wr("update"),this.onError=new Wr("onError")}return t.prototype.bind=function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)},t.prototype.resize=function(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(e,r,i){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(e,r){return!1},t}(),ao=function(t){yr(e,t);function e(r,i){var o=this,s=i||{},h=s.width,c=s.height;if(!h||!c)throw new Error("BufferResource width or height invalid");return o=t.call(this,h,c)||this,o.data=r,o}return e.prototype.upload=function(r,i,o){var s=r.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Ti.UNPACK);var h=i.realWidth,c=i.realHeight;return o.width===h&&o.height===c?s.texSubImage2D(i.target,0,0,0,h,c,i.format,o.type,this.data):(o.width=h,o.height=c,s.texImage2D(i.target,0,o.internalFormat,h,c,0,i.format,o.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(r){return r instanceof Float32Array||r instanceof Uint8Array||r instanceof Uint32Array},e}(no),Ty={scaleMode:ki.NEAREST,format:jt.RGBA,alphaMode:Ti.NPM},ze=function(t){yr(e,t);function e(r,i){r===void 0&&(r=null),i===void 0&&(i=null);var o=t.call(this)||this;i=i||{};var s=i.alphaMode,h=i.mipmap,c=i.anisotropicLevel,d=i.scaleMode,_=i.width,y=i.height,I=i.wrapMode,E=i.format,S=i.type,b=i.target,x=i.resolution,$=i.resourceOptions;return r&&!(r instanceof no)&&(r=eh(r,$),r.internal=!0),o.resolution=x||re.RESOLUTION,o.width=Math.round((_||0)*o.resolution)/o.resolution,o.height=Math.round((y||0)*o.resolution)/o.resolution,o._mipmap=h!==void 0?h:re.MIPMAP_TEXTURES,o.anisotropicLevel=c!==void 0?c:re.ANISOTROPIC_LEVEL,o._wrapMode=I||re.WRAP_MODE,o._scaleMode=d!==void 0?d:re.SCALE_MODE,o.format=E||jt.RGBA,o.type=S||Te.UNSIGNED_BYTE,o.target=b||En.TEXTURE_2D,o.alphaMode=s!==void 0?s:Ti.UNPACK,o.uid=bn(),o.touched=0,o.isPowerOfTwo=!1,o._refreshPOT(),o._glTextures={},o.dirtyId=0,o.dirtyStyleId=0,o.cacheId=null,o.valid=_>0&&y>0,o.textureCacheIds=[],o.destroyed=!1,o.resource=null,o._batchEnabled=0,o._batchLocation=0,o.parentTextureArray=null,o.setResource(r),o}return Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(r){this._mipmap!==r&&(this._mipmap=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(r){this._scaleMode!==r&&(this._scaleMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(r){this._wrapMode!==r&&(this._wrapMode=r,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(r,i){var o;return r!==void 0&&r!==this.scaleMode&&(this.scaleMode=r,o=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,o=!0),o&&this.dirtyStyleId++,this},e.prototype.setSize=function(r,i,o){return o=o||this.resolution,this.setRealSize(r*o,i*o,o)},e.prototype.setRealSize=function(r,i,o){return this.resolution=o||this.resolution,this.width=Math.round(r)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=El(this.realWidth)&&El(this.realHeight)},e.prototype.setResolution=function(r){var i=this.resolution;return i===r?this:(this.resolution=r,this.valid&&(this.width=Math.round(this.width*i)/r,this.height=Math.round(this.height*i)/r,this.emit("update",this)),this._refreshPOT(),this)},e.prototype.setResource=function(r){if(this.resource===r)return this;if(this.resource)throw new Error("Resource can be set only once");return r.bind(this),this.resource=r,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(r){this.emit("error",this,r)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete mi[this.cacheId],delete si[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(r,i,o){o===void 0&&(o=re.STRICT_TEXTURE_CACHE);var s=typeof r=="string",h=null;if(s)h=r;else{if(!r._pixiId){var c=i&&i.pixiIdPrefix||"pixiid";r._pixiId=c+"_"+bn()}h=r._pixiId}var d=mi[h];if(s&&o&&!d)throw new Error('The cacheId "'+h+'" does not exist in BaseTextureCache.');return d||(d=new e(r,i),d.cacheId=h,e.addToCache(d,h)),d},e.fromBuffer=function(r,i,o,s){r=r||new Float32Array(i*o*4);var h=new ao(r,{width:i,height:o}),c=r instanceof Float32Array?Te.FLOAT:Te.UNSIGNED_BYTE;return new e(h,Object.assign(Ty,s||{width:i,height:o,type:c}))},e.addToCache=function(r,i){i&&(r.textureCacheIds.indexOf(i)===-1&&r.textureCacheIds.push(i),mi[i]&&console.warn("BaseTexture added to the cache with an id ["+i+"] that already had an entry"),mi[i]=r)},e.removeFromCache=function(r){if(typeof r=="string"){var i=mi[r];if(i){var o=i.textureCacheIds.indexOf(r);return o>-1&&i.textureCacheIds.splice(o,1),delete mi[r],i}}else if(r&&r.textureCacheIds){for(var s=0;s<r.textureCacheIds.length;++s)delete mi[r.textureCacheIds[s]];return r.textureCacheIds.length=0,r}return null},e._globalBatch=0,e}(Ci),rh=function(t){yr(e,t);function e(r,i){var o=this,s=i||{},h=s.width,c=s.height;o=t.call(this,h,c)||this,o.items=[],o.itemDirtyIds=[];for(var d=0;d<r;d++){var _=new ze;o.items.push(_),o.itemDirtyIds.push(-2)}return o.length=r,o._load=null,o.baseTexture=null,o}return e.prototype.initFromArray=function(r,i){for(var o=0;o<this.length;o++)r[o]&&(r[o].castToBaseTexture?this.addBaseTextureAt(r[o].castToBaseTexture(),o):r[o]instanceof no?this.addResourceAt(r[o],o):this.addResourceAt(eh(r[o],i),o))},e.prototype.dispose=function(){for(var r=0,i=this.length;r<i;r++)this.items[r].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(r,i){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");return r.valid&&!this.valid&&this.resize(r.width,r.height),this.items[i].setResource(r),this},e.prototype.bind=function(r){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,r);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=r,this.items[i].on("update",r.update,r)},e.prototype.unbind=function(r){t.prototype.unbind.call(this,r);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",r.update,r)},e.prototype.load=function(){var r=this;if(this._load)return this._load;var i=this.items.map(function(s){return s.resource}).filter(function(s){return s}),o=i.map(function(s){return s.load()});return this._load=Promise.all(o).then(function(){var s=r.items[0],h=s.realWidth,c=s.realHeight;return r.resize(h,c),Promise.resolve(r)}),this._load},e}(no),Ou=function(t){yr(e,t);function e(r,i){var o=this,s=i||{},h=s.width,c=s.height,d,_;return Array.isArray(r)?(d=r,_=r.length):_=r,o=t.call(this,_,{width:h,height:c})||this,d&&o.initFromArray(d,i),o}return e.prototype.addBaseTextureAt=function(r,i){if(r.resource)this.addResourceAt(r.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this},e.prototype.bind=function(r){t.prototype.bind.call(this,r),r.target=En.TEXTURE_2D_ARRAY},e.prototype.upload=function(r,i,o){var s=this,h=s.length,c=s.itemDirtyIds,d=s.items,_=r.gl;o.dirtyId<0&&_.texImage3D(_.TEXTURE_2D_ARRAY,0,o.internalFormat,this._width,this._height,h,0,i.format,o.type,null);for(var y=0;y<h;y++){var I=d[y];c[y]<I.dirtyId&&(c[y]=I.dirtyId,I.valid&&_.texSubImage3D(_.TEXTURE_2D_ARRAY,0,0,0,y,I.resource.width,I.resource.height,1,i.format,o.type,I.resource.source))}return!0},e}(rh),Wi=function(t){yr(e,t);function e(r){var i=this,o=r,s=o.naturalWidth||o.videoWidth||o.width,h=o.naturalHeight||o.videoHeight||o.height;return i=t.call(this,s,h)||this,i.source=r,i.noSubImage=!1,i}return e.crossOrigin=function(r,i,o){o===void 0&&i.indexOf("data:")!==0?r.crossOrigin=z_(i):o!==!1&&(r.crossOrigin=typeof o=="string"?o:"anonymous")},e.prototype.upload=function(r,i,o,s){var h=r.gl,c=i.realWidth,d=i.realHeight;if(s=s||this.source,s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Ti.UNPACK),!this.noSubImage&&i.target===h.TEXTURE_2D&&o.width===c&&o.height===d?h.texSubImage2D(h.TEXTURE_2D,0,0,0,i.format,o.type,s):(o.width=c,o.height=d,h.texImage2D(i.target,0,o.internalFormat,i.format,o.type,s)),!0},e.prototype.update=function(){if(!this.destroyed){var r=this.source,i=r.naturalWidth||r.videoWidth||r.width,o=r.naturalHeight||r.videoHeight||r.height;this.resize(i,o),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(no),wu=function(t){yr(e,t);function e(r){return t.call(this,r)||this}return e.test=function(r){var i=globalThis.OffscreenCanvas;return i&&r instanceof i?!0:globalThis.HTMLCanvasElement&&r instanceof HTMLCanvasElement},e}(Wi),Mu=function(t){yr(e,t);function e(r,i){var o=this,s=i||{},h=s.width,c=s.height,d=s.autoLoad,_=s.linkBaseTexture;if(r&&r.length!==e.SIDES)throw new Error("Invalid length. Got "+r.length+", expected 6");o=t.call(this,6,{width:h,height:c})||this;for(var y=0;y<e.SIDES;y++)o.items[y].target=En.TEXTURE_CUBE_MAP_POSITIVE_X+y;return o.linkBaseTexture=_!==!1,r&&o.initFromArray(r,i),d!==!1&&o.load(),o}return e.prototype.bind=function(r){t.prototype.bind.call(this,r),r.target=En.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(r,i,o){if(!this.items[i])throw new Error("Index "+i+" is out of bounds");if(!this.linkBaseTexture||r.parentTextureArray||Object.keys(r._glTextures).length>0)if(r.resource)this.addResourceAt(r.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else r.target=En.TEXTURE_CUBE_MAP_POSITIVE_X+i,r.parentTextureArray=this.baseTexture,this.items[i]=r;return r.valid&&!this.valid&&this.resize(r.realWidth,r.realHeight),this.items[i]=r,this},e.prototype.upload=function(r,i,o){for(var s=this.itemDirtyIds,h=0;h<e.SIDES;h++){var c=this.items[h];(s[h]<c.dirtyId||o.dirtyId<i.dirtyId)&&(c.valid&&c.resource?(c.resource.upload(r,c,o),s[h]=c.dirtyId):s[h]<-1&&(r.gl.texImage2D(c.target,0,o.internalFormat,i.realWidth,i.realHeight,0,i.format,o.type,null),s[h]=-1))}return!0},e.test=function(r){return Array.isArray(r)&&r.length===e.SIDES},e.SIDES=6,e}(rh),ih=function(t){yr(e,t);function e(r,i){var o=this;if(i=i||{},!(r instanceof HTMLImageElement)){var s=new Image;Wi.crossOrigin(s,r,i.crossorigin),s.src=r,r=s}return o=t.call(this,r)||this,!r.complete&&o._width&&o._height&&(o._width=0,o._height=0),o.url=r.src,o._process=null,o.preserveBitmap=!1,o.createBitmap=(i.createBitmap!==void 0?i.createBitmap:re.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,o.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,o.bitmap=null,o._load=null,i.autoLoad!==!1&&o.load(),o}return e.prototype.load=function(r){var i=this;return this._load?this._load:(r!==void 0&&(this.createBitmap=r),this._load=new Promise(function(o,s){var h=i.source;i.url=h.src;var c=function(){i.destroyed||(h.onload=null,h.onerror=null,i.resize(h.width,h.height),i._load=null,i.createBitmap?o(i.process()):o(i))};h.complete&&h.src?c():(h.onload=c,h.onerror=function(d){s(d),i.onError.emit(d)})}),this._load)},e.prototype.process=function(){var r=this,i=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);var o=globalThis.createImageBitmap,s=!i.crossOrigin||i.crossOrigin==="anonymous";return this._process=fetch(i.src,{mode:s?"cors":"no-cors"}).then(function(h){return h.blob()}).then(function(h){return o(h,0,0,i.width,i.height,{premultiplyAlpha:r.alphaMode===Ti.UNPACK?"premultiply":"none"})}).then(function(h){return r.destroyed?Promise.reject():(r.bitmap=h,r.update(),r._process=null,Promise.resolve(r))}),this._process},e.prototype.upload=function(r,i,o){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,r,i,o);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,r,i,o,this.bitmap),!this.preserveBitmap){var s=!0,h=i._glTextures;for(var c in h){var d=h[c];if(d!==o&&d.dirtyId!==i.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(r){return typeof r=="string"||r instanceof HTMLImageElement},e}(Wi),Cu=function(t){yr(e,t);function e(r,i){var o=this;return i=i||{},o=t.call(this,re.ADAPTER.createCanvas())||this,o._width=0,o._height=0,o.svg=r,o.scale=i.scale||1,o._overrideWidth=i.width,o._overrideHeight=i.height,o._resolve=null,o._crossorigin=i.crossorigin,o._load=null,i.autoLoad!==!1&&o.load(),o}return e.prototype.load=function(){var r=this;return this._load?this._load:(this._load=new Promise(function(i){if(r._resolve=function(){r.resize(r.source.width,r.source.height),i(r)},e.SVG_XML.test(r.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");r.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(r.svg)))}r._loadSvg()}),this._load)},e.prototype._loadSvg=function(){var r=this,i=new Image;Wi.crossOrigin(i,this.svg,this._crossorigin),i.src=this.svg,i.onerror=function(o){r._resolve&&(i.onerror=null,r.onError.emit(o))},i.onload=function(){if(r._resolve){var o=i.width,s=i.height;if(!o||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var h=o*r.scale,c=s*r.scale;(r._overrideWidth||r._overrideHeight)&&(h=r._overrideWidth||r._overrideHeight/s*o,c=r._overrideHeight||r._overrideWidth/o*s),h=Math.round(h),c=Math.round(c);var d=r.source;d.width=h,d.height=c,d._pixiId="canvas_"+bn(),d.getContext("2d").drawImage(i,0,0,o,s,0,0,h,c),r._resolve(),r._resolve=null}}},e.getSize=function(r){var i=e.SVG_SIZE.exec(r),o={};return i&&(o[i[1]]=Math.round(parseFloat(i[3])),o[i[5]]=Math.round(parseFloat(i[7]))),o},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(r,i){return i==="svg"||typeof r=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(r)||typeof r=="string"&&e.SVG_XML.test(r)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(Wi),Du=function(t){yr(e,t);function e(r,i){var o=this;if(i=i||{},!(r instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),typeof r=="string"&&(r=[r]);var h=r[0].src||r[0];Wi.crossOrigin(s,h,i.crossorigin);for(var c=0;c<r.length;++c){var d=document.createElement("source"),_=r[c],y=_.src,I=_.mime;y=y||r[c];var E=y.split("?").shift().toLowerCase(),S=E.slice(E.lastIndexOf(".")+1);I=I||e.MIME_TYPES[S]||"video/"+S,d.src=y,d.type=I,s.appendChild(d)}r=s}return o=t.call(this,r)||this,o.noSubImage=!0,o._autoUpdate=!0,o._isConnectedToTicker=!1,o._updateFPS=i.updateFPS||0,o._msToNextUpdate=0,o.autoPlay=i.autoPlay!==!1,o._load=null,o._resolve=null,o._onCanPlay=o._onCanPlay.bind(o),o._onError=o._onError.bind(o),i.autoLoad!==!1&&o.load(),o}return e.prototype.update=function(r){if(!this.destroyed){var i=jr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var r=this;if(this._load)return this._load;var i=this.source;return(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0),i.addEventListener("play",this._onPlayStart.bind(this)),i.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(i.addEventListener("canplay",this._onCanPlay),i.addEventListener("canplaythrough",this._onCanPlay),i.addEventListener("error",this._onError,!0)),this._load=new Promise(function(o){r.valid?o(r):(r._resolve=o,i.load())}),this._load},e.prototype._onError=function(r){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(r)},e.prototype._isSourcePlaying=function(){var r=this.source;return r.currentTime>0&&r.paused===!1&&r.ended===!1&&r.readyState>2},e.prototype._isSourceReady=function(){var r=this.source;return r.readyState===3||r.readyState===4},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(jr.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(jr.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var r=this.source;r.removeEventListener("canplay",this._onCanPlay),r.removeEventListener("canplaythrough",this._onCanPlay);var i=this.valid;this.resize(r.videoWidth,r.videoHeight),!i&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&r.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(jr.shared.remove(this.update,this),this._isConnectedToTicker=!1);var r=this.source;r&&(r.removeEventListener("error",this._onError,!0),r.pause(),r.src="",r.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(jr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(jr.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(r){r!==this._updateFPS&&(this._updateFPS=r)},enumerable:!1,configurable:!0}),e.test=function(r,i){return globalThis.HTMLVideoElement&&r instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(Wi),Lu=function(t){yr(e,t);function e(r){return t.call(this,r)||this}return e.test=function(r){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&r instanceof ImageBitmap},e}(Wi);Ns.push(ih,Lu,wu,Du,Cu,ao,Mu,Ou);var rp={__proto__:null,Resource:no,BaseImageResource:Wi,INSTALLED:Ns,autoDetectResource:eh,AbstractMultiResource:rh,ArrayResource:Ou,BufferResource:ao,CanvasResource:wu,CubeResource:Mu,ImageResource:ih,SVGResource:Cu,VideoResource:Du,ImageBitmapResource:Lu},Ay=function(t){yr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.upload=function(r,i,o){var s=r.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Ti.UNPACK);var h=i.realWidth,c=i.realHeight;return o.width===h&&o.height===c?s.texSubImage2D(i.target,0,0,0,h,c,i.format,o.type,this.data):(o.width=h,o.height=c,s.texImage2D(i.target,0,o.internalFormat,h,c,0,i.format,o.type,this.data)),!0},e}(ao),Ba=function(){function t(e,r){this.width=Math.round(e||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Wr("disposeFramebuffer"),this.multisample=Fr.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(e,r){return e===void 0&&(e=0),this.colorTextures[e]=r||new ze(null,{scaleMode:ki.NEAREST,resolution:1,mipmap:Yi.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(e){return this.depthTexture=e||new ze(new Ay(null,{width:this.width,height:this.height}),{scaleMode:ki.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Yi.OFF,format:jt.DEPTH_COMPONENT,type:Te.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(e,r){if(e=Math.round(e),r=Math.round(r),!(e===this.width&&r===this.height)){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var o=this.colorTextures[i],s=o.resolution;o.setSize(e/s,r/s)}if(this.depthTexture){var s=this.depthTexture.resolution;this.depthTexture.setSize(e/s,r/s)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),$u=function(t){yr(e,t);function e(r){r===void 0&&(r={});var i=this;if(typeof r=="number"){var o=arguments[0],s=arguments[1],h=arguments[2],c=arguments[3];r={width:o,height:s,scaleMode:h,resolution:c}}return r.width=r.width||100,r.height=r.height||100,r.multisample=r.multisample!==void 0?r.multisample:Fr.NONE,i=t.call(this,null,r)||this,i.mipmap=Yi.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new Ba(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=r.multisample,i.maskStack=[],i.filterStack=[{}],i}return e.prototype.resize=function(r,i){this.framebuffer.resize(r*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(ze),Nu=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(e,r,i){var o=r.width,s=r.height;if(i){var h=e.width/2/o,c=e.height/2/s,d=e.x/o+h,_=e.y/s+c;i=xr.add(i,xr.NW),this.x0=d+h*xr.uX(i),this.y0=_+c*xr.uY(i),i=xr.add(i,2),this.x1=d+h*xr.uX(i),this.y1=_+c*xr.uY(i),i=xr.add(i,2),this.x2=d+h*xr.uX(i),this.y2=_+c*xr.uY(i),i=xr.add(i,2),this.x3=d+h*xr.uX(i),this.y3=_+c*xr.uY(i)}else this.x0=e.x/o,this.y0=e.y/s,this.x1=(e.x+e.width)/o,this.y1=e.y/s,this.x2=(e.x+e.width)/o,this.y2=(e.y+e.height)/s,this.x3=e.x/o,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},t}(),Fc=new Nu;function ca(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var Ne=function(t){yr(e,t);function e(r,i,o,s,h,c){var d=t.call(this)||this;if(d.noFrame=!1,i||(d.noFrame=!0,i=new qe(0,0,1,1)),r instanceof e&&(r=r.baseTexture),d.baseTexture=r,d._frame=i,d.trim=s,d.valid=!1,d._uvs=Fc,d.uvMatrix=null,d.orig=o||i,d._rotate=Number(h||0),h===!0)d._rotate=2;else if(d._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return d.defaultAnchor=c?new fr(c.x,c.y):new fr(0,0),d._updateID=0,d.textureCacheIds=[],r.valid?d.noFrame?r.valid&&d.onBaseTextureUpdated(r):d.frame=i:r.once("loaded",d.onBaseTextureUpdated,d),d.noFrame&&r.on("update",d.onBaseTextureUpdated,d),d}return e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(r){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=r.width,this._frame.height=r.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(r){if(this.baseTexture){if(r){var i=this.baseTexture.resource;i&&i.url&&si[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var r=this._frame.clone(),i=this._frame===this.orig?r:this.orig.clone(),o=new e(this.baseTexture,!this.noFrame&&r,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(o._frame=r),o},e.prototype.updateUvs=function(){this._uvs===Fc&&(this._uvs=new Nu),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(r,i,o){i===void 0&&(i={}),o===void 0&&(o=re.STRICT_TEXTURE_CACHE);var s=typeof r=="string",h=null;if(s)h=r;else if(r instanceof ze){if(!r.cacheId){var c=i&&i.pixiIdPrefix||"pixiid";r.cacheId=c+"-"+bn(),ze.addToCache(r,r.cacheId)}h=r.cacheId}else{if(!r._pixiId){var c=i&&i.pixiIdPrefix||"pixiid";r._pixiId=c+"_"+bn()}h=r._pixiId}var d=si[h];if(s&&o&&!d)throw new Error('The cacheId "'+h+'" does not exist in TextureCache.');return!d&&!(r instanceof ze)?(i.resolution||(i.resolution=Ds(r)),d=new e(new ze(r,i)),d.baseTexture.cacheId=h,ze.addToCache(d.baseTexture,h),e.addToCache(d,h)):!d&&r instanceof ze&&(d=new e(r),e.addToCache(d,h)),d},e.fromURL=function(r,i){var o=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),s=e.from(r,Object.assign({resourceOptions:o},i),!1),h=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):h.load().then(function(){return Promise.resolve(s)})},e.fromBuffer=function(r,i,o,s){return new e(ze.fromBuffer(r,i,o,s))},e.fromLoader=function(r,i,o,s){var h=new ze(r,Object.assign({scaleMode:re.SCALE_MODE,resolution:Ds(i)},s)),c=h.resource;c instanceof ih&&(c.url=i);var d=new e(h);return o||(o=i),ze.addToCache(d.baseTexture,o),e.addToCache(d,o),o!==i&&(ze.addToCache(d.baseTexture,i),e.addToCache(d,i)),d.baseTexture.valid?Promise.resolve(d):new Promise(function(_){d.baseTexture.once("loaded",function(){return _(d)})})},e.addToCache=function(r,i){i&&(r.textureCacheIds.indexOf(i)===-1&&r.textureCacheIds.push(i),si[i]&&console.warn("Texture added to the cache with an id ["+i+"] that already had an entry"),si[i]=r)},e.removeFromCache=function(r){if(typeof r=="string"){var i=si[r];if(i){var o=i.textureCacheIds.indexOf(r);return o>-1&&i.textureCacheIds.splice(o,1),delete si[r],i}}else if(r&&r.textureCacheIds){for(var s=0;s<r.textureCacheIds.length;++s)si[r.textureCacheIds[s]]===r&&delete si[r.textureCacheIds[s]];return r.textureCacheIds.length=0,r}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(r){this._frame=r,this.noFrame=!1;var i=r.x,o=r.y,s=r.width,h=r.height,c=i+s>this.baseTexture.width,d=o+h>this.baseTexture.height;if(c||d){var _=c&&d?"and":"or",y="X: "+i+" + "+s+" = "+(i+s)+" > "+this.baseTexture.width,I="Y: "+o+" + "+h+" = "+(o+h)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(y+" "+_+" "+I))}this.valid=s&&h&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=r),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(r){this._rotate=r,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new ze),ca(e._EMPTY),ca(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var r=re.ADAPTER.createCanvas(16,16),i=r.getContext("2d");r.width=16,r.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),e._WHITE=new e(ze.from(r)),ca(e._WHITE),ca(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(Ci),xn=function(t){yr(e,t);function e(r,i){var o=t.call(this,r,i)||this;return o.valid=!0,o.filterFrame=null,o.filterPoolKey=null,o.updateUvs(),o}return Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(r){this.framebuffer.multisample=r},enumerable:!1,configurable:!0}),e.prototype.resize=function(r,i,o){o===void 0&&(o=!0);var s=this.baseTexture.resolution,h=Math.round(r*s)/s,c=Math.round(i*s)/s;this.valid=h>0&&c>0,this._frame.width=this.orig.width=h,this._frame.height=this.orig.height=c,o&&this.baseTexture.resize(h,c),this.updateUvs()},e.prototype.setResolution=function(r){var i=this.baseTexture;i.resolution!==r&&(i.setResolution(r),this.resize(i.width,i.height,!1))},e.create=function(r){for(var i=arguments,o=[],s=1;s<arguments.length;s++)o[s-1]=i[s];return typeof r=="number"&&(ai("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),r={width:r,height:o[0],scaleMode:o[1],resolution:o[2]}),new e(new $u(r))},e}(Ne),ip=function(){function t(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(e,r,i){i===void 0&&(i=Fr.NONE);var o=new $u(Object.assign({width:e,height:r,resolution:1,multisample:i},this.textureOptions));return new xn(o)},t.prototype.getOptimalTexture=function(e,r,i,o){i===void 0&&(i=1),o===void 0&&(o=Fr.NONE);var s;e=Math.ceil(e*i-1e-6),r=Math.ceil(r*i-1e-6),!this.enableFullScreen||e!==this._pixelsWidth||r!==this._pixelsHeight?(e=Cs(e),r=Cs(r),s=((e&65535)<<16|r&65535)>>>0,o>1&&(s+=o*4294967296)):s=o>1?-o:-1,this.texturePool[s]||(this.texturePool[s]=[]);var h=this.texturePool[s].pop();return h||(h=this.createTexture(e,r,o)),h.filterPoolKey=s,h.setResolution(i),h},t.prototype.getFilterTexture=function(e,r,i){var o=this.getOptimalTexture(e.width,e.height,r||e.resolution,i||Fr.NONE);return o.filterFrame=e.filterFrame,o},t.prototype.returnTexture=function(e){var r=e.filterPoolKey;e.filterFrame=null,this.texturePool[r].push(e)},t.prototype.returnFilterTexture=function(e){this.returnTexture(e)},t.prototype.clear=function(e){if(e=e!==!1,e)for(var r in this.texturePool){var i=this.texturePool[r];if(i)for(var o=0;o<i.length;o++)i[o].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(var r in this.texturePool)if(Number(r)<0){var i=this.texturePool[r];if(i)for(var o=0;o<i.length;o++)i[o].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}},t.SCREEN_KEY=-1,t}(),Ol=function(){function t(e,r,i,o,s,h,c){r===void 0&&(r=0),i===void 0&&(i=!1),o===void 0&&(o=Te.FLOAT),this.buffer=e,this.size=r,this.normalized=i,this.type=o,this.stride=s,this.start=h,this.instance=c}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,r,i,o,s){return new t(e,r,i,o,s)},t}(),by=0,kr=function(){function t(e,r,i){r===void 0&&(r=!0),i===void 0&&(i=!1),this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=r,this.id=by++,this.disposeRunner=new Wr("disposeBuffer")}return t.prototype.update=function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===Mi.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?Mi.ELEMENT_ARRAY_BUFFER:Mi.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),xy={Float32Array,Uint32Array,Int32Array,Uint8Array};function Sy(t,e){for(var r=0,i=0,o={},s=0;s<t.length;s++)i+=e[s],r+=t[s].length;for(var h=new ArrayBuffer(r*4),c=null,d=0,s=0;s<t.length;s++){var _=e[s],y=t[s],I=Ka(y);o[I]||(o[I]=new xy[I](h)),c=o[I];for(var E=0;E<y.length;E++){var S=(E/_|0)*i+d,b=E%_;c[S+b]=y[E]}d+=_}return new Float32Array(h)}var Uc={5126:4,5123:2,5121:1},Ry=0,Py={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Uo=function(){function t(e,r){e===void 0&&(e=[]),r===void 0&&(r={}),this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=Ry++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Wr("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(e,r,i,o,s,h,c,d){if(i===void 0&&(i=0),o===void 0&&(o=!1),d===void 0&&(d=!1),!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof kr||(r instanceof Array&&(r=new Float32Array(r)),r=new kr(r));var _=e.split("|");if(_.length>1){for(var y=0;y<_.length;y++)this.addAttribute(_[y],r,i,o,s);return this}var I=this.buffers.indexOf(r);return I===-1&&(this.buffers.push(r),I=this.buffers.length-1),this.attributes[e]=new Ol(I,i,o,s,h,c,d),this.instanced=this.instanced||d,this},t.prototype.getAttribute=function(e){return this.attributes[e]},t.prototype.getBuffer=function(e){return this.buffers[this.getAttribute(e).buffer]},t.prototype.addIndex=function(e){return e instanceof kr||(e instanceof Array&&(e=new Uint16Array(e)),e=new kr(e)),e.type=Mi.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.indexOf(e)===-1&&this.buffers.push(e),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var e=[],r=[],i=new kr,o;for(o in this.attributes){var s=this.attributes[o],h=this.buffers[s.buffer];e.push(h.data),r.push(s.size*Uc[s.type]/4),s.buffer=0}for(i.data=Sy(e,r),o=0;o<this.buffers.length;o++)this.buffers[o]!==this.indexBuffer&&this.buffers[o].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var e in this.attributes){var r=this.attributes[e],i=this.buffers[r.buffer];return i.data.length/(r.stride/4||r.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,r=0;r<this.buffers.length;r++)e.buffers[r]=new kr(this.buffers[r].data.slice(0));for(var r in this.attributes){var i=this.attributes[r];e.attributes[r]=new Ol(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Mi.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var r=new t,i=[],o=[],s=[],h,c=0;c<e.length;c++){h=e[c];for(var d=0;d<h.buffers.length;d++)o[d]=o[d]||0,o[d]+=h.buffers[d].data.length,s[d]=0}for(var c=0;c<h.buffers.length;c++)i[c]=new Py[Ka(h.buffers[c].data)](o[c]),r.buffers[c]=new kr(i[c]);for(var c=0;c<e.length;c++){h=e[c];for(var d=0;d<h.buffers.length;d++)i[d].set(h.buffers[d].data,s[d]),s[d]+=h.buffers[d].data.length}if(r.attributes=h.attributes,h.indexBuffer){r.indexBuffer=r.buffers[h.buffers.indexOf(h.indexBuffer)],r.indexBuffer.type=Mi.ELEMENT_ARRAY_BUFFER;for(var _=0,y=0,I=0,E=0,c=0;c<h.buffers.length;c++)if(h.buffers[c]!==h.indexBuffer){E=c;break}for(var c in h.attributes){var S=h.attributes[c];(S.buffer|0)===E&&(y+=S.size*Uc[S.type]/4)}for(var c=0;c<e.length;c++){for(var b=e[c].indexBuffer.data,d=0;d<b.length;d++)r.indexBuffer.data[d+I]+=_;_+=e[c].buffers[E].data.length/y,I+=b.length}}return r},t}(),np=function(t){yr(e,t);function e(){var r=t.call(this)||this;return r.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),r}return e}(Uo),Fu=function(t){yr(e,t);function e(){var r=t.call(this)||this;return r.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),r.uvs=new Float32Array([0,0,1,0,1,1,0,1]),r.vertexBuffer=new kr(r.vertices),r.uvBuffer=new kr(r.uvs),r.addAttribute("aVertexPosition",r.vertexBuffer).addAttribute("aTextureCoord",r.uvBuffer).addIndex([0,1,2,0,2,3]),r}return e.prototype.map=function(r,i){var o=0,s=0;return this.uvs[0]=o,this.uvs[1]=s,this.uvs[2]=o+i.width/r.width,this.uvs[3]=s,this.uvs[4]=o+i.width/r.width,this.uvs[5]=s+i.height/r.height,this.uvs[6]=o,this.uvs[7]=s+i.height/r.height,o=i.x,s=i.y,this.vertices[0]=o,this.vertices[1]=s,this.vertices[2]=o+i.width,this.vertices[3]=s,this.vertices[4]=o+i.width,this.vertices[5]=s+i.height,this.vertices[6]=o,this.vertices[7]=s+i.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(Uo),Iy=0,Tn=function(){function t(e,r,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Iy++,this.static=!!r,this.ubo=!!i,e instanceof kr?(this.buffer=e,this.buffer.type=Mi.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new kr(new Float32Array(1)),this.buffer.type=Mi.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,r,i){if(!this.ubo)this.uniforms[e]=new t(r,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},t.from=function(e,r,i){return new t(e,r,i)},t.uboFrom=function(e,r){return new t(e,r??!0,!0)},t}(),op=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Fr.NONE,this.sourceFrame=new qe,this.destinationFrame=new qe,this.bindingSourceFrame=new qe,this.bindingDestinationFrame=new qe,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),da=[new fr,new fr,new fr,new fr],Sh=new Sr,Uu=function(){function t(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new ip,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new np,this.quadUv=new Fu,this.tempRect=new qe,this.activeState={},this.globalUniforms=new Tn({outputFrame:new qe,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(e,r){for(var i,o,s=this.renderer,h=this.defaultFilterStack,c=this.statePool.pop()||new op,d=this.renderer.renderTexture,_=r[0].resolution,y=r[0].multisample,I=r[0].padding,E=r[0].autoFit,S=(i=r[0].legacy)!==null&&i!==void 0?i:!0,b=1;b<r.length;b++){var x=r[b];_=Math.min(_,x.resolution),y=Math.min(y,x.multisample),I=this.useMaxPadding?Math.max(I,x.padding):I+x.padding,E=E&&x.autoFit,S=S||((o=x.legacy)!==null&&o!==void 0?o:!0)}h.length===1&&(this.defaultFilterStack[0].renderTexture=d.current),h.push(c),c.resolution=_,c.multisample=y,c.legacy=S,c.target=e,c.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),c.sourceFrame.pad(I);var $=this.tempRect.copyFrom(d.sourceFrame);s.projection.transform&&this.transformAABB(Sh.copyFrom(s.projection.transform).invert(),$),E?(c.sourceFrame.fit($),(c.sourceFrame.width<=0||c.sourceFrame.height<=0)&&(c.sourceFrame.width=0,c.sourceFrame.height=0)):c.sourceFrame.intersects($)||(c.sourceFrame.width=0,c.sourceFrame.height=0),this.roundFrame(c.sourceFrame,d.current?d.current.resolution:s.resolution,d.sourceFrame,d.destinationFrame,s.projection.transform),c.renderTexture=this.getOptimalFilterTexture(c.sourceFrame.width,c.sourceFrame.height,_,y),c.filters=r,c.destinationFrame.width=c.renderTexture.width,c.destinationFrame.height=c.renderTexture.height;var j=this.tempRect;j.x=0,j.y=0,j.width=c.sourceFrame.width,j.height=c.sourceFrame.height,c.renderTexture.filterFrame=c.sourceFrame,c.bindingSourceFrame.copyFrom(d.sourceFrame),c.bindingDestinationFrame.copyFrom(d.destinationFrame),c.transform=s.projection.transform,s.projection.transform=null,d.bind(c.renderTexture,c.sourceFrame,j),s.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var e=this.defaultFilterStack,r=e.pop(),i=r.filters;this.activeState=r;var o=this.globalUniforms.uniforms;o.outputFrame=r.sourceFrame,o.resolution=r.resolution;var s=o.inputSize,h=o.inputPixel,c=o.inputClamp;if(s[0]=r.destinationFrame.width,s[1]=r.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],h[0]=Math.round(s[0]*r.resolution),h[1]=Math.round(s[1]*r.resolution),h[2]=1/h[0],h[3]=1/h[1],c[0]=.5*h[2],c[1]=.5*h[3],c[2]=r.sourceFrame.width*s[2]-.5*h[2],c[3]=r.sourceFrame.height*s[3]-.5*h[3],r.legacy){var d=o.filterArea;d[0]=r.destinationFrame.width,d[1]=r.destinationFrame.height,d[2]=r.sourceFrame.x,d[3]=r.sourceFrame.y,o.filterClamp=o.inputClamp}this.globalUniforms.update();var _=e[e.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,r.renderTexture,_.renderTexture,nn.BLEND,r),this.returnFilterTexture(r.renderTexture);else{var y=r.renderTexture,I=this.getOptimalFilterTexture(y.width,y.height,r.resolution);I.filterFrame=y.filterFrame;var E=0;for(E=0;E<i.length-1;++E){E===1&&r.multisample>1&&(I=this.getOptimalFilterTexture(y.width,y.height,r.resolution),I.filterFrame=y.filterFrame),i[E].apply(this,y,I,nn.CLEAR,r);var S=y;y=I,I=S}i[E].apply(this,y,_.renderTexture,nn.BLEND,r),E>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(y),this.returnFilterTexture(I)}r.clear(),this.statePool.push(r)},t.prototype.bindAndClear=function(e,r){r===void 0&&(r=nn.CLEAR);var i=this.renderer,o=i.renderTexture,s=i.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e&&e.filterFrame){var h=this.tempRect;h.x=0,h.y=0,h.width=e.filterFrame.width,h.height=e.filterFrame.height,o.bind(e,e.filterFrame,h)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?o.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var c=s.stateId&1||this.forceClear;(r===nn.CLEAR||r===nn.BLIT&&c)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(e,r,i,o){var s=this.renderer;s.state.set(e.state),this.bindAndClear(i,o),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(yi.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(yi.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(e,r){var i=this.activeState,o=i.sourceFrame,s=i.destinationFrame,h=r._texture.orig,c=e.set(s.width,0,0,s.height,o.x,o.y),d=r.worldTransform.copyTo(Sr.TEMP_MATRIX);return d.invert(),c.prepend(d),c.scale(1/h.width,1/h.height),c.translate(r.anchor.x,r.anchor.y),c},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(e,r,i,o){return i===void 0&&(i=1),o===void 0&&(o=Fr.NONE),this.texturePool.getOptimalTexture(e,r,i,o)},t.prototype.getFilterTexture=function(e,r,i){if(typeof e=="number"){var o=e;e=r,r=o}e=e||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,i||Fr.NONE);return s.filterFrame=e.filterFrame,s},t.prototype.returnFilterTexture=function(e){this.texturePool.returnTexture(e)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(e,r){var i=da[0],o=da[1],s=da[2],h=da[3];i.set(r.left,r.top),o.set(r.left,r.bottom),s.set(r.right,r.top),h.set(r.right,r.bottom),e.apply(i,i),e.apply(o,o),e.apply(s,s),e.apply(h,h);var c=Math.min(i.x,o.x,s.x,h.x),d=Math.min(i.y,o.y,s.y,h.y),_=Math.max(i.x,o.x,s.x,h.x),y=Math.max(i.y,o.y,s.y,h.y);r.x=c,r.y=d,r.width=_-c,r.height=y-d},t.prototype.roundFrame=function(e,r,i,o,s){if(!(e.width<=0||e.height<=0||i.width<=0||i.height<=0)){if(s){var h=s.a,c=s.b,d=s.c,_=s.d;if((Math.abs(c)>1e-4||Math.abs(d)>1e-4)&&(Math.abs(h)>1e-4||Math.abs(_)>1e-4))return}s=s?Sh.copyFrom(s):Sh.identity(),s.translate(-i.x,-i.y).scale(o.width/i.width,o.height/i.height).translate(o.x,o.y),this.transformAABB(s,e),e.ceil(r),this.transformAABB(s.invert(),e)}},t}(),qs=function(){function t(e){this.renderer=e}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(e){},t}(),Bu=function(){function t(e){this.renderer=e,this.emptyRenderer=new qs(e),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(e,r){for(var i=this.renderer.texture.boundTextures,o=r-1;o>=0;--o)e[o]=i[o]||null,e[o]&&(e[o]._batchLocation=o)},t.prototype.boundArray=function(e,r,i,o){for(var s=e.elements,h=e.ids,c=e.count,d=0,_=0;_<c;_++){var y=s[_],I=y._batchLocation;if(I>=0&&I<o&&r[I]===y){h[_]=I;continue}for(;d<o;){var E=r[d];if(E&&E._batchEnabled===i&&E._batchLocation===d){d++;continue}h[_]=d,y._batchLocation=d,r[d]=y;break}}},t.prototype.destroy=function(){this.renderer=null},t}(),Bc=0,Gu=function(){function t(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=Bc++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=Bc++,this.renderer.runners.contextChange.emit(e)},t.prototype.initFromOptions=function(e){var r=this.createContext(this.renderer.view,e);this.initFromContext(r)},t.prototype.createContext=function(e,r){var i;if(re.PREFER_ENV>=ji.WEBGL2&&(i=e.getContext("webgl2",r)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var e=this.gl,r={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var e=this.renderer.view;this.renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(e){var r=e.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var o=i||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=o,o||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),sp=function(){function t(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Fr.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return t}(),Oy=new qe,ku=function(){function t(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new Ba(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new qe,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var r=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;re.PREFER_ENV===ji.WEBGL_LEGACY&&(r=null,i=null),r?e.drawBuffers=function(o){return r.drawBuffersWEBGL(o)}:(this.hasMRT=!1,e.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)},t.prototype.bind=function(e,r,i){i===void 0&&(i=0);var o=this.gl;if(e){var s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,o.bindFramebuffer(o.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=i),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,i)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var h=0;h<e.colorTextures.length;h++){var c=e.colorTextures[h];this.renderer.texture.unbind(c.parentTextureArray||c)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){var d=r.width>>i,_=r.height>>i,y=d/r.width;this.setViewport(r.x*y,r.y*y,d,_)}else{var d=e.width>>i,_=e.height>>i;this.setViewport(0,0,d,_)}}else this.current&&(this.current=null,o.bindFramebuffer(o.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(e,r,i,o){var s=this.viewport;e=Math.round(e),r=Math.round(r),i=Math.round(i),o=Math.round(o),(s.width!==i||s.height!==o||s.x!==e||s.y!==r)&&(s.x=e,s.y=r,s.width=i,s.height=o,this.gl.viewport(e,r,i,o))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(e,r,i,o,s){s===void 0&&(s=ws.COLOR|ws.DEPTH);var h=this.gl;h.clearColor(e,r,i,o),h.clear(s)},t.prototype.initFramebuffer=function(e){var r=this.gl,i=new sp(r.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i},t.prototype.resizeFramebuffer=function(e){var r=this.gl,i=e.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.RGBA8,e.width,e.height)),i.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height));var o=e.colorTextures,s=o.length;r.drawBuffers||(s=Math.min(s,1));for(var h=0;h<s;h++){var c=o[h],d=c.parentTextureArray||c;this.renderer.texture.bind(d,0)}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)},t.prototype.updateFramebuffer=function(e,r){var i=this.gl,o=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures,h=s.length;i.drawBuffers||(h=Math.min(h,1)),o.multisample>1&&this.canMultisampleFramebuffer(e)?(o.msaaBuffer=o.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,o.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,o.multisample,i.RGBA8,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,o.msaaBuffer)):o.msaaBuffer&&(i.deleteRenderbuffer(o.msaaBuffer),o.msaaBuffer=null,o.blitFramebuffer&&(o.blitFramebuffer.dispose(),o.blitFramebuffer=null));for(var c=[],d=0;d<h;d++){var _=s[d],y=_.parentTextureArray||_;this.renderer.texture.bind(y,0),!(d===0&&o.msaaBuffer)&&(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+d,_.target,y._glTextures[this.CONTEXT_UID].texture,r),c.push(i.COLOR_ATTACHMENT0+d))}if(c.length>1&&i.drawBuffers(c),e.depthTexture){var I=this.writeDepthTexture;if(I){var E=e.depthTexture;this.renderer.texture.bind(E,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,E._glTextures[this.CONTEXT_UID].texture,r)}}(e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)?(o.stencil=o.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,o.stencil),o.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,o.multisample,i.DEPTH24_STENCIL8,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,o.stencil)):o.stencil&&(i.deleteRenderbuffer(o.stencil),o.stencil=null)},t.prototype.canMultisampleFramebuffer=function(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture},t.prototype.detectSamples=function(e){var r=this.msaaSamples,i=Fr.NONE;if(e<=1||r===null)return i;for(var o=0;o<r.length;o++)if(r[o]<=e){i=r[o];break}return i===1&&(i=Fr.NONE),i},t.prototype.blit=function(e,r,i){var o=this,s=o.current,h=o.renderer,c=o.gl,d=o.CONTEXT_UID;if(h.context.webGLVersion===2&&s){var _=s.glFramebuffers[d];if(_){if(!e){if(!_.msaaBuffer)return;var y=s.colorTextures[0];if(!y)return;_.blitFramebuffer||(_.blitFramebuffer=new Ba(s.width,s.height),_.blitFramebuffer.addColorTexture(0,y)),e=_.blitFramebuffer,e.colorTextures[0]!==y&&(e.colorTextures[0]=y,e.dirtyId++,e.dirtyFormat++),(e.width!==s.width||e.height!==s.height)&&(e.width=s.width,e.height=s.height,e.dirtyId++,e.dirtySize++)}r||(r=Oy,r.width=s.width,r.height=s.height),i||(i=r);var I=r.width===i.width&&r.height===i.height;this.bind(e),c.bindFramebuffer(c.READ_FRAMEBUFFER,_.framebuffer),c.blitFramebuffer(r.left,r.top,r.right,r.bottom,i.left,i.top,i.right,i.bottom,c.COLOR_BUFFER_BIT,I?c.NEAREST:c.LINEAR)}}},t.prototype.disposeFramebuffer=function(e,r){var i=e.glFramebuffers[this.CONTEXT_UID],o=this.gl;if(i){delete e.glFramebuffers[this.CONTEXT_UID];var s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),r||(o.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&o.deleteRenderbuffer(i.msaaBuffer),i.stencil&&o.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(e){var r=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<r.length;i++)this.disposeFramebuffer(r[i],e)},t.prototype.forceStencil=function(){var e=this.current;if(e){var r=e.glFramebuffers[this.CONTEXT_UID];if(!(!r||r.stencil)){e.stencil=!0;var i=e.width,o=e.height,s=this.gl,h=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,h),r.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,r.multisample,s.DEPTH24_STENCIL8,i,o):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,o),r.stencil=h,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,h)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new qe},t.prototype.destroy=function(){this.renderer=null},t}(),Rh={5126:4,5123:2,5121:1},Xu=function(){function t(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){var i=this.renderer.context.extensions.vertexArrayObject;re.PREFER_ENV===ji.WEBGL_LEGACY&&(i=null),i?(e.createVertexArray=function(){return i.createVertexArrayOES()},e.bindVertexArray=function(s){return i.bindVertexArrayOES(s)},e.deleteVertexArray=function(s){return i.deleteVertexArrayOES(s)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(r.webGLVersion!==2){var o=e.getExtension("ANGLE_instanced_arrays");o?(e.vertexAttribDivisor=function(s,h){return o.vertexAttribDivisorANGLE(s,h)},e.drawElementsInstanced=function(s,h,c,d,_){return o.drawElementsInstancedANGLE(s,h,c,d,_)},e.drawArraysInstanced=function(s,h,c,d){return o.drawArraysInstancedANGLE(s,h,c,d)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex},t.prototype.bind=function(e,r){r=r||this.renderer.shader.shader;var i=this.gl,o=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;o||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=o={},s=!0);var h=o[r.program.id]||this.initGeometryVao(e,r,s);this._activeGeometry=e,this._activeVao!==h&&(this._activeVao=h,this.hasVao?i.bindVertexArray(h):this.activateVao(e,r.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var e=this._activeGeometry,r=this.renderer.buffer,i=0;i<e.buffers.length;i++){var o=e.buffers[i];r.update(o)}},t.prototype.checkCompatibility=function(e,r){var i=e.attributes,o=r.attributeData;for(var s in o)if(!i[s])throw new Error('shader and geometry incompatible, geometry missing the "'+s+'" attribute')},t.prototype.getSignature=function(e,r){var i=e.attributes,o=r.attributeData,s=["g",e.id];for(var h in i)o[h]&&s.push(h,o[h].location);return s.join("-")},t.prototype.initGeometryVao=function(e,r,i){i===void 0&&(i=!0);var o=this.gl,s=this.CONTEXT_UID,h=this.renderer.buffer,c=r.program;c.glPrograms[s]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,c);var d=this.getSignature(e,c),_=e.glVertexArrayObjects[this.CONTEXT_UID],y=_[d];if(y)return _[c.id]=y,y;var I=e.buffers,E=e.attributes,S={},b={};for(var x in I)S[x]=0,b[x]=0;for(var x in E)!E[x].size&&c.attributeData[x]?E[x].size=c.attributeData[x].size:E[x].size||console.warn("PIXI Geometry attribute '"+x+"' size cannot be determined (likely the bound shader does not have the attribute)"),S[E[x].buffer]+=E[x].size*Rh[E[x].type];for(var x in E){var $=E[x],j=$.size;$.stride===void 0&&(S[$.buffer]===j*Rh[$.type]?$.stride=0:$.stride=S[$.buffer]),$.start===void 0&&($.start=b[$.buffer],b[$.buffer]+=j*Rh[$.type])}y=o.createVertexArray(),o.bindVertexArray(y);for(var Y=0;Y<I.length;Y++){var Q=I[Y];h.bind(Q),i&&Q._glBuffers[s].refCount++}return this.activateVao(e,c),this._activeVao=y,_[c.id]=y,_[d]=y,y},t.prototype.disposeGeometry=function(e,r){var i;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var o=e.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,h=e.buffers,c=(i=this.renderer)===null||i===void 0?void 0:i.buffer;if(e.disposeRunner.remove(this),!!o){if(c)for(var d=0;d<h.length;d++){var _=h[d]._glBuffers[this.CONTEXT_UID];_&&(_.refCount--,_.refCount===0&&!r&&c.dispose(h[d],r))}if(!r){for(var y in o)if(y[0]==="g"){var I=o[y];this._activeVao===I&&this.unbind(),s.deleteVertexArray(I)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(e){for(var r=Object.keys(this.managedGeometries),i=0;i<r.length;i++)this.disposeGeometry(this.managedGeometries[r[i]],e)},t.prototype.activateVao=function(e,r){var i=this.gl,o=this.CONTEXT_UID,s=this.renderer.buffer,h=e.buffers,c=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);var d=null;for(var _ in c){var y=c[_],I=h[y.buffer],E=I._glBuffers[o];if(r.attributeData[_]){d!==E&&(s.bind(I),d=E);var S=r.attributeData[_].location;if(i.enableVertexAttribArray(S),i.vertexAttribPointer(S,y.size,y.type||i.FLOAT,y.normalized,y.stride,y.start),y.instance)if(this.hasInstance)i.vertexAttribDivisor(S,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},t.prototype.draw=function(e,r,i,o){var s=this.gl,h=this._activeGeometry;if(h.indexBuffer){var c=h.indexBuffer.data.BYTES_PER_ELEMENT,d=c===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;c===2||c===4&&this.canUseUInt32ElementIndex?h.instanced?s.drawElementsInstanced(e,r||h.indexBuffer.data.length,d,(i||0)*c,o||1):s.drawElements(e,r||h.indexBuffer.data.length,d,(i||0)*c):console.warn("unsupported index buffer type: uint32")}else h.instanced?s.drawArraysInstanced(e,i,r||h.getSize(),o||1):s.drawArrays(e,i,r||h.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),ap=function(){function t(e){e===void 0&&(e=null),this.type=Gr.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=re.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=Gr.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function Gc(t,e,r){var i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),i}function kc(t,e){var r=t.getShaderSource(e).split(`
`).map(function(_,y){return y+": "+_}),i=t.getShaderInfoLog(e),o=i.split(`
`),s={},h=o.map(function(_){return parseFloat(_.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(_){return _&&!s[_]?(s[_]=!0,!0):!1}),c=[""];h.forEach(function(_){r[_-1]="%c"+r[_-1]+"%c",c.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var d=r.join(`
`);c[0]=d,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,c),console.groupEnd()}function wy(t,e,r,i){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||kc(t,r),t.getShaderParameter(i,t.COMPILE_STATUS)||kc(t,i),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}function Ph(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function hp(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Ph(2*e);case"bvec3":return Ph(3*e);case"bvec4":return Ph(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var lp={},es=lp;function up(){if(es===lp||es&&es.isContextLost()){var t=re.ADAPTER.createCanvas(),e=void 0;re.PREFER_ENV>=ji.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),es=e}return es}var fa;function My(){if(!fa){fa=Oi.MEDIUM;var t=up();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);fa=e.precision?Oi.HIGH:Oi.MEDIUM}}return fa}function Xc(t,e,r){if(t.substring(0,9)!=="precision"){var i=e;return e===Oi.HIGH&&r!==Oi.HIGH&&(i=Oi.MEDIUM),"precision "+i+` float;
`+t}else if(r!==Oi.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}var Cy={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function cp(t){return Cy[t]}var _a=null,Hc={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function dp(t,e){if(!_a){var r=Object.keys(Hc);_a={};for(var i=0;i<r.length;++i){var o=r[i];_a[t[o]]=Hc[o]}}return _a[e]}var eo=[{test:function(t){return t.type==="float"&&t.size===1},code:function(t){return`
            if(uv["`+t+'"] !== ud["'+t+`"].value)
            {
                ud["`+t+'"].value = uv["'+t+`"]
                gl.uniform1f(ud["`+t+'"].location, uv["'+t+`"])
            }
            `}},{test:function(t){return(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray},code:function(t){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+t+`"], t);

            if(ud["`+t+`"].value !== t)
            {
                ud["`+t+`"].value = t;
                gl.uniform1i(ud["`+t+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(t,e){return t.type==="mat3"&&t.size===1&&e.a!==void 0},code:function(t){return`
            gl.uniformMatrix3fv(ud["`+t+'"].location, false, uv["'+t+`"].toArray(true));
            `},codeUbo:function(t){return`
                var `+t+"_matrix = uv."+t+`.toArray(true);

                data[offset] = `+t+`_matrix[0];
                data[offset+1] = `+t+`_matrix[1];
                data[offset+2] = `+t+`_matrix[2];
        
                data[offset + 4] = `+t+`_matrix[3];
                data[offset + 5] = `+t+`_matrix[4];
                data[offset + 6] = `+t+`_matrix[5];
        
                data[offset + 8] = `+t+`_matrix[6];
                data[offset + 9] = `+t+`_matrix[7];
                data[offset + 10] = `+t+`_matrix[8];
            `}},{test:function(t,e){return t.type==="vec2"&&t.size===1&&e.x!==void 0},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+t+`"].location, v.x, v.y);
                }`},codeUbo:function(t){return`
                v = uv.`+t+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(t){return t.type==="vec2"&&t.size===1},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+t+`"].location, v[0], v[1]);
                }
            `}},{test:function(t,e){return t.type==="vec4"&&t.size===1&&e.width!==void 0},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+t+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(t){return`
                    v = uv.`+t+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(t){return t.type==="vec4"&&t.size===1},code:function(t){return`
                cv = ud["`+t+`"].value;
                v = uv["`+t+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+t+`"].location, v[0], v[1], v[2], v[3])
                }`}}],Dy={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},Ly={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function $y(t,e){var r,i=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(var o in t.uniforms){var s=e[o];if(!s){!((r=t.uniforms[o])===null||r===void 0)&&r.group&&(t.uniforms[o].ubo?i.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+o+", '"+o+`');
                    `):i.push(`
                        renderer.shader.syncUniformGroup(uv.`+o+`, syncData);
                    `));continue}for(var h=t.uniforms[o],c=!1,d=0;d<eo.length;d++)if(eo[d].test(s,h)){i.push(eo[d].code(o,h)),c=!0;break}if(!c){var _=s.size===1?Dy:Ly,y=_[s.type].replace("location",'ud["'+o+'"].location');i.push(`
            cu = ud["`+o+`"];
            cv = cu.value;
            v = uv["`+o+`"];
            `+y+";")}}return new Function("ud","uv","renderer","syncData",i.join(`
`))}var Ny=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Fy(t){for(var e="",r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+="if(test == "+r+".0){}");return e}function fp(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var i=Ny.replace(/%forloop%/gi,Fy(t));if(e.shaderSource(r,i),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}return t}var rs;function Uy(){if(typeof rs=="boolean")return rs;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");rs=t({a:"b"},"a","b")===!0}catch{rs=!1}return rs}var By=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,Gy=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,ky=0,pa={},Bo=function(){function t(e,r,i){i===void 0&&(i="pixi-shader"),this.id=ky++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=r||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),pa[i]?(pa[i]++,i+="-"+pa[i]):pa[i]=1,this.vertexSrc="#define SHADER_NAME "+i+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+i+`
`+this.fragmentSrc,this.vertexSrc=Xc(this.vertexSrc,re.PRECISION_VERTEX,Oi.HIGH),this.fragmentSrc=Xc(this.fragmentSrc,re.PRECISION_FRAGMENT,My())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return Gy},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return By},enumerable:!1,configurable:!0}),t.from=function(e,r,i){var o=e+r,s=Al[o];return s||(Al[o]=s=new t(e,r,i)),s},t}(),hn=function(){function t(e,r){this.uniformBindCount=0,this.program=e,r?r instanceof Tn?this.uniformGroup=r:this.uniformGroup=new Tn(r):this.uniformGroup=new Tn({})}return t.prototype.checkUniformExists=function(e,r){if(r.uniforms[e])return!0;for(var i in r.uniforms){var o=r.uniforms[i];if(o.group&&this.checkUniformExists(e,o))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,r,i){var o=Bo.from(e,r);return new t(o,i)},t}(),Ih=0,Oh=1,wh=2,Mh=3,Ch=4,Dh=5,Rn=function(){function t(){this.data=0,this.blendMode=xe.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(this.data&1<<Ih)},set:function(e){!!(this.data&1<<Ih)!==e&&(this.data^=1<<Ih)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(this.data&1<<Oh)},set:function(e){!!(this.data&1<<Oh)!==e&&(this.data^=1<<Oh)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(this.data&1<<wh)},set:function(e){!!(this.data&1<<wh)!==e&&(this.data^=1<<wh)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(this.data&1<<Mh)},set:function(e){!!(this.data&1<<Mh)!==e&&(this.data^=1<<Mh)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(this.data&1<<Dh)},set:function(e){!!(this.data&1<<Dh)!==e&&(this.data^=1<<Dh)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<Ch)},set:function(e){!!(this.data&1<<Ch)!==e&&(this.data^=1<<Ch)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(e){this.blend=e!==xe.NONE,this._blendMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),Xy=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,Hy=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,ln=function(t){yr(e,t);function e(r,i,o){var s=this,h=Bo.from(r||e.defaultVertexSrc,i||e.defaultFragmentSrc);return s=t.call(this,h,o)||this,s.padding=0,s.resolution=re.FILTER_RESOLUTION,s.multisample=re.FILTER_MULTISAMPLE,s.enabled=!0,s.autoFit=!0,s.state=new Rn,s}return e.prototype.apply=function(r,i,o,s,h){r.applyFilter(this,i,o,s)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._resolution=r},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return Hy},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return Xy},enumerable:!1,configurable:!0}),e}(hn),jy=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,Yy=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,jc=new Sr,nh=function(){function t(e,r){this._texture=e,this.mapCoord=new Sr,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(e,r){r===void 0&&(r=e);for(var i=this.mapCoord,o=0;o<e.length;o+=2){var s=e[o],h=e[o+1];r[o]=s*i.a+h*i.c+i.tx,r[o+1]=s*i.b+h*i.d+i.ty}return r},t.prototype.update=function(e){var r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;var i=r._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var o=r.orig,s=r.trim;s&&(jc.set(o.width/s.width,0,0,o.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(jc));var h=r.baseTexture,c=this.uClampFrame,d=this.clampMargin/h.resolution,_=this.clampOffset;return c[0]=(r._frame.x+d+_)/h.width,c[1]=(r._frame.y+d+_)/h.height,c[2]=(r._frame.x+r._frame.width-d+_)/h.width,c[3]=(r._frame.y+r._frame.height-d+_)/h.height,this.uClampOffset[0]=_/h.realWidth,this.uClampOffset[1]=_/h.realHeight,this.isSimple=r._frame.width===h.width&&r._frame.height===h.height&&r.rotate===0,!0},t}(),_p=function(t){yr(e,t);function e(r,i,o){var s=this,h=null;return typeof r!="string"&&i===void 0&&o===void 0&&(h=r,r=void 0,i=void 0,o=void 0),s=t.call(this,r||jy,i||Yy,o)||this,s.maskSprite=h,s.maskMatrix=new Sr,s}return Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(r){this._maskSprite=r,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(r,i,o,s){var h=this._maskSprite,c=h._texture;c.valid&&(c.uvMatrix||(c.uvMatrix=new nh(c,0)),c.uvMatrix.update(),this.uniforms.npmAlpha=c.baseTexture.alphaMode?0:1,this.uniforms.mask=c,this.uniforms.otherMatrix=r.calculateSpriteMatrix(this.maskMatrix,h).prepend(c.uvMatrix.mapCoord),this.uniforms.alpha=h.worldAlpha,this.uniforms.maskClamp=c.uvMatrix.uClampFrame,r.applyFilter(this,i,o,s))},e}(ln),Hu=function(){function t(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)},t.prototype.push=function(e,r){var i=r;if(!i.isMaskData){var o=this.maskDataPool.pop()||new ap;o.pooled=!0,o.maskObject=r,i=o}var s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(s),i._colorMask=s?s._colorMask:15,i.autoDetect&&this.detect(i),i._target=e,i.type!==Gr.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case Gr.SCISSOR:this.renderer.scissor.push(i);break;case Gr.STENCIL:this.renderer.stencil.push(i);break;case Gr.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case Gr.COLOR:this.pushColorMask(i);break}i.type===Gr.SPRITE&&this.maskStack.push(i)},t.prototype.pop=function(e){var r=this.maskStack.pop();if(!(!r||r._target!==e)){if(r.enabled)switch(r.type){case Gr.SCISSOR:this.renderer.scissor.pop(r);break;case Gr.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case Gr.SPRITE:this.popSpriteMask(r);break;case Gr.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){var i=this.maskStack[this.maskStack.length-1];i.type===Gr.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}},t.prototype.detect=function(e){var r=e.maskObject;r?r.isSprite?e.type=Gr.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Gr.SCISSOR:e.type=Gr.STENCIL:e.type=Gr.COLOR},t.prototype.pushSpriteMask=function(e){var r,i,o=e.maskObject,s=e._target,h=e._filters;h||(h=this.alphaMaskPool[this.alphaMaskIndex],h||(h=this.alphaMaskPool[this.alphaMaskIndex]=[new _p]));var c=this.renderer,d=c.renderTexture,_,y;if(d.current){var I=d.current;_=e.resolution||I.resolution,y=(r=e.multisample)!==null&&r!==void 0?r:I.multisample}else _=e.resolution||c.resolution,y=(i=e.multisample)!==null&&i!==void 0?i:c.multisample;h[0].resolution=_,h[0].multisample=y,h[0].maskSprite=o;var E=s.filterArea;s.filterArea=o.getBounds(!0),c.filter.push(s,h),s.filterArea=E,e._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.pushColorMask=function(e){var r=e._colorMask,i=e._colorMask=r&e.colorMask;i!==r&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)},t.prototype.popColorMask=function(e){var r=e._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==r&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)},t.prototype.destroy=function(){this.renderer=null},t}(),pp=function(){function t(e){this.renderer=e,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(e){var r=this.renderer.gl,i=this.getStackLength();this.maskStack=e;var o=this.getStackLength();o!==i&&(o===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),Yc=new Sr,Vc=[],ju=function(t){yr(e,t);function e(r){var i=t.call(this,r)||this;return i.glConst=re.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,i}return e.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._scissorCounter:0},e.prototype.calcScissorRect=function(r){var i;if(!r._scissorRectLocal){var o=r._scissorRect,s=r.maskObject,h=this.renderer,c=h.renderTexture,d=s.getBounds(!0,(i=Vc.pop())!==null&&i!==void 0?i:new qe);this.roundFrameToPixels(d,c.current?c.current.resolution:h.resolution,c.sourceFrame,c.destinationFrame,h.projection.transform),o&&d.fit(o),r._scissorRectLocal=d}},e.isMatrixRotated=function(r){if(!r)return!1;var i=r.a,o=r.b,s=r.c,h=r.d;return(Math.abs(o)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(i)>1e-4||Math.abs(h)>1e-4)},e.prototype.testScissor=function(r){var i=r.maskObject;if(!i.isFastRect||!i.isFastRect()||e.isMatrixRotated(i.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(r);var o=r._scissorRectLocal;return o.width>0&&o.height>0},e.prototype.roundFrameToPixels=function(r,i,o,s,h){e.isMatrixRotated(h)||(h=h?Yc.copyFrom(h):Yc.identity(),h.translate(-o.x,-o.y).scale(s.width/o.width,s.height/o.height).translate(s.x,s.y),this.renderer.filter.transformAABB(h,r),r.fit(s),r.x=Math.round(r.x*i),r.y=Math.round(r.y*i),r.width=Math.round(r.width*i),r.height=Math.round(r.height*i))},e.prototype.push=function(r){r._scissorRectLocal||this.calcScissorRect(r);var i=this.renderer.gl;r._scissorRect||i.enable(i.SCISSOR_TEST),r._scissorCounter++,r._scissorRect=r._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(r){var i=this.renderer.gl;r&&Vc.push(r._scissorRectLocal),this.getStackLength()>0?this._useCurrent():i.disable(i.SCISSOR_TEST)},e.prototype._useCurrent=function(){var r=this.maskStack[this.maskStack.length-1]._scissorRect,i;this.renderer.renderTexture.current?i=r.y:i=this.renderer.height-r.height-r.y,this.renderer.gl.scissor(r.x,i,r.width,r.height)},e}(pp),Yu=function(t){yr(e,t);function e(r){var i=t.call(this,r)||this;return i.glConst=re.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,i}return e.prototype.getStackLength=function(){var r=this.maskStack[this.maskStack.length-1];return r?r._stencilCounter:0},e.prototype.push=function(r){var i=r.maskObject,o=this.renderer.gl,s=r._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),o.clearStencil(0),o.clear(o.STENCIL_BUFFER_BIT),o.enable(o.STENCIL_TEST)),r._stencilCounter++;var h=r._colorMask;h!==0&&(r._colorMask=0,o.colorMask(!1,!1,!1,!1)),o.stencilFunc(o.EQUAL,s,4294967295),o.stencilOp(o.KEEP,o.KEEP,o.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,h!==0&&(r._colorMask=h,o.colorMask((h&1)!==0,(h&2)!==0,(h&4)!==0,(h&8)!==0)),this._useCurrent()},e.prototype.pop=function(r){var i=this.renderer.gl;if(this.getStackLength()===0)i.disable(i.STENCIL_TEST);else{var o=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=o?o._colorMask:15;s!==0&&(o._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilOp(i.KEEP,i.KEEP,i.DECR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,s!==0&&(o._colorMask=s,i.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}},e.prototype._useCurrent=function(){var r=this.renderer.gl;r.stencilFunc(r.EQUAL,this.getStackLength(),4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP)},e}(pp),Vu=function(){function t(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Sr,this.transform=null}return t.prototype.update=function(e,r,i,o){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,o),this.transform&&this.projectionMatrix.append(this.transform);var s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(e,r,i,o){var s=this.projectionMatrix,h=o?-1:1;s.identity(),s.a=1/r.width*2,s.d=h*(1/r.height*2),s.tx=-1-r.x*s.a,s.ty=-h-r.y*s.d},t.prototype.setTransform=function(e){},t.prototype.destroy=function(){this.renderer=null},t}(),Fn=new qe,is=new qe,Wu=function(){function t(e){this.renderer=e,this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new qe,this.destinationFrame=new qe,this.viewportFrame=new qe}return t.prototype.bind=function(e,r,i){e===void 0&&(e=null);var o=this.renderer;this.current=e;var s,h,c;e?(s=e.baseTexture,c=s.resolution,r||(Fn.width=e.frame.width,Fn.height=e.frame.height,r=Fn),i||(is.x=e.frame.x,is.y=e.frame.y,is.width=r.width,is.height=r.height,i=is),h=s.framebuffer):(c=o.resolution,r||(Fn.width=o.screen.width,Fn.height=o.screen.height,r=Fn),i||(i=Fn,i.width=r.width,i.height=r.height));var d=this.viewportFrame;d.x=i.x*c,d.y=i.y*c,d.width=i.width*c,d.height=i.height*c,e||(d.y=o.view.height-(d.y+d.height)),d.ceil(),this.renderer.framebuffer.bind(h,d),this.renderer.projection.update(i,r,c,!h),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(i)},t.prototype.clear=function(e,r){this.current?e=e||this.current.baseTexture.clearColor:e=e||this.clearColor;var i=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer.screen,s=i.width!==o.width||i.height!==o.height;if(s){var h=this.viewportFrame,c=h.x,d=h.y,_=h.width,y=h.height;c=Math.round(c),d=Math.round(d),_=Math.round(_),y=Math.round(y),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(c,d,_,y)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],r),s&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function Vy(t,e,r,i,o){r.buffer.update(o)}var Wy={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},mp={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function gp(t){for(var e=t.map(function(d){return{data:d,offset:0,dataLen:0,dirty:0}}),r=0,i=0,o=0,s=0;s<e.length;s++){var h=e[s];if(r=mp[h.data.type],h.data.size>1&&(r=Math.max(r,16)*h.data.size),h.dataLen=r,i%r!==0&&i<16){var c=i%r%16;i+=c,o+=c}i+r>16?(o=Math.ceil(o/16)*16,h.offset=o,o+=r,i=r):(h.offset=o,i+=r,o+=r)}return o=Math.ceil(o/16)*16,{uboElements:e,size:o}}function vp(t,e){var r=[];for(var i in t)e[i]&&r.push(e[i]);return r.sort(function(o,s){return o.index-s.index}),r}function yp(t,e){if(!t.autoManage)return{size:0,syncFunc:Vy};for(var r=vp(t.uniforms,e),i=gp(r),o=i.uboElements,s=i.size,h=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],c=0;c<o.length;c++){for(var d=o[c],_=t.uniforms[d.data.name],y=d.data.name,I=!1,E=0;E<eo.length;E++){var S=eo[E];if(S.codeUbo&&S.test(d.data,_)){h.push("offset = "+d.offset/4+";",eo[E].codeUbo(d.data.name,_)),I=!0;break}}if(!I)if(d.data.size>1){var b=cp(d.data.type),x=Math.max(mp[d.data.type]/16,1),$=b/x,j=(4-$%4)%4;h.push(`
                cv = ud.`+y+`.value;
                v = uv.`+y+`;
                offset = `+d.offset/4+`;

                t = 0;

                for(var i=0; i < `+d.data.size*x+`; i++)
                {
                    for(var j = 0; j < `+$+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+j+`;
                }

                `)}else{var Y=Wy[d.data.type];h.push(`
                cv = ud.`+y+`.value;
                v = uv.`+y+`;
                offset = `+d.offset/4+`;
                `+Y+`;
                `)}}return h.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",h.join(`
`))}}var zy=function(){function t(){}return t}(),Ep=function(){function t(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();function qy(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),o=0;o<i;o++){var s=e.getActiveAttrib(t,o);if(s.name.indexOf("gl_")!==0){var h=dp(e,s.type),c={type:h,name:s.name,size:cp(h),location:e.getAttribLocation(t,s.name)};r[s.name]=c}}return r}function Zy(t,e){for(var r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),o=0;o<i;o++){var s=e.getActiveUniform(t,o),h=s.name.replace(/\[.*?\]$/,""),c=!!s.name.match(/\[.*?\]$/),d=dp(e,s.type);r[h]={name:h,index:o,type:d,size:s.size,isArray:c,value:hp(d,s.size)}}return r}function Tp(t,e){var r=Gc(t,t.VERTEX_SHADER,e.vertexSrc),i=Gc(t,t.FRAGMENT_SHADER,e.fragmentSrc),o=t.createProgram();if(t.attachShader(o,r),t.attachShader(o,i),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||wy(t,o,r,i),e.attributeData=qy(o,t),e.uniformData=Zy(o,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var s=Object.keys(e.attributeData);s.sort(function(y,I){return y>I?1:-1});for(var h=0;h<s.length;h++)e.attributeData[s[h]].location=h,t.bindAttribLocation(o,h,s[h]);t.linkProgram(o)}t.deleteShader(r),t.deleteShader(i);var c={};for(var h in e.uniformData){var d=e.uniformData[h];c[h]={location:t.getUniformLocation(o,h),value:hp(d.type,d.size)}}var _=new Ep(o,c);return _}var Qy=0,ma={textureCount:0,uboCount:0},zu=function(){function t(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Qy++}return t.prototype.systemCheck=function(){if(!Uy())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(e){this.gl=e,this.reset()},t.prototype.bind=function(e,r){e.uniforms.globals=this.renderer.globalUniforms;var i=e.program,o=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(o.program)),r||(ma.textureCount=0,ma.uboCount=0,this.syncUniformGroup(e.uniformGroup,ma)),o},t.prototype.setUniforms=function(e){var r=this.shader.program,i=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(i.uniformData,e,this.renderer)},t.prototype.syncUniformGroup=function(e,r){var i=this.getGlProgram();(!e.static||e.dirtyId!==i.uniformDirtyGroups[e.id])&&(i.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,i,r))},t.prototype.syncUniforms=function(e,r,i){var o=e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e);o(r.uniformData,e.uniforms,this.renderer,i)},t.prototype.createSyncGroups=function(e){var r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=$y(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(e,r){var i=this.getGlProgram();if(!e.static||e.dirtyId!==0||!i.uniformGroups[e.id]){e.dirtyId=0;var o=i.uniformGroups[e.id]||this.createSyncBufferGroup(e,i,r);e.buffer.update(),o(i.uniformData,e.uniforms,this.renderer,ma,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,i.uniformBufferBindings[r])},t.prototype.createSyncBufferGroup=function(e,r,i){var o=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var s=this.gl.getUniformBlockIndex(r.program,i);r.uniformBufferBindings[i]=this.shader.uniformBindCount,o.uniformBlockBinding(r.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;var h=this.getSignature(e,this.shader.program.uniformData,"ubo"),c=this._uboCache[h];if(c||(c=this._uboCache[h]=yp(e,this.shader.program.uniformData)),e.autoManage){var d=new Float32Array(c.size/4);e.buffer.update(d)}return r.uniformGroups[e.id]=c.syncFunc,r.uniformGroups[e.id]},t.prototype.getSignature=function(e,r,i){var o=e.uniforms,s=[i+"-"];for(var h in o)s.push(h),r[h]&&s.push(r[h].type);return s.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(e){var r=this.gl,i=e.program,o=Tp(r,i);return i.glPrograms[this.renderer.CONTEXT_UID]=o,o},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}();function Jy(t,e){return e===void 0&&(e=[]),e[xe.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[xe.ADD]=[t.ONE,t.ONE],e[xe.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[xe.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[xe.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[xe.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[xe.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[xe.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[xe.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[xe.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[xe.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[xe.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[xe.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[xe.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[xe.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[xe.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[xe.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[xe.NONE]=[0,0],e[xe.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[xe.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[xe.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[xe.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[xe.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[xe.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[xe.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[xe.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[xe.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[xe.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[xe.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[xe.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}var Ky=0,tE=1,eE=2,rE=3,iE=4,nE=5,qu=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=xe.NONE,this._blendEq=!1,this.map=[],this.map[Ky]=this.setBlend,this.map[tE]=this.setOffset,this.map[eE]=this.setCullFace,this.map[rE]=this.setDepthTest,this.map[iE]=this.setFrontFace,this.map[nE]=this.setDepthMask,this.checks=[],this.defaultState=new Rn,this.defaultState.blend=!0}return t.prototype.contextChange=function(e){this.gl=e,this.blendModes=Jy(e),this.set(this.defaultState),this.reset()},t.prototype.set=function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var r=this.stateId^e.data,i=0;r;)r&1&&this.map[i].call(this,!!(e.data&1<<i)),r=r>>1,i++;this.stateId=e.data}for(var i=0;i<this.checks.length;i++)this.checks[i](this,e)},t.prototype.forceState=function(e){e=e||this.defaultState;for(var r=0;r<this.map.length;r++)this.map[r].call(this,!!(e.data&1<<r));for(var r=0;r<this.checks.length;r++)this.checks[r](this,e);this.stateId=e.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(e){this.gl.depthMask(e)},t.prototype.setCullFace=function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])},t.prototype.setBlendMode=function(e){if(e!==this.blendMode){this.blendMode=e;var r=this.blendModes[e],i=this.gl;r.length===2?i.blendFunc(r[0],r[1]):i.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,i.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},t.prototype.setPolygonOffset=function(e,r){this.gl.polygonOffset(e,r)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(e,r){var i=this.checks.indexOf(e);r&&i===-1?this.checks.push(e):!r&&i!==-1&&this.checks.splice(i,1)},t.checkBlendMode=function(e,r){e.setBlendMode(r.blendMode)},t.checkPolygonOffset=function(e,r){e.setPolygonOffset(1,r.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),Zu=function(){function t(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=re.GC_MAX_IDLE,this.checkCountMax=re.GC_MAX_CHECK_COUNT,this.mode=re.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Ua.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var e=this.renderer.texture,r=e.managedTextures,i=!1,o=0;o<r.length;o++){var s=r[o];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),r[o]=null,i=!0)}if(i){for(var h=0,o=0;o<r.length;o++)r[o]!==null&&(r[h++]=r[o]);r.length=h}},t.prototype.unload=function(e){var r=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&r.destroyTexture(i);for(var o=e.children.length-1;o>=0;o--)this.unload(e.children[o])},t.prototype.destroy=function(){this.renderer=null},t}();function oE(t){var e,r,i,o,s,h,c,d,_,y,I,E,S,b,x,$,j,Y,Q,it,J,K,Tt;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?Tt=(e={},e[Te.UNSIGNED_BYTE]=(r={},r[jt.RGBA]=t.RGBA8,r[jt.RGB]=t.RGB8,r[jt.RG]=t.RG8,r[jt.RED]=t.R8,r[jt.RGBA_INTEGER]=t.RGBA8UI,r[jt.RGB_INTEGER]=t.RGB8UI,r[jt.RG_INTEGER]=t.RG8UI,r[jt.RED_INTEGER]=t.R8UI,r[jt.ALPHA]=t.ALPHA,r[jt.LUMINANCE]=t.LUMINANCE,r[jt.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,r),e[Te.BYTE]=(i={},i[jt.RGBA]=t.RGBA8_SNORM,i[jt.RGB]=t.RGB8_SNORM,i[jt.RG]=t.RG8_SNORM,i[jt.RED]=t.R8_SNORM,i[jt.RGBA_INTEGER]=t.RGBA8I,i[jt.RGB_INTEGER]=t.RGB8I,i[jt.RG_INTEGER]=t.RG8I,i[jt.RED_INTEGER]=t.R8I,i),e[Te.UNSIGNED_SHORT]=(o={},o[jt.RGBA_INTEGER]=t.RGBA16UI,o[jt.RGB_INTEGER]=t.RGB16UI,o[jt.RG_INTEGER]=t.RG16UI,o[jt.RED_INTEGER]=t.R16UI,o[jt.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,o),e[Te.SHORT]=(s={},s[jt.RGBA_INTEGER]=t.RGBA16I,s[jt.RGB_INTEGER]=t.RGB16I,s[jt.RG_INTEGER]=t.RG16I,s[jt.RED_INTEGER]=t.R16I,s),e[Te.UNSIGNED_INT]=(h={},h[jt.RGBA_INTEGER]=t.RGBA32UI,h[jt.RGB_INTEGER]=t.RGB32UI,h[jt.RG_INTEGER]=t.RG32UI,h[jt.RED_INTEGER]=t.R32UI,h[jt.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,h),e[Te.INT]=(c={},c[jt.RGBA_INTEGER]=t.RGBA32I,c[jt.RGB_INTEGER]=t.RGB32I,c[jt.RG_INTEGER]=t.RG32I,c[jt.RED_INTEGER]=t.R32I,c),e[Te.FLOAT]=(d={},d[jt.RGBA]=t.RGBA32F,d[jt.RGB]=t.RGB32F,d[jt.RG]=t.RG32F,d[jt.RED]=t.R32F,d[jt.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,d),e[Te.HALF_FLOAT]=(_={},_[jt.RGBA]=t.RGBA16F,_[jt.RGB]=t.RGB16F,_[jt.RG]=t.RG16F,_[jt.RED]=t.R16F,_),e[Te.UNSIGNED_SHORT_5_6_5]=(y={},y[jt.RGB]=t.RGB565,y),e[Te.UNSIGNED_SHORT_4_4_4_4]=(I={},I[jt.RGBA]=t.RGBA4,I),e[Te.UNSIGNED_SHORT_5_5_5_1]=(E={},E[jt.RGBA]=t.RGB5_A1,E),e[Te.UNSIGNED_INT_2_10_10_10_REV]=(S={},S[jt.RGBA]=t.RGB10_A2,S[jt.RGBA_INTEGER]=t.RGB10_A2UI,S),e[Te.UNSIGNED_INT_10F_11F_11F_REV]=(b={},b[jt.RGB]=t.R11F_G11F_B10F,b),e[Te.UNSIGNED_INT_5_9_9_9_REV]=(x={},x[jt.RGB]=t.RGB9_E5,x),e[Te.UNSIGNED_INT_24_8]=($={},$[jt.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,$),e[Te.FLOAT_32_UNSIGNED_INT_24_8_REV]=(j={},j[jt.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,j),e):Tt=(Y={},Y[Te.UNSIGNED_BYTE]=(Q={},Q[jt.RGBA]=t.RGBA,Q[jt.RGB]=t.RGB,Q[jt.ALPHA]=t.ALPHA,Q[jt.LUMINANCE]=t.LUMINANCE,Q[jt.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,Q),Y[Te.UNSIGNED_SHORT_5_6_5]=(it={},it[jt.RGB]=t.RGB,it),Y[Te.UNSIGNED_SHORT_4_4_4_4]=(J={},J[jt.RGBA]=t.RGBA,J),Y[Te.UNSIGNED_SHORT_5_5_5_1]=(K={},K[jt.RGBA]=t.RGBA,K),Y),Tt}var Ma=function(){function t(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Te.UNSIGNED_BYTE,this.internalFormat=jt.RGBA,this.samplerType=0}return t}(),Qu=function(){function t(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new ze,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=oE(e);var r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(var i=0;i<r;i++)this.boundTextures[i]=null;this.emptyTextures={};var o=new Ma(e.createTexture());e.bindTexture(e.TEXTURE_2D,o.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=o,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Ma(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var i=0;i<this.boundTextures.length;i++)this.bind(null,i)},t.prototype.bind=function(e,r){r===void 0&&(r=0);var i=this.gl;if(e=e==null?void 0:e.castToBaseTexture(),e&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var o=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(e.target,o.texture)),o.dirtyId!==e.dirtyId&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),this.updateTexture(e)),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[r]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture},t.prototype.unbind=function(e){var r=this,i=r.gl,o=r.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var s=0;s<o.length;s++)o[s]===this.unknownTexture&&this.bind(null,s)}for(var s=0;s<o.length;s++)o[s]===e&&(this.currentLocation!==s&&(i.activeTexture(i.TEXTURE0+s),this.currentLocation=s),i.bindTexture(e.target,this.emptyTextures[e.target].texture),o[s]=null)},t.prototype.ensureSamplerType=function(e){var r=this,i=r.boundTextures,o=r.hasIntegerTextures,s=r.CONTEXT_UID;if(o)for(var h=e-1;h>=0;--h){var c=i[h];if(c){var d=c._glTextures[s];d.samplerType!==Ms.FLOAT&&this.renderer.texture.unbind(c)}}},t.prototype.initTexture=function(e){var r=new Ma(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r},t.prototype.initTextureType=function(e,r){var i,o;r.internalFormat=(o=(i=this.internalFormats[e.type])===null||i===void 0?void 0:i[e.format])!==null&&o!==void 0?o:e.format,this.webGLVersion===2&&e.type===Te.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type},t.prototype.updateTexture=function(e){var r=e._glTextures[this.CONTEXT_UID];if(r){var i=this.renderer;if(this.initTextureType(e,r),e.resource&&e.resource.upload(i,e,r))r.samplerType!==Ms.FLOAT&&(this.hasIntegerTextures=!0);else{var o=e.realWidth,s=e.realHeight,h=i.gl;(r.width!==o||r.height!==s||r.dirtyId<0)&&(r.width=o,r.height=s,h.texImage2D(e.target,0,r.internalFormat,o,s,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}},t.prototype.destroyTexture=function(e,r){var i=this.gl;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){var o=this.managedTextures.indexOf(e);o!==-1&&to(this.managedTextures,o,1)}},t.prototype.updateTextureStyle=function(e){var r=e._glTextures[this.CONTEXT_UID];r&&((e.mipmap===Yi.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=Hi.CLAMP:r.wrapMode=e.wrapMode,e.resource&&e.resource.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)},t.prototype.setStyle=function(e,r){var i=this.gl;if(r.mipmap&&e.mipmap!==Yi.ON_MANUAL&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,r.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===ki.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var o=this.renderer.context.extensions.anisotropicFiltering;if(o&&e.anisotropicLevel>0&&e.scaleMode===ki.LINEAR){var s=Math.min(e.anisotropicLevel,i.getParameter(o.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(e.target,o.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===ki.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===ki.LINEAR?i.LINEAR:i.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),Ap={__proto__:null,FilterSystem:Uu,BatchSystem:Bu,ContextSystem:Gu,FramebufferSystem:ku,GeometrySystem:Xu,MaskSystem:Hu,ScissorSystem:ju,StencilSystem:Yu,ProjectionSystem:Vu,RenderTextureSystem:Wu,ShaderSystem:zu,StateSystem:qu,TextureGCSystem:Zu,TextureSystem:Qu},Lh=new Sr,bp=function(t){yr(e,t);function e(r,i){r===void 0&&(r=Mo.UNKNOWN);var o=t.call(this)||this;return i=Object.assign({},re.RENDER_OPTIONS,i),o.options=i,o.type=r,o.screen=new qe(0,0,i.width,i.height),o.view=i.view||re.ADAPTER.createCanvas(),o.resolution=i.resolution||re.RESOLUTION,o.useContextAlpha=i.useContextAlpha,o.autoDensity=!!i.autoDensity,o.preserveDrawingBuffer=i.preserveDrawingBuffer,o.clearBeforeRender=i.clearBeforeRender,o._backgroundColor=0,o._backgroundColorRgba=[0,0,0,1],o._backgroundColorString="#000000",o.backgroundColor=i.backgroundColor||o._backgroundColor,o.backgroundAlpha=i.backgroundAlpha,i.transparent!==void 0&&(ai("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),o.useContextAlpha=i.transparent,o.backgroundAlpha=i.transparent?0:1),o._lastObjectRendered=null,o.plugins={},o}return e.prototype.initPlugins=function(r){for(var i in r)this.plugins[i]=new r[i](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(r,i){this.view.width=Math.round(r*this.resolution),this.view.height=Math.round(i*this.resolution);var o=this.view.width/this.resolution,s=this.view.height/this.resolution;this.screen.width=o,this.screen.height=s,this.autoDensity&&(this.view.style.width=o+"px",this.view.style.height=s+"px"),this.emit("resize",o,s)},e.prototype.generateTexture=function(r,i,o,s){i===void 0&&(i={}),typeof i=="number"&&(ai("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),i={scaleMode:i,resolution:o,region:s});var h=i.region,c=Ey(i,["region"]);s=h||r.getLocalBounds(null,!0),s.width===0&&(s.width=1),s.height===0&&(s.height=1);var d=xn.create(Il({width:s.width,height:s.height},c));return Lh.tx=-s.x,Lh.ty=-s.y,this.render(r,{renderTexture:d,clear:!1,transform:Lh,skipUpdateTransform:!!r.parent}),d},e.prototype.destroy=function(r){for(var i in this.plugins)this.plugins[i].destroy(),this.plugins[i]=null;r&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var o=this;o.plugins=null,o.type=Mo.UNKNOWN,o.view=null,o.screen=null,o._tempDisplayObjectParent=null,o.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(r){this._backgroundColor=r,this._backgroundColorString=Au(r),io(r,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(r){this._backgroundColorRgba[3]=r},enumerable:!1,configurable:!0}),e}(Ci),sE=function(){function t(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return t}(),aE=function(){function t(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(e){var r=this,i=r.gl,o=r.CONTEXT_UID,s=e._glBuffers[o]||this.createGLBuffer(e);i.bindBuffer(e.type,s.buffer)},t.prototype.bindBufferBase=function(e,r){var i=this,o=i.gl,s=i.CONTEXT_UID;if(this.boundBufferBases[r]!==e){var h=e._glBuffers[s]||this.createGLBuffer(e);this.boundBufferBases[r]=e,o.bindBufferBase(o.UNIFORM_BUFFER,r,h.buffer)}},t.prototype.bindBufferRange=function(e,r,i){var o=this,s=o.gl,h=o.CONTEXT_UID;i=i||0;var c=e._glBuffers[h]||this.createGLBuffer(e);s.bindBufferRange(s.UNIFORM_BUFFER,r||0,c.buffer,i*256,256)},t.prototype.update=function(e){var r=this,i=r.gl,o=r.CONTEXT_UID,s=e._glBuffers[o];if(e._updateID!==s.updateID)if(s.updateID=e._updateID,i.bindBuffer(e.type,s.buffer),s.byteLength>=e.data.byteLength)i.bufferSubData(e.type,0,e.data);else{var h=e.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;s.byteLength=e.data.byteLength,i.bufferData(e.type,e.data,h)}},t.prototype.dispose=function(e,r){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var i=e._glBuffers[this.CONTEXT_UID],o=this.gl;e.disposeRunner.remove(this),i&&(r||o.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(e){for(var r=Object.keys(this.managedBuffers),i=0;i<r.length;i++)this.dispose(this.managedBuffers[r[i]],e)},t.prototype.createGLBuffer=function(e){var r=this,i=r.CONTEXT_UID,o=r.gl;return e._glBuffers[i]=new sE(o.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[i]},t}(),Ju=function(t){yr(e,t);function e(r){var i=t.call(this,Mo.WEBGL,r)||this;return r=i.options,i.gl=null,i.CONTEXT_UID=0,i.runners={destroy:new Wr("destroy"),contextChange:new Wr("contextChange"),reset:new Wr("reset"),update:new Wr("update"),postrender:new Wr("postrender"),prerender:new Wr("prerender"),resize:new Wr("resize")},i.runners.contextChange.add(i),i.globalUniforms=new Tn({projectionMatrix:new Sr},!0),i.addSystem(Hu,"mask").addSystem(Gu,"context").addSystem(qu,"state").addSystem(zu,"shader").addSystem(Qu,"texture").addSystem(aE,"buffer").addSystem(Xu,"geometry").addSystem(ku,"framebuffer").addSystem(ju,"scissor").addSystem(Yu,"stencil").addSystem(Vu,"projection").addSystem(Zu,"textureGC").addSystem(Uu,"filter").addSystem(Wu,"renderTexture").addSystem(Bu,"batch"),i.initPlugins(e.__plugins),i.multisample=void 0,r.context?i.context.initFromContext(r.context):i.context.initFromOptions({alpha:!!i.useContextAlpha,antialias:r.antialias,premultipliedAlpha:i.useContextAlpha&&i.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:i.options.powerPreference}),i.renderingToScreen=!0,X_(i.context.webGLVersion===2?"WebGL 2":"WebGL 1"),i.resize(i.options.width,i.options.height),i}return e.create=function(r){if(H_())return new e(r);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var r=this.gl,i;if(this.context.webGLVersion===1){var o=r.getParameter(r.FRAMEBUFFER_BINDING);r.bindFramebuffer(r.FRAMEBUFFER,null),i=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.FRAMEBUFFER,o)}else{var o=r.getParameter(r.DRAW_FRAMEBUFFER_BINDING);r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),i=r.getParameter(r.SAMPLES),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,o)}i>=Fr.HIGH?this.multisample=Fr.HIGH:i>=Fr.MEDIUM?this.multisample=Fr.MEDIUM:i>=Fr.LOW?this.multisample=Fr.LOW:this.multisample=Fr.NONE},e.prototype.addSystem=function(r,i){var o=new r(this);if(this[i])throw new Error('Whoops! The name "'+i+'" is already in use');this[i]=o;for(var s in this.runners)this.runners[s].add(o);return this},e.prototype.render=function(r,i){var o,s,h,c;if(i&&(i instanceof xn?(ai("6.0.0","Renderer#render arguments changed, use options instead."),o=i,s=arguments[2],h=arguments[3],c=arguments[4]):(o=i.renderTexture,s=i.clear,h=i.transform,c=i.skipUpdateTransform)),this.renderingToScreen=!o,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=h,!this.context.isLost){if(o||(this._lastObjectRendered=r),!c){var d=r.enableTempParent();r.updateTransform(),r.disableTempParent(d)}this.renderTexture.bind(o),this.batch.currentRenderer.start(),(s!==void 0?s:this.clearBeforeRender)&&this.renderTexture.clear(),r.render(this),this.batch.currentRenderer.flush(),o&&o.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(r,i,o,s){i===void 0&&(i={});var h=t.prototype.generateTexture.call(this,r,i,o,s);return this.framebuffer.blit(),h},e.prototype.resize=function(r,i){t.prototype.resize.call(this,r,i),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(r){this.runners.destroy.emit();for(var i in this.runners)this.runners[i].destroy();t.prototype.destroy.call(this,r),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return ai("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(r,i){ai("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),zi.add({name:r,type:ar.RendererPlugin,ref:i})},e.__plugins={},e}(bp);zi.handleByMap(ar.RendererPlugin,Ju.__plugins);function xp(t){return Ju.create(t)}var hE=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,lE=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Sp=hE,Ku=lE,uE=function(){function t(e){ai("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=e}return t.prototype.destroy=function(){this.renderer=null},t}(),Ga=function(){function t(){this.texArray=null,this.blend=0,this.type=yi.TRIANGLES,this.start=0,this.size=0,this.data=null}return t}(),ka=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0},t}(),Xa=function(){function t(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(e){return this[e+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(e+" isn't a valid view type")}},t}(),Rp=function(t){yr(e,t);function e(r){var i=t.call(this,r)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=Rn.for2d(),i.size=re.SPRITE_BATCH_SIZE*4,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),r.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return e.prototype.contextChange=function(){var r=this.renderer.gl;re.PREFER_ENV===ji.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),re.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=fp(this.MAX_TEXTURES,r)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var r=e._drawCallPool,i=e._textureArrayPool,o=this.size/4,s=Math.floor(o/this.MAX_TEXTURES)+1;r.length<o;)r.push(new Ga);for(;i.length<s;)i.push(new ka);for(var h=0;h<this.MAX_TEXTURES;h++)this._tempBoundTextures[h]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(r){r._texture.valid&&(this._vertexCount+r.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=r.vertexData.length/2,this._indexCount+=r.indices.length,this._bufferedTextures[this._bufferSize]=r._texture.baseTexture,this._bufferedElements[this._bufferSize++]=r)},e.prototype.buildTexturesAndDrawCalls=function(){var r=this,i=r._bufferedTextures,o=r.MAX_TEXTURES,s=e._textureArrayPool,h=this.renderer.batch,c=this._tempBoundTextures,d=this.renderer.textureGC.count,_=++ze._globalBatch,y=0,I=s[0],E=0;h.copyBoundTextures(c,o);for(var S=0;S<this._bufferSize;++S){var b=i[S];i[S]=null,b._batchEnabled!==_&&(I.count>=o&&(h.boundArray(I,c,_,o),this.buildDrawCalls(I,E,S),E=S,I=s[++y],++_),b._batchEnabled=_,b.touched=d,I.elements[I.count++]=b)}I.count>0&&(h.boundArray(I,c,_,o),this.buildDrawCalls(I,E,this._bufferSize),++y,++_);for(var S=0;S<c.length;S++)c[S]=null;ze._globalBatch=_},e.prototype.buildDrawCalls=function(r,i,o){var s=this,h=s._bufferedElements,c=s._attributeBuffer,d=s._indexBuffer,_=s.vertexSize,y=e._drawCallPool,I=this._dcIndex,E=this._aIndex,S=this._iIndex,b=y[I];b.start=this._iIndex,b.texArray=r;for(var x=i;x<o;++x){var $=h[x],j=$._texture.baseTexture,Y=xu[j.alphaMode?1:0][$.blendMode];h[x]=null,i<x&&b.blend!==Y&&(b.size=S-b.start,i=x,b=y[++I],b.texArray=r,b.start=S),this.packInterleavedGeometry($,c,d,E,S),E+=$.vertexData.length/2*_,S+=$.indices.length,b.blend=Y}i<o&&(b.size=S-b.start,++I),this._dcIndex=I,this._aIndex=E,this._iIndex=S},e.prototype.bindAndClearTexArray=function(r){for(var i=this.renderer.texture,o=0;o<r.count;o++)i.bind(r.elements[o],r.ids[o]),r.elements[o]=null;r.count=0},e.prototype.updateGeometry=function(){var r=this,i=r._packedGeometries,o=r._attributeBuffer,s=r._indexBuffer;re.CAN_UPLOAD_SAME_BUFFER?(i[this._flushId]._buffer.update(o.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,i[this._flushId]=new this.geometryClass),i[this._flushId]._buffer.update(o.rawBinaryData),i[this._flushId]._indexBuffer.update(s),this.renderer.geometry.bind(i[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var r=this._dcIndex,i=this.renderer,o=i.gl,s=i.state,h=e._drawCallPool,c=null,d=0;d<r;d++){var _=h[d],y=_.texArray,I=_.type,E=_.size,S=_.start,b=_.blend;c!==y&&(c=y,this.bindAndClearTexArray(y)),this.state.blendMode=b,s.set(this.state),o.drawElements(I,E,o.UNSIGNED_SHORT,S*2)}},e.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),re.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]&&this._packedGeometries[r].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(r){var i=Cs(Math.ceil(r/8)),o=Tl(i),s=i*8;this._aBuffers.length<=o&&(this._iBuffers.length=o+1);var h=this._aBuffers[s];return h||(this._aBuffers[s]=h=new Xa(s*this.vertexSize*4)),h},e.prototype.getIndexBuffer=function(r){var i=Cs(Math.ceil(r/12)),o=Tl(i),s=i*12;this._iBuffers.length<=o&&(this._iBuffers.length=o+1);var h=this._iBuffers[o];return h||(this._iBuffers[o]=h=new Uint16Array(s)),h},e.prototype.packInterleavedGeometry=function(r,i,o,s,h){for(var c=i.uint32View,d=i.float32View,_=s/this.vertexSize,y=r.uvs,I=r.indices,E=r.vertexData,S=r._texture.baseTexture._batchLocation,b=Math.min(r.worldAlpha,1),x=b<1&&r._texture.baseTexture.alphaMode?Ja(r._tintRGB,b):r._tintRGB+(b*255<<24),$=0;$<E.length;$+=2)d[s++]=E[$],d[s++]=E[$+1],d[s++]=y[$],d[s++]=y[$+1],c[s++]=x,d[s++]=S;for(var $=0;$<I.length;$++)o[h++]=_+I[$]},e._drawCallPool=[],e._textureArrayPool=[],e}(qs),Pp=function(){function t(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},r.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(r.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(e){if(!this.programCache[e]){for(var r=new Int32Array(e),i=0;i<e;i++)r[i]=i;this.defaultGroupCache[e]=Tn.from({uSamplers:r},!0);var o=this.fragTemplate;o=o.replace(/%count%/gi,""+e),o=o.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Bo(this.vertexSrc,o)}var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new Sr,default:this.defaultGroupCache[e]};return new hn(this.programCache[e],s)},t.prototype.generateSampleSrc=function(e){var r="";r+=`
`,r+=`
`;for(var i=0;i<e;i++)i>0&&(r+=`
else `),i<e-1&&(r+="if(vTextureId < "+i+".5)"),r+=`
{`,r+=`
	color = texture2D(uSamplers[`+i+"], vTextureCoord);",r+=`
}`;return r+=`
`,r+=`
`,r},t}(),t0=function(t){yr(e,t);function e(r){r===void 0&&(r=!1);var i=t.call(this)||this;return i._buffer=new kr(null,r,!1),i._indexBuffer=new kr(null,r,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,Te.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,Te.FLOAT).addAttribute("aColor",i._buffer,4,!0,Te.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,Te.FLOAT).addIndex(i._indexBuffer),i}return e}(Uo),Wc=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,zc=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Ip=function(){function t(){}return t.create=function(e){var r=Object.assign({vertex:Wc,fragment:zc,geometryClass:t0,vertexSize:6},e),i=r.vertex,o=r.fragment,s=r.vertexSize,h=r.geometryClass;return function(c){yr(d,c);function d(_){var y=c.call(this,_)||this;return y.shaderGenerator=new Pp(i,o),y.geometryClass=h,y.vertexSize=s,y}return d}(Rp)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return Wc},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return zc},enumerable:!1,configurable:!0}),t}(),e0=Ip.create();Object.assign(e0,{extension:{name:"batch",type:ar.RendererPlugin}});var Op={},cE=function(t){Object.defineProperty(Op,t,{get:function(){return ai("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),rp[t]}})};for(var r0 in rp)cE(r0);var wp={},dE=function(t){Object.defineProperty(wp,t,{get:function(){return ai("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),Ap[t]}})};for(var r0 in Ap)dE(r0);var fE="6.5.2";/*!
 * @pixi/accessibility - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Mp={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Lr.mixin(Mp);var _E=9,ga=100,pE=0,mE=0,qc=2,Zc=1,gE=-1e3,vE=-1e3,yE=2,Cp=function(){function t(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(vi.tablet||vi.phone)&&this.createTouchHook();var r=document.createElement("div");r.style.width=ga+"px",r.style.height=ga+"px",r.style.position="absolute",r.style.top=pE+"px",r.style.left=mE+"px",r.style.zIndex=qc.toString(),this.div=r,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var e=this,r=document.createElement("button");r.style.width=Zc+"px",r.style.height=Zc+"px",r.style.position="absolute",r.style.top=gE+"px",r.style.left=vE+"px",r.style.zIndex=yE.toString(),r.style.backgroundColor="#FF0000",r.title="select to enable accessibility for this content",r.addEventListener("focus",function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()}),document.body.appendChild(r),this._hookDiv=r},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)===null||e===void 0||e.appendChild(this.div))},t.prototype.deactivate=function(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)===null||e===void 0||e.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(e){if(!(!e.visible||!e.accessibleChildren)){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var r=e.children;if(r)for(var i=0;i<r.length;i++)this.updateAccessibleObjects(r[i])}},t.prototype.update=function(){var e=performance.now();if(!(vi.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var r=this.renderer.view.getBoundingClientRect(),i=r.left,o=r.top,s=r.width,h=r.height,c=this.renderer,d=c.width,_=c.height,y=c.resolution,I=s/d*y,E=h/_*y,S=this.div;S.style.left=i+"px",S.style.top=o+"px",S.style.width=d+"px",S.style.height=_+"px";for(var b=0;b<this.children.length;b++){var x=this.children[b];if(x.renderId!==this.renderId)x._accessibleActive=!1,to(this.children,b,1),this.div.removeChild(x._accessibleDiv),this.pool.push(x._accessibleDiv),x._accessibleDiv=null,b--;else{S=x._accessibleDiv;var $=x.hitArea,j=x.worldTransform;x.hitArea?(S.style.left=(j.tx+$.x*j.a)*I+"px",S.style.top=(j.ty+$.y*j.d)*E+"px",S.style.width=$.width*j.a*I+"px",S.style.height=$.height*j.d*E+"px"):($=x.getBounds(),this.capHitArea($),S.style.left=$.x*I+"px",S.style.top=$.y*E+"px",S.style.width=$.width*I+"px",S.style.height=$.height*E+"px",S.title!==x.accessibleTitle&&x.accessibleTitle!==null&&(S.title=x.accessibleTitle),S.getAttribute("aria-label")!==x.accessibleHint&&x.accessibleHint!==null&&S.setAttribute("aria-label",x.accessibleHint)),(x.accessibleTitle!==S.title||x.tabIndex!==S.tabIndex)&&(S.title=x.accessibleTitle,S.tabIndex=x.tabIndex,this.debug&&this.updateDebugHTML(S))}}this.renderId++}},t.prototype.updateDebugHTML=function(e){e.innerHTML="type: "+e.type+"</br> title : "+e.title+"</br> tabIndex: "+e.tabIndex},t.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var r=this.renderer,i=r.width,o=r.height;e.x+e.width>i&&(e.width=i-e.x),e.y+e.height>o&&(e.height=o-e.y)},t.prototype.addChild=function(e){var r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=ga+"px",r.style.height=ga+"px",r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=qc.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?r.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(r.title="displayObject "+e.tabIndex),e.accessibleHint&&e.accessibleHint!==null&&r.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},t.prototype._onClick=function(e){var r=this.renderer.plugins.interaction,i=e.target.displayObject,o=r.eventData;r.dispatchEvent(i,"click",o),r.dispatchEvent(i,"pointertap",o),r.dispatchEvent(i,"tap",o)},t.prototype._onFocus=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive");var r=this.renderer.plugins.interaction,i=e.target.displayObject,o=r.eventData;r.dispatchEvent(i,"mouseover",o)},t.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite");var r=this.renderer.plugins.interaction,i=e.target.displayObject,o=r.eventData;r.dispatchEvent(i,"mouseout",o)},t.prototype._onKeyDown=function(e){e.keyCode===_E&&this.activate()},t.prototype._onMouseMove=function(e){e.movementX===0&&e.movementY===0||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t.extension={name:"accessibility",type:[ar.RendererPlugin,ar.CanvasRendererPlugin]},t}();/*!
 * @pixi/interaction - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var wl=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new fr,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(e,r,i){return e.worldTransform.applyInverse(i||this.global,r)},t.prototype.copyEvent=function(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var r="buttons"in e&&e.buttons;this.buttons=Number.isInteger(r)?r:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ml=function(t,e){return Ml=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},Ml(t,e)};function EE(t,e){Ml(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Dp=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),Ca=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(e,r){r?this._flags=this._flags|e:this._flags=this._flags&~e},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(e){this._flags=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return(this._flags&t.FLAGS.OVER)!==0},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return(this._flags&t.FLAGS.RIGHT_DOWN)!==0},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return(this._flags&t.FLAGS.LEFT_DOWN)!==0},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),TE=function(){function t(){this._tempPoint=new fr}return t.prototype.recursiveFindHit=function(e,r,i,o,s){var h;if(!r||!r.visible)return!1;var c=e.data.global;s=r.interactive||s;var d=!1,_=s,y=!0;if(r.hitArea)o&&(r.worldTransform.applyInverse(c,this._tempPoint),r.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?d=!0:(o=!1,y=!1)),_=!1;else if(r._mask&&o){var I=r._mask.isMaskData?r._mask.maskObject:r._mask;I&&!(!((h=I.containsPoint)===null||h===void 0)&&h.call(I,c))&&(o=!1)}if(y&&r.interactiveChildren&&r.children)for(var E=r.children,S=E.length-1;S>=0;S--){var b=E[S],x=this.recursiveFindHit(e,b,i,o,_);if(x){if(!b.parent)continue;_=!1,x&&(e.target&&(o=!1),d=!0)}}return s&&(o&&!e.target&&!r.hitArea&&r.containsPoint&&r.containsPoint(c)&&(d=!0),r.interactive&&(d&&!e.target&&(e.target=r),i&&i(e,r,!!d))),d},t.prototype.findHit=function(e,r,i,o){this.recursiveFindHit(e,r,i,o,!1)},t}(),Lp={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(t){t?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Lr.mixin(Lp);var va=1,ya={target:null,data:{global:null}},$p=function(t){EE(e,t);function e(r,i){var o=t.call(this)||this;return i=i||{},o.renderer=r,o.autoPreventDefault=i.autoPreventDefault!==void 0?i.autoPreventDefault:!0,o.interactionFrequency=i.interactionFrequency||10,o.mouse=new wl,o.mouse.identifier=va,o.mouse.global.set(-999999),o.activeInteractionData={},o.activeInteractionData[va]=o.mouse,o.interactionDataPool=[],o.eventData=new Dp,o.interactionDOMElement=null,o.moveWhenInside=!1,o.eventsAdded=!1,o.tickerAdded=!1,o.mouseOverRenderer=!("PointerEvent"in globalThis),o.supportsTouchEvents="ontouchstart"in globalThis,o.supportsPointerEvents=!!globalThis.PointerEvent,o.onPointerUp=o.onPointerUp.bind(o),o.processPointerUp=o.processPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.processPointerCancel=o.processPointerCancel.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.processPointerDown=o.processPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.processPointerMove=o.processPointerMove.bind(o),o.onPointerOut=o.onPointerOut.bind(o),o.processPointerOverOut=o.processPointerOverOut.bind(o),o.onPointerOver=o.onPointerOver.bind(o),o.cursorStyles={default:"inherit",pointer:"pointer"},o.currentCursorMode=null,o.cursor=null,o.resolution=1,o.delayedEvents=[],o.search=new TE,o._tempDisplayObject=new Iu,o._eventListenerOptions={capture:!0,passive:!1},o._useSystemTicker=i.useSystemTicker!==void 0?i.useSystemTicker:!0,o.setTargetElement(o.renderer.view,o.renderer.resolution),o}return Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(r){this._useSystemTicker=r,r?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(r,i){return ya.target=null,ya.data.global=r,i||(i=this.lastObjectRendered),this.processInteractive(ya,i,null,!0),ya.target},e.prototype.setTargetElement=function(r,i){i===void 0&&(i=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=r,this.resolution=i,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(jr.system.add(this.tickerUpdate,this,Vi.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(jr.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="none",r.msTouchAction="none"):this.supportsPointerEvents&&(r.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var r=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(r.msContentZooming="",r.msTouchAction=""):this.supportsPointerEvents&&(r.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(r){this._deltaTime+=r,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var r in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(r)){var i=this.activeInteractionData[r];if(i.originalEvent&&i.pointerType!=="touch"){var o=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(o,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(r){r=r||"default";var i=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(i=!1),this.currentCursorMode!==r){this.currentCursorMode=r;var o=this.cursorStyles[r];if(o)switch(typeof o){case"string":i&&(this.interactionDOMElement.style.cursor=o);break;case"function":o(r);break;case"object":i&&Object.assign(this.interactionDOMElement.style,o);break}else i&&typeof r=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,r)&&(this.interactionDOMElement.style.cursor=r)}},e.prototype.dispatchEvent=function(r,i,o){(!o.stopPropagationHint||r===o.stopsPropagatingAt)&&(o.currentTarget=r,o.type=i,r.emit(i,o),r[i]&&r[i](o))},e.prototype.delayDispatchEvent=function(r,i,o){this.delayedEvents.push({displayObject:r,eventString:i,eventData:o})},e.prototype.mapPositionToPoint=function(r,i,o){var s;this.interactionDOMElement.parentElement?s=this.interactionDOMElement.getBoundingClientRect():s={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var h=1/this.resolution;r.x=(i-s.left)*(this.interactionDOMElement.width/s.width)*h,r.y=(o-s.top)*(this.interactionDOMElement.height/s.height)*h},e.prototype.processInteractive=function(r,i,o,s){var h=this.search.findHit(r,i,o,s),c=this.delayedEvents;if(!c.length)return h;r.stopPropagationHint=!1;var d=c.length;this.delayedEvents=[];for(var _=0;_<d;_++){var y=c[_],I=y.displayObject,E=y.eventString,S=y.eventData;S.stopsPropagatingAt===I&&(S.stopPropagationHint=!0),this.dispatchEvent(I,E,S)}return h},e.prototype.onPointerDown=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r);if(this.autoPreventDefault&&i[0].isNormalized){var o=r.cancelable||!("cancelable"in r);o&&r.preventDefault()}for(var s=i.length,h=0;h<s;h++){var c=i[h],d=this.getInteractionDataForPointerId(c),_=this.configureInteractionEventForDOMEvent(this.eventData,c,d);if(_.data.originalEvent=r,this.processInteractive(_,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",_),c.pointerType==="touch")this.emit("touchstart",_);else if(c.pointerType==="mouse"||c.pointerType==="pen"){var y=c.button===2;this.emit(y?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(r,i,o){var s=r.data,h=r.data.identifier;if(o){if(i.trackedPointers[h]||(i.trackedPointers[h]=new Ca(h)),this.dispatchEvent(i,"pointerdown",r),s.pointerType==="touch")this.dispatchEvent(i,"touchstart",r);else if(s.pointerType==="mouse"||s.pointerType==="pen"){var c=s.button===2;c?i.trackedPointers[h].rightDown=!0:i.trackedPointers[h].leftDown=!0,this.dispatchEvent(i,c?"rightdown":"mousedown",r)}}},e.prototype.onPointerComplete=function(r,i,o){var s=this.normalizeToPointerData(r),h=s.length,c=r.target;r.composedPath&&r.composedPath().length>0&&(c=r.composedPath()[0]);for(var d=c!==this.interactionDOMElement?"outside":"",_=0;_<h;_++){var y=s[_],I=this.getInteractionDataForPointerId(y),E=this.configureInteractionEventForDOMEvent(this.eventData,y,I);if(E.data.originalEvent=r,this.processInteractive(E,this.lastObjectRendered,o,i||!d),this.emit(i?"pointercancel":"pointerup"+d,E),y.pointerType==="mouse"||y.pointerType==="pen"){var S=y.button===2;this.emit(S?"rightup"+d:"mouseup"+d,E)}else y.pointerType==="touch"&&(this.emit(i?"touchcancel":"touchend"+d,E),this.releaseInteractionDataForPointerId(y.pointerId))}},e.prototype.onPointerCancel=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(r,i){var o=r.data,s=r.data.identifier;i.trackedPointers[s]!==void 0&&(delete i.trackedPointers[s],this.dispatchEvent(i,"pointercancel",r),o.pointerType==="touch"&&this.dispatchEvent(i,"touchcancel",r))},e.prototype.onPointerUp=function(r){this.supportsTouchEvents&&r.pointerType==="touch"||this.onPointerComplete(r,!1,this.processPointerUp)},e.prototype.processPointerUp=function(r,i,o){var s=r.data,h=r.data.identifier,c=i.trackedPointers[h],d=s.pointerType==="touch",_=s.pointerType==="mouse"||s.pointerType==="pen",y=!1;if(_){var I=s.button===2,E=Ca.FLAGS,S=I?E.RIGHT_DOWN:E.LEFT_DOWN,b=c!==void 0&&c.flags&S;o?(this.dispatchEvent(i,I?"rightup":"mouseup",r),b&&(this.dispatchEvent(i,I?"rightclick":"click",r),y=!0)):b&&this.dispatchEvent(i,I?"rightupoutside":"mouseupoutside",r),c&&(I?c.rightDown=!1:c.leftDown=!1)}o?(this.dispatchEvent(i,"pointerup",r),d&&this.dispatchEvent(i,"touchend",r),c&&((!_||y)&&this.dispatchEvent(i,"pointertap",r),d&&(this.dispatchEvent(i,"tap",r),c.over=!1))):c&&(this.dispatchEvent(i,"pointerupoutside",r),d&&this.dispatchEvent(i,"touchendoutside",r)),c&&c.none&&delete i.trackedPointers[h]},e.prototype.onPointerMove=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r);(i[0].pointerType==="mouse"||i[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var o=i.length,s=0;s<o;s++){var h=i[s],c=this.getInteractionDataForPointerId(h),d=this.configureInteractionEventForDOMEvent(this.eventData,h,c);d.data.originalEvent=r,this.processInteractive(d,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",d),h.pointerType==="touch"&&this.emit("touchmove",d),(h.pointerType==="mouse"||h.pointerType==="pen")&&this.emit("mousemove",d)}i[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(r,i,o){var s=r.data,h=s.pointerType==="touch",c=s.pointerType==="mouse"||s.pointerType==="pen";c&&this.processPointerOverOut(r,i,o),(!this.moveWhenInside||o)&&(this.dispatchEvent(i,"pointermove",r),h&&this.dispatchEvent(i,"touchmove",r),c&&this.dispatchEvent(i,"mousemove",r))},e.prototype.onPointerOut=function(r){if(!(this.supportsTouchEvents&&r.pointerType==="touch")){var i=this.normalizeToPointerData(r),o=i[0];o.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var s=this.getInteractionDataForPointerId(o),h=this.configureInteractionEventForDOMEvent(this.eventData,o,s);h.data.originalEvent=o,this.processInteractive(h,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",h),o.pointerType==="mouse"||o.pointerType==="pen"?this.emit("mouseout",h):this.releaseInteractionDataForPointerId(s.identifier)}},e.prototype.processPointerOverOut=function(r,i,o){var s=r.data,h=r.data.identifier,c=s.pointerType==="mouse"||s.pointerType==="pen",d=i.trackedPointers[h];o&&!d&&(d=i.trackedPointers[h]=new Ca(h)),d!==void 0&&(o&&this.mouseOverRenderer?(d.over||(d.over=!0,this.delayDispatchEvent(i,"pointerover",r),c&&this.delayDispatchEvent(i,"mouseover",r)),c&&this.cursor===null&&(this.cursor=i.cursor)):d.over&&(d.over=!1,this.dispatchEvent(i,"pointerout",this.eventData),c&&this.dispatchEvent(i,"mouseout",r),d.none&&delete i.trackedPointers[h]))},e.prototype.onPointerOver=function(r){var i=this.normalizeToPointerData(r),o=i[0],s=this.getInteractionDataForPointerId(o),h=this.configureInteractionEventForDOMEvent(this.eventData,o,s);h.data.originalEvent=o,o.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",h),(o.pointerType==="mouse"||o.pointerType==="pen")&&this.emit("mouseover",h)},e.prototype.getInteractionDataForPointerId=function(r){var i=r.pointerId,o;return i===va||r.pointerType==="mouse"?o=this.mouse:this.activeInteractionData[i]?o=this.activeInteractionData[i]:(o=this.interactionDataPool.pop()||new wl,o.identifier=i,this.activeInteractionData[i]=o),o.copyEvent(r),o},e.prototype.releaseInteractionDataForPointerId=function(r){var i=this.activeInteractionData[r];i&&(delete this.activeInteractionData[r],i.reset(),this.interactionDataPool.push(i))},e.prototype.configureInteractionEventForDOMEvent=function(r,i,o){return r.data=o,this.mapPositionToPoint(o.global,i.clientX,i.clientY),i.pointerType==="touch"&&(i.globalX=o.global.x,i.globalY=o.global.y),o.originalEvent=i,r.reset(),r},e.prototype.normalizeToPointerData=function(r){var i=[];if(this.supportsTouchEvents&&r instanceof TouchEvent)for(var o=0,s=r.changedTouches.length;o<s;o++){var h=r.changedTouches[o];typeof h.button>"u"&&(h.button=r.touches.length?1:0),typeof h.buttons>"u"&&(h.buttons=r.touches.length?1:0),typeof h.isPrimary>"u"&&(h.isPrimary=r.touches.length===1&&r.type==="touchstart"),typeof h.width>"u"&&(h.width=h.radiusX||1),typeof h.height>"u"&&(h.height=h.radiusY||1),typeof h.tiltX>"u"&&(h.tiltX=0),typeof h.tiltY>"u"&&(h.tiltY=0),typeof h.pointerType>"u"&&(h.pointerType="touch"),typeof h.pointerId>"u"&&(h.pointerId=h.identifier||0),typeof h.pressure>"u"&&(h.pressure=h.force||.5),typeof h.twist>"u"&&(h.twist=0),typeof h.tangentialPressure>"u"&&(h.tangentialPressure=0),typeof h.layerX>"u"&&(h.layerX=h.offsetX=h.clientX),typeof h.layerY>"u"&&(h.layerY=h.offsetY=h.clientY),h.isNormalized=!0,i.push(h)}else if(!globalThis.MouseEvent||r instanceof MouseEvent&&(!this.supportsPointerEvents||!(r instanceof globalThis.PointerEvent))){var c=r;typeof c.isPrimary>"u"&&(c.isPrimary=!0),typeof c.width>"u"&&(c.width=1),typeof c.height>"u"&&(c.height=1),typeof c.tiltX>"u"&&(c.tiltX=0),typeof c.tiltY>"u"&&(c.tiltY=0),typeof c.pointerType>"u"&&(c.pointerType="mouse"),typeof c.pointerId>"u"&&(c.pointerId=va),typeof c.pressure>"u"&&(c.pressure=.5),typeof c.twist>"u"&&(c.twist=0),typeof c.tangentialPressure>"u"&&(c.tangentialPressure=0),c.isNormalized=!0,i.push(c)}else i.push(r);return i},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e.extension={name:"interaction",type:[ar.RendererPlugin,ar.CanvasRendererPlugin]},e}(Ci);/*!
 * @pixi/extract - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Qc=new qe,Jc=4,Np=function(){function t(e){this.renderer=e}return t.prototype.image=function(e,r,i){var o=new Image;return o.src=this.base64(e,r,i),o},t.prototype.base64=function(e,r,i){return this.canvas(e).toDataURL(r,i)},t.prototype.canvas=function(e,r){var i=this.renderer,o,s=!1,h,c=!1;e&&(e instanceof xn?h=e:(h=this.renderer.generateTexture(e),c=!0)),h?(o=h.baseTexture.resolution,r=r??h.frame,s=!1,i.renderTexture.bind(h)):(o=i.resolution,r||(r=Qc,r.width=i.width,r.height=i.height),s=!0,i.renderTexture.bind(null));var d=Math.round(r.width*o),_=Math.round(r.height*o),y=new bl(d,_,1),I=new Uint8Array(Jc*d*_),E=i.gl;E.readPixels(Math.round(r.x*o),Math.round(r.y*o),d,_,E.RGBA,E.UNSIGNED_BYTE,I);var S=y.context.getImageData(0,0,d,_);if(t.arrayPostDivide(I,S.data),y.context.putImageData(S,0,0),s){var b=new bl(y.width,y.height,1);b.context.scale(1,-1),b.context.drawImage(y.canvas,0,-_),y.destroy(),y=b}return c&&h.destroy(!0),y.canvas},t.prototype.pixels=function(e,r){var i=this.renderer,o,s,h=!1;e&&(e instanceof xn?s=e:(s=this.renderer.generateTexture(e),h=!0)),s?(o=s.baseTexture.resolution,r=r??s.frame,i.renderTexture.bind(s)):(o=i.resolution,r||(r=Qc,r.width=i.width,r.height=i.height),i.renderTexture.bind(null));var c=Math.round(r.width*o),d=Math.round(r.height*o),_=new Uint8Array(Jc*c*d),y=i.gl;return y.readPixels(Math.round(r.x*o),Math.round(r.y*o),c,d,y.RGBA,y.UNSIGNED_BYTE,_),h&&s.destroy(!0),t.arrayPostDivide(_,_),_},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(e,r){for(var i=0;i<e.length;i+=4){var o=r[i+3]=e[i+3];o!==0?(r[i]=Math.round(Math.min(e[i]*255/o,255)),r[i+1]=Math.round(Math.min(e[i+1]*255/o,255)),r[i+2]=Math.round(Math.min(e[i+2]*255/o,255))):(r[i]=e[i],r[i+1]=e[i+1],r[i+2]=e[i+2])}},t.extension={name:"extract",type:ar.RendererPlugin},t}();/*!
 * @pixi/loaders - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Ea=function(){function t(e,r,i){r===void 0&&(r=!1),this._fn=e,this._once=r,this._thisArg=i,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},t}();function Kc(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var on=function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(e){e===void 0&&(e=!1);var r=this._head;if(e)return!!r;for(var i=[];r;)i.push(r),r=r._next;return i},t.prototype.has=function(e){if(!(e instanceof Ea))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return e._owner===this},t.prototype.dispatch=function(){for(var e=arguments,r=[],i=0;i<arguments.length;i++)r[i]=e[i];var o=this._head;if(!o)return!1;for(;o;)o._once&&this.detach(o),o._fn.apply(o._thisArg,r),o=o._next;return!0},t.prototype.add=function(e,r){if(r===void 0&&(r=null),typeof e!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return Kc(this,new Ea(e,!1,r))},t.prototype.once=function(e,r){if(r===void 0&&(r=null),typeof e!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return Kc(this,new Ea(e,!0,r))},t.prototype.detach=function(e){if(!(e instanceof Ea))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return e._owner!==this?this:(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,e._next===null&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null,this)},t.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this},t}();function Fp(t,e){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=r.parser[e.strictMode?"strict":"loose"].exec(t),o={},s=14;s--;)o[r.key[s]]=i[s]||"";return o[r.q.name]={},o[r.key[12]].replace(r.q.parser,function(h,c,d){c&&(o[r.q.name][c]=d)}),o}var $h,Ta=null,AE=0,td=200,bE=204,xE=1223,SE=2;function ed(){}function rd(t,e,r){e&&e.indexOf(".")===0&&(e=e.substring(1)),e&&(t[e]=r)}function Nh(t){return t.toString().replace("object ","")}var Or=function(){function t(e,r,i){if(this._dequeue=ed,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof e!="string"||typeof r!="string")throw new Error("Both name and url are required for constructing a resource.");i=i||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,r.indexOf("data:")===0),this.name=e,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=i.crossOrigin===!0?"anonymous":i.crossOrigin,this.timeout=i.timeout||0,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.metadata=i.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=ed,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new on,this.onProgress=new on,this.onComplete=new on,this.onAfterMiddleware=new on}return t.setExtensionLoadType=function(e,r){rd(t._loadTypeMap,e,r)},t.setExtensionXhrType=function(e,r){rd(t._xhrTypeMap,e,r)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var r=this;if(!this.isLoading){if(this.isComplete){e&&setTimeout(function(){return e(r)},1);return}else e&&this.onComplete.once(e);switch(this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:typeof $h>"u"&&($h=!!(globalThis.XDomainRequest&&!("withCredentials"in new XMLHttpRequest))),$h&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},t.prototype._hasFlag=function(e){return(this._flags&e)!==0},t.prototype._setFlag=function(e,r){this._flags=r?this._flags|e:this._flags&~e},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:e==="image"&&typeof globalThis.Image<"u"?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:e==="audio"&&typeof globalThis.Audio<"u"?this.data=new Audio:this.data=document.createElement(e),this.data===null){this.abort("Unsupported element: "+e);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var r=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(e,this.url[i],Array.isArray(r)?r[i]:r));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;this.crossOrigin==="use-credentials"&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var e=this.xhr=new globalThis.XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){return e.send()},1)},t.prototype._createSource=function(e,r,i){i||(i=e+"/"+this._getExtension(r));var o=document.createElement("source");return o.src=r,o.type=i,o},t.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},t.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var e=this.xhr;this.abort(Nh(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},t.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(Nh(e)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(Nh(e)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,r="",i=typeof e.status>"u"?td:e.status;(e.responseType===""||e.responseType==="text"||typeof e.responseType>"u")&&(r=e.responseText),i===AE&&(r.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?i=td:i===xE&&(i=bE);var o=i/100|0;if(o===SE)if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=t.TYPE.JSON}catch(c){this.abort("Error trying to parse loaded json: "+c);return}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var s=new DOMParser;this.data=s.parseFromString(r,"text/xml")}else{var h=document.createElement("div");h.innerHTML=r,this.data=h}this.type=t.TYPE.XML}catch(c){this.abort("Error trying to parse loaded xml: "+c);return}else this.data=e.response||r;else{this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);return}this.complete()},t.prototype._determineCrossOrigin=function(e,r){if(e.indexOf("data:")===0)return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";r=r||globalThis.location,Ta||(Ta=document.createElement("a")),Ta.href=e;var i=Fp(Ta.href,{strictMode:!0}),o=!i.port&&r.port===""||i.port===r.port,s=i.protocol?i.protocol+":":"";return i.host!==r.hostname||!o||s!==r.protocol?"anonymous":""},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(e){e===void 0&&(e=this.url);var r="";if(this.isDataUrl){var i=e.indexOf("/");r=e.substring(i+1,e.indexOf(";",i))}else{var o=e.indexOf("?"),s=e.indexOf("#"),h=Math.min(o>-1?o:e.length,s>-1?s:e.length);e=e.substring(0,h),r=e.substring(e.lastIndexOf(".")+1)}return r.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t}();(function(t){(function(e){e[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING"})(t.STATUS_FLAGS||(t.STATUS_FLAGS={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JSON=1]="JSON",e[e.XML=2]="XML",e[e.IMAGE=3]="IMAGE",e[e.AUDIO=4]="AUDIO",e[e.VIDEO=5]="VIDEO",e[e.TEXT=6]="TEXT"}(t.TYPE||(t.TYPE={})),function(e){e[e.XHR=1]="XHR",e[e.IMAGE=2]="IMAGE",e[e.AUDIO=3]="AUDIO",e[e.VIDEO=4]="VIDEO"}(t.LOAD_TYPE||(t.LOAD_TYPE={})),function(e){e.DEFAULT="text",e.BUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.TEXT="text"}(t.XHR_RESPONSE_TYPE||(t.XHR_RESPONSE_TYPE={})),t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(Or||(Or={}));function Un(){}function RE(t){return function(){for(var e=arguments,r=[],i=0;i<arguments.length;i++)r[i]=e[i];if(t===null)throw new Error("Callback was already called.");var o=t;t=null,o.apply(this,r)}}var PE=function(){function t(e,r){this.data=e,this.callback=r}return t}(),Fh=function(){function t(e,r){var i=this;if(r===void 0&&(r=1),this.workers=0,this.saturated=Un,this.unsaturated=Un,this.empty=Un,this.drain=Un,this.error=Un,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(o,s,h){if(h&&typeof h!="function")throw new Error("task callback must be a function");if(i.started=!0,o==null&&i.idle()){setTimeout(function(){return i.drain()},1);return}var c=new PE(o,typeof h=="function"?h:Un);s?i._tasks.unshift(c):i._tasks.push(c),setTimeout(i.process,1)},this.process=function(){for(;!i.paused&&i.workers<i.concurrency&&i._tasks.length;){var o=i._tasks.shift();i._tasks.length===0&&i.empty(),i.workers+=1,i.workers===i.concurrency&&i.saturated(),i._worker(o.data,RE(i._next(o)))}},this._worker=e,r===0)throw new Error("Concurrency must not be zero");this.concurrency=r,this.buffer=r/4}return t.prototype._next=function(e){var r=this;return function(){for(var i=arguments,o=[],s=0;s<arguments.length;s++)o[s]=i[s];r.workers-=1,e.callback.apply(e,o),o[0]!=null&&r.error(o[0],e.data),r.workers<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}},t.prototype.push=function(e,r){this._insert(e,!1,r)},t.prototype.kill=function(){this.workers=0,this.drain=Un,this.started=!1,this._tasks=[]},t.prototype.unshift=function(e,r){this._insert(e,!0,r)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},t.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},t.eachSeries=function(e,r,i,o){var s=0,h=e.length;function c(d){if(d||s===h){i&&i(d);return}o?setTimeout(function(){r(e[s++],c)},1):r(e[s++],c)}c()},t.queue=function(e,r){return new t(e,r)},t}(),Uh=100,IE=/(#[\w-]+)?$/,Fs=function(){function t(e,r){var i=this;e===void 0&&(e=""),r===void 0&&(r=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(d,_){return i._loadResource(d,_)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(d,_){return i._loadResource(d,_)},this._queue=Fh.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new on,this.onError=new on,this.onLoad=new on,this.onStart=new on,this.onComplete=new on;for(var o=0;o<t._plugins.length;++o){var s=t._plugins[o],h=s.pre,c=s.use;h&&this.pre(h),c&&this.use(c)}this._protected=!1}return t.prototype._add=function(e,r,i,o){if(this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(r=this._prepareUrl(r),this.resources[e]=new Or(e,r,i),typeof o=="function"&&this.resources[e].onAfterMiddleware.once(o),this.loading){for(var s=i.parentResource,h=[],c=0;c<s.children.length;++c)s.children[c].isComplete||h.push(s.children[c]);var d=s.progressChunk*(h.length+1),_=d/(h.length+2);s.children.push(this.resources[e]),s.progressChunk=_;for(var c=0;c<h.length;++c)h[c].progressChunk=_;this.resources[e].progressChunk=_}return this._queue.push(this.resources[e]),this},t.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},t.prototype.use=function(e){return this._afterMiddleware.push(e),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var e in this.resources){var r=this.resources[e];r._onLoadBinding&&r._onLoadBinding.detach(),r.isLoading&&r.abort("loader reset")}return this.resources={},this},t.prototype.load=function(e){if(ai("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),typeof e=="function"&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var r=this._queue._tasks.length,i=Uh/r,o=0;o<this._queue._tasks.length;++o)this._queue._tasks[o].data.progressChunk=i;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e},enumerable:!1,configurable:!0}),t.prototype._prepareUrl=function(e){var r=Fp(e,{strictMode:!0}),i;if(r.protocol||!r.path||e.indexOf("//")===0?i=e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&e.charAt(0)!=="/"?i=this.baseUrl+"/"+e:i=this.baseUrl+e,this.defaultQueryString){var o=IE.exec(i)[0];i=i.slice(0,i.length-o.length),i.indexOf("?")!==-1?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=o}return i},t.prototype._loadResource=function(e,r){var i=this;e._dequeue=r,Fh.eachSeries(this._beforeMiddleware,function(o,s){o.call(i,e,function(){s(e.isComplete?{}:null)})},function(){e.isComplete?i._onLoad(e):(e._onLoadBinding=e.onComplete.once(i._onLoad,i),e.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=Uh,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(e){var r=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),Fh.eachSeries(this._afterMiddleware,function(i,o){i.call(r,e,o)},function(){e.onAfterMiddleware.dispatch(e),r.progress=Math.min(Uh,r.progress+e.progressChunk),r.onProgress.dispatch(r,e),e.error?r.onError.dispatch(e.error,r,e):r.onLoad.dispatch(r,e),r._resourcesParsing.splice(r._resourcesParsing.indexOf(e),1),r._queue.idle()&&r._resourcesParsing.length===0&&r._onComplete()},!0)},t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||(e=new t,e._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return ai("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),zi.add({type:ar.Loader,ref:e}),t},t._plugins=[],t}();zi.handleByList(ar.Loader,Fs._plugins);Fs.prototype.add=function(t,e,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;++o)this.add(t[o]);return this}if(typeof t=="object"&&(r=t,i=e||r.callback||r.onComplete,e=r.url,t=r.name||r.key||r.url),typeof e!="string"&&(i=r,r=e,e=t),typeof e!="string")throw new Error("No url passed to add resource to loader.");return typeof r=="function"&&(i=r,r=null),this._add(t,e,r,i)};var Up=function(){function t(){}return t.init=function(e){e=Object.assign({sharedLoader:!1},e),this.loader=e.sharedLoader?Fs.shared:new Fs},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.extension=ar.Application,t}(),Bp=function(){function t(){}return t.add=function(){Or.setExtensionLoadType("svg",Or.LOAD_TYPE.XHR),Or.setExtensionXhrType("svg",Or.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,r){if(e.data&&(e.type===Or.TYPE.IMAGE||e.extension==="svg")){var i=e.data,o=e.url,s=e.name,h=e.metadata;Ne.fromLoader(i,o,s,h).then(function(c){e.texture=c,r()}).catch(r)}else r()},t.extension=ar.Loader,t}(),OE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function wE(t){for(var e="",r=0;r<t.length;){for(var i=[0,0,0],o=[0,0,0,0],s=0;s<i.length;++s)r<t.length?i[s]=t.charCodeAt(r++)&255:i[s]=0;o[0]=i[0]>>2,o[1]=(i[0]&3)<<4|i[1]>>4,o[2]=(i[1]&15)<<2|i[2]>>6,o[3]=i[2]&63;var h=r-(t.length-1);switch(h){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64;break}for(var s=0;s<o.length;++s)e+=OE.charAt(o[s])}return e}function ME(t,e){if(!t.data){e();return}if(t.xhr&&t.xhrType===Or.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof t.data=="string"){var r=t.xhr.getResponseHeader("content-type");if(r&&r.indexOf("image")===0){t.data=new Image,t.data.src="data:"+r+";base64,"+wE(t.xhr.responseText),t.type=Or.TYPE.IMAGE,t.data.onload=function(){t.data.onload=null,e()};return}}else if(t.data.type.indexOf("image")===0){var i=globalThis.URL||globalThis.webkitURL,o=i.createObjectURL(t.data);t.blob=t.data,t.data=new Image,t.data.src=o,t.type=Or.TYPE.IMAGE,t.data.onload=function(){i.revokeObjectURL(o),t.data.onload=null,e()};return}}e()}var CE=function(){function t(){}return t.extension=ar.Loader,t.use=ME,t}();zi.add(Bp,CE);/*!
 * @pixi/compressed-textures - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var cr,ke;(function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"})(ke||(ke={}));var Us=(cr={},cr[ke.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,cr[ke.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,cr[ke.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,cr[ke.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,cr[ke.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,cr[ke.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,cr[ke.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,cr[ke.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,cr[ke.COMPRESSED_R11_EAC]=.5,cr[ke.COMPRESSED_SIGNED_R11_EAC]=.5,cr[ke.COMPRESSED_RG11_EAC]=1,cr[ke.COMPRESSED_SIGNED_RG11_EAC]=1,cr[ke.COMPRESSED_RGB8_ETC2]=.5,cr[ke.COMPRESSED_RGBA8_ETC2_EAC]=1,cr[ke.COMPRESSED_SRGB8_ETC2]=.5,cr[ke.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,cr[ke.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,cr[ke.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,cr[ke.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,cr[ke.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,cr[ke.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,cr[ke.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,cr[ke.COMPRESSED_RGB_ETC1_WEBGL]=.5,cr[ke.COMPRESSED_RGB_ATC_WEBGL]=.5,cr[ke.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,cr[ke.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,cr);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Cl=function(t,e){return Cl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},Cl(t,e)};function Gp(t,e){Cl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function DE(t,e,r,i){function o(s){return s instanceof r?s:new r(function(h){h(s)})}return new(r||(r=Promise))(function(s,h){function c(y){try{_(i.next(y))}catch(I){h(I)}}function d(y){try{_(i.throw(y))}catch(I){h(I)}}function _(y){y.done?s(y.value):o(y.value).then(c,d)}_((i=i.apply(t,e||[])).next())})}function LE(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,o,s,h;return h={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function c(_){return function(y){return d([_,y])}}function d(_){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,o&&(s=_[0]&2?o.return:_[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,_[1])).done)return s;switch(o=0,s&&(_=[_[0]&2,s.value]),_[0]){case 0:case 1:s=_;break;case 4:return r.label++,{value:_[1],done:!1};case 5:r.label++,o=_[1],_=[0];continue;case 7:_=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(_[0]===6||_[0]===2)){r=0;continue}if(_[0]===3&&(!s||_[1]>s[0]&&_[1]<s[3])){r.label=_[1];break}if(_[0]===6&&r.label<s[1]){r.label=s[1],s=_;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(_);break}s[2]&&r.ops.pop(),r.trys.pop();continue}_=e.call(t,r)}catch(y){_=[6,y],o=0}finally{i=s=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}}var kp=function(t){Gp(e,t);function e(r,i){i===void 0&&(i={width:1,height:1,autoLoad:!0});var o=this,s,h;return typeof r=="string"?(s=r,h=new Uint8Array):(s=null,h=r),o=t.call(this,h,i)||this,o.origin=s,o.buffer=h?new Xa(h):null,o.origin&&i.autoLoad!==!1&&o.load(),h&&h.length&&(o.loaded=!0,o.onBlobLoaded(o.buffer.rawBinaryData)),o}return e.prototype.onBlobLoaded=function(r){},e.prototype.load=function(){return DE(this,void 0,Promise,function(){var r,i,o;return LE(this,function(s){switch(s.label){case 0:return[4,fetch(this.origin)];case 1:return r=s.sent(),[4,r.blob()];case 2:return i=s.sent(),[4,i.arrayBuffer()];case 3:return o=s.sent(),this.data=new Uint32Array(o),this.buffer=new Xa(o),this.loaded=!0,this.onBlobLoaded(o),this.update(),[2,this]}})})},e}(ao),Ha=function(t){Gp(e,t);function e(r,i){var o=t.call(this,r,i)||this;return o.format=i.format,o.levels=i.levels||1,o._width=i.width,o._height=i.height,o._extension=e._formatToExtension(o.format),(i.levelBuffers||o.buffer)&&(o._levelBuffers=i.levelBuffers||e._createLevelBuffers(r instanceof Uint8Array?r:o.buffer.uint8View,o.format,o.levels,4,4,o.width,o.height)),o}return e.prototype.upload=function(r,i,o){var s=r.gl,h=r.context.extensions[this._extension];if(!h)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var c=0,d=this.levels;c<d;c++){var _=this._levelBuffers[c],y=_.levelID,I=_.levelWidth,E=_.levelHeight,S=_.levelBuffer;s.compressedTexImage2D(s.TEXTURE_2D,y,this.format,I,E,0,S)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(r){if(r>=33776&&r<=33779)return"s3tc";if(r>=37488&&r<=37497)return"etc";if(r>=35840&&r<=35843)return"pvrtc";if(r>=36196)return"etc1";if(r>=35986&&r<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(r,i,o,s,h,c,d){for(var _=new Array(o),y=r.byteOffset,I=c,E=d,S=I+s-1&~(s-1),b=E+h-1&~(h-1),x=S*b*Us[i],$=0;$<o;$++)_[$]={levelID:$,levelWidth:o>1?I:S,levelHeight:o>1?E:b,levelBuffer:new Uint8Array(r.buffer,y,x)},y+=x,I=I>>1||1,E=E>>1||1,S=I+s-1&~(s-1),b=E+h-1&~(h-1),x=S*b*Us[i];return _},e}(kp),Xp=function(){function t(){}return t.use=function(e,r){var i=e.data,o=this;if(e.type===Or.TYPE.JSON&&i&&i.cacheID&&i.textures){for(var s=i.textures,h=void 0,c=void 0,d=0,_=s.length;d<_;d++){var y=s[d],I=y.src,E=y.format;if(E||(c=I),t.textureFormats[E]){h=I;break}}if(h=h||c,!h){r(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));return}if(h===e.url){r(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var S={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},b=Xi.resolve(e.url.replace(o.baseUrl,""),h),x=i.cacheID;o.add(x,b,S,function($){if($.error){r($.error);return}var j=$.texture,Y=j===void 0?null:j,Q=$.textures,it=Q===void 0?{}:Q;Object.assign(e,{texture:Y,textures:it}),r()})}else r()},Object.defineProperty(t,"textureExtensions",{get:function(){if(!t._textureExtensions){var e=re.ADAPTER.createCanvas(),r=e.getContext("webgl");if(!r)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var i={s3tc:r.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:r.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:r.getExtension("WEBGL_compressed_texture_etc"),etc1:r.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:r.getExtension("WEBGL_compressed_texture_atc"),astc:r.getExtension("WEBGL_compressed_texture_astc")};t._textureExtensions=i}return t._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(t,"textureFormats",{get:function(){if(!t._textureFormats){var e=t.textureExtensions;t._textureFormats={};for(var r in e){var i=e[r];i&&Object.assign(t._textureFormats,Object.getPrototypeOf(i))}}return t._textureFormats},enumerable:!1,configurable:!0}),t.extension=ar.Loader,t}();function Hp(t,e,r){var i={textures:{},texture:null};if(!e)return i;var o=e.map(function(s){return new Ne(new ze(s,Object.assign({mipmap:Yi.OFF,alphaMode:Ti.NO_PREMULTIPLIED_ALPHA},r)))});return o.forEach(function(s,h){var c=s.baseTexture,d=t+"-"+(h+1);ze.addToCache(c,d),Ne.addToCache(s,d),h===0&&(ze.addToCache(c,t),Ne.addToCache(s,t),i.texture=s),i.textures[d]=s}),i}var ns,Ri,Bh=4,Aa=124,$E=32,nd=20,NE=542327876,ba={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},FE={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},xa={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},Ii;(function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(Ii||(Ii={}));var Dl;(function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(Dl||(Dl={}));var UE=1,BE=2,GE=4,kE=64,XE=512,HE=131072,jE=827611204,YE=861165636,VE=894720068,WE=808540228,zE=4,qE=(ns={},ns[jE]=ke.COMPRESSED_RGBA_S3TC_DXT1_EXT,ns[YE]=ke.COMPRESSED_RGBA_S3TC_DXT3_EXT,ns[VE]=ke.COMPRESSED_RGBA_S3TC_DXT5_EXT,ns),ZE=(Ri={},Ri[Ii.DXGI_FORMAT_BC1_TYPELESS]=ke.COMPRESSED_RGBA_S3TC_DXT1_EXT,Ri[Ii.DXGI_FORMAT_BC1_UNORM]=ke.COMPRESSED_RGBA_S3TC_DXT1_EXT,Ri[Ii.DXGI_FORMAT_BC2_TYPELESS]=ke.COMPRESSED_RGBA_S3TC_DXT3_EXT,Ri[Ii.DXGI_FORMAT_BC2_UNORM]=ke.COMPRESSED_RGBA_S3TC_DXT3_EXT,Ri[Ii.DXGI_FORMAT_BC3_TYPELESS]=ke.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ri[Ii.DXGI_FORMAT_BC3_UNORM]=ke.COMPRESSED_RGBA_S3TC_DXT5_EXT,Ri[Ii.DXGI_FORMAT_BC1_UNORM_SRGB]=ke.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Ri[Ii.DXGI_FORMAT_BC2_UNORM_SRGB]=ke.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Ri[Ii.DXGI_FORMAT_BC3_UNORM_SRGB]=ke.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Ri);function jp(t){var e=new Uint32Array(t),r=e[0];if(r!==NE)throw new Error("Invalid DDS file magic word");var i=new Uint32Array(t,0,Aa/Uint32Array.BYTES_PER_ELEMENT),o=i[ba.HEIGHT],s=i[ba.WIDTH],h=i[ba.MIPMAP_COUNT],c=new Uint32Array(t,ba.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,$E/Uint32Array.BYTES_PER_ELEMENT),d=c[UE];if(d&GE){var _=c[FE.FOURCC];if(_!==WE){var y=qE[_],I=Bh+Aa,E=new Uint8Array(t,I),S=new Ha(E,{format:y,width:s,height:o,levels:h});return[S]}var b=Bh+Aa,x=new Uint32Array(e.buffer,b,nd/Uint32Array.BYTES_PER_ELEMENT),$=x[xa.DXGI_FORMAT],j=x[xa.RESOURCE_DIMENSION],Y=x[xa.MISC_FLAG],Q=x[xa.ARRAY_SIZE],it=ZE[$];if(it===void 0)throw new Error("DDSParser cannot parse texture data with DXGI format "+$);if(Y===zE)throw new Error("DDSParser does not support cubemap textures");if(j===Dl.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var J=new Array,K=Bh+Aa+nd;if(Q===1)J.push(new Uint8Array(t,K));else{for(var Tt=Us[it],yt=0,ft=s,St=o,wt=0;wt<h;wt++){var Gt=Math.max(1,ft+3&-4),oe=Math.max(1,St+3&-4),ae=Gt*oe*Tt;yt+=ae,ft=ft>>>1,St=St>>>1}for(var Yt=K,wt=0;wt<Q;wt++)J.push(new Uint8Array(t,Yt,yt)),Yt+=yt}return J.map(function(Ht){return new Ha(Ht,{format:it,width:s,height:o,levels:h})})}throw d&kE?new Error("DDSParser does not support uncompressed texture data."):d&XE?new Error("DDSParser does not supported YUV uncompressed texture data."):d&HE?new Error("DDSParser does not support single-channel (lumninance) texture data!"):d&BE?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var pn,en,os,od=[171,75,84,88,32,49,49,187,13,10,26,10],QE=67305985,Pi={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Ll=64,$l=(pn={},pn[Te.UNSIGNED_BYTE]=1,pn[Te.UNSIGNED_SHORT]=2,pn[Te.INT]=4,pn[Te.UNSIGNED_INT]=4,pn[Te.FLOAT]=4,pn[Te.HALF_FLOAT]=8,pn),Yp=(en={},en[jt.RGBA]=4,en[jt.RGB]=3,en[jt.RG]=2,en[jt.RED]=1,en[jt.LUMINANCE]=1,en[jt.LUMINANCE_ALPHA]=2,en[jt.ALPHA]=1,en),Vp=(os={},os[Te.UNSIGNED_SHORT_4_4_4_4]=2,os[Te.UNSIGNED_SHORT_5_5_5_1]=2,os[Te.UNSIGNED_SHORT_5_6_5]=2,os);function Wp(t,e,r){r===void 0&&(r=!1);var i=new DataView(e);if(!JE(t,i))return null;var o=i.getUint32(Pi.ENDIANNESS,!0)===QE,s=i.getUint32(Pi.GL_TYPE,o),h=i.getUint32(Pi.GL_FORMAT,o),c=i.getUint32(Pi.GL_INTERNAL_FORMAT,o),d=i.getUint32(Pi.PIXEL_WIDTH,o),_=i.getUint32(Pi.PIXEL_HEIGHT,o)||1,y=i.getUint32(Pi.PIXEL_DEPTH,o)||1,I=i.getUint32(Pi.NUMBER_OF_ARRAY_ELEMENTS,o)||1,E=i.getUint32(Pi.NUMBER_OF_FACES,o),S=i.getUint32(Pi.NUMBER_OF_MIPMAP_LEVELS,o),b=i.getUint32(Pi.BYTES_OF_KEY_VALUE_DATA,o);if(_===0||y!==1)throw new Error("Only 2D textures are supported");if(E!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(I!==1)throw new Error("WebGL does not support array textures");var x=4,$=4,j=d+3&-4,Y=_+3&-4,Q=new Array(I),it=d*_;s===0&&(it=j*Y);var J;if(s!==0?$l[s]?J=$l[s]*Yp[h]:J=Vp[s]:J=Us[c],J===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var K=r?tT(i,b,o):null,Tt=it*J,yt=Tt,ft=d,St=_,wt=j,Gt=Y,oe=Ll+b,ae=0;ae<S;ae++){for(var Yt=i.getUint32(oe,o),Ht=oe+4,he=0;he<I;he++){var Kt=Q[he];Kt||(Kt=Q[he]=new Array(S)),Kt[ae]={levelID:ae,levelWidth:S>1||s!==0?ft:wt,levelHeight:S>1||s!==0?St:Gt,levelBuffer:new Uint8Array(e,Ht,yt)},Ht+=yt}oe+=Yt+4,oe=oe%4!==0?oe+4-oe%4:oe,ft=ft>>1||1,St=St>>1||1,wt=ft+x-1&~(x-1),Gt=St+$-1&~($-1),yt=wt*Gt*J}return s!==0?{uncompressed:Q.map(function(ve){var st=ve[0].levelBuffer,Et=!1;return s===Te.FLOAT?st=new Float32Array(ve[0].levelBuffer.buffer,ve[0].levelBuffer.byteOffset,ve[0].levelBuffer.byteLength/4):s===Te.UNSIGNED_INT?(Et=!0,st=new Uint32Array(ve[0].levelBuffer.buffer,ve[0].levelBuffer.byteOffset,ve[0].levelBuffer.byteLength/4)):s===Te.INT&&(Et=!0,st=new Int32Array(ve[0].levelBuffer.buffer,ve[0].levelBuffer.byteOffset,ve[0].levelBuffer.byteLength/4)),{resource:new ao(st,{width:ve[0].levelWidth,height:ve[0].levelHeight}),type:s,format:Et?KE(h):h}}),kvData:K}:{compressed:Q.map(function(ve){return new Ha(null,{format:c,width:d,height:_,levels:S,levelBuffers:ve})}),kvData:K}}function JE(t,e){for(var r=0;r<od.length;r++)if(e.getUint8(r)!==od[r])return console.error(t+" is not a valid *.ktx file!"),!1;return!0}function KE(t){switch(t){case jt.RGBA:return jt.RGBA_INTEGER;case jt.RGB:return jt.RGB_INTEGER;case jt.RG:return jt.RG_INTEGER;case jt.RED:return jt.RED_INTEGER;default:return t}}function tT(t,e,r){for(var i=new Map,o=0;o<e;){var s=t.getUint32(Ll+o,r),h=Ll+o+4,c=3-(s+3)%4;if(s===0||s>e-o){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var d=0;d<s&&t.getUint8(h+d)!==0;d++);if(d===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var _=new TextDecoder().decode(new Uint8Array(t.buffer,h,d)),y=new DataView(t.buffer,h+d+1,s-d-1);i.set(_,y),o+=4+s+c}return i}Or.setExtensionXhrType("dds",Or.XHR_RESPONSE_TYPE.BUFFER);var zp=function(){function t(){}return t.use=function(e,r){if(e.extension==="dds"&&e.data)try{Object.assign(e,Hp(e.name||e.url,jp(e.data),e.metadata))}catch(i){r(i);return}r()},t.extension=ar.Loader,t}();Or.setExtensionXhrType("ktx",Or.XHR_RESPONSE_TYPE.BUFFER);var qp=function(){function t(){}return t.use=function(e,r){if(e.extension==="ktx"&&e.data)try{var i=e.name||e.url,o=Wp(i,e.data,this.loadKeyValueData),s=o.compressed,h=o.uncompressed,c=o.kvData;if(s){var d=Hp(i,s,e.metadata);if(c&&d.textures)for(var _ in d.textures)d.textures[_].baseTexture.ktxKeyValueData=c;Object.assign(e,d)}else if(h){var y={};h.forEach(function(I,E){var S=new Ne(new ze(I.resource,{mipmap:Yi.OFF,alphaMode:Ti.NO_PREMULTIPLIED_ALPHA,type:I.type,format:I.format})),b=i+"-"+(E+1);c&&(S.baseTexture.ktxKeyValueData=c),ze.addToCache(S.baseTexture,b),Ne.addToCache(S,b),E===0&&(y[i]=S,ze.addToCache(S.baseTexture,i),Ne.addToCache(S,i)),y[b]=S}),Object.assign(e,{textures:y})}}catch(I){r(I);return}r()},t.extension=ar.Loader,t.loadKeyValueData=!1,t}();/*!
 * @pixi/particle-container - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Nl=function(t,e){return Nl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},Nl(t,e)};function Zp(t,e){Nl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var eT=function(t){Zp(e,t);function e(r,i,o,s){r===void 0&&(r=1500),o===void 0&&(o=16384),s===void 0&&(s=!1);var h=t.call(this)||this,c=16384;return o>c&&(o=c),h._properties=[!1,!0,!1,!1,!1],h._maxSize=r,h._batchSize=o,h._buffers=null,h._bufferUpdateIDs=[],h._updateID=0,h.interactiveChildren=!1,h.blendMode=xe.NORMAL,h.autoResize=s,h.roundPixels=!0,h.baseTexture=null,h.setProperties(i),h._tint=0,h.tintRgb=new Float32Array(4),h.tint=16777215,h}return e.prototype.setProperties=function(r){r&&(this._properties[0]="vertices"in r||"scale"in r?!!r.vertices||!!r.scale:this._properties[0],this._properties[1]="position"in r?!!r.position:this._properties[1],this._properties[2]="rotation"in r?!!r.rotation:this._properties[2],this._properties[3]="uvs"in r?!!r.uvs:this._properties[3],this._properties[4]="tint"in r||"alpha"in r?!!r.tint||!!r.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,io(r,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(r){var i=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return i.onChildrenChange(0)})),r.batch.setObjectRenderer(r.plugins.particle),r.plugins.particle.render(this))},e.prototype.onChildrenChange=function(r){for(var i=Math.floor(r/this._batchSize);this._bufferUpdateIDs.length<i;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[i]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var r=0;r<this._buffers.length;++r)this._buffers[r].destroy();this._buffers=null}},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(Ai),sd=function(){function t(e,r,i){this.geometry=new Uo,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var o=0;o<e.length;++o){var s=e[o];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||Te.FLOAT,offset:s.offset},r[o]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var e=this.geometry,r=0;this.indexBuffer=new kr(Y_(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var o=this.dynamicProperties[i];o.offset=r,r+=o.size,this.dynamicStride+=o.size}var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new kr(this.dynamicData,!1,!1);var h=0;this.staticStride=0;for(var i=0;i<this.staticProperties.length;++i){var o=this.staticProperties[i];o.offset=h,h+=o.size,this.staticStride+=o.size}var c=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(c),this.staticDataUint32=new Uint32Array(c),this.staticBuffer=new kr(this.staticData,!0,!1);for(var i=0;i<this.dynamicProperties.length;++i){var o=this.dynamicProperties[i];e.addAttribute(o.attributeName,this.dynamicBuffer,0,o.type===Te.UNSIGNED_BYTE,o.type,this.dynamicStride*4,o.offset*4)}for(var i=0;i<this.staticProperties.length;++i){var o=this.staticProperties[i];e.addAttribute(o.attributeName,this.staticBuffer,0,o.type===Te.UNSIGNED_BYTE,o.type,this.staticStride*4,o.offset*4)}},t.prototype.uploadDynamic=function(e,r,i){for(var o=0;o<this.dynamicProperties.length;o++){var s=this.dynamicProperties[o];s.uploadFunction(e,r,i,s.type===Te.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(e,r,i){for(var o=0;o<this.staticProperties.length;o++){var s=this.staticProperties[o];s.uploadFunction(e,r,i,s.type===Te.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),rT=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,iT=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,Qp=function(t){Zp(e,t);function e(r){var i=t.call(this,r)||this;return i.shader=null,i.properties=null,i.tempMatrix=new Sr,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Te.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=hn.from(iT,rT,{}),i.state=Rn.for2d(),i}return e.prototype.render=function(r){var i=r.children,o=r._maxSize,s=r._batchSize,h=this.renderer,c=i.length;if(c!==0){c>o&&!r.autoResize&&(c=o);var d=r._buffers;d||(d=r._buffers=this.generateBuffers(r));var _=i[0]._texture.baseTexture,y=_.alphaMode>0;this.state.blendMode=Su(r.blendMode,y),h.state.set(this.state);var I=h.gl,E=r.worldTransform.copyTo(this.tempMatrix);E.prepend(h.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=E.toArray(!0),this.shader.uniforms.uColor=j_(r.tintRgb,r.worldAlpha,this.shader.uniforms.uColor,y),this.shader.uniforms.uSampler=_,this.renderer.shader.bind(this.shader);for(var S=!1,b=0,x=0;b<c;b+=s,x+=1){var $=c-b;$>s&&($=s),x>=d.length&&d.push(this._generateOneMoreBuffer(r));var j=d[x];j.uploadDynamic(i,b,$);var Y=r._bufferUpdateIDs[x]||0;S=S||j._updateID<Y,S&&(j._updateID=r._updateID,j.uploadStatic(i,b,$)),h.geometry.bind(j.geometry),I.drawElements(I.TRIANGLES,$*6,I.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(r){for(var i=[],o=r._maxSize,s=r._batchSize,h=r._properties,c=0;c<o;c+=s)i.push(new sd(this.properties,h,s));return i},e.prototype._generateOneMoreBuffer=function(r){var i=r._batchSize,o=r._properties;return new sd(this.properties,o,i)},e.prototype.uploadVertices=function(r,i,o,s,h,c){for(var d=0,_=0,y=0,I=0,E=0;E<o;++E){var S=r[i+E],b=S._texture,x=S.scale.x,$=S.scale.y,j=b.trim,Y=b.orig;j?(_=j.x-S.anchor.x*Y.width,d=_+j.width,I=j.y-S.anchor.y*Y.height,y=I+j.height):(d=Y.width*(1-S.anchor.x),_=Y.width*-S.anchor.x,y=Y.height*(1-S.anchor.y),I=Y.height*-S.anchor.y),s[c]=_*x,s[c+1]=I*$,s[c+h]=d*x,s[c+h+1]=I*$,s[c+h*2]=d*x,s[c+h*2+1]=y*$,s[c+h*3]=_*x,s[c+h*3+1]=y*$,c+=h*4}},e.prototype.uploadPosition=function(r,i,o,s,h,c){for(var d=0;d<o;d++){var _=r[i+d].position;s[c]=_.x,s[c+1]=_.y,s[c+h]=_.x,s[c+h+1]=_.y,s[c+h*2]=_.x,s[c+h*2+1]=_.y,s[c+h*3]=_.x,s[c+h*3+1]=_.y,c+=h*4}},e.prototype.uploadRotation=function(r,i,o,s,h,c){for(var d=0;d<o;d++){var _=r[i+d].rotation;s[c]=_,s[c+h]=_,s[c+h*2]=_,s[c+h*3]=_,c+=h*4}},e.prototype.uploadUvs=function(r,i,o,s,h,c){for(var d=0;d<o;++d){var _=r[i+d]._texture._uvs;_?(s[c]=_.x0,s[c+1]=_.y0,s[c+h]=_.x1,s[c+h+1]=_.y1,s[c+h*2]=_.x2,s[c+h*2+1]=_.y2,s[c+h*3]=_.x3,s[c+h*3+1]=_.y3,c+=h*4):(s[c]=0,s[c+1]=0,s[c+h]=0,s[c+h+1]=0,s[c+h*2]=0,s[c+h*2+1]=0,s[c+h*3]=0,s[c+h*3+1]=0,c+=h*4)}},e.prototype.uploadTint=function(r,i,o,s,h,c){for(var d=0;d<o;++d){var _=r[i+d],y=_._texture.baseTexture.alphaMode>0,I=_.alpha,E=I<1&&y?Ja(_._tintRGB,I):_._tintRGB+(I*255<<24);s[c]=E,s[c+h]=E,s[c+h*2]=E,s[c+h*3]=E,c+=h*4}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e.extension={name:"particle",type:ar.RendererPlugin},e}(qs);/*!
 * @pixi/graphics - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var sn;(function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"})(sn||(sn={}));var an;(function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"})(an||(an={}));var Co={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(e===void 0&&(e=20),!this.adaptive||!t||isNaN(t))return e;var r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},i0=function(){function t(){this.color=16777215,this.alpha=1,this.texture=Ne.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Ne.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Fl=function(t,e){return Fl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},Fl(t,e)};function n0(t,e){Fl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function ad(t,e){var r,i;e===void 0&&(e=!1);var o=t.length;if(!(o<6)){for(var s=0,h=0,c=t[o-2],d=t[o-1];h<o;h+=2){var _=t[h],y=t[h+1];s+=(_-c)*(y+d),c=_,d=y}if(!e&&s>0||e&&s<=0)for(var I=o/2,h=I+I%2;h<o;h+=2){var E=o-h-2,S=o-h-1,b=h,x=h+1;r=[t[b],t[E]],t[E]=r[0],t[b]=r[1],i=[t[x],t[S]],t[S]=i[0],t[x]=i[1]}}}var o0={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var r=t.points,i=t.holes,o=e.points,s=e.indices;if(r.length>=6){ad(r,!1);for(var h=[],c=0;c<i.length;c++){var d=i[c];ad(d.points,!0),h.push(r.length/2),r=r.concat(d.points)}var _=wo(r,h,2);if(!_)return;for(var y=o.length/2,c=0;c<_.length;c+=3)s.push(_[c]+y),s.push(_[c+1]+y),s.push(_[c+2]+y);for(var c=0;c<r.length;c++)o.push(r[c])}}},Bs={build:function(t){var e=t.points,r,i,o,s,h,c;if(t.type===Xr.CIRC){var d=t.shape;r=d.x,i=d.y,h=c=d.radius,o=s=0}else if(t.type===Xr.ELIP){var _=t.shape;r=_.x,i=_.y,h=_.width,c=_.height,o=s=0}else{var y=t.shape,I=y.width/2,E=y.height/2;r=y.x+I,i=y.y+E,h=c=Math.max(0,Math.min(y.radius,Math.min(I,E))),o=I-h,s=E-c}if(!(h>=0&&c>=0&&o>=0&&s>=0)){e.length=0;return}var S=Math.ceil(2.3*Math.sqrt(h+c)),b=S*8+(o?4:0)+(s?4:0);if(e.length=b,b!==0){if(S===0){e.length=8,e[0]=e[6]=r+o,e[1]=e[3]=i+s,e[2]=e[4]=r-o,e[5]=e[7]=i-s;return}var x=0,$=S*4+(o?2:0)+2,j=$,Y=b;{var Q=o+h,it=s,J=r+Q,K=r-Q,Tt=i+it;if(e[x++]=J,e[x++]=Tt,e[--$]=Tt,e[--$]=K,s){var yt=i-it;e[j++]=K,e[j++]=yt,e[--Y]=yt,e[--Y]=J}}for(var ft=1;ft<S;ft++){var St=Math.PI/2*(ft/S),Q=o+Math.cos(St)*h,it=s+Math.sin(St)*c,J=r+Q,K=r-Q,Tt=i+it,yt=i-it;e[x++]=J,e[x++]=Tt,e[--$]=Tt,e[--$]=K,e[j++]=K,e[j++]=yt,e[--Y]=yt,e[--Y]=J}{var Q=o,it=s+c,J=r+Q,K=r-Q,Tt=i+it,yt=i-it;e[x++]=J,e[x++]=Tt,e[--Y]=yt,e[--Y]=J,o&&(e[x++]=K,e[x++]=Tt,e[--Y]=yt,e[--Y]=K)}}},triangulate:function(t,e){var r=t.points,i=e.points,o=e.indices;if(r.length!==0){var s=i.length/2,h=s,c,d;if(t.type!==Xr.RREC){var _=t.shape;c=_.x,d=_.y}else{var y=t.shape;c=y.x+y.width/2,d=y.y+y.height/2}var I=t.matrix;i.push(t.matrix?I.a*c+I.c*d+I.tx:c,t.matrix?I.b*c+I.d*d+I.ty:d),s++,i.push(r[0],r[1]);for(var E=2;E<r.length;E+=2)i.push(r[E],r[E+1]),o.push(s++,h,s);o.push(h+1,h,s)}}},Jp={build:function(t){var e=t.shape,r=e.x,i=e.y,o=e.width,s=e.height,h=t.points;h.length=0,h.push(r,i,r+o,i,r+o,i+s,r,i+s)},triangulate:function(t,e){var r=t.points,i=e.points,o=i.length/2;i.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(o,o+1,o+2,o+1,o+2,o+3)}};function mo(t,e,r){var i=e-t;return t+i*r}function Sa(t,e,r,i,o,s,h){h===void 0&&(h=[]);for(var c=20,d=h,_=0,y=0,I=0,E=0,S=0,b=0,x=0,$=0;x<=c;++x)$=x/c,_=mo(t,r,$),y=mo(e,i,$),I=mo(r,o,$),E=mo(i,s,$),S=mo(_,I,$),b=mo(y,E,$),!(x===0&&d[d.length-2]===S&&d[d.length-1]===b)&&d.push(S,b);return d}var Kp={build:function(t){if(Gs.nextRoundedRectBehavior){Bs.build(t);return}var e=t.shape,r=t.points,i=e.x,o=e.y,s=e.width,h=e.height,c=Math.max(0,Math.min(e.radius,Math.min(s,h)/2));r.length=0,c?(Sa(i,o+c,i,o,i+c,o,r),Sa(i+s-c,o,i+s,o,i+s,o+c,r),Sa(i+s,o+h-c,i+s,o+h,i+s-c,o+h,r),Sa(i+c,o+h,i,o+h,i,o+h-c,r)):r.push(i,o,i+s,o,i+s,o+h,i,o+h)},triangulate:function(t,e){if(Gs.nextRoundedRectBehavior){Bs.triangulate(t,e);return}for(var r=t.points,i=e.points,o=e.indices,s=i.length/2,h=wo(r,null,2),c=0,d=h.length;c<d;c+=3)o.push(h[c]+s),o.push(h[c+1]+s),o.push(h[c+2]+s);for(var c=0,d=r.length;c<d;c++)i.push(r[c],r[++c])}};function hd(t,e,r,i,o,s,h,c){var d=t-r*o,_=e-i*o,y=t+r*s,I=e+i*s,E,S;h?(E=i,S=-r):(E=-i,S=r);var b=d+E,x=_+S,$=y+E,j=I+S;return c.push(b,x),c.push($,j),2}function go(t,e,r,i,o,s,h,c){var d=r-t,_=i-e,y=Math.atan2(d,_),I=Math.atan2(o-t,s-e);c&&y<I?y+=Math.PI*2:!c&&y>I&&(I+=Math.PI*2);var E=y,S=I-y,b=Math.abs(S),x=Math.sqrt(d*d+_*_),$=(15*b*Math.sqrt(x)/Math.PI>>0)+1,j=S/$;if(E+=j,c){h.push(t,e),h.push(r,i);for(var Y=1,Q=E;Y<$;Y++,Q+=j)h.push(t,e),h.push(t+Math.sin(Q)*x,e+Math.cos(Q)*x);h.push(t,e),h.push(o,s)}else{h.push(r,i),h.push(t,e);for(var Y=1,Q=E;Y<$;Y++,Q+=j)h.push(t+Math.sin(Q)*x,e+Math.cos(Q)*x),h.push(t,e);h.push(o,s),h.push(t,e)}return $*2}function nT(t,e){var r=t.shape,i=t.points||r.points.slice(),o=e.closePointEps;if(i.length!==0){var s=t.lineStyle,h=new fr(i[0],i[1]),c=new fr(i[i.length-2],i[i.length-1]),d=r.type!==Xr.POLY||r.closeStroke,_=Math.abs(h.x-c.x)<o&&Math.abs(h.y-c.y)<o;if(d){i=i.slice(),_&&(i.pop(),i.pop(),c.set(i[i.length-2],i[i.length-1]));var y=(h.x+c.x)*.5,I=(c.y+h.y)*.5;i.unshift(y,I),i.push(y,I)}var E=e.points,S=i.length/2,b=i.length,x=E.length/2,$=s.width/2,j=$*$,Y=s.miterLimit*s.miterLimit,Q=i[0],it=i[1],J=i[2],K=i[3],Tt=0,yt=0,ft=-(it-K),St=Q-J,wt=0,Gt=0,oe=Math.sqrt(ft*ft+St*St);ft/=oe,St/=oe,ft*=$,St*=$;var ae=s.alignment,Yt=(1-ae)*2,Ht=ae*2;d||(s.cap===an.ROUND?b+=go(Q-ft*(Yt-Ht)*.5,it-St*(Yt-Ht)*.5,Q-ft*Yt,it-St*Yt,Q+ft*Ht,it+St*Ht,E,!0)+2:s.cap===an.SQUARE&&(b+=hd(Q,it,ft,St,Yt,Ht,!0,E))),E.push(Q-ft*Yt,it-St*Yt),E.push(Q+ft*Ht,it+St*Ht);for(var he=1;he<S-1;++he){Q=i[(he-1)*2],it=i[(he-1)*2+1],J=i[he*2],K=i[he*2+1],Tt=i[(he+1)*2],yt=i[(he+1)*2+1],ft=-(it-K),St=Q-J,oe=Math.sqrt(ft*ft+St*St),ft/=oe,St/=oe,ft*=$,St*=$,wt=-(K-yt),Gt=J-Tt,oe=Math.sqrt(wt*wt+Gt*Gt),wt/=oe,Gt/=oe,wt*=$,Gt*=$;var Kt=J-Q,ve=it-K,st=J-Tt,Et=yt-K,_t=ve*st-Et*Kt,le=_t<0;if(Math.abs(_t)<.1){E.push(J-ft*Yt,K-St*Yt),E.push(J+ft*Ht,K+St*Ht);continue}var Ut=(-ft+Q)*(-St+K)-(-ft+J)*(-St+it),se=(-wt+Tt)*(-Gt+K)-(-wt+J)*(-Gt+yt),Re=(Kt*se-st*Ut)/_t,qt=(Et*Ut-ve*se)/_t,Ge=(Re-J)*(Re-J)+(qt-K)*(qt-K),_e=J+(Re-J)*Yt,ce=K+(qt-K)*Yt,ue=J-(Re-J)*Ht,Nt=K-(qt-K)*Ht,ie=Math.min(Kt*Kt+ve*ve,st*st+Et*Et),er=le?Yt:Ht,Pe=ie+er*er*j,Ce=Ge<=Pe;Ce?s.join===sn.BEVEL||Ge/j>Y?(le?(E.push(_e,ce),E.push(J+ft*Ht,K+St*Ht),E.push(_e,ce),E.push(J+wt*Ht,K+Gt*Ht)):(E.push(J-ft*Yt,K-St*Yt),E.push(ue,Nt),E.push(J-wt*Yt,K-Gt*Yt),E.push(ue,Nt)),b+=2):s.join===sn.ROUND?le?(E.push(_e,ce),E.push(J+ft*Ht,K+St*Ht),b+=go(J,K,J+ft*Ht,K+St*Ht,J+wt*Ht,K+Gt*Ht,E,!0)+4,E.push(_e,ce),E.push(J+wt*Ht,K+Gt*Ht)):(E.push(J-ft*Yt,K-St*Yt),E.push(ue,Nt),b+=go(J,K,J-ft*Yt,K-St*Yt,J-wt*Yt,K-Gt*Yt,E,!1)+4,E.push(J-wt*Yt,K-Gt*Yt),E.push(ue,Nt)):(E.push(_e,ce),E.push(ue,Nt)):(E.push(J-ft*Yt,K-St*Yt),E.push(J+ft*Ht,K+St*Ht),s.join===sn.ROUND?le?b+=go(J,K,J+ft*Ht,K+St*Ht,J+wt*Ht,K+Gt*Ht,E,!0)+2:b+=go(J,K,J-ft*Yt,K-St*Yt,J-wt*Yt,K-Gt*Yt,E,!1)+2:s.join===sn.MITER&&Ge/j<=Y&&(le?(E.push(ue,Nt),E.push(ue,Nt)):(E.push(_e,ce),E.push(_e,ce)),b+=2),E.push(J-wt*Yt,K-Gt*Yt),E.push(J+wt*Ht,K+Gt*Ht),b+=2)}Q=i[(S-2)*2],it=i[(S-2)*2+1],J=i[(S-1)*2],K=i[(S-1)*2+1],ft=-(it-K),St=Q-J,oe=Math.sqrt(ft*ft+St*St),ft/=oe,St/=oe,ft*=$,St*=$,E.push(J-ft*Yt,K-St*Yt),E.push(J+ft*Ht,K+St*Ht),d||(s.cap===an.ROUND?b+=go(J-ft*(Yt-Ht)*.5,K-St*(Yt-Ht)*.5,J-ft*Yt,K-St*Yt,J+ft*Ht,K+St*Ht,E,!1)+2:s.cap===an.SQUARE&&(b+=hd(J,K,ft,St,Yt,Ht,!1,E)));for(var Er=e.indices,qr=Co.epsilon*Co.epsilon,he=x;he<b+x-2;++he)Q=E[he*2],it=E[he*2+1],J=E[(he+1)*2],K=E[(he+1)*2+1],Tt=E[(he+2)*2],yt=E[(he+2)*2+1],!(Math.abs(Q*(K-yt)+J*(yt-it)+Tt*(it-K))<qr)&&Er.push(he,he+1,he+2)}}function oT(t,e){var r=0,i=t.shape,o=t.points||i.points,s=i.type!==Xr.POLY||i.closeStroke;if(o.length!==0){var h=e.points,c=e.indices,d=o.length/2,_=h.length/2,y=_;for(h.push(o[0],o[1]),r=1;r<d;r++)h.push(o[r*2],o[r*2+1]),c.push(y,y+1),y++;s&&c.push(y,_)}}function Ul(t,e){t.lineStyle.native?oT(t,e):nT(t,e)}var Bl=function(){function t(){}return t.curveTo=function(e,r,i,o,s,h){var c=h[h.length-2],d=h[h.length-1],_=d-r,y=c-e,I=o-r,E=i-e,S=Math.abs(_*E-y*I);if(S<1e-8||s===0)return(h[h.length-2]!==e||h[h.length-1]!==r)&&h.push(e,r),null;var b=_*_+y*y,x=I*I+E*E,$=_*I+y*E,j=s*Math.sqrt(b)/S,Y=s*Math.sqrt(x)/S,Q=j*$/b,it=Y*$/x,J=j*E+Y*y,K=j*I+Y*_,Tt=y*(Y+Q),yt=_*(Y+Q),ft=E*(j+it),St=I*(j+it),wt=Math.atan2(yt-K,Tt-J),Gt=Math.atan2(St-K,ft-J);return{cx:J+e,cy:K+r,radius:s,startAngle:wt,endAngle:Gt,anticlockwise:y*I>E*_}},t.arc=function(e,r,i,o,s,h,c,d,_){for(var y=c-h,I=Co._segmentsCount(Math.abs(y)*s,Math.ceil(Math.abs(y)/Ls)*40),E=y/(I*2),S=E*2,b=Math.cos(E),x=Math.sin(E),$=I-1,j=$%1/$,Y=0;Y<=$;++Y){var Q=Y+j*Y,it=E+h+S*Q,J=Math.cos(it),K=-Math.sin(it);_.push((b*J+x*K)*s+i,(b*-K+x*J)*s+o)}},t}(),t2=function(){function t(){}return t.curveLength=function(e,r,i,o,s,h,c,d){for(var _=10,y=0,I=0,E=0,S=0,b=0,x=0,$=0,j=0,Y=0,Q=0,it=0,J=e,K=r,Tt=1;Tt<=_;++Tt)I=Tt/_,E=I*I,S=E*I,b=1-I,x=b*b,$=x*b,j=$*e+3*x*I*i+3*b*E*s+S*c,Y=$*r+3*x*I*o+3*b*E*h+S*d,Q=J-j,it=K-Y,J=j,K=Y,y+=Math.sqrt(Q*Q+it*it);return y},t.curveTo=function(e,r,i,o,s,h,c){var d=c[c.length-2],_=c[c.length-1];c.length-=2;var y=Co._segmentsCount(t.curveLength(d,_,e,r,i,o,s,h)),I=0,E=0,S=0,b=0,x=0;c.push(d,_);for(var $=1,j=0;$<=y;++$)j=$/y,I=1-j,E=I*I,S=E*I,b=j*j,x=b*j,c.push(S*d+3*E*j*e+3*I*b*i+x*s,S*_+3*E*j*r+3*I*b*o+x*h)},t}(),e2=function(){function t(){}return t.curveLength=function(e,r,i,o,s,h){var c=e-2*i+s,d=r-2*o+h,_=2*i-2*e,y=2*o-2*r,I=4*(c*c+d*d),E=4*(c*_+d*y),S=_*_+y*y,b=2*Math.sqrt(I+E+S),x=Math.sqrt(I),$=2*I*x,j=2*Math.sqrt(S),Y=E/x;return($*b+x*E*(b-j)+(4*S*I-E*E)*Math.log((2*x+Y+b)/(Y+j)))/(4*$)},t.curveTo=function(e,r,i,o,s){for(var h=s[s.length-2],c=s[s.length-1],d=Co._segmentsCount(t.curveLength(h,c,e,r,i,o)),_=0,y=0,I=1;I<=d;++I){var E=I/d;_=h+(e-h)*E,y=c+(r-c)*E,s.push(_+(e+(i-e)*E-_)*E,y+(r+(o-r)*E-y)*E)}},t}(),r2=function(){function t(){this.reset()}return t.prototype.begin=function(e,r,i){this.reset(),this.style=e,this.start=r,this.attribStart=i},t.prototype.end=function(e,r){this.attribSize=r-this.attribStart,this.size=e-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),Bn,Da=(Bn={},Bn[Xr.POLY]=o0,Bn[Xr.CIRC]=Bs,Bn[Xr.ELIP]=Bs,Bn[Xr.RECT]=Jp,Bn[Xr.RREC]=Kp,Bn),Gl=[],_s=[],kl=function(){function t(e,r,i,o){r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=null),this.points=[],this.holes=[],this.shape=e,this.lineStyle=i,this.fillStyle=r,this.matrix=o,this.type=e.type}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),vo=new fr,i2=function(t){n0(e,t);function e(){var r=t.call(this)||this;return r.closePointEps=1e-4,r.boundsPadding=0,r.uvsFloat32=null,r.indicesUint16=null,r.batchable=!1,r.points=[],r.colors=[],r.uvs=[],r.indices=[],r.textureIds=[],r.graphicsData=[],r.drawCalls=[],r.batchDirty=-1,r.batches=[],r.dirty=0,r.cacheDirty=-1,r.clearDirty=0,r.shapeIndex=0,r._bounds=new $s,r.boundsDirty=-1,r}return Object.defineProperty(e.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),_s.push(this.drawCalls[r]);this.drawCalls.length=0;for(var r=0;r<this.batches.length;r++){var i=this.batches[r];i.reset(),Gl.push(i)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(r,i,o,s){i===void 0&&(i=null),o===void 0&&(o=null),s===void 0&&(s=null);var h=new kl(r,i,o,s);return this.graphicsData.push(h),this.dirty++,this},e.prototype.drawHole=function(r,i){if(i===void 0&&(i=null),!this.graphicsData.length)return null;var o=new kl(r,null,null,i),s=this.graphicsData[this.graphicsData.length-1];return o.lineStyle=s.lineStyle,s.holes.push(o),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var r=0;r<this.graphicsData.length;++r)this.graphicsData[r].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(r){for(var i=this.graphicsData,o=0;o<i.length;++o){var s=i[o];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(r,vo):vo.copyFrom(r),s.shape.contains(vo.x,vo.y))){var h=!1;if(s.holes)for(var c=0;c<s.holes.length;c++){var d=s.holes[c];if(d.shape.contains(vo.x,vo.y)){h=!0;break}}if(!h)return!0}}return!1},e.prototype.updateBatches=function(){if(!this.graphicsData.length){this.batchable=!0;return}if(this.validateBatching()){this.cacheDirty=this.dirty;var r=this.uvs,i=this.graphicsData,o=null,s=null;this.batches.length>0&&(o=this.batches[this.batches.length-1],s=o.style);for(var h=this.shapeIndex;h<i.length;h++){this.shapeIndex++;var c=i[h],d=c.fillStyle,_=c.lineStyle,y=Da[c.type];y.build(c),c.matrix&&this.transformPoints(c.points,c.matrix),(d.visible||_.visible)&&this.processHoles(c.holes);for(var I=0;I<2;I++){var E=I===0?d:_;if(E.visible){var S=E.texture.baseTexture,b=this.indices.length,x=this.points.length/2;S.wrapMode=Hi.REPEAT,I===0?this.processFill(c):this.processLine(c);var $=this.points.length/2-x;$!==0&&(o&&!this._compareStyles(s,E)&&(o.end(b,x),o=null),o||(o=Gl.pop()||new r2,o.begin(E,b,x),this.batches.push(o),s=E),this.addUvs(this.points,r,E.texture,x,$,E.matrix))}}}var j=this.indices.length,Y=this.points.length/2;if(o&&o.end(j,Y),this.batches.length===0){this.batchable=!0;return}var Q=Y>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&Q===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=Q?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},e.prototype._compareStyles=function(r,i){return!(!r||!i||r.texture.baseTexture!==i.texture.baseTexture||r.color+r.alpha!==i.color+i.alpha||!!r.native!=!!i.native)},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var r=0,i=this.graphicsData.length;r<i;r++){var o=this.graphicsData[r],s=o.fillStyle,h=o.lineStyle;if(s&&!s.texture.baseTexture.valid||h&&!h.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var r=this.batches,i=0,o=r.length;i<o;i++)for(var s=r[i],h=0;h<s.size;h++){var c=s.start+h;this.indicesUint16[c]=this.indicesUint16[c]-s.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var r=this.batches,i=0;i<r.length;i++)if(r[i].style.native)return!1;return this.points.length<e.BATCHABLE_SIZE*2},e.prototype.buildDrawCalls=function(){for(var r=++ze._globalBatch,i=0;i<this.drawCalls.length;i++)this.drawCalls[i].texArray.clear(),_s.push(this.drawCalls[i]);this.drawCalls.length=0;var o=this.colors,s=this.textureIds,h=_s.pop();h||(h=new Ga,h.texArray=new ka),h.texArray.count=0,h.start=0,h.size=0,h.type=yi.TRIANGLES;var c=0,d=null,_=0,y=!1,I=yi.TRIANGLES,E=0;this.drawCalls.push(h);for(var i=0;i<this.batches.length;i++){var S=this.batches[i],b=8,x=S.style,$=x.texture.baseTexture;y!==!!x.native&&(y=!!x.native,I=y?yi.LINES:yi.TRIANGLES,d=null,c=b,r++),d!==$&&(d=$,$._batchEnabled!==r&&(c===b&&(r++,c=0,h.size>0&&(h=_s.pop(),h||(h=new Ga,h.texArray=new ka),this.drawCalls.push(h)),h.start=E,h.size=0,h.texArray.count=0,h.type=I),$.touched=1,$._batchEnabled=r,$._batchLocation=c,$.wrapMode=Hi.REPEAT,h.texArray.elements[h.texArray.count++]=$,c++)),h.size+=S.size,E+=S.size,_=$._batchLocation,this.addColors(o,x.color,x.alpha,S.attribSize,S.attribStart),this.addTextureIds(s,_,S.attribSize,S.attribStart)}ze._globalBatch=r,this.packAttributes()},e.prototype.packAttributes=function(){for(var r=this.points,i=this.uvs,o=this.colors,s=this.textureIds,h=new ArrayBuffer(r.length*3*4),c=new Float32Array(h),d=new Uint32Array(h),_=0,y=0;y<r.length/2;y++)c[_++]=r[y*2],c[_++]=r[y*2+1],c[_++]=i[y*2],c[_++]=i[y*2+1],d[_++]=o[y],c[_++]=s[y];this._buffer.update(h),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(r){if(r.holes.length)o0.triangulate(r,this);else{var i=Da[r.type];i.triangulate(r,this)}},e.prototype.processLine=function(r){Ul(r,this);for(var i=0;i<r.holes.length;i++)Ul(r.holes[i],this)},e.prototype.processHoles=function(r){for(var i=0;i<r.length;i++){var o=r[i],s=Da[o.type];s.build(o),o.matrix&&this.transformPoints(o.points,o.matrix)}},e.prototype.calculateBounds=function(){var r=this._bounds;r.clear(),r.addVertexData(this.points,0,this.points.length),r.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(r,i){for(var o=0;o<r.length/2;o++){var s=r[o*2],h=r[o*2+1];r[o*2]=i.a*s+i.c*h+i.tx,r[o*2+1]=i.b*s+i.d*h+i.ty}},e.prototype.addColors=function(r,i,o,s,h){h===void 0&&(h=0);var c=(i>>16)+(i&65280)+((i&255)<<16),d=Ja(c,o);r.length=Math.max(r.length,h+s);for(var _=0;_<s;_++)r[h+_]=d},e.prototype.addTextureIds=function(r,i,o,s){s===void 0&&(s=0),r.length=Math.max(r.length,s+o);for(var h=0;h<o;h++)r[s+h]=i},e.prototype.addUvs=function(r,i,o,s,h,c){c===void 0&&(c=null);for(var d=0,_=i.length,y=o.frame;d<h;){var I=r[(s+d)*2],E=r[(s+d)*2+1];if(c){var S=c.a*I+c.c*E+c.tx;E=c.b*I+c.d*E+c.ty,I=S}d++,i.push(I/y.width,E/y.height)}var b=o.baseTexture;(y.width<b.width||y.height<b.height)&&this.adjustUvs(i,o,_,h)},e.prototype.adjustUvs=function(r,i,o,s){for(var h=i.baseTexture,c=1e-6,d=o+s*2,_=i.frame,y=_.width/h.width,I=_.height/h.height,E=_.x/_.width,S=_.y/_.height,b=Math.floor(r[o]+c),x=Math.floor(r[o+1]+c),$=o+2;$<d;$+=2)b=Math.min(b,Math.floor(r[$]+c)),x=Math.min(x,Math.floor(r[$+1]+c));E-=b,S-=x;for(var $=o;$<d;$+=2)r[$]=(r[$]+E)*y,r[$+1]=(r[$+1]+S)*I},e.BATCHABLE_SIZE=100,e}(t0),n2=function(t){n0(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.width=0,r.alignment=.5,r.native=!1,r.cap=an.BUTT,r.join=sn.MITER,r.miterLimit=10,r}return e.prototype.clone=function(){var r=new e;return r.color=this.color,r.alpha=this.alpha,r.texture=this.texture,r.matrix=this.matrix,r.visible=this.visible,r.width=this.width,r.alignment=this.alignment,r.native=this.native,r.cap=this.cap,r.join=this.join,r.miterLimit=this.miterLimit,r},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(i0),sT=new Float32Array(3),Gh={},Gs=function(t){n0(e,t);function e(r){r===void 0&&(r=null);var i=t.call(this)||this;return i.shader=null,i.pluginName="batch",i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i._fillStyle=new i0,i._lineStyle=new n2,i._matrix=null,i._holeMode=!1,i.state=Rn.for2d(),i._geometry=r||new i2,i._geometry.refCount++,i._transformID=-1,i.tint=16777215,i.blendMode=xe.NORMAL,i}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(r,i,o,s,h){return r===void 0&&(r=null),i===void 0&&(i=0),o===void 0&&(o=1),s===void 0&&(s=.5),h===void 0&&(h=!1),typeof r=="number"&&(r={width:r,color:i,alpha:o,alignment:s,native:h}),this.lineTextureStyle(r)},e.prototype.lineTextureStyle=function(r){r=Object.assign({width:0,texture:Ne.WHITE,color:r&&r.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:an.BUTT,join:sn.MITER,miterLimit:10},r),this.currentPath&&this.startPoly();var i=r.width>0&&r.alpha>0;return i?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._lineStyle,{visible:i},r)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var r=this.currentPath.points,i=this.currentPath.points.length;i>2&&(this.drawShape(this.currentPath),this.currentPath=new Es,this.currentPath.closeStroke=!1,this.currentPath.points.push(r[i-2],r[i-1]))}else this.currentPath=new Es,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(r,i){return this.startPoly(),this.currentPath.points[0]=r,this.currentPath.points[1]=i,this},e.prototype.lineTo=function(r,i){this.currentPath||this.moveTo(0,0);var o=this.currentPath.points,s=o[o.length-2],h=o[o.length-1];return(s!==r||h!==i)&&o.push(r,i),this},e.prototype._initCurve=function(r,i){r===void 0&&(r=0),i===void 0&&(i=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[r,i]):this.moveTo(r,i)},e.prototype.quadraticCurveTo=function(r,i,o,s){this._initCurve();var h=this.currentPath.points;return h.length===0&&this.moveTo(0,0),e2.curveTo(r,i,o,s,h),this},e.prototype.bezierCurveTo=function(r,i,o,s,h,c){return this._initCurve(),t2.curveTo(r,i,o,s,h,c,this.currentPath.points),this},e.prototype.arcTo=function(r,i,o,s,h){this._initCurve(r,i);var c=this.currentPath.points,d=Bl.curveTo(r,i,o,s,h,c);if(d){var _=d.cx,y=d.cy,I=d.radius,E=d.startAngle,S=d.endAngle,b=d.anticlockwise;this.arc(_,y,I,E,S,b)}return this},e.prototype.arc=function(r,i,o,s,h,c){if(c===void 0&&(c=!1),s===h)return this;!c&&h<=s?h+=Ls:c&&s<=h&&(s+=Ls);var d=h-s;if(d===0)return this;var _=r+Math.cos(s)*o,y=i+Math.sin(s)*o,I=this._geometry.closePointEps,E=this.currentPath?this.currentPath.points:null;if(E){var S=Math.abs(E[E.length-2]-_),b=Math.abs(E[E.length-1]-y);S<I&&b<I||E.push(_,y)}else this.moveTo(_,y),E=this.currentPath.points;return Bl.arc(_,y,r,i,o,s,h,c,E),this},e.prototype.beginFill=function(r,i){return r===void 0&&(r=0),i===void 0&&(i=1),this.beginTextureFill({texture:Ne.WHITE,color:r,alpha:i})},e.prototype.beginTextureFill=function(r){r=Object.assign({texture:Ne.WHITE,color:16777215,alpha:1,matrix:null},r),this.currentPath&&this.startPoly();var i=r.alpha>0;return i?(r.matrix&&(r.matrix=r.matrix.clone(),r.matrix.invert()),Object.assign(this._fillStyle,{visible:i},r)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(r,i,o,s){return this.drawShape(new qe(r,i,o,s))},e.prototype.drawRoundedRect=function(r,i,o,s,h){return this.drawShape(new K_(r,i,o,s,h))},e.prototype.drawCircle=function(r,i,o){return this.drawShape(new Q_(r,i,o))},e.prototype.drawEllipse=function(r,i,o,s){return this.drawShape(new J_(r,i,o,s))},e.prototype.drawPolygon=function(){for(var r=arguments,i=[],o=0;o<arguments.length;o++)i[o]=r[o];var s,h=!0,c=i[0];c.points?(h=c.closeStroke,s=c.points):Array.isArray(i[0])?s=i[0]:s=i;var d=new Es(s);return d.closeStroke=h,this.drawShape(d),this},e.prototype.drawShape=function(r){return this._holeMode?this._geometry.drawHole(r,this._matrix):this._geometry.drawShape(r,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var r=this._geometry.graphicsData;return r.length===1&&r[0].shape.type===Xr.RECT&&!r[0].matrix&&!r[0].holes.length&&!(r[0].lineStyle.visible&&r[0].lineStyle.width)},e.prototype._render=function(r){this.finishPoly();var i=this._geometry;i.updateBatches(),i.batchable?(this.batchDirty!==i.batchDirty&&this._populateBatches(),this._renderBatched(r)):(r.batch.flush(),this._renderDirect(r))},e.prototype._populateBatches=function(){var r=this._geometry,i=this.blendMode,o=r.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=r.batchDirty,this.batches.length=o,this.vertexData=new Float32Array(r.points);for(var s=0;s<o;s++){var h=r.batches[s],c=h.style.color,d=new Float32Array(this.vertexData.buffer,h.attribStart*4*2,h.attribSize*2),_=new Float32Array(r.uvsFloat32.buffer,h.attribStart*4*2,h.attribSize*2),y=new Uint16Array(r.indicesUint16.buffer,h.start*2,h.size),I={vertexData:d,blendMode:i,indices:y,uvs:_,_batchRGB:io(c),_tintRGB:c,_texture:h.style.texture,alpha:h.style.alpha,worldAlpha:1};this.batches[s]=I}},e.prototype._renderBatched=function(r){if(this.batches.length){r.batch.setObjectRenderer(r.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var i=0,o=this.batches.length;i<o;i++){var s=this.batches[i];s.worldAlpha=this.worldAlpha*s.alpha,r.plugins[this.pluginName].render(s)}}},e.prototype._renderDirect=function(r){var i=this._resolveDirectShader(r),o=this._geometry,s=this.tint,h=this.worldAlpha,c=i.uniforms,d=o.drawCalls;c.translationMatrix=this.transform.worldTransform,c.tint[0]=(s>>16&255)/255*h,c.tint[1]=(s>>8&255)/255*h,c.tint[2]=(s&255)/255*h,c.tint[3]=h,r.shader.bind(i),r.geometry.bind(o,i),r.state.set(this.state);for(var _=0,y=d.length;_<y;_++)this._renderDrawCallDirect(r,o.drawCalls[_])},e.prototype._renderDrawCallDirect=function(r,i){for(var o=i.texArray,s=i.type,h=i.size,c=i.start,d=o.count,_=0;_<d;_++)r.texture.bind(o.elements[_],_);r.geometry.draw(s,h,c)},e.prototype._resolveDirectShader=function(r){var i=this.shader,o=this.pluginName;if(!i){if(!Gh[o]){for(var s=r.plugins[o].MAX_TEXTURES,h=new Int32Array(s),c=0;c<s;c++)h[c]=c;var d={tint:new Float32Array([1,1,1,1]),translationMatrix:new Sr,default:Tn.from({uSamplers:h},!0)},_=r.plugins[o]._shader.program;Gh[o]=new hn(_,d)}i=Gh[o]}return i},e.prototype._calculateBounds=function(){this.finishPoly();var r=this._geometry;if(r.graphicsData.length){var i=r.bounds,o=i.minX,s=i.minY,h=i.maxX,c=i.maxY;this._bounds.addFrame(this.transform,o,s,h,c)}},e.prototype.containsPoint=function(r){return this.worldTransform.applyInverse(r,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var r=io(this.tint,sT),i=0;i<this.batches.length;i++){var o=this.batches[i],s=o._batchRGB,h=r[0]*s[0]*255,c=r[1]*s[1]*255,d=r[2]*s[2]*255,_=(h<<16)+(c<<8)+(d|0);o._tintRGB=(_>>16)+(_&65280)+((_&255)<<16)}}},e.prototype.calculateVertices=function(){var r=this.transform._worldID;if(this._transformID!==r){this._transformID=r;for(var i=this.transform.worldTransform,o=i.a,s=i.b,h=i.c,c=i.d,d=i.tx,_=i.ty,y=this._geometry.points,I=this.vertexData,E=0,S=0;S<y.length;S+=2){var b=y[S],x=y[S+1];I[E++]=o*b+h*x+d,I[E++]=c*x+s*b+_}}},e.prototype.closePath=function(){var r=this.currentPath;return r&&(r.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(r){return this._matrix=r,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(r){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,r)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new fr,e}(Ai),aT={buildPoly:o0,buildCircle:Bs,buildRectangle:Jp,buildRoundedRectangle:Kp,buildLine:Ul,ArcUtils:Bl,BezierUtils:t2,QuadraticUtils:e2,BatchPart:r2,FILL_COMMANDS:Da,BATCH_POOL:Gl,DRAW_CALL_POOL:_s};/*!
 * @pixi/sprite - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Xl=function(t,e){return Xl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},Xl(t,e)};function hT(t,e){Xl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ss=new fr,lT=new Uint16Array([0,1,2,0,2,3]),Go=function(t){hT(e,t);function e(r){var i=t.call(this)||this;return i._anchor=new yn(i._onAnchorUpdate,i,r?r.defaultAnchor.x:0,r?r.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=xe.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=r||Ne.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=lT,i.pluginName="batch",i.isSprite=!0,i._roundPixels=re.ROUND_PIXELS,i}return e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Kn(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Kn(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var r=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===r._updateID)){this._textureID!==r._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=r._updateID;var i=this.transform.worldTransform,o=i.a,s=i.b,h=i.c,c=i.d,d=i.tx,_=i.ty,y=this.vertexData,I=r.trim,E=r.orig,S=this._anchor,b=0,x=0,$=0,j=0;if(I?(x=I.x-S._x*E.width,b=x+I.width,j=I.y-S._y*E.height,$=j+I.height):(x=-S._x*E.width,b=x+E.width,j=-S._y*E.height,$=j+E.height),y[0]=o*x+h*j+d,y[1]=c*j+s*x+_,y[2]=o*b+h*j+d,y[3]=c*j+s*b+_,y[4]=o*b+h*$+d,y[5]=c*$+s*b+_,y[6]=o*x+h*$+d,y[7]=c*$+s*x+_,this._roundPixels)for(var Y=re.RESOLUTION,Q=0;Q<y.length;++Q)y[Q]=Math.round((y[Q]*Y|0)/Y)}},e.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var r=this._texture,i=this.vertexTrimmedData,o=r.orig,s=this._anchor,h=this.transform.worldTransform,c=h.a,d=h.b,_=h.c,y=h.d,I=h.tx,E=h.ty,S=-s._x*o.width,b=S+o.width,x=-s._y*o.height,$=x+o.height;i[0]=c*S+_*x+I,i[1]=y*x+d*S+E,i[2]=c*b+_*x+I,i[3]=y*x+d*b+E,i[4]=c*b+_*$+I,i[5]=y*$+d*b+E,i[6]=c*S+_*$+I,i[7]=y*$+d*S+E},e.prototype._render=function(r){this.calculateVertices(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var r=this._texture.trim,i=this._texture.orig;!r||r.width===i.width&&r.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(r){return this.children.length===0?(this._localBounds||(this._localBounds=new $s),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new qe),r=this._localBoundsRect),this._localBounds.getRectangle(r)):t.prototype.getLocalBounds.call(this,r)},e.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,ss);var i=this._texture.orig.width,o=this._texture.orig.height,s=-i*this.anchor.x,h=0;return ss.x>=s&&ss.x<s+i&&(h=-o*this.anchor.y,ss.y>=h&&ss.y<h+o)},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var i=typeof r=="boolean"?r:r&&r.texture;if(i){var o=typeof r=="boolean"?r:r&&r.baseTexture;this._texture.destroy(!!o)}this._texture=null},e.from=function(r,i){var o=r instanceof Ne?r:Ne.from(r,i);return new e(o)},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){var i=Kn(this.scale.x)||1;this.scale.x=i*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){var i=Kn(this.scale.y)||1;this.scale.y=i*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(r){this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(r){this._texture!==r&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=r||Ne.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,r&&(r.baseTexture.valid?this._onTextureUpdate():r.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(Ai);/*!
 * @pixi/text - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Hl=function(t,e){return Hl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},Hl(t,e)};function uT(t,e){Hl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Do;(function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(Do||(Do={}));var kh={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Do.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},cT=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],oo=function(){function t(e){this.styleID=0,this.reset(),Hh(this,e,e)}return t.prototype.clone=function(){var e={};return Hh(e,this,kh),new t(e)},t.prototype.reset=function(){Hh(this,kh,kh)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(e){var r=Xh(e);this._dropShadowColor!==r&&(this._dropShadowColor=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(e){var r=Xh(e);this._fill!==r&&(this._fill=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(e){dT(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(e){var r=Xh(e);this._stroke!==r&&(this._stroke=r,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var e=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,r=this.fontFamily;Array.isArray(this.fontFamily)||(r=this.fontFamily.split(","));for(var i=r.length-1;i>=0;i--){var o=r[i].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&cT.indexOf(o)<0&&(o='"'+o+'"'),r[i]=o}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+r.join(",")},t}();function ld(t){return typeof t=="number"?Au(t):(typeof t=="string"&&t.indexOf("0x")===0&&(t=t.replace("0x","#")),t)}function Xh(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=ld(t[e]);return t}else return ld(t)}function dT(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function Hh(t,e,r){for(var i in r)Array.isArray(e[i])?t[i]=e[i].slice():t[i]=e[i]}var Di=function(){function t(e,r,i,o,s,h,c,d,_){this.text=e,this.style=r,this.width=i,this.height=o,this.lines=s,this.lineWidths=h,this.lineHeight=c,this.maxLineWidth=d,this.fontProperties=_}return t.measureText=function(e,r,i,o){o===void 0&&(o=t._canvas),i=i??r.wordWrap;var s=r.toFontString(),h=t.measureFont(s);h.fontSize===0&&(h.fontSize=r.fontSize,h.ascent=r.fontSize);var c=o.getContext("2d");c.font=s;for(var d=i?t.wordWrap(e,r,o):e,_=d.split(/(?:\r\n|\r|\n)/),y=new Array(_.length),I=0,E=0;E<_.length;E++){var S=c.measureText(_[E]).width+(_[E].length-1)*r.letterSpacing;y[E]=S,I=Math.max(I,S)}var b=I+r.strokeThickness;r.dropShadow&&(b+=r.dropShadowDistance);var x=r.lineHeight||h.fontSize+r.strokeThickness,$=Math.max(x,h.fontSize+r.strokeThickness)+(_.length-1)*(x+r.leading);return r.dropShadow&&($+=r.dropShadowDistance),new t(e,r,b,$,_,y,x+r.leading,I,h)},t.wordWrap=function(e,r,i){i===void 0&&(i=t._canvas);for(var o=i.getContext("2d"),s=0,h="",c="",d=Object.create(null),_=r.letterSpacing,y=r.whiteSpace,I=t.collapseSpaces(y),E=t.collapseNewlines(y),S=!I,b=r.wordWrapWidth+_,x=t.tokenize(e),$=0;$<x.length;$++){var j=x[$];if(t.isNewline(j)){if(!E){c+=t.addLine(h),S=!I,h="",s=0;continue}j=" "}if(I){var Y=t.isBreakingSpace(j),Q=t.isBreakingSpace(h[h.length-1]);if(Y&&Q)continue}var it=t.getFromCache(j,_,d,o);if(it>b)if(h!==""&&(c+=t.addLine(h),h="",s=0),t.canBreakWords(j,r.breakWords))for(var J=t.wordWrapSplit(j),K=0;K<J.length;K++){for(var Tt=J[K],yt=1;J[K+yt];){var ft=J[K+yt],St=Tt[Tt.length-1];if(!t.canBreakChars(St,ft,j,K,r.breakWords))Tt+=ft;else break;yt++}K+=Tt.length-1;var wt=t.getFromCache(Tt,_,d,o);wt+s>b&&(c+=t.addLine(h),S=!1,h="",s=0),h+=Tt,s+=wt}else{h.length>0&&(c+=t.addLine(h),h="",s=0);var Gt=$===x.length-1;c+=t.addLine(j,!Gt),S=!1,h="",s=0}else it+s>b&&(S=!1,c+=t.addLine(h),h="",s=0),(h.length>0||!t.isBreakingSpace(j)||S)&&(h+=j,s+=it)}return c+=t.addLine(h,!1),c},t.addLine=function(e,r){return r===void 0&&(r=!0),e=t.trimRight(e),e=r?e+`
`:e,e},t.getFromCache=function(e,r,i,o){var s=i[e];if(typeof s!="number"){var h=e.length*r;s=o.measureText(e).width+h,i[e]=s}return s},t.collapseSpaces=function(e){return e==="normal"||e==="pre-line"},t.collapseNewlines=function(e){return e==="normal"},t.trimRight=function(e){if(typeof e!="string")return"";for(var r=e.length-1;r>=0;r--){var i=e[r];if(!t.isBreakingSpace(i))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return typeof e!="string"?!1:t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,r){return typeof e!="string"?!1:t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var r=[],i="";if(typeof e!="string")return r;for(var o=0;o<e.length;o++){var s=e[o],h=e[o+1];if(t.isBreakingSpace(s,h)||t.isNewline(s)){i!==""&&(r.push(i),i=""),r.push(s);continue}i+=s}return i!==""&&r.push(i),r},t.canBreakWords=function(e,r){return r},t.canBreakChars=function(e,r,i,o,s){return!0},t.wordWrapSplit=function(e){return e.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var r={ascent:0,descent:0,fontSize:0},i=t._canvas,o=t._context;o.font=e;var s=t.METRICS_STRING+t.BASELINE_SYMBOL,h=Math.ceil(o.measureText(s).width),c=Math.ceil(o.measureText(t.BASELINE_SYMBOL).width),d=Math.ceil(t.HEIGHT_MULTIPLIER*c);c=c*t.BASELINE_MULTIPLIER|0,i.width=h,i.height=d,o.fillStyle="#f00",o.fillRect(0,0,h,d),o.font=e,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(s,0,c);var _=o.getImageData(0,0,h,d).data,y=_.length,I=h*4,E=0,S=0,b=!1;for(E=0;E<c;++E){for(var x=0;x<I;x+=4)if(_[S+x]!==255){b=!0;break}if(!b)S+=I;else break}for(r.ascent=c-E,S=y-I,b=!1,E=d;E>c;--E){for(var x=0;x<I;x+=4)if(_[S+x]!==255){b=!0;break}if(!b)S-=I;else break}return r.descent=E-c,r.fontSize=r.ascent+r.descent,t._fonts[e]=r,r},t.clearMetrics=function(e){e===void 0&&(e=""),e?delete t._fonts[e]:t._fonts={}},Object.defineProperty(t,"_canvas",{get:function(){if(!t.__canvas){var e=void 0;try{var r=new OffscreenCanvas(0,0),i=r.getContext("2d");if(i&&i.measureText)return t.__canvas=r,r;e=re.ADAPTER.createCanvas()}catch{e=re.ADAPTER.createCanvas()}e.width=e.height=10,t.__canvas=e}return t.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t,"_context",{get:function(){return t.__context||(t.__context=t._canvas.getContext("2d")),t.__context},enumerable:!1,configurable:!0}),t}();Di._fonts={};Di.METRICS_STRING="|q";Di.BASELINE_SYMBOL="M";Di.BASELINE_MULTIPLIER=1.4;Di.HEIGHT_MULTIPLIER=2;Di._newlines=[10,13];Di._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var fT={texture:!0,children:!1,baseTexture:!0},s0=function(t){uT(e,t);function e(r,i,o){var s=this,h=!1;o||(o=re.ADAPTER.createCanvas(),h=!0),o.width=3,o.height=3;var c=Ne.from(o);return c.orig=new qe,c.trim=new qe,s=t.call(this,c)||this,s._ownCanvas=h,s.canvas=o,s.context=o.getContext("2d"),s._resolution=re.RESOLUTION,s._autoResolution=!0,s._text=null,s._style=null,s._styleListener=null,s._font="",s.text=r,s.style=i,s.localStyleID=-1,s}return e.prototype.updateText=function(r){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),!(!this.dirty&&r)){this._font=this._style.toFontString();var o=this.context,s=Di.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),h=s.width,c=s.height,d=s.lines,_=s.lineHeight,y=s.lineWidths,I=s.maxLineWidth,E=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,h)+i.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,c)+i.padding*2)*this._resolution),o.scale(this._resolution,this._resolution),o.clearRect(0,0,this.canvas.width,this.canvas.height),o.font=this._font,o.lineWidth=i.strokeThickness,o.textBaseline=i.textBaseline,o.lineJoin=i.lineJoin,o.miterLimit=i.miterLimit;for(var S,b,x=i.dropShadow?2:1,$=0;$<x;++$){var j=i.dropShadow&&$===0,Y=j?Math.ceil(Math.max(1,c)+i.padding*2):0,Q=Y*this._resolution;if(j){o.fillStyle="black",o.strokeStyle="black";var it=i.dropShadowColor,J=io(typeof it=="number"?it:bu(it)),K=i.dropShadowBlur*this._resolution,Tt=i.dropShadowDistance*this._resolution;o.shadowColor="rgba("+J[0]*255+","+J[1]*255+","+J[2]*255+","+i.dropShadowAlpha+")",o.shadowBlur=K,o.shadowOffsetX=Math.cos(i.dropShadowAngle)*Tt,o.shadowOffsetY=Math.sin(i.dropShadowAngle)*Tt+Q}else o.fillStyle=this._generateFillStyle(i,d,s),o.strokeStyle=i.stroke,o.shadowColor="black",o.shadowBlur=0,o.shadowOffsetX=0,o.shadowOffsetY=0;var yt=(_-E.fontSize)/2;(!e.nextLineHeightBehavior||_-E.fontSize<0)&&(yt=0);for(var ft=0;ft<d.length;ft++)S=i.strokeThickness/2,b=i.strokeThickness/2+ft*_+E.ascent+yt,i.align==="right"?S+=I-y[ft]:i.align==="center"&&(S+=(I-y[ft])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(d[ft],S+i.padding,b+i.padding-Y,!0),i.fill&&this.drawLetterSpacing(d[ft],S+i.padding,b+i.padding-Y)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(r,i,o,s){s===void 0&&(s=!1);var h=this._style,c=h.letterSpacing,d=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(c===0||d){d&&(this.context.letterSpacing=c,this.context.textLetterSpacing=c),s?this.context.strokeText(r,i,o):this.context.fillText(r,i,o);return}for(var _=i,y=Array.from?Array.from(r):r.split(""),I=this.context.measureText(r).width,E=0,S=0;S<y.length;++S){var b=y[S];s?this.context.strokeText(b,_,o):this.context.fillText(b,_,o);for(var x="",$=S+1;$<y.length;++$)x+=y[$];E=this.context.measureText(x).width,_+=I-E+c,I=E}},e.prototype.updateTexture=function(){var r=this.canvas;if(this._style.trim){var i=V_(r);i.data&&(r.width=i.width,r.height=i.height,this.context.putImageData(i.data,0,0))}var o=this._texture,s=this._style,h=s.trim?0:s.padding,c=o.baseTexture;o.trim.width=o._frame.width=r.width/this._resolution,o.trim.height=o._frame.height=r.height/this._resolution,o.trim.x=-h,o.trim.y=-h,o.orig.width=o._frame.width-h*2,o.orig.height=o._frame.height-h*2,this._onTextureUpdate(),c.setRealSize(r.width,r.height,this._resolution),o.updateUvs(),this.dirty=!1},e.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,r)},e.prototype.updateTransform=function(){this.updateText(!0),t.prototype.updateTransform.call(this)},e.prototype.getBounds=function(r,i){return this.updateText(!0),this._textureID===-1&&(r=!1),t.prototype.getBounds.call(this,r,i)},e.prototype.getLocalBounds=function(r){return this.updateText(!0),t.prototype.getLocalBounds.call(this,r)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(r,i,o){var s=r.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var h,c=r.dropShadow?r.dropShadowDistance:0,d=r.padding||0,_=this.canvas.width/this._resolution-c-d*2,y=this.canvas.height/this._resolution-c-d*2,I=s.slice(),E=r.fillGradientStops.slice();if(!E.length)for(var S=I.length+1,b=1;b<S;++b)E.push(b/S);if(I.unshift(s[0]),E.unshift(0),I.push(s[s.length-1]),E.push(1),r.fillGradientType===Do.LINEAR_VERTICAL){h=this.context.createLinearGradient(_/2,d,_/2,y+d);for(var x=o.fontProperties.fontSize+r.strokeThickness,b=0;b<i.length;b++){var $=o.lineHeight*(b-1)+x,j=o.lineHeight*b,Y=j;b>0&&$>j&&(Y=(j+$)/2);var Q=j+x,it=o.lineHeight*(b+1),J=Q;b+1<i.length&&it<Q&&(J=(Q+it)/2);for(var K=(J-Y)/y,Tt=0;Tt<I.length;Tt++){var yt=0;typeof E[Tt]=="number"?yt=E[Tt]:yt=Tt/I.length;var ft=Math.min(1,Math.max(0,Y/y+yt*K));ft=Number(ft.toFixed(5)),h.addColorStop(ft,I[Tt])}}}else{h=this.context.createLinearGradient(d,y/2,_+d,y/2);for(var St=I.length+1,wt=1,b=0;b<I.length;b++){var Gt=void 0;typeof E[b]=="number"?Gt=E[b]:Gt=wt/St,h.addColorStop(Gt,I[b]),wt++}}return h},e.prototype.destroy=function(r){typeof r=="boolean"&&(r={children:r}),r=Object.assign({},fT,r),t.prototype.destroy.call(this,r),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(r){this.updateText(!0);var i=Kn(this.scale.x)||1;this.scale.x=i*r/this._texture.orig.width,this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(r){this.updateText(!0);var i=Kn(this.scale.y)||1;this.scale.y=i*r/this._texture.orig.height,this._height=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(r){r=r||{},r instanceof oo?this._style=r:this._style=new oo(r),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r??""),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(Go);/*!
 * @pixi/prepare - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */re.UPLOADS_PER_FRAME=4;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jl=function(t,e){return jl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},jl(t,e)};function _T(t,e){jl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var o2=function(){function t(e){this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function pT(t,e){var r=!1;if(t&&t._textures&&t._textures.length){for(var i=0;i<t._textures.length;i++)if(t._textures[i]instanceof Ne){var o=t._textures[i].baseTexture;e.indexOf(o)===-1&&(e.push(o),r=!0)}}return r}function mT(t,e){if(t.baseTexture instanceof ze){var r=t.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function gT(t,e){if(t._texture&&t._texture instanceof Ne){var r=t._texture.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function vT(t,e){return e instanceof s0?(e.updateText(!0),!0):!1}function yT(t,e){if(e instanceof oo){var r=e.toFontString();return Di.measureFont(r),!0}return!1}function ET(t,e){if(t instanceof s0){e.indexOf(t.style)===-1&&e.push(t.style),e.indexOf(t)===-1&&e.push(t);var r=t._texture.baseTexture;return e.indexOf(r)===-1&&e.push(r),!0}return!1}function TT(t,e){return t instanceof oo?(e.indexOf(t)===-1&&e.push(t),!0):!1}var s2=function(){function t(e){var r=this;this.limiter=new o2(re.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){r.queue&&r.prepareItems()},this.registerFindHook(ET),this.registerFindHook(TT),this.registerFindHook(pT),this.registerFindHook(mT),this.registerFindHook(gT),this.registerUploadHook(vT),this.registerUploadHook(yT)}return t.prototype.upload=function(e,r){var i=this;return typeof e=="function"&&(r=e,e=null),r&&ai("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise(function(o){e&&i.add(e);var s=function(){r==null||r(),o()};i.queue.length?(i.completes.push(s),i.ticking||(i.ticking=!0,jr.system.addOnce(i.tick,i,Vi.UTILITY))):s()})},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],r=!1;if(e&&!e._destroyed){for(var i=0,o=this.uploadHooks.length;i<o;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),r=!0;break}}r||this.queue.shift()}if(this.queue.length)jr.system.addOnce(this.tick,this,Vi.UTILITY);else{this.ticking=!1;var s=this.completes.slice(0);this.completes.length=0;for(var i=0,o=s.length;i<o;i++)s[i]()}},t.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},t.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},t.prototype.add=function(e){for(var r=0,i=this.addHooks.length;r<i&&!this.addHooks[r](e,this.queue);r++);if(e instanceof Ai)for(var r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this},t.prototype.destroy=function(){this.ticking&&jr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function a2(t,e){return e instanceof ze?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function AT(t,e){if(!(e instanceof Gs))return!1;var r=e.geometry;e.finishPoly(),r.updateBatches();for(var i=r.batches,o=0;o<i.length;o++){var s=i[o].style.texture;s&&a2(t,s.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function bT(t,e){return t instanceof Gs?(e.push(t),!0):!1}var h2=function(t){_T(e,t);function e(r){var i=t.call(this,r)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(bT),i.registerUploadHook(a2),i.registerUploadHook(AT),i}return e.extension={name:"prepare",type:ar.RendererPlugin},e}(s2),xT=function(){function t(e){this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();/*!
 * @pixi/spritesheet - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var l2=function(){function t(e,r,i){i===void 0&&(i=null),this.linkedSheets=[],this._texture=e instanceof Ne?e:null,this.baseTexture=e instanceof ze?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=r;var o=this.baseTexture.resource;this.resolution=this._updateResolution(i||(o?o.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(e){e===void 0&&(e=null);var r=this.data.meta.scale,i=Ds(e,null);return i===null&&(i=r!==void 0?parseFloat(r):1),i!==1&&this.baseTexture.setResolution(i),i},t.prototype.parse=function(e){var r=this;return e&&ai("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise(function(i){r._callback=function(o){e==null||e(o),i(o)},r._batchIndex=0,r._frameKeys.length<=t.BATCH_SIZE?(r._processFrames(0),r._processAnimations(),r._parseComplete()):r._nextBatch()})},t.prototype._processFrames=function(e){for(var r=e,i=t.BATCH_SIZE;r-e<i&&r<this._frameKeys.length;){var o=this._frameKeys[r],s=this._frames[o],h=s.frame;if(h){var c=null,d=null,_=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,y=new qe(0,0,Math.floor(_.w)/this.resolution,Math.floor(_.h)/this.resolution);s.rotated?c=new qe(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.h)/this.resolution,Math.floor(h.w)/this.resolution):c=new qe(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(d=new qe(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution)),this.textures[o]=new Ne(this.baseTexture,c,y,d,s.rotated?2:0,s.anchor),Ne.addToCache(this.textures[o],o)}r++}},t.prototype._processAnimations=function(){var e=this.data.animations||{};for(var r in e){this.animations[r]=[];for(var i=0;i<e[r].length;i++){var o=e[r][i];this.animations[r].push(this.textures[o])}}},t.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},t.prototype.destroy=function(e){var r;e===void 0&&(e=!1);for(var i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((r=this._texture)===null||r===void 0||r.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},t.BATCH_SIZE=1e3,t}(),u2=function(){function t(){}return t.use=function(e,r){var i,o,s=this,h=e.name+"_image";if(!e.data||e.type!==Or.TYPE.JSON||!e.data.frames||s.resources[h]){r();return}var c=(o=(i=e.data)===null||i===void 0?void 0:i.meta)===null||o===void 0?void 0:o.related_multi_packs;if(Array.isArray(c))for(var d=function(b){if(typeof b!="string")return"continue";var x=b.replace(".json",""),$=Xi.resolve(e.url.replace(s.baseUrl,""),b);if(s.resources[x]||Object.values(s.resources).some(function(Y){return Xi.format(Xi.parse(Y.url))===$}))return"continue";var j={crossOrigin:e.crossOrigin,loadType:Or.LOAD_TYPE.XHR,xhrType:Or.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};s.add(x,$,j)},_=0,y=c;_<y.length;_++){var I=y[_];d(I)}var E={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},S=t.getResourcePath(e,s.baseUrl);s.add(h,S,E,function(b){if(b.error){r(b.error);return}var x=new l2(b.texture,e.data,e.url);x.parse().then(function(){e.spritesheet=x,e.textures=x.textures,r()})})},t.getResourcePath=function(e,r){return e.isDataUrl?e.data.meta.image:Xi.resolve(e.url.replace(r,""),e.data.meta.image)},t.extension=ar.Loader,t}();/*!
 * @pixi/sprite-tiling - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Yl=function(t,e){return Yl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},Yl(t,e)};function c2(t,e){Yl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var as=new fr,ST=function(t){c2(e,t);function e(r,i,o){i===void 0&&(i=100),o===void 0&&(o=100);var s=t.call(this,r)||this;return s.tileTransform=new th,s._width=i,s._height=o,s.uvMatrix=s.texture.uvMatrix||new nh(r),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(r){this.uvMatrix.clampMargin=r,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(r){this.tileTransform.scale.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(r){this.tileTransform.position.copyFrom(r)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(r){var i=this._texture;!i||!i.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),r.batch.setObjectRenderer(r.plugins[this.pluginName]),r.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var r=this._width*-this._anchor._x,i=this._height*-this._anchor._y,o=this._width*(1-this._anchor._x),s=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,r,i,o,s)},e.prototype.getLocalBounds=function(r){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),r||(this._localBoundsRect||(this._localBoundsRect=new qe),r=this._localBoundsRect),this._bounds.getRectangle(r)):t.prototype.getLocalBounds.call(this,r)},e.prototype.containsPoint=function(r){this.worldTransform.applyInverse(r,as);var i=this._width,o=this._height,s=-i*this.anchor._x;if(as.x>=s&&as.x<s+i){var h=-o*this.anchor._y;if(as.y>=h&&as.y<h+o)return!0}return!1},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this.tileTransform=null,this.uvMatrix=null},e.from=function(r,i){var o=r instanceof Ne?r:Ne.from(r,i);return new e(o,i.width,i.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r},enumerable:!1,configurable:!0}),e}(Go),RT=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`,ud=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,PT=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,IT=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,OT=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,Ra=new Sr,d2=function(t){c2(e,t);function e(r){var i=t.call(this,r)||this;return r.runners.contextChange.add(i),i.quad=new Fu,i.state=Rn.for2d(),i}return e.prototype.contextChange=function(){var r=this.renderer,i={globals:r.globalUniforms};this.simpleShader=hn.from(ud,RT,i),this.shader=r.context.webGLVersion>1?hn.from(IT,OT,i):hn.from(ud,PT,i)},e.prototype.render=function(r){var i=this.renderer,o=this.quad,s=o.vertices;s[0]=s[6]=r._width*-r.anchor.x,s[1]=s[3]=r._height*-r.anchor.y,s[2]=s[4]=r._width*(1-r.anchor.x),s[5]=s[7]=r._height*(1-r.anchor.y);var h=r.uvRespectAnchor?r.anchor.x:0,c=r.uvRespectAnchor?r.anchor.y:0;s=o.uvs,s[0]=s[6]=-h,s[1]=s[3]=-c,s[2]=s[4]=1-h,s[5]=s[7]=1-c,o.invalidate();var d=r._texture,_=d.baseTexture,y=_.alphaMode>0,I=r.tileTransform.localTransform,E=r.uvMatrix,S=_.isPowerOfTwo&&d.frame.width===_.width&&d.frame.height===_.height;S&&(_._glTextures[i.CONTEXT_UID]?S=_.wrapMode!==Hi.CLAMP:_.wrapMode===Hi.CLAMP&&(_.wrapMode=Hi.REPEAT));var b=S?this.simpleShader:this.shader,x=d.width,$=d.height,j=r._width,Y=r._height;Ra.set(I.a*x/j,I.b*x/Y,I.c*$/j,I.d*$/Y,I.tx/j,I.ty/Y),Ra.invert(),S?Ra.prepend(E.mapCoord):(b.uniforms.uMapCoord=E.mapCoord.toArray(!0),b.uniforms.uClampFrame=E.uClampFrame,b.uniforms.uClampOffset=E.uClampOffset),b.uniforms.uTransform=Ra.toArray(!0),b.uniforms.uColor=Ru(r.tint,r.worldAlpha,b.uniforms.uColor,y),b.uniforms.translationMatrix=r.transform.worldTransform.toArray(!0),b.uniforms.uSampler=d,i.shader.bind(b),i.geometry.bind(o),this.state.blendMode=Su(r.blendMode,y),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e.extension={name:"tilingSprite",type:ar.RendererPlugin},e}(qs);/*!
 * @pixi/mesh - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Vl=function(t,e){return Vl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},Vl(t,e)};function a0(t,e){Vl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var f2=function(){function t(e,r){this.uvBuffer=e,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(e){if(!(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}},t}(),jh=new fr,cd=new Es,Lo=function(t){a0(e,t);function e(r,i,o,s){s===void 0&&(s=yi.TRIANGLES);var h=t.call(this)||this;return h.geometry=r,h.shader=i,h.state=o||Rn.for2d(),h.drawMode=s,h.start=0,h.size=0,h.uvs=null,h.indices=null,h.vertexData=new Float32Array(1),h.vertexDirty=-1,h._transformID=-1,h._roundPixels=re.ROUND_PIXELS,h.batchUvs=null,h}return Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(r){this._geometry!==r&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=r,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(r){this.shader=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(r){this.state.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){this._roundPixels!==r&&(this._transformID=-1),this._roundPixels=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(r){this.shader.tint=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(r){this.shader.texture=r},enumerable:!1,configurable:!0}),e.prototype._render=function(r){var i=this.geometry.buffers[0].data,o=this.shader;o.batchable&&this.drawMode===yi.TRIANGLES&&i.length<e.BATCHABLE_SIZE*2?this._renderToBatch(r):this._renderDefault(r)},e.prototype._renderDefault=function(r){var i=this.shader;i.alpha=this.worldAlpha,i.update&&i.update(),r.batch.flush(),i.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),r.shader.bind(i),r.state.set(this.state),r.geometry.bind(this.geometry,i),r.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(r){var i=this.geometry,o=this.shader;o.uvMatrix&&(o.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=i.indexBuffer.data,this._tintRGB=o._tintRGB,this._texture=o.texture;var s=this.material.pluginName;r.batch.setObjectRenderer(r.plugins[s]),r.plugins[s].render(this)},e.prototype.calculateVertices=function(){var r=this.geometry,i=r.buffers[0],o=i.data,s=i._updateID;if(!(s===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==o.length&&(this.vertexData=new Float32Array(o.length));for(var h=this.transform.worldTransform,c=h.a,d=h.b,_=h.c,y=h.d,I=h.tx,E=h.ty,S=this.vertexData,b=0;b<S.length/2;b++){var x=o[b*2],$=o[b*2+1];S[b*2]=c*x+_*$+I,S[b*2+1]=d*x+y*$+E}if(this._roundPixels)for(var j=re.RESOLUTION,b=0;b<S.length;++b)S[b]=Math.round((S[b]*j|0)/j);this.vertexDirty=s}},e.prototype.calculateUvs=function(){var r=this.geometry.buffers[1],i=this.shader;i.uvMatrix.isSimple?this.uvs=r.data:(this.batchUvs||(this.batchUvs=new f2(r,i.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(r){if(!this.getBounds().contains(r.x,r.y))return!1;this.worldTransform.applyInverse(r,jh);for(var i=this.geometry.getBuffer("aVertexPosition").data,o=cd.points,s=this.geometry.getIndex().data,h=s.length,c=this.drawMode===4?3:1,d=0;d+2<h;d+=c){var _=s[d]*2,y=s[d+1]*2,I=s[d+2]*2;if(o[0]=i[_],o[1]=i[_+1],o[2]=i[y],o[3]=i[y+1],o[4]=i[I],o[5]=i[I+1],cd.contains(jh.x,jh.y))return!0}return!1},e.prototype.destroy=function(r){t.prototype.destroy.call(this,r),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(Ai),wT=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,MT=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,$o=function(t){a0(e,t);function e(r,i){var o=this,s={uSampler:r,alpha:1,uTextureMatrix:Sr.IDENTITY,uColor:new Float32Array([1,1,1,1])};return i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(s,i.uniforms),o=t.call(this,i.program||Bo.from(MT,wT),s)||this,o._colorDirty=!1,o.uvMatrix=new nh(r),o.batchable=i.program===void 0,o.pluginName=i.pluginName,o.tint=i.tint,o.alpha=i.alpha,o}return Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(r){this.uniforms.uSampler!==r&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!r.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=r,this.uvMatrix.texture=r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(r){r!==this._alpha&&(this._alpha=r,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){r!==this._tint&&(this._tint=r,this._tintRGB=(r>>16)+(r&65280)+((r&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var r=this.texture.baseTexture;Ru(this._tint,this._alpha,this.uniforms.uColor,r.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(hn),Zs=function(t){a0(e,t);function e(r,i,o){var s=t.call(this)||this,h=new kr(r),c=new kr(i,!0),d=new kr(o,!0,!0);return s.addAttribute("aVertexPosition",h,2,!1,Te.FLOAT).addAttribute("aTextureCoord",c,2,!1,Te.FLOAT).addIndex(d),s._updateId=-1,s}return Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(Uo);/*!
 * @pixi/text-bitmap - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Wl=function(t,e){return Wl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},Wl(t,e)};function CT(t,e){Wl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ks=function(){function t(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}return t}(),_2=function(){function t(){}return t.test=function(e){return typeof e=="string"&&e.indexOf("info face=")===0},t.parse=function(e){var r=e.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var o in r){var s=r[o].match(/^[a-z]+/gm)[0],h=r[o].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),c={};for(var d in h){var _=h[d].split("="),y=_[0],I=_[1].replace(/"/gm,""),E=parseFloat(I),S=isNaN(E)?I:E;c[y]=S}i[s].push(c)}var b=new ks;return i.info.forEach(function(x){return b.info.push({face:x.face,size:parseInt(x.size,10)})}),i.common.forEach(function(x){return b.common.push({lineHeight:parseInt(x.lineHeight,10)})}),i.page.forEach(function(x){return b.page.push({id:parseInt(x.id,10),file:x.file})}),i.char.forEach(function(x){return b.char.push({id:parseInt(x.id,10),page:parseInt(x.page,10),x:parseInt(x.x,10),y:parseInt(x.y,10),width:parseInt(x.width,10),height:parseInt(x.height,10),xoffset:parseInt(x.xoffset,10),yoffset:parseInt(x.yoffset,10),xadvance:parseInt(x.xadvance,10)})}),i.kerning.forEach(function(x){return b.kerning.push({first:parseInt(x.first,10),second:parseInt(x.second,10),amount:parseInt(x.amount,10)})}),i.distanceField.forEach(function(x){return b.distanceField.push({distanceRange:parseInt(x.distanceRange,10),fieldType:x.fieldType})}),b},t}(),ja=function(){function t(){}return t.test=function(e){return e instanceof XMLDocument&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},t.parse=function(e){for(var r=new ks,i=e.getElementsByTagName("info"),o=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),h=e.getElementsByTagName("char"),c=e.getElementsByTagName("kerning"),d=e.getElementsByTagName("distanceField"),_=0;_<i.length;_++)r.info.push({face:i[_].getAttribute("face"),size:parseInt(i[_].getAttribute("size"),10)});for(var _=0;_<o.length;_++)r.common.push({lineHeight:parseInt(o[_].getAttribute("lineHeight"),10)});for(var _=0;_<s.length;_++)r.page.push({id:parseInt(s[_].getAttribute("id"),10)||0,file:s[_].getAttribute("file")});for(var _=0;_<h.length;_++){var y=h[_];r.char.push({id:parseInt(y.getAttribute("id"),10),page:parseInt(y.getAttribute("page"),10)||0,x:parseInt(y.getAttribute("x"),10),y:parseInt(y.getAttribute("y"),10),width:parseInt(y.getAttribute("width"),10),height:parseInt(y.getAttribute("height"),10),xoffset:parseInt(y.getAttribute("xoffset"),10),yoffset:parseInt(y.getAttribute("yoffset"),10),xadvance:parseInt(y.getAttribute("xadvance"),10)})}for(var _=0;_<c.length;_++)r.kerning.push({first:parseInt(c[_].getAttribute("first"),10),second:parseInt(c[_].getAttribute("second"),10),amount:parseInt(c[_].getAttribute("amount"),10)});for(var _=0;_<d.length;_++)r.distanceField.push({fieldType:d[_].getAttribute("fieldType"),distanceRange:parseInt(d[_].getAttribute("distanceRange"),10)});return r},t}(),p2=function(){function t(){}return t.test=function(e){if(typeof e=="string"&&e.indexOf("<font>")>-1){var r=new globalThis.DOMParser().parseFromString(e,"text/xml");return ja.test(r)}return!1},t.parse=function(e){var r=new globalThis.DOMParser().parseFromString(e,"text/xml");return ja.parse(r)},t}(),Yh=[_2,ja,p2];function h0(t){for(var e=0;e<Yh.length;e++)if(Yh[e].test(t))return Yh[e];return null}function DT(t,e,r,i,o,s){var h=r.fill;if(Array.isArray(h)){if(h.length===1)return h[0]}else return h;var c,d=r.dropShadow?r.dropShadowDistance:0,_=r.padding||0,y=t.width/i-d-_*2,I=t.height/i-d-_*2,E=h.slice(),S=r.fillGradientStops.slice();if(!S.length)for(var b=E.length+1,x=1;x<b;++x)S.push(x/b);if(E.unshift(h[0]),S.unshift(0),E.push(h[h.length-1]),S.push(1),r.fillGradientType===Do.LINEAR_VERTICAL){c=e.createLinearGradient(y/2,_,y/2,I+_);for(var $=0,j=s.fontProperties.fontSize+r.strokeThickness,Y=j/I,x=0;x<o.length;x++)for(var Q=s.lineHeight*x,it=0;it<E.length;it++){var J=0;typeof S[it]=="number"?J=S[it]:J=it/E.length;var K=Q/I+J*Y,Tt=Math.max($,K);Tt=Math.min(Tt,1),c.addColorStop(Tt,E[it]),$=Tt}}else{c=e.createLinearGradient(_,I/2,y+_,I/2);for(var yt=E.length+1,ft=1,x=0;x<E.length;x++){var St=void 0;typeof S[x]=="number"?St=S[x]:St=ft/yt,c.addColorStop(St,E[x]),ft++}}return c}function LT(t,e,r,i,o,s,h){var c=r.text,d=r.fontProperties;e.translate(i,o),e.scale(s,s);var _=h.strokeThickness/2,y=-(h.strokeThickness/2);if(e.font=h.toFontString(),e.lineWidth=h.strokeThickness,e.textBaseline=h.textBaseline,e.lineJoin=h.lineJoin,e.miterLimit=h.miterLimit,e.fillStyle=DT(t,e,h,s,[c],r),e.strokeStyle=h.stroke,h.dropShadow){var I=h.dropShadowColor,E=io(typeof I=="number"?I:bu(I)),S=h.dropShadowBlur*s,b=h.dropShadowDistance*s;e.shadowColor="rgba("+E[0]*255+","+E[1]*255+","+E[2]*255+","+h.dropShadowAlpha+")",e.shadowBlur=S,e.shadowOffsetX=Math.cos(h.dropShadowAngle)*b,e.shadowOffsetY=Math.sin(h.dropShadowAngle)*b}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;h.stroke&&h.strokeThickness&&e.strokeText(c,_,y+r.lineHeight-d.descent),h.fill&&e.fillText(c,_,y+r.lineHeight-d.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function m2(t){return Array.from?Array.from(t):t.split("")}function $T(t){typeof t=="string"&&(t=[t]);for(var e=[],r=0,i=t.length;r<i;r++){var o=t[r];if(Array.isArray(o)){if(o.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+o.length+".");var s=o[0].charCodeAt(0),h=o[1].charCodeAt(0);if(h<s)throw new Error("[BitmapFont]: Invalid character range.");for(var c=s,d=h;c<=d;c++)e.push(String.fromCharCode(c))}else e.push.apply(e,m2(o))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}function La(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}var Qn=function(){function t(e,r,i){var o,s,h=e.info[0],c=e.common[0],d=e.page[0],_=e.distanceField[0],y=Ds(d.file),I={};this._ownsTextures=i,this.font=h.face,this.size=h.size,this.lineHeight=c.lineHeight/y,this.chars={},this.pageTextures=I;for(var E=0;E<e.page.length;E++){var S=e.page[E],b=S.id,x=S.file;I[b]=r instanceof Array?r[E]:r[x],_!=null&&_.fieldType&&_.fieldType!=="none"&&(I[b].baseTexture.alphaMode=Ti.NO_PREMULTIPLIED_ALPHA)}for(var E=0;E<e.char.length;E++){var $=e.char[E],b=$.id,j=$.page,Y=e.char[E],Q=Y.x,it=Y.y,J=Y.width,K=Y.height,Tt=Y.xoffset,yt=Y.yoffset,ft=Y.xadvance;Q/=y,it/=y,J/=y,K/=y,Tt/=y,yt/=y,ft/=y;var St=new qe(Q+I[j].frame.x/y,it+I[j].frame.y/y,J,K);this.chars[b]={xOffset:Tt,yOffset:yt,xAdvance:ft,kerning:{},texture:new Ne(I[j].baseTexture,St),page:j}}for(var E=0;E<e.kerning.length;E++){var wt=e.kerning[E],Gt=wt.first,oe=wt.second,ae=wt.amount;Gt/=y,oe/=y,ae/=y,this.chars[oe]&&(this.chars[oe].kerning[Gt]=ae)}this.distanceFieldRange=_==null?void 0:_.distanceRange,this.distanceFieldType=(s=(o=_==null?void 0:_.fieldType)===null||o===void 0?void 0:o.toLowerCase())!==null&&s!==void 0?s:"none"}return t.prototype.destroy=function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null},t.install=function(e,r,i){var o;if(e instanceof ks)o=e;else{var s=h0(e);if(!s)throw new Error("Unrecognized data format for font.");o=s.parse(e)}r instanceof Ne&&(r=[r]);var h=new t(o,r,i);return t.available[h.font]=h,h},t.uninstall=function(e){var r=t.available[e];if(!r)throw new Error("No font found named '"+e+"'");r.destroy(),delete t.available[e]},t.from=function(e,r,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var o=Object.assign({},t.defaultOptions,i),s=o.chars,h=o.padding,c=o.resolution,d=o.textureWidth,_=o.textureHeight,y=$T(s),I=r instanceof oo?r:new oo(r),E=d,S=new ks;S.info[0]={face:I.fontFamily,size:I.fontSize},S.common[0]={lineHeight:I.fontSize};for(var b=0,x=0,$,j,Y,Q=0,it=[],J=0;J<y.length;J++){$||($=re.ADAPTER.createCanvas(),$.width=d,$.height=_,j=$.getContext("2d"),Y=new ze($,{resolution:c}),it.push(new Ne(Y)),S.page.push({id:it.length-1,file:""}));var K=Di.measureText(y[J],I,!1,$),Tt=K.width,yt=Math.ceil(K.height),ft=Math.ceil((I.fontStyle==="italic"?2:1)*Tt);if(x>=_-yt*c){if(x===0)throw new Error("[BitmapFont] textureHeight "+_+"px is "+("too small for "+I.fontSize+"px fonts"));--J,$=null,j=null,Y=null,x=0,b=0,Q=0;continue}if(Q=Math.max(yt+K.fontProperties.descent,Q),ft*c+b>=E){--J,x+=Q*c,x=Math.ceil(x),b=0,Q=0;continue}LT($,j,K,b,x,c,I);var St=La(K.text);S.char.push({id:St,page:it.length-1,x:b/c,y:x/c,width:ft,height:yt,xoffset:0,yoffset:0,xadvance:Math.ceil(Tt-(I.dropShadow?I.dropShadowDistance:0)-(I.stroke?I.strokeThickness:0))}),b+=(ft+2*h)*c,b=Math.ceil(b)}for(var J=0,wt=y.length;J<wt;J++)for(var Gt=y[J],oe=0;oe<wt;oe++){var ae=y[oe],Yt=j.measureText(Gt).width,Ht=j.measureText(ae).width,he=j.measureText(Gt+ae).width,Kt=he-(Yt+Ht);Kt&&S.kerning.push({first:La(Gt),second:La(ae),amount:Kt})}var ve=new t(S,it,!0);return t.available[e]!==void 0&&t.uninstall(e),t.available[e]=ve,ve},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),NT=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,FT=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`,UT=[],BT=[],dd=[],GT=function(t){CT(e,t);function e(r,i){i===void 0&&(i={});var o=t.call(this)||this;o._tint=16777215;var s=Object.assign({},e.styleDefaults,i),h=s.align,c=s.tint,d=s.maxWidth,_=s.letterSpacing,y=s.fontName,I=s.fontSize;if(!Qn.available[y])throw new Error('Missing BitmapFont "'+y+'"');return o._activePagesMeshData=[],o._textWidth=0,o._textHeight=0,o._align=h,o._tint=c,o._fontName=y,o._fontSize=I||Qn.available[y].size,o.text=r,o._maxWidth=d,o._maxLineHeight=0,o._letterSpacing=_,o._anchor=new yn(function(){o.dirty=!0},o,0,0),o._roundPixels=re.ROUND_PIXELS,o.dirty=!0,o._resolution=re.RESOLUTION,o._autoResolution=!0,o._textureCache={},o}return e.prototype.updateText=function(){for(var r,i=Qn.available[this._fontName],o=this._fontSize/i.size,s=new fr,h=[],c=[],d=[],_=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",y=m2(_),I=this._maxWidth*i.size/this._fontSize,E=i.distanceFieldType==="none"?UT:BT,S=null,b=0,x=0,$=0,j=-1,Y=0,Q=0,it=0,J=0,K=0;K<y.length;K++){var Tt=y[K],yt=La(Tt);if(/(?:\s)/.test(Tt)&&(j=K,Y=b,J++),Tt==="\r"||Tt===`
`){c.push(b),d.push(-1),x=Math.max(x,b),++$,++Q,s.x=0,s.y+=i.lineHeight,S=null,J=0;continue}var ft=i.chars[yt];if(ft){S&&ft.kerning[S]&&(s.x+=ft.kerning[S]);var St=dd.pop()||{texture:Ne.EMPTY,line:0,charCode:0,prevSpaces:0,position:new fr};St.texture=ft.texture,St.line=$,St.charCode=yt,St.position.x=s.x+ft.xOffset+this._letterSpacing/2,St.position.y=s.y+ft.yOffset,St.prevSpaces=J,h.push(St),b=St.position.x+Math.max(ft.xAdvance-ft.xOffset,ft.texture.orig.width),s.x+=ft.xAdvance+this._letterSpacing,it=Math.max(it,ft.yOffset+ft.texture.height),S=yt,j!==-1&&I>0&&s.x>I&&(++Q,to(h,1+j-Q,1+K-j),K=j,j=-1,c.push(Y),d.push(h.length>0?h[h.length-1].prevSpaces:0),x=Math.max(x,Y),$++,s.x=0,s.y+=i.lineHeight,S=null,J=0)}}var wt=y[y.length-1];wt!=="\r"&&wt!==`
`&&(/(?:\s)/.test(wt)&&(b=Y),c.push(b),x=Math.max(x,b),d.push(-1));for(var Gt=[],K=0;K<=$;K++){var oe=0;this._align==="right"?oe=x-c[K]:this._align==="center"?oe=(x-c[K])/2:this._align==="justify"&&(oe=d[K]<0?0:(x-c[K])/d[K]),Gt.push(oe)}for(var ae=h.length,Yt={},Ht=[],he=this._activePagesMeshData,K=0;K<he.length;K++)E.push(he[K]);for(var K=0;K<ae;K++){var Kt=h[K].texture,ve=Kt.baseTexture.uid;if(!Yt[ve]){var st=E.pop();if(!st){var Et=new Zs,_t=void 0,le=void 0;i.distanceFieldType==="none"?(_t=new $o(Ne.EMPTY),le=xe.NORMAL):(_t=new $o(Ne.EMPTY,{program:Bo.from(FT,NT),uniforms:{uFWidth:0}}),le=xe.NORMAL_NPM);var Ut=new Lo(Et,_t);Ut.blendMode=le,st={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Ut,vertices:null,uvs:null,indices:null}}st.index=0,st.indexCount=0,st.vertexCount=0,st.uvsCount=0,st.total=0;var se=this._textureCache;se[ve]=se[ve]||new Ne(Kt.baseTexture),st.mesh.texture=se[ve],st.mesh.tint=this._tint,Ht.push(st),Yt[ve]=st}Yt[ve].total++}for(var K=0;K<he.length;K++)Ht.indexOf(he[K])===-1&&this.removeChild(he[K].mesh);for(var K=0;K<Ht.length;K++)Ht[K].mesh.parent!==this&&this.addChild(Ht[K].mesh);this._activePagesMeshData=Ht;for(var K in Yt){var st=Yt[K],Re=st.total;if(!(((r=st.indices)===null||r===void 0?void 0:r.length)>6*Re)||st.vertices.length<Lo.BATCHABLE_SIZE*2)st.vertices=new Float32Array(4*2*Re),st.uvs=new Float32Array(4*2*Re),st.indices=new Uint16Array(6*Re);else for(var qt=st.total,Ge=st.vertices,_e=qt*4*2;_e<Ge.length;_e++)Ge[_e]=0;st.mesh.size=6*Re}for(var K=0;K<ae;K++){var Tt=h[K],ce=Tt.position.x+Gt[Tt.line]*(this._align==="justify"?Tt.prevSpaces:1);this._roundPixels&&(ce=Math.round(ce));var ue=ce*o,Nt=Tt.position.y*o,Kt=Tt.texture,ie=Yt[Kt.baseTexture.uid],er=Kt.frame,Pe=Kt._uvs,Ce=ie.index++;ie.indices[Ce*6+0]=0+Ce*4,ie.indices[Ce*6+1]=1+Ce*4,ie.indices[Ce*6+2]=2+Ce*4,ie.indices[Ce*6+3]=0+Ce*4,ie.indices[Ce*6+4]=2+Ce*4,ie.indices[Ce*6+5]=3+Ce*4,ie.vertices[Ce*8+0]=ue,ie.vertices[Ce*8+1]=Nt,ie.vertices[Ce*8+2]=ue+er.width*o,ie.vertices[Ce*8+3]=Nt,ie.vertices[Ce*8+4]=ue+er.width*o,ie.vertices[Ce*8+5]=Nt+er.height*o,ie.vertices[Ce*8+6]=ue,ie.vertices[Ce*8+7]=Nt+er.height*o,ie.uvs[Ce*8+0]=Pe.x0,ie.uvs[Ce*8+1]=Pe.y0,ie.uvs[Ce*8+2]=Pe.x1,ie.uvs[Ce*8+3]=Pe.y1,ie.uvs[Ce*8+4]=Pe.x2,ie.uvs[Ce*8+5]=Pe.y2,ie.uvs[Ce*8+6]=Pe.x3,ie.uvs[Ce*8+7]=Pe.y3}this._textWidth=x*o,this._textHeight=(s.y+i.lineHeight)*o;for(var K in Yt){var st=Yt[K];if(this.anchor.x!==0||this.anchor.y!==0)for(var Er=0,qr=this._textWidth*this.anchor.x,Ve=this._textHeight*this.anchor.y,hi=0;hi<st.total;hi++)st.vertices[Er++]-=qr,st.vertices[Er++]-=Ve,st.vertices[Er++]-=qr,st.vertices[Er++]-=Ve,st.vertices[Er++]-=qr,st.vertices[Er++]-=Ve,st.vertices[Er++]-=qr,st.vertices[Er++]-=Ve;this._maxLineHeight=it*o;var Mr=st.mesh.geometry.getBuffer("aVertexPosition"),vt=st.mesh.geometry.getBuffer("aTextureCoord"),cn=st.mesh.geometry.getIndex();Mr.data=st.vertices,vt.data=st.uvs,cn.data=st.indices,Mr.update(),vt.update(),cn.update()}for(var K=0;K<h.length;K++)dd.push(h[K])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(r){this._autoResolution&&this._resolution!==r.resolution&&(this._resolution=r.resolution,this.dirty=!0);var i=Qn.available[this._fontName],o=i.distanceFieldRange,s=i.distanceFieldType,h=i.size;if(s!=="none")for(var c=this.worldTransform,d=c.a,_=c.b,y=c.c,I=c.d,E=Math.sqrt(d*d+_*_),S=Math.sqrt(y*y+I*I),b=(Math.abs(E)+Math.abs(S))/2,x=this._fontSize/h,$=0,j=this._activePagesMeshData;$<j.length;$++){var Y=j[$];Y.mesh.shader.uniforms.uFWidth=b*o*x*this._resolution}t.prototype._render.call(this,r)},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(r){if(this._tint!==r){this._tint=r;for(var i=0;i<this._activePagesMeshData.length;i++)this._activePagesMeshData[i].mesh.tint=r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(r){this._align!==r&&(this._align=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(r){if(!Qn.available[r])throw new Error('Missing BitmapFont "'+r+'"');this._fontName!==r&&(this._fontName=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(r){this._fontSize!==r&&(this._fontSize=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(r){typeof r=="number"?this._anchor.set(r):this._anchor.copyFrom(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(r){r=String(r??""),this._text!==r&&(this._text=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(r){this._maxWidth!==r&&(this._maxWidth=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(r){this._letterSpacing!==r&&(this._letterSpacing=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(r){r!==this._roundPixels&&(this._roundPixels=r,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(r){this._autoResolution=!1,this._resolution!==r&&(this._resolution=r,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(r){var i=this._textureCache;for(var o in i){var s=i[o];s.destroy(),delete i[o]}this._textureCache=null,t.prototype.destroy.call(this,r)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(Ai),g2=function(){function t(){}return t.add=function(){Or.setExtensionXhrType("fnt",Or.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,r){var i=h0(e.data);if(!i){r();return}for(var o=t.getBaseUrl(this,e),s=i.parse(e.data),h={},c=function(x){h[x.metadata.pageFile]=x.texture,Object.keys(h).length===s.page.length&&(e.bitmapFont=Qn.install(s,h,!0),r())},d=0;d<s.page.length;++d){var _=s.page[d].file,y=o+_,I=!1;for(var E in this.resources){var S=this.resources[E];if(S.url===y){S.metadata.pageFile=_,S.texture?c(S):S.onAfterMiddleware.add(c),I=!0;break}}if(!I){var b={crossOrigin:e.crossOrigin,loadType:Or.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:_},e.metadata.imageMetadata),parentResource:e};this.add(y,b,c)}}},t.getBaseUrl=function(e,r){var i=r.isDataUrl?"":t.dirname(r.url);return r.isDataUrl&&(i==="."&&(i=""),e.baseUrl&&i&&e.baseUrl.charAt(e.baseUrl.length-1)==="/"&&(i+="/")),i=i.replace(e.baseUrl,""),i&&i.charAt(i.length-1)!=="/"&&(i+="/"),i},t.dirname=function(e){var r=e.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return r===e?".":r===""?"/":r},t.extension=ar.Loader,t}();/*!
 * @pixi/filter-alpha - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zl=function(t,e){return zl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},zl(t,e)};function kT(t,e){zl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var XT=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,HT=function(t){kT(e,t);function e(r){r===void 0&&(r=1);var i=t.call(this,Sp,XT,{uAlpha:1})||this;return i.alpha=r,i}return Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),e}(ln);/*!
 * @pixi/filter-blur - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ql=function(t,e){return ql=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},ql(t,e)};function v2(t,e){ql(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var jT=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function YT(t,e){var r=Math.ceil(t/2),i=jT,o="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var h=0;h<t;h++){var c=s.replace("%index%",h.toString());c=c.replace("%sampleIndex%",h-(r-1)+".0"),o+=c,o+=`
`}return i=i.replace("%blur%",o),i=i.replace("%size%",t.toString()),i}var VT={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},WT=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function zT(t){for(var e=VT[t],r=e.length,i=WT,o="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",h,c=0;c<t;c++){var d=s.replace("%index%",c.toString());h=c,c>=r&&(h=t-c-1),d=d.replace("%value%",e[h].toString()),o+=d,o+=`
`}return i=i.replace("%blur%",o),i=i.replace("%size%",t.toString()),i}/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var fd;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(fd||(fd={}));var _d;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(_d||(_d={}));var pd;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(pd||(pd={}));var md;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(md||(md={}));var gd;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(gd||(gd={}));var vd;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(vd||(vd={}));var yd;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(yd||(yd={}));var Ed;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(Ed||(Ed={}));var Td;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(Td||(Td={}));var Ad;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(Ad||(Ad={}));var bd;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(bd||(bd={}));var xd;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(xd||(xd={}));var Sd;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Sd||(Sd={}));var Xs;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(Xs||(Xs={}));var Rd;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Rd||(Rd={}));var Pd;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Pd||(Pd={}));var Id;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(Id||(Id={}));var Od;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(Od||(Od={}));var wd;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(wd||(wd={}));var Md;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Md||(Md={}));var Zl=function(t){v2(e,t);function e(r,i,o,s,h){i===void 0&&(i=8),o===void 0&&(o=4),s===void 0&&(s=re.FILTER_RESOLUTION),h===void 0&&(h=5);var c=this,d=YT(h,r),_=zT(h);return c=t.call(this,d,_)||this,c.horizontal=r,c.resolution=s,c._quality=0,c.quality=o,c.blur=i,c}return e.prototype.apply=function(r,i,o,s){if(o?this.horizontal?this.uniforms.strength=1/o.width*(o.width/i.width):this.uniforms.strength=1/o.height*(o.height/i.height):this.horizontal?this.uniforms.strength=1/r.renderer.width*(r.renderer.width/i.width):this.uniforms.strength=1/r.renderer.height*(r.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)r.applyFilter(this,i,o,s);else{var h=r.getFilterTexture(),c=r.renderer,d=i,_=h;this.state.blend=!1,r.applyFilter(this,d,_,Xs.CLEAR);for(var y=1;y<this.passes-1;y++){r.bindAndClear(d,Xs.BLIT),this.uniforms.uSampler=_;var I=_;_=d,d=I,c.shader.bind(this),c.geometry.draw(5)}this.state.blend=!0,r.applyFilter(this,_,o,s),r.returnFilterTexture(h)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(r){this.padding=1+Math.abs(r)*2,this.strength=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(r){this._quality=r,this.passes=r},enumerable:!1,configurable:!0}),e}(ln),qT=function(t){v2(e,t);function e(r,i,o,s){r===void 0&&(r=8),i===void 0&&(i=4),o===void 0&&(o=re.FILTER_RESOLUTION),s===void 0&&(s=5);var h=t.call(this)||this;return h.blurXFilter=new Zl(!0,r,i,o,s),h.blurYFilter=new Zl(!1,r,i,o,s),h.resolution=o,h.quality=i,h.blur=r,h.repeatEdgePixels=!1,h}return e.prototype.apply=function(r,i,o,s){var h=Math.abs(this.blurXFilter.strength),c=Math.abs(this.blurYFilter.strength);if(h&&c){var d=r.getFilterTexture();this.blurXFilter.apply(r,i,d,Xs.CLEAR),this.blurYFilter.apply(r,d,o,s),r.returnFilterTexture(d)}else c?this.blurYFilter.apply(r,i,o,s):this.blurXFilter.apply(r,i,o,s)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(r){this.blurXFilter.quality=this.blurYFilter.quality=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(r){this.blurXFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(r){this.blurYFilter.blur=r,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(r){this.blurYFilter.blendMode=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(r){this._repeatEdgePixels=r,this.updatePadding()},enumerable:!1,configurable:!0}),e}(ln);/*!
 * @pixi/filter-color-matrix - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ql=function(t,e){return Ql=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},Ql(t,e)};function ZT(t,e){Ql(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var QT=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,Jl=function(t){ZT(e,t);function e(){var r=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return r=t.call(this,Ku,QT,i)||this,r.alpha=1,r}return e.prototype._loadMatrix=function(r,i){i===void 0&&(i=!1);var o=r;i&&(this._multiply(o,this.uniforms.m,r),o=this._colorMatrix(o)),this.uniforms.m=o},e.prototype._multiply=function(r,i,o){return r[0]=i[0]*o[0]+i[1]*o[5]+i[2]*o[10]+i[3]*o[15],r[1]=i[0]*o[1]+i[1]*o[6]+i[2]*o[11]+i[3]*o[16],r[2]=i[0]*o[2]+i[1]*o[7]+i[2]*o[12]+i[3]*o[17],r[3]=i[0]*o[3]+i[1]*o[8]+i[2]*o[13]+i[3]*o[18],r[4]=i[0]*o[4]+i[1]*o[9]+i[2]*o[14]+i[3]*o[19]+i[4],r[5]=i[5]*o[0]+i[6]*o[5]+i[7]*o[10]+i[8]*o[15],r[6]=i[5]*o[1]+i[6]*o[6]+i[7]*o[11]+i[8]*o[16],r[7]=i[5]*o[2]+i[6]*o[7]+i[7]*o[12]+i[8]*o[17],r[8]=i[5]*o[3]+i[6]*o[8]+i[7]*o[13]+i[8]*o[18],r[9]=i[5]*o[4]+i[6]*o[9]+i[7]*o[14]+i[8]*o[19]+i[9],r[10]=i[10]*o[0]+i[11]*o[5]+i[12]*o[10]+i[13]*o[15],r[11]=i[10]*o[1]+i[11]*o[6]+i[12]*o[11]+i[13]*o[16],r[12]=i[10]*o[2]+i[11]*o[7]+i[12]*o[12]+i[13]*o[17],r[13]=i[10]*o[3]+i[11]*o[8]+i[12]*o[13]+i[13]*o[18],r[14]=i[10]*o[4]+i[11]*o[9]+i[12]*o[14]+i[13]*o[19]+i[14],r[15]=i[15]*o[0]+i[16]*o[5]+i[17]*o[10]+i[18]*o[15],r[16]=i[15]*o[1]+i[16]*o[6]+i[17]*o[11]+i[18]*o[16],r[17]=i[15]*o[2]+i[16]*o[7]+i[17]*o[12]+i[18]*o[17],r[18]=i[15]*o[3]+i[16]*o[8]+i[17]*o[13]+i[18]*o[18],r[19]=i[15]*o[4]+i[16]*o[9]+i[17]*o[14]+i[18]*o[19]+i[19],r},e.prototype._colorMatrix=function(r){var i=new Float32Array(r);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i},e.prototype.brightness=function(r,i){var o=[r,0,0,0,0,0,r,0,0,0,0,0,r,0,0,0,0,0,1,0];this._loadMatrix(o,i)},e.prototype.tint=function(r,i){var o=r>>16&255,s=r>>8&255,h=r&255,c=[o/255,0,0,0,0,0,s/255,0,0,0,0,0,h/255,0,0,0,0,0,1,0];this._loadMatrix(c,i)},e.prototype.greyscale=function(r,i){var o=[r,r,r,0,0,r,r,r,0,0,r,r,r,0,0,0,0,0,1,0];this._loadMatrix(o,i)},e.prototype.blackAndWhite=function(r){var i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.hue=function(r,i){r=(r||0)/180*Math.PI;var o=Math.cos(r),s=Math.sin(r),h=Math.sqrt,c=1/3,d=h(c),_=o+(1-o)*c,y=c*(1-o)-d*s,I=c*(1-o)+d*s,E=c*(1-o)+d*s,S=o+c*(1-o),b=c*(1-o)-d*s,x=c*(1-o)-d*s,$=c*(1-o)+d*s,j=o+c*(1-o),Y=[_,y,I,0,0,E,S,b,0,0,x,$,j,0,0,0,0,0,1,0];this._loadMatrix(Y,i)},e.prototype.contrast=function(r,i){var o=(r||0)+1,s=-.5*(o-1),h=[o,0,0,0,s,0,o,0,0,s,0,0,o,0,s,0,0,0,1,0];this._loadMatrix(h,i)},e.prototype.saturate=function(r,i){r===void 0&&(r=0);var o=r*2/3+1,s=(o-1)*-.5,h=[o,s,s,0,0,s,o,s,0,0,s,s,o,0,0,0,0,0,1,0];this._loadMatrix(h,i)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(r){var i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.sepia=function(r){var i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.technicolor=function(r){var i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.polaroid=function(r){var i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.toBGR=function(r){var i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.kodachrome=function(r){var i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.browni=function(r){var i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.vintage=function(r){var i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.colorTone=function(r,i,o,s,h){r=r||.2,i=i||.15,o=o||16770432,s=s||3375104;var c=(o>>16&255)/255,d=(o>>8&255)/255,_=(o&255)/255,y=(s>>16&255)/255,I=(s>>8&255)/255,E=(s&255)/255,S=[.3,.59,.11,0,0,c,d,_,r,0,y,I,E,i,0,c-y,d-I,_-E,0,0];this._loadMatrix(S,h)},e.prototype.night=function(r,i){r=r||.1;var o=[r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0];this._loadMatrix(o,i)},e.prototype.predator=function(r,i){var o=[11.224130630493164*r,-4.794486999511719*r,-2.8746118545532227*r,0*r,.40342438220977783*r,-3.6330697536468506*r,9.193157196044922*r,-2.951810836791992*r,0*r,-1.316135048866272*r,-3.2184197902679443*r,-4.2375030517578125*r,7.476448059082031*r,0*r,.8044459223747253*r,0,0,0,1,0];this._loadMatrix(o,i)},e.prototype.lsd=function(r){var i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,r)},e.prototype.reset=function(){var r=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(r,!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(r){this.uniforms.m=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(r){this.uniforms.uAlpha=r},enumerable:!1,configurable:!0}),e}(ln);Jl.prototype.grayscale=Jl.prototype.greyscale;/*!
 * @pixi/filter-displacement - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Kl=function(t,e){return Kl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},Kl(t,e)};function JT(t,e){Kl(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var KT=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,tA=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,eA=function(t){JT(e,t);function e(r,i){var o=this,s=new Sr;return r.renderable=!1,o=t.call(this,tA,KT,{mapSampler:r._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,o.maskSprite=r,o.maskMatrix=s,i==null&&(i=20),o.scale=new fr(i,i),o}return e.prototype.apply=function(r,i,o,s){this.uniforms.filterMatrix=r.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var h=this.maskSprite.worldTransform,c=Math.sqrt(h.a*h.a+h.b*h.b),d=Math.sqrt(h.c*h.c+h.d*h.d);c!==0&&d!==0&&(this.uniforms.rotation[0]=h.a/c,this.uniforms.rotation[1]=h.b/c,this.uniforms.rotation[2]=h.c/d,this.uniforms.rotation[3]=h.d/d),r.applyFilter(this,i,o,s)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(r){this.uniforms.mapSampler=r},enumerable:!1,configurable:!0}),e}(ln);/*!
 * @pixi/filter-fxaa - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var tu=function(t,e){return tu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},tu(t,e)};function rA(t,e){tu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var iA=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,nA=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,oA=function(t){rA(e,t);function e(){return t.call(this,iA,nA)||this}return e}(ln);/*!
 * @pixi/filter-noise - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var eu=function(t,e){return eu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},eu(t,e)};function sA(t,e){eu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var aA=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,hA=function(t){sA(e,t);function e(r,i){r===void 0&&(r=.5),i===void 0&&(i=Math.random());var o=t.call(this,Ku,aA,{uNoise:0,uSeed:0})||this;return o.noise=r,o.seed=i,o}return Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(r){this.uniforms.uNoise=r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(r){this.uniforms.uSeed=r},enumerable:!1,configurable:!0}),e}(ln);/*!
 * @pixi/mixin-cache-as-bitmap - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Cd;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Cd||(Cd={}));var Dd;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(Dd||(Dd={}));var Ld;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(Ld||(Ld={}));var $d;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})($d||($d={}));var Nd;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Nd||(Nd={}));var Fd;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Fd||(Fd={}));var Ud;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Ud||(Ud={}));var Bd;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(Bd||(Bd={}));var Gd;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(Gd||(Gd={}));var kd;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(kd||(kd={}));var Xd;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Xd||(Xd={}));var Hd;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Hd||(Hd={}));var jd;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(jd||(jd={}));var Yd;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(Yd||(Yd={}));var Vd;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Vd||(Vd={}));var Wd;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Wd||(Wd={}));var zd;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(zd||(zd={}));var qd;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(qd||(qd={}));var ru;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(ru||(ru={}));var Zd;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Zd||(Zd={}));var y2=new Sr;Lr.prototype._cacheAsBitmap=!1;Lr.prototype._cacheData=null;Lr.prototype._cacheAsBitmapResolution=null;Lr.prototype._cacheAsBitmapMultisample=ru.NONE;var lA=function(){function t(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return t}();Object.defineProperties(Lr.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e;t?(this._cacheData||(this._cacheData=new lA),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}});Lr.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};Lr.prototype._initCachedDisplayObject=function(t){var e;if(!(this._cacheData&&this._cacheData.sprite)){var r=this.alpha;this.alpha=1,t.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var o=this.filters[0].padding;i.pad(o)}i.ceil(re.RESOLUTION);var s=t.renderTexture.current,h=t.renderTexture.sourceFrame.clone(),c=t.renderTexture.destinationFrame.clone(),d=t.projection.transform,_=xn.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:(e=this.cacheAsBitmapMultisample)!==null&&e!==void 0?e:t.multisample}),y="cacheAsBitmap_"+bn();this._cacheData.textureCacheId=y,ze.addToCache(_.baseTexture,y),Ne.addToCache(_,y);var I=this.transform.localTransform.copyTo(y2).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:_,clear:!0,transform:I,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=d,t.renderTexture.bind(s,h,c),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var E=new Go(_);E.transform.worldTransform=this.transform.worldTransform,E.anchor.x=-(i.x/i.width),E.anchor.y=-(i.y/i.height),E.alpha=r,E._bounds=this._bounds,this._cacheData.sprite=E,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=E.containsPoint.bind(E)}};Lr.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};Lr.prototype._initCachedDisplayObjectCanvas=function(t){if(!(this._cacheData&&this._cacheData.sprite)){var e=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;var i=t.context,o=t._projTransform;e.ceil(re.RESOLUTION);var s=xn.create({width:e.width,height:e.height}),h="cacheAsBitmap_"+bn();this._cacheData.textureCacheId=h,ze.addToCache(s.baseTexture,h),Ne.addToCache(s,h);var c=y2;this.transform.localTransform.copyTo(c),c.invert(),c.tx-=e.x,c.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:s,clear:!0,transform:c,skipUpdateTransform:!1}),t.context=i,t._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var d=new Go(s);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(e.x/e.width),d.anchor.y=-(e.y/e.height),d.alpha=r,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=d.containsPoint.bind(d)}};Lr.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Lr.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Lr.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,ze.removeFromCache(this._cacheData.textureCacheId),Ne.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Lr.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};/*!
 * @pixi/mixin-get-child-by-name - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Lr.prototype.name=null;Ai.prototype.getChildByName=function(t,e){for(var r=0,i=this.children.length;r<i;r++)if(this.children[r].name===t)return this.children[r];if(e)for(var r=0,i=this.children.length;r<i;r++){var o=this.children[r];if(o.getChildByName){var s=o.getChildByName(t,!0);if(s)return s}}return null};/*!
 * @pixi/mixin-get-global-position - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Lr.prototype.getGlobalPosition=function(t,e){return t===void 0&&(t=new fr),e===void 0&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};/*!
 * @pixi/app - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var E2=function(){function t(){}return t.init=function(e){var r=this;Object.defineProperty(this,"resizeTo",{set:function(i){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){r._resizeTo&&(r.cancelResize(),r._resizeId=requestAnimationFrame(function(){return r.resize()}))},this.cancelResize=function(){r._resizeId&&(cancelAnimationFrame(r._resizeId),r._resizeId=null)},this.resize=function(){if(r._resizeTo){r.cancelResize();var i,o;if(r._resizeTo===globalThis.window)i=globalThis.innerWidth,o=globalThis.innerHeight;else{var s=r._resizeTo,h=s.clientWidth,c=s.clientHeight;i=h,o=c}r.renderer.resize(i,o)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null},t.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t.extension=ar.Application,t}();/*!
 * @pixi/settings - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var Qd;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(Qd||(Qd={}));var Jd;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(Jd||(Jd={}));var Kd;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(Kd||(Kd={}));var tf;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(tf||(tf={}));var ef;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(ef||(ef={}));var rf;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(rf||(rf={}));var nf;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(nf||(nf={}));var of;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(of||(of={}));var sf;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(sf||(sf={}));var iu;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(iu||(iu={}));var nu;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(nu||(nu={}));var ou;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(ou||(ou={}));var af;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(af||(af={}));var hf;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})(hf||(hf={}));var su;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(su||(su={}));var As;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(As||(As={}));var lf;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(lf||(lf={}));var uf;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(uf||(uf={}));var au;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(au||(au={}));var cf;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(cf||(cf={}));var uA={createCanvas:function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return(t=document.baseURI)!==null&&t!==void 0?t:window.location.href},fetch:function(t,e){return fetch(t,e)}},Vh=/iPhone/i,df=/iPod/i,ff=/iPad/i,_f=/\biOS-universal(?:.+)Mac\b/i,Wh=/\bAndroid(?:.+)Mobile\b/i,pf=/Android/i,yo=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Pa=/Silk/i,rn=/Windows Phone/i,mf=/\bWindows(?:.+)ARM\b/i,gf=/BlackBerry/i,vf=/BB10/i,yf=/Opera Mini/i,Ef=/\b(CriOS|Chrome)(?:.+)Mobile/i,Tf=/Mobile(?:.+)Firefox\b/i,Af=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function cA(t){return function(e){return e.test(t)}}function dA(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,i=r.split("[FBAN");typeof i[1]<"u"&&(r=i[0]),i=r.split("Twitter"),typeof i[1]<"u"&&(r=i[0]);var o=cA(r),s={apple:{phone:o(Vh)&&!o(rn),ipod:o(df),tablet:!o(Vh)&&(o(ff)||Af(e))&&!o(rn),universal:o(_f),device:(o(Vh)||o(df)||o(ff)||o(_f)||Af(e))&&!o(rn)},amazon:{phone:o(yo),tablet:!o(yo)&&o(Pa),device:o(yo)||o(Pa)},android:{phone:!o(rn)&&o(yo)||!o(rn)&&o(Wh),tablet:!o(rn)&&!o(yo)&&!o(Wh)&&(o(Pa)||o(pf)),device:!o(rn)&&(o(yo)||o(Pa)||o(Wh)||o(pf))||o(/\bokhttp\b/i)},windows:{phone:o(rn),tablet:o(mf),device:o(rn)||o(mf)},other:{blackberry:o(gf),blackberry10:o(vf),opera:o(yf),firefox:o(Tf),chrome:o(Ef),device:o(gf)||o(vf)||o(yf)||o(Tf)||o(Ef)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}var So=dA(globalThis.navigator);function fA(){return!So.apple.device}function _A(t){var e=!0;if(So.tablet||So.phone){if(So.apple.device){var r=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(r){var i=parseInt(r[1],10);i<11&&(e=!1)}}if(So.android.device){var r=navigator.userAgent.match(/Android\s([0-9.]*)/);if(r){var i=parseInt(r[1],10);i<7&&(e=!1)}}}return e?t:4}var Ya={ADAPTER:uA,MIPMAP_TEXTURES:ou.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:au.NONE,SPRITE_MAX_TEXTURES:_A(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:su.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:nu.CLAMP,SCALE_MODE:iu.LINEAR,PRECISION_VERTEX:As.HIGH,PRECISION_FRAGMENT:So.apple.device?As.HIGH:As.MEDIUM,CAN_UPLOAD_SAME_BUFFER:fA(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l0(t,e,r){return r={path:e,exports:{},require:function(i,o){return pA(i,o??r.path)}},t(r,r.exports),r.exports}function pA(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}l0(function(t){var e=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function o(d,_,y){this.fn=d,this.context=_,this.once=y||!1}function s(d,_,y,I,E){if(typeof y!="function")throw new TypeError("The listener must be a function");var S=new o(y,I||d,E),b=r?r+_:_;return d._events[b]?d._events[b].fn?d._events[b]=[d._events[b],S]:d._events[b].push(S):(d._events[b]=S,d._eventsCount++),d}function h(d,_){--d._eventsCount===0?d._events=new i:delete d._events[_]}function c(){this._events=new i,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],_,y;if(this._eventsCount===0)return d;for(y in _=this._events)e.call(_,y)&&d.push(r?y.slice(1):y);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(_)):d},c.prototype.listeners=function(d){var _=r?r+d:d,y=this._events[_];if(!y)return[];if(y.fn)return[y.fn];for(var I=0,E=y.length,S=new Array(E);I<E;I++)S[I]=y[I].fn;return S},c.prototype.listenerCount=function(d){var _=r?r+d:d,y=this._events[_];return y?y.fn?1:y.length:0},c.prototype.emit=function(d,_,y,I,E,S){var b=arguments,x=r?r+d:d;if(!this._events[x])return!1;var $=this._events[x],j=arguments.length,Y,Q;if($.fn){switch($.once&&this.removeListener(d,$.fn,void 0,!0),j){case 1:return $.fn.call($.context),!0;case 2:return $.fn.call($.context,_),!0;case 3:return $.fn.call($.context,_,y),!0;case 4:return $.fn.call($.context,_,y,I),!0;case 5:return $.fn.call($.context,_,y,I,E),!0;case 6:return $.fn.call($.context,_,y,I,E,S),!0}for(Q=1,Y=new Array(j-1);Q<j;Q++)Y[Q-1]=b[Q];$.fn.apply($.context,Y)}else{var it=$.length,J;for(Q=0;Q<it;Q++)switch($[Q].once&&this.removeListener(d,$[Q].fn,void 0,!0),j){case 1:$[Q].fn.call($[Q].context);break;case 2:$[Q].fn.call($[Q].context,_);break;case 3:$[Q].fn.call($[Q].context,_,y);break;case 4:$[Q].fn.call($[Q].context,_,y,I);break;default:if(!Y)for(J=1,Y=new Array(j-1);J<j;J++)Y[J-1]=b[J];$[Q].fn.apply($[Q].context,Y)}}return!0},c.prototype.on=function(d,_,y){return s(this,d,_,y,!1)},c.prototype.once=function(d,_,y){return s(this,d,_,y,!0)},c.prototype.removeListener=function(d,_,y,I){var E=r?r+d:d;if(!this._events[E])return this;if(!_)return h(this,E),this;var S=this._events[E];if(S.fn)S.fn===_&&(!I||S.once)&&(!y||S.context===y)&&h(this,E);else{for(var b=0,x=[],$=S.length;b<$;b++)(S[b].fn!==_||I&&!S[b].once||y&&S[b].context!==y)&&x.push(S[b]);x.length?this._events[E]=x.length===1?x[0]:x:h(this,E)}return this},c.prototype.removeAllListeners=function(d){var _;return d?(_=r?r+d:d,this._events[_]&&h(this,_)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,t.exports=c});l0(function(t,e){(function(r){var i=e&&!e.nodeType&&e,o=t&&!t.nodeType&&t,s=typeof zh=="object"&&zh;(s.global===s||s.window===s||s.self===s)&&(r=s);var h,c=2147483647,d=36,_=1,y=26,I=38,E=700,S=72,b=128,x="-",$=/^xn--/,j=/[^\x20-\x7E]/,Y=/[\x2E\u3002\uFF0E\uFF61]/g,Q={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},it=d-_,J=Math.floor,K=String.fromCharCode,Tt;function yt(st){throw RangeError(Q[st])}function ft(st,Et){for(var _t=st.length,le=[];_t--;)le[_t]=Et(st[_t]);return le}function St(st,Et){var _t=st.split("@"),le="";_t.length>1&&(le=_t[0]+"@",st=_t[1]),st=st.replace(Y,".");var Ut=st.split("."),se=ft(Ut,Et).join(".");return le+se}function wt(st){for(var Et=[],_t=0,le=st.length,Ut,se;_t<le;)Ut=st.charCodeAt(_t++),Ut>=55296&&Ut<=56319&&_t<le?(se=st.charCodeAt(_t++),(se&64512)==56320?Et.push(((Ut&1023)<<10)+(se&1023)+65536):(Et.push(Ut),_t--)):Et.push(Ut);return Et}function Gt(st){return ft(st,function(Et){var _t="";return Et>65535&&(Et-=65536,_t+=K(Et>>>10&1023|55296),Et=56320|Et&1023),_t+=K(Et),_t}).join("")}function oe(st){return st-48<10?st-22:st-65<26?st-65:st-97<26?st-97:d}function ae(st,Et){return st+22+75*(st<26)-((Et!=0)<<5)}function Yt(st,Et,_t){var le=0;for(st=_t?J(st/E):st>>1,st+=J(st/Et);st>it*y>>1;le+=d)st=J(st/it);return J(le+(it+1)*st/(st+I))}function Ht(st){var Et=[],_t=st.length,le,Ut=0,se=b,Re=S,qt,Ge,_e,ce,ue,Nt,ie,er,Pe;for(qt=st.lastIndexOf(x),qt<0&&(qt=0),Ge=0;Ge<qt;++Ge)st.charCodeAt(Ge)>=128&&yt("not-basic"),Et.push(st.charCodeAt(Ge));for(_e=qt>0?qt+1:0;_e<_t;){for(ce=Ut,ue=1,Nt=d;_e>=_t&&yt("invalid-input"),ie=oe(st.charCodeAt(_e++)),(ie>=d||ie>J((c-Ut)/ue))&&yt("overflow"),Ut+=ie*ue,er=Nt<=Re?_:Nt>=Re+y?y:Nt-Re,!(ie<er);Nt+=d)Pe=d-er,ue>J(c/Pe)&&yt("overflow"),ue*=Pe;le=Et.length+1,Re=Yt(Ut-ce,le,ce==0),J(Ut/le)>c-se&&yt("overflow"),se+=J(Ut/le),Ut%=le,Et.splice(Ut++,0,se)}return Gt(Et)}function he(st){var Et,_t,le,Ut,se,Re,qt,Ge,_e,ce,ue,Nt=[],ie,er,Pe,Ce;for(st=wt(st),ie=st.length,Et=b,_t=0,se=S,Re=0;Re<ie;++Re)ue=st[Re],ue<128&&Nt.push(K(ue));for(le=Ut=Nt.length,Ut&&Nt.push(x);le<ie;){for(qt=c,Re=0;Re<ie;++Re)ue=st[Re],ue>=Et&&ue<qt&&(qt=ue);for(er=le+1,qt-Et>J((c-_t)/er)&&yt("overflow"),_t+=(qt-Et)*er,Et=qt,Re=0;Re<ie;++Re)if(ue=st[Re],ue<Et&&++_t>c&&yt("overflow"),ue==Et){for(Ge=_t,_e=d;ce=_e<=se?_:_e>=se+y?y:_e-se,!(Ge<ce);_e+=d)Ce=Ge-ce,Pe=d-ce,Nt.push(K(ae(ce+Ce%Pe,0))),Ge=J(Ce/Pe);Nt.push(K(ae(Ge,0))),se=Yt(_t,er,le==Ut),_t=0,++le}++_t,++Et}return Nt.join("")}function Kt(st){return St(st,function(Et){return $.test(Et)?Ht(Et.slice(4).toLowerCase()):Et})}function ve(st){return St(st,function(Et){return j.test(Et)?"xn--"+he(Et):Et})}if(h={version:"1.3.2",ucs2:{decode:wt,encode:Gt},decode:Ht,encode:he,toASCII:ve,toUnicode:Kt},i&&o)if(t.exports==i)o.exports=h;else for(Tt in h)h.hasOwnProperty(Tt)&&(i[Tt]=h[Tt]);else r.punycode=h})(zh)});function mA(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var gA=function(t,e,r,i){e=e||"&",r=r||"=";var o={};if(typeof t!="string"||t.length===0)return o;var s=/\+/g;t=t.split(e);var h=1e3;i&&typeof i.maxKeys=="number"&&(h=i.maxKeys);var c=t.length;h>0&&c>h&&(c=h);for(var d=0;d<c;++d){var _=t[d].replace(s,"%20"),y=_.indexOf(r),I,E,S,b;y>=0?(I=_.substr(0,y),E=_.substr(y+1)):(I=_,E=""),S=decodeURIComponent(I),b=decodeURIComponent(E),mA(o,S)?Array.isArray(o[S])?o[S].push(b):o[S]=[o[S],b]:o[S]=b}return o},hs=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},vA=function(t,e,r,i){return e=e||"&",r=r||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(o){var s=encodeURIComponent(hs(o))+r;return Array.isArray(t[o])?t[o].map(function(h){return s+encodeURIComponent(hs(h))}).join(e):s+encodeURIComponent(hs(t[o]))}).join(e):i?encodeURIComponent(hs(i))+r+encodeURIComponent(hs(t)):""};l0(function(t,e){e.decode=e.parse=gA,e.encode=e.stringify=vA});/*!
 * @pixi/constants - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var bf;(function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"})(bf||(bf={}));var xf;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"})(xf||(xf={}));var Sf;(function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"})(Sf||(Sf={}));var ni;(function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"})(ni||(ni={}));var Rf;(function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Rf||(Rf={}));var Pf;(function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Pf||(Pf={}));var If;(function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(If||(If={}));var Of;(function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"})(Of||(Of={}));var wf;(function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"})(wf||(wf={}));var Mf;(function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"})(Mf||(Mf={}));var Cf;(function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Cf||(Cf={}));var Df;(function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"})(Df||(Df={}));var Lf;(function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"})(Lf||(Lf={}));var $f;(function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"})($f||($f={}));var Nf;(function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"})(Nf||(Nf={}));var Ff;(function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"})(Ff||(Ff={}));var Uf;(function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"})(Uf||(Uf={}));var Bf;(function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"})(Bf||(Bf={}));var Gf;(function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"})(Gf||(Gf={}));var kf;(function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(kf||(kf={}));/*!
 * @pixi/utils - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */Ya.RETINA_PREFIX=/@([0-9\.]+)x/;Ya.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;function yA(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[ni.NORMAL_NPM]=ni.NORMAL,t[ni.ADD_NPM]=ni.ADD,t[ni.SCREEN_NPM]=ni.SCREEN,e[ni.NORMAL]=ni.NORMAL_NPM,e[ni.ADD]=ni.ADD_NPM,e[ni.SCREEN]=ni.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i}yA();var Xf={};function EA(t,e,r){if(r===void 0&&(r=3),!Xf[e]){var i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t):(i=i.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+`
Deprecated since v`+t),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+`
Deprecated since v`+t),console.warn(i))),Xf[e]=!0}}(function(){function t(e,r,i){this.canvas=Ya.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=i||Ya.RESOLUTION,this.resize(e,r)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(e,r){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(r*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(e){this.canvas.width=Math.round(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(e){this.canvas.height=Math.round(e)},enumerable:!1,configurable:!0}),t})();var u0=function(){function t(e){var r=this;this.stage=new Ai,e=Object.assign({forceCanvas:!1},e),this.renderer=xp(e),t._plugins.forEach(function(i){i.init.call(r,e)})}return t.registerPlugin=function(e){EA("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),zi.add({type:ar.Application,ref:e})},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,r){var i=this,o=t._plugins.slice(0);o.reverse(),o.forEach(function(s){s.destroy.call(i)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}();zi.handleByList(ar.Application,u0._plugins);zi.add(E2);/*!
 * @pixi/mesh-extras - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hu=function(t,e){return hu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},hu(t,e)};function ko(t,e){hu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var T2=function(t){ko(e,t);function e(r,i,o,s){r===void 0&&(r=100),i===void 0&&(i=100),o===void 0&&(o=10),s===void 0&&(s=10);var h=t.call(this)||this;return h.segWidth=o,h.segHeight=s,h.width=r,h.height=i,h.build(),h}return e.prototype.build=function(){for(var r=this.segWidth*this.segHeight,i=[],o=[],s=[],h=this.segWidth-1,c=this.segHeight-1,d=this.width/h,_=this.height/c,y=0;y<r;y++){var I=y%this.segWidth,E=y/this.segWidth|0;i.push(I*d,E*_),o.push(I/h,E/c)}for(var S=h*c,y=0;y<S;y++){var b=y%h,x=y/h|0,$=x*this.segWidth+b,j=x*this.segWidth+b+1,Y=(x+1)*this.segWidth+b,Q=(x+1)*this.segWidth+b+1;s.push($,j,Y,j,Q,Y)}this.buffers[0].data=new Float32Array(i),this.buffers[1].data=new Float32Array(o),this.indexBuffer.data=new Uint16Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(Zs),A2=function(t){ko(e,t);function e(r,i,o){r===void 0&&(r=200),o===void 0&&(o=0);var s=t.call(this,new Float32Array(i.length*4),new Float32Array(i.length*4),new Uint16Array((i.length-1)*6))||this;return s.points=i,s._width=r,s.textureScale=o,s.build(),s}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var r=this.points;if(r){var i=this.getBuffer("aVertexPosition"),o=this.getBuffer("aTextureCoord"),s=this.getIndex();if(!(r.length<1)){i.data.length/4!==r.length&&(i.data=new Float32Array(r.length*4),o.data=new Float32Array(r.length*4),s.data=new Uint16Array((r.length-1)*6));var h=o.data,c=s.data;h[0]=0,h[1]=0,h[2]=0,h[3]=1;for(var d=0,_=r[0],y=this._width*this.textureScale,I=r.length,E=0;E<I;E++){var S=E*4;if(this.textureScale>0){var b=_.x-r[E].x,x=_.y-r[E].y,$=Math.sqrt(b*b+x*x);_=r[E],d+=$/y}else d=E/(I-1);h[S]=d,h[S+1]=0,h[S+2]=d,h[S+3]=1}for(var j=0,E=0;E<I-1;E++){var S=E*2;c[j++]=S,c[j++]=S+1,c[j++]=S+2,c[j++]=S+2,c[j++]=S+1,c[j++]=S+3}o.update(),s.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var r=this.points;if(!(r.length<1)){for(var i=r[0],o,s=0,h=0,c=this.buffers[0].data,d=r.length,_=0;_<d;_++){var y=r[_],I=_*4;_<r.length-1?o=r[_+1]:o=y,h=-(o.x-i.x),s=o.y-i.y;var E=Math.sqrt(s*s+h*h),S=this.textureScale>0?this.textureScale*this._width/2:this._width/2;s/=E,h/=E,s*=S,h*=S,c[I]=y.x+s,c[I+1]=y.y+h,c[I+2]=y.x-s,c[I+3]=y.y-h,i=y}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(Zs),TA=function(t){ko(e,t);function e(r,i,o){o===void 0&&(o=0);var s=this,h=new A2(r.height,i,o),c=new $o(r);return o>0&&(r.baseTexture.wrapMode=Hi.REPEAT),s=t.call(this,h,c)||this,s.autoUpdate=!0,s}return e.prototype._render=function(r){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),t.prototype._render.call(this,r)},e}(Lo),b2=function(t){ko(e,t);function e(r,i,o){var s=this,h=new T2(r.width,r.height,i,o),c=new $o(Ne.WHITE);return s=t.call(this,h,c)||this,s.texture=r,s.autoResize=!0,s}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var r=this.geometry,i=this.shader.texture,o=i.width,s=i.height;this.autoResize&&(r.width!==o||r.height!==s)&&(r.width=this.shader.texture.width,r.height=this.shader.texture.height,r.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(r){this.shader.texture!==r&&(this.shader.texture=r,this._textureID=-1,r.baseTexture.valid?this.textureUpdated():r.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(r){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,r)},e.prototype.destroy=function(r){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,r)},e}(Lo),AA=function(t){ko(e,t);function e(r,i,o,s,h){r===void 0&&(r=Ne.EMPTY);var c=this,d=new Zs(i,o,s);d.getBuffer("aVertexPosition").static=!1;var _=new $o(r);return c=t.call(this,d,_,null,h)||this,c.autoUpdate=!0,c}return Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),e.prototype._render=function(r){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,r)},e}(Lo),Ia=10,bA=function(t){ko(e,t);function e(r,i,o,s,h){i===void 0&&(i=Ia),o===void 0&&(o=Ia),s===void 0&&(s=Ia),h===void 0&&(h=Ia);var c=t.call(this,Ne.WHITE,4,4)||this;return c._origWidth=r.orig.width,c._origHeight=r.orig.height,c._width=c._origWidth,c._height=c._origHeight,c._leftWidth=i,c._rightWidth=s,c._topHeight=o,c._bottomHeight=h,c.texture=r,c}return e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(r){this.geometry.getBuffer("aVertexPosition").data=r},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var r=this.vertices,i=this._getMinScale();r[9]=r[11]=r[13]=r[15]=this._topHeight*i,r[17]=r[19]=r[21]=r[23]=this._height-this._bottomHeight*i,r[25]=r[27]=r[29]=r[31]=this._height},e.prototype.updateVerticalVertices=function(){var r=this.vertices,i=this._getMinScale();r[2]=r[10]=r[18]=r[26]=this._leftWidth*i,r[4]=r[12]=r[20]=r[28]=this._width-this._rightWidth*i,r[6]=r[14]=r[22]=r[30]=this._width},e.prototype._getMinScale=function(){var r=this._leftWidth+this._rightWidth,i=this._width>r?1:this._width/r,o=this._topHeight+this._bottomHeight,s=this._height>o?1:this._height/o,h=Math.min(i,s);return h},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(r){this._width=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(r){this._height=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(r){this._leftWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(r){this._rightWidth=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(r){this._topHeight=r,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(r){this._bottomHeight=r,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var r=this.texture,i=this.geometry.buffers[1].data;this._origWidth=r.orig.width,this._origHeight=r.orig.height;var o=1/this._origWidth,s=1/this._origHeight;i[0]=i[8]=i[16]=i[24]=0,i[1]=i[3]=i[5]=i[7]=0,i[6]=i[14]=i[22]=i[30]=1,i[25]=i[27]=i[29]=i[31]=1,i[2]=i[10]=i[18]=i[26]=o*this._leftWidth,i[4]=i[12]=i[20]=i[28]=1-o*this._rightWidth,i[9]=i[11]=i[13]=i[15]=s*this._topHeight,i[17]=i[19]=i[21]=i[23]=1-s*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(b2);/*!
 * @pixi/sprite-animated - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var lu=function(t,e){return lu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},lu(t,e)};function xA(t,e){lu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var SA=function(t){xA(e,t);function e(r,i){i===void 0&&(i=!0);var o=t.call(this,r[0]instanceof Ne?r[0]:r[0].texture)||this;return o._textures=null,o._durations=null,o._autoUpdate=i,o._isConnectedToTicker=!1,o.animationSpeed=1,o.loop=!0,o.updateAnchor=!1,o.onComplete=null,o.onFrameChange=null,o.onLoop=null,o._currentTime=0,o._playing=!1,o._previousFrame=null,o.textures=r,o}return e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(jr.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(jr.shared.add(this.update,this,Vi.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(r){this.stop();var i=this.currentFrame;this._currentTime=r,i!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(r){var i=this.currentFrame;this._currentTime=r,i!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(r){if(this._playing){var i=this.animationSpeed*r,o=this.currentFrame;if(this._durations!==null){var s=this._currentTime%1*this._durations[this.currentFrame];for(s+=i/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];var h=Math.sign(this.animationSpeed*r);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*h,this._currentTime+=h;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):o!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<o?this.onLoop():this.animationSpeed<0&&this.currentFrame>o&&this.onLoop()),this.updateTexture())}},e.prototype.updateTexture=function(){var r=this.currentFrame;this._previousFrame!==r&&(this._previousFrame=r,this._texture=this._textures[r],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(r){this.stop(),t.prototype.destroy.call(this,r),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(r){for(var i=[],o=0;o<r.length;++o)i.push(Ne.from(r[o]));return new e(i)},e.fromImages=function(r){for(var i=[],o=0;o<r.length;++o)i.push(Ne.from(r[o]));return new e(i)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(r){if(r[0]instanceof Ne)this._textures=r,this._durations=null;else{this._textures=[],this._durations=[];for(var i=0;i<r.length;i++)this._textures.push(r[i].texture),this._durations.push(r[i].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var r=Math.floor(this._currentTime)%this._textures.length;return r<0&&(r+=this._textures.length),r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(r){r!==this._autoUpdate&&(this._autoUpdate=r,!this._autoUpdate&&this._isConnectedToTicker?(jr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(jr.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(Go);/*!
 * pixi.js - v6.5.2
 * Compiled Wed, 24 Aug 2022 13:51:19 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */zi.add(Cp,Np,$p,Qp,h2,e0,d2,g2,Xp,zp,qp,u2,ep,Up);var RA={AlphaFilter:HT,BlurFilter:qT,BlurFilterPass:Zl,ColorMatrixFilter:Jl,DisplacementFilter:eA,FXAAFilter:oA,NoiseFilter:hA};const PA=Object.freeze(Object.defineProperty({__proto__:null,get ALPHA_MODES(){return Ti},AbstractBatchRenderer:Rp,AbstractMultiResource:rh,AbstractRenderer:bp,AccessibilityManager:Cp,AnimatedSprite:SA,AppLoaderPlugin:Up,Application:u0,ArrayResource:Ou,Attribute:Ol,get BLEND_MODES(){return xe},get BUFFER_BITS(){return ws},get BUFFER_TYPE(){return Mi},BaseImageResource:Wi,BasePrepare:s2,BaseRenderTexture:$u,BaseTexture:ze,BatchDrawCall:Ga,BatchGeometry:t0,BatchPluginFactory:Ip,BatchRenderer:e0,BatchShaderGenerator:Pp,BatchSystem:Bu,BatchTextureArray:ka,BitmapFont:Qn,BitmapFontData:ks,BitmapFontLoader:g2,BitmapText:GT,BlobResource:kp,Bounds:$s,BrowserAdapter:N_,Buffer:kr,BufferResource:ao,get CLEAR_MODES(){return nn},get COLOR_MASK_BITS(){return vl},CanvasResource:wu,Circle:Q_,CompressedTextureLoader:Xp,CompressedTextureResource:Ha,Container:Ai,ContextSystem:Gu,CountLimiter:o2,CubeResource:Mu,DDSLoader:zp,DEG_TO_RAD:Z_,get DRAW_MODES(){return yi},DisplayObject:Lr,get ENV(){return ji},Ellipse:J_,get ExtensionType(){return ar},Extract:Np,get FORMATS(){return jt},FORMATS_TO_COMPONENTS:Yp,FillStyle:i0,Filter:ln,FilterState:op,FilterSystem:Uu,Framebuffer:Ba,FramebufferSystem:ku,get GC_MODES(){return Ua},GLFramebuffer:sp,GLProgram:Ep,GLTexture:Ma,GRAPHICS_CURVES:Co,Geometry:Uo,GeometrySystem:Xu,Graphics:Gs,GraphicsData:kl,GraphicsGeometry:i2,IGLUniformData:zy,INSTALLED:Ns,get INTERNAL_FORMATS(){return ke},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:Us,ImageBitmapResource:Lu,ImageResource:ih,InteractionData:wl,InteractionEvent:Dp,InteractionManager:$p,InteractionTrackingData:Ca,KTXLoader:qp,get LINE_CAP(){return an},get LINE_JOIN(){return sn},LineStyle:n2,Loader:Fs,get LoaderResource(){return Or},get MASK_TYPES(){return Gr},get MIPMAP_MODES(){return Yi},get MSAA_QUALITY(){return Fr},MaskData:ap,MaskSystem:Hu,Matrix:Sr,Mesh:Lo,MeshBatchUvs:f2,MeshGeometry:Zs,MeshMaterial:$o,NineSlicePlane:bA,ObjectRenderer:qs,ObservablePoint:yn,PI_2:Ls,get PRECISION(){return Oi},ParticleContainer:eT,ParticleRenderer:Qp,PlaneGeometry:T2,Point:fr,Polygon:Es,Prepare:h2,Program:Bo,ProjectionSystem:Vu,Quad:np,QuadUv:Fu,RAD_TO_DEG:q_,get RENDERER_TYPE(){return Mo},Rectangle:qe,RenderTexture:xn,RenderTexturePool:ip,RenderTextureSystem:Wu,Renderer:Ju,ResizePlugin:E2,Resource:no,RopeGeometry:A2,RoundedRectangle:K_,Runner:Wr,get SAMPLER_TYPES(){return Ms},get SCALE_MODES(){return ki},get SHAPES(){return Xr},SVGResource:Cu,ScissorSystem:ju,Shader:hn,ShaderSystem:zu,SimpleMesh:AA,SimplePlane:b2,SimpleRope:TA,Sprite:Go,SpriteMaskFilter:_p,Spritesheet:l2,SpritesheetLoader:u2,State:Rn,StateSystem:qu,StencilSystem:Yu,System:uE,get TARGETS(){return En},get TEXT_GRADIENT(){return Do},get TYPES(){return Te},TYPES_TO_BYTES_PER_COMPONENT:$l,TYPES_TO_BYTES_PER_PIXEL:Vp,TemporaryDisplayObject:Iu,Text:s0,TextFormat:_2,TextMetrics:Di,TextStyle:oo,Texture:Ne,TextureGCSystem:Zu,TextureLoader:Bp,TextureMatrix:nh,TextureSystem:Qu,TextureUvs:Nu,Ticker:jr,TickerPlugin:ep,TilingSprite:ST,TilingSpriteRenderer:d2,TimeLimiter:xT,Transform:th,get UPDATE_PRIORITY(){return Vi},UniformGroup:Tn,VERSION:fE,VideoResource:Du,ViewableBuffer:Xa,get WRAP_MODES(){return Hi},XMLFormat:ja,XMLStringFormat:p2,accessibleTarget:Mp,autoDetectFormat:h0,autoDetectRenderer:xp,autoDetectResource:eh,checkMaxIfStatementsInShader:fp,createUBOElements:gp,defaultFilterVertex:Ku,defaultVertex:Sp,extensions:zi,filters:RA,generateProgram:Tp,generateUniformBufferSync:yp,getTestContext:up,getUBOData:vp,graphicsUtils:aT,groupD8:xr,interactiveTarget:Lp,isMobile:vi,parseDDS:jp,parseKTX:Wp,resources:Op,settings:re,systems:wp,uniformParsers:eo,utils:gy},Symbol.toStringTag,{value:"Module"}));var Gn=Math.pow,Pr=(t,e,r)=>new Promise((i,o)=>{var s=d=>{try{c(r.next(d))}catch(_){o(_)}},h=d=>{try{c(r.throw(d))}catch(_){o(_)}},c=d=>d.done?i(d.value):Promise.resolve(d.value).then(s,h);c((r=r.apply(t,e)).next())});const Hf=2,jf=2;var Hs;(t=>{t.supportMoreMaskDivisions=!0,t.setOpacityFromMotion=!1})(Hs||(Hs={}));var zr;(t=>{t.LOG_LEVEL_VERBOSE=0,t.LOG_LEVEL_WARNING=1,t.LOG_LEVEL_ERROR=2,t.LOG_LEVEL_NONE=999,t.logLevel=t.LOG_LEVEL_WARNING,t.sound=!0,t.motionSync=!0,t.motionFadingDuration=500,t.idleMotionFadingDuration=2e3,t.expressionFadingDuration=500,t.preserveExpressionOnMotion=!0,t.cubism4=Hs})(zr||(zr={}));const dr={log(t,...e){zr.logLevel<=zr.LOG_LEVEL_VERBOSE&&console.log(`[${t}]`,...e)},warn(t,...e){zr.logLevel<=zr.LOG_LEVEL_WARNING&&console.warn(`[${t}]`,...e)},error(t,...e){zr.logLevel<=zr.LOG_LEVEL_ERROR&&console.error(`[${t}]`,...e)}};function Va(t,e,r){return t<e?e:t>r?r:t}function IA(t,e){return Math.random()*(e-t)+t}function ls(t,e,r,i,o){const s=e[i];s!==null&&typeof s===t&&(r[o]=s)}function us(t,e,r,i,o){const s=e[i];Array.isArray(s)&&(r[o]=s.filter(h=>h!==null&&typeof h===t))}function x2(t,e){e.forEach(r=>{Object.getOwnPropertyNames(r.prototype).forEach(i=>{i!=="constructor"&&Object.defineProperty(t.prototype,i,Object.getOwnPropertyDescriptor(r.prototype,i))})})}function OA(t){let e=t.lastIndexOf("/");return e!=-1&&(t=t.slice(0,e)),e=t.lastIndexOf("/"),e!==-1&&(t=t.slice(e+1)),t}function wA(t,e){const r=t.indexOf(e);r!==-1&&t.splice(r,1)}class c0 extends Ci{constructor(e,r){super(),this.expressions=[],this.reserveExpressionIndex=-1,this.destroyed=!1,this.settings=e,this.tag=`ExpressionManager(${e.name})`}init(){this.defaultExpression=this.createExpression({},void 0),this.currentExpression=this.defaultExpression,this.stopAllExpressions()}loadExpression(e){return Pr(this,null,function*(){if(!this.definitions[e]){dr.warn(this.tag,`Undefined expression at [${e}]`);return}if(this.expressions[e]===null){dr.warn(this.tag,`Cannot set expression at [${e}] because it's already failed in loading.`);return}if(this.expressions[e])return this.expressions[e];const r=yield this._loadExpression(e);return this.expressions[e]=r,r})}_loadExpression(e){throw new Error("Not implemented.")}setRandomExpression(){return Pr(this,null,function*(){if(this.definitions.length){const e=[];for(let r=0;r<this.definitions.length;r++)this.expressions[r]!==null&&this.expressions[r]!==this.currentExpression&&r!==this.reserveExpressionIndex&&e.push(r);if(e.length){const r=Math.floor(Math.random()*e.length);return this.setExpression(r)}}return!1})}resetExpression(){this._setExpression(this.defaultExpression)}restoreExpression(){this._setExpression(this.currentExpression)}setExpression(e){return Pr(this,null,function*(){if(typeof e!="number"&&(e=this.getExpressionIndex(e)),!(e>-1&&e<this.definitions.length)||e===this.expressions.indexOf(this.currentExpression))return!1;this.reserveExpressionIndex=e;const r=yield this.loadExpression(e);return!r||this.reserveExpressionIndex!==e?!1:(this.reserveExpressionIndex=-1,this.currentExpression=r,this._setExpression(r),!0)})}update(e,r){return this.isFinished()?!1:this.updateParameters(e,r)}destroy(){this.destroyed=!0,this.emit("destroy");const e=this;e.definitions=void 0,e.expressions=void 0}}const Yf=.01,MA=40/7.5,CA=1/(.15*1e3);class DA{constructor(){this.targetX=0,this.targetY=0,this.x=0,this.y=0,this.vx=0,this.vy=0}focus(e,r,i=!1){this.targetX=Va(e,-1,1),this.targetY=Va(r,-1,1),i&&(this.x=this.targetX,this.y=this.targetY)}update(e){const r=this.targetX-this.x,i=this.targetY-this.y;if(Math.abs(r)<Yf&&Math.abs(i)<Yf)return;const o=Math.sqrt(Gn(r,2)+Gn(i,2)),s=MA/(1e3/e);let h=s*(r/o)-this.vx,c=s*(i/o)-this.vy;const d=Math.sqrt(Gn(h,2)+Gn(c,2)),_=s*CA*e;d>_&&(h*=_/d,c*=_/d),this.vx+=h,this.vy+=c;const y=Math.sqrt(Gn(this.vx,2)+Gn(this.vy,2)),I=.5*(Math.sqrt(Gn(_,2)+8*_*o)-_);y>I&&(this.vx*=I/y,this.vy*=I/y),this.x+=this.vx,this.y+=this.vy}}class oh{constructor(e){this.json=e;let r=e.url;if(typeof r!="string")throw new TypeError("The `url` field in settings JSON must be defined as a string.");this.url=r,this.name=OA(this.url)}resolveURL(e){return Xi.resolve(this.url,e)}replaceFiles(e){this.moc=e(this.moc,"moc"),this.pose!==void 0&&(this.pose=e(this.pose,"pose")),this.physics!==void 0&&(this.physics=e(this.physics,"physics"));for(let r=0;r<this.textures.length;r++)this.textures[r]=e(this.textures[r],`textures[${r}]`)}getDefinedFiles(){const e=[];return this.replaceFiles(r=>(e.push(r),r)),e}validateFiles(e){const r=(i,o)=>{const s=this.resolveURL(i);if(!e.includes(s)){if(o)throw new Error(`File "${i}" is defined in settings, but doesn't exist in given files`);return!1}return!0};return[this.moc,...this.textures].forEach(i=>r(i,!0)),this.getDefinedFiles().filter(i=>r(i,!1))}}var uu=(t=>(t[t.NONE=0]="NONE",t[t.IDLE=1]="IDLE",t[t.NORMAL=2]="NORMAL",t[t.FORCE=3]="FORCE",t))(uu||{});class LA{constructor(){this.debug=!1,this.currentPriority=0,this.reservePriority=0}reserve(e,r,i){if(i<=0)return dr.log(this.tag,"Cannot start a motion with MotionPriority.NONE."),!1;if(e===this.currentGroup&&r===this.currentIndex)return dr.log(this.tag,"Motion is already playing.",this.dump(e,r)),!1;if(e===this.reservedGroup&&r===this.reservedIndex||e===this.reservedIdleGroup&&r===this.reservedIdleIndex)return dr.log(this.tag,"Motion is already reserved.",this.dump(e,r)),!1;if(i===1){if(this.currentPriority!==0)return dr.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(e,r)),!1;if(this.reservedIdleGroup!==void 0)return dr.log(this.tag,"Cannot start idle motion because another idle motion has reserved.",this.dump(e,r)),!1;this.setReservedIdle(e,r)}else{if(i<3){if(i<=this.currentPriority)return dr.log(this.tag,"Cannot start motion because another motion is playing as an equivalent or higher priority.",this.dump(e,r)),!1;if(i<=this.reservePriority)return dr.log(this.tag,"Cannot start motion because another motion has reserved as an equivalent or higher priority.",this.dump(e,r)),!1}this.setReserved(e,r,i)}return!0}start(e,r,i,o){if(o===1){if(this.setReservedIdle(void 0,void 0),this.currentPriority!==0)return dr.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(r,i)),!1}else{if(r!==this.reservedGroup||i!==this.reservedIndex)return dr.log(this.tag,"Cannot start motion because another motion has taken the place.",this.dump(r,i)),!1;this.setReserved(void 0,void 0,0)}return e?(this.setCurrent(r,i,o),!0):!1}complete(){this.setCurrent(void 0,void 0,0)}setCurrent(e,r,i){this.currentPriority=i,this.currentGroup=e,this.currentIndex=r}setReserved(e,r,i){this.reservePriority=i,this.reservedGroup=e,this.reservedIndex=r}setReservedIdle(e,r){this.reservedIdleGroup=e,this.reservedIdleIndex=r}isActive(e,r){return e===this.currentGroup&&r===this.currentIndex||e===this.reservedGroup&&r===this.reservedIndex||e===this.reservedIdleGroup&&r===this.reservedIdleIndex}reset(){this.setCurrent(void 0,void 0,0),this.setReserved(void 0,void 0,0),this.setReservedIdle(void 0,void 0)}shouldRequestIdleMotion(){return this.currentGroup===void 0&&this.reservedIdleGroup===void 0}shouldOverrideExpression(){return!zr.preserveExpressionOnMotion&&this.currentPriority>1}dump(e,r){if(this.debug){const i=["currentPriority","reservePriority","currentGroup","currentIndex","reservedGroup","reservedIndex","reservedIdleGroup","reservedIdleIndex"];return`
<Requested> group = "${e}", index = ${r}
`+i.map(o=>"["+o+"] "+this[o]).join(`
`)}return""}}const $A="SoundManager",NA=.5;class Jn{static get volume(){return this._volume}static set volume(e){this._volume=(e>1?1:e<0?0:e)||0,this.audios.forEach(r=>r.volume=this._volume)}static add(e,r,i){const o=new Audio(e);return o.volume=this._volume,o.preload="auto",o.addEventListener("ended",()=>{this.dispose(o),r==null||r()}),o.addEventListener("error",s=>{this.dispose(o),dr.warn($A,`Error occurred on "${e}"`,s.error),i==null||i(s.error)}),this.audios.push(o),o}static play(e){return new Promise((r,i)=>{var o;(o=e.play())==null||o.catch(s=>{e.dispatchEvent(new ErrorEvent("error",{error:s})),i(s)}),e.readyState===e.HAVE_ENOUGH_DATA?r():e.addEventListener("canplaythrough",r)})}static dispose(e){e.pause(),e.removeAttribute("src"),wA(this.audios,e)}static destroy(){for(let e=this.audios.length-1;e>=0;e--)this.dispose(this.audios[e])}}Jn.audios=[];Jn._volume=NA;class sh extends Ci{constructor(e,r){super(),this.motionGroups={},this.state=new LA,this.playing=!1,this.destroyed=!1,this.settings=e,this.tag=`MotionManager(${e.name})`,this.state.tag=this.tag}init(e){e!=null&&e.idleMotionGroup&&(this.groups.idle=e.idleMotionGroup),this.setupMotions(e),this.stopAllMotions()}setupMotions(e){for(const i of Object.keys(this.definitions))this.motionGroups[i]=[];let r;switch(e==null?void 0:e.motionPreload){case"NONE":return;case"ALL":r=Object.keys(this.definitions);break;case"IDLE":default:r=[this.groups.idle];break}for(const i of r)if(this.definitions[i])for(let o=0;o<this.definitions[i].length;o++)this.loadMotion(i,o).then()}loadMotion(e,r){return Pr(this,null,function*(){var i;if(!((i=this.definitions[e])!=null&&i[r])){dr.warn(this.tag,`Undefined motion at "${e}"[${r}]`);return}if(this.motionGroups[e][r]===null){dr.warn(this.tag,`Cannot start motion at "${e}"[${r}] because it's already failed in loading.`);return}if(this.motionGroups[e][r])return this.motionGroups[e][r];const o=yield this._loadMotion(e,r);if(!this.destroyed)return this.motionGroups[e][r]=o??null,o})}_loadMotion(e,r){throw new Error("Not implemented.")}startMotion(e,r){return Pr(this,arguments,function*(i,o,s=uu.NORMAL){var h;if(!this.state.reserve(i,o,s))return!1;const c=(h=this.definitions[i])==null?void 0:h[o];if(!c)return!1;this.currentAudio&&Jn.dispose(this.currentAudio);let d;if(zr.sound){const y=this.getSoundFile(c);if(y)try{d=Jn.add(this.settings.resolveURL(y),()=>this.currentAudio=void 0,()=>this.currentAudio=void 0),this.currentAudio=d}catch(I){dr.warn(this.tag,"Failed to create audio",y,I)}}const _=yield this.loadMotion(i,o);if(d){const y=Jn.play(d).catch(I=>dr.warn(this.tag,"Failed to play audio",d.src,I));zr.motionSync&&(yield y)}return this.state.start(_,i,o,s)?(dr.log(this.tag,"Start motion:",this.getMotionName(c)),this.emit("motionStart",i,o,d),this.state.shouldOverrideExpression()&&this.expressionManager&&this.expressionManager.resetExpression(),this.playing=!0,this._startMotion(_),!0):(d&&(Jn.dispose(d),this.currentAudio=void 0),!1)})}startRandomMotion(e,r){return Pr(this,null,function*(){const i=this.definitions[e];if(i!=null&&i.length){const o=[];for(let s=0;s<i.length;s++)this.motionGroups[e][s]!==null&&!this.state.isActive(e,s)&&o.push(s);if(o.length){const s=Math.floor(Math.random()*o.length);return this.startMotion(e,o[s],r)}}return!1})}stopAllMotions(){this._stopAllMotions(),this.state.reset(),this.currentAudio&&(Jn.dispose(this.currentAudio),this.currentAudio=void 0)}update(e,r){var i;return this.isFinished()&&(this.playing&&(this.playing=!1,this.emit("motionFinish")),this.state.shouldOverrideExpression()&&((i=this.expressionManager)==null||i.restoreExpression()),this.state.complete(),this.state.shouldRequestIdleMotion()&&this.startRandomMotion(this.groups.idle,uu.IDLE)),this.updateParameters(e,r)}destroy(){var e;this.destroyed=!0,this.emit("destroy"),this.stopAllMotions(),(e=this.expressionManager)==null||e.destroy();const r=this;r.definitions=void 0,r.motionGroups=void 0}}const FA={x:0,y:0,width:0,height:0};class S2 extends Ci{constructor(){super(...arguments),this.focusController=new DA,this.originalWidth=0,this.originalHeight=0,this.width=0,this.height=0,this.localTransform=new Sr,this.drawingMatrix=new Sr,this.hitAreas={},this.textureFlipY=!1,this.viewport=[0,0,0,0],this.destroyed=!1}init(){this.setupLayout(),this.setupHitAreas()}setupLayout(){const e=this,r=this.getSize();e.originalWidth=r[0],e.originalHeight=r[1];const i=Object.assign({width:Hf,height:jf},this.getLayout());this.localTransform.scale(i.width/Hf,i.height/jf),e.width=this.originalWidth*this.localTransform.a,e.height=this.originalHeight*this.localTransform.d;const o=i.x!==void 0&&i.x-i.width/2||i.centerX!==void 0&&i.centerX||i.left!==void 0&&i.left-i.width/2||i.right!==void 0&&i.right+i.width/2||0,s=i.y!==void 0&&i.y-i.height/2||i.centerY!==void 0&&i.centerY||i.top!==void 0&&i.top-i.height/2||i.bottom!==void 0&&i.bottom+i.height/2||0;this.localTransform.translate(this.width*o,-this.height*s)}setupHitAreas(){const e=this.getHitAreaDefs().filter(r=>r.index>=0);for(const r of e)this.hitAreas[r.name]=r}hitTest(e,r){return Object.keys(this.hitAreas).filter(i=>this.isHit(i,e,r))}isHit(e,r,i){if(!this.hitAreas[e])return!1;const o=this.hitAreas[e].index,s=this.getDrawableBounds(o,FA);return s.x<=r&&r<=s.x+s.width&&s.y<=i&&i<=s.y+s.height}getDrawableBounds(e,r){const i=this.getDrawableVertices(e);let o=i[0],s=i[0],h=i[1],c=i[1];for(let d=0;d<i.length;d+=2){const _=i[d],y=i[d+1];o=Math.min(_,o),s=Math.max(_,s),h=Math.min(y,h),c=Math.max(y,c)}return r!=null||(r={}),r.x=o,r.y=h,r.width=s-o,r.height=c-h,r}updateTransform(e){this.drawingMatrix.copyFrom(e).append(this.localTransform)}update(e,r){this.focusController.update(e)}destroy(){this.destroyed=!0,this.emit("destroy"),this.motionManager.destroy(),this.motionManager=void 0}}const UA="XHRLoader";class Vf extends Error{constructor(e,r,i,o=!1){super(e),this.url=r,this.status=i,this.aborted=o}}const ei=class{static createXHR(t,e,r,i,o){const s=new XMLHttpRequest;if(ei.allXhrSet.add(s),t){let h=ei.xhrMap.get(t);h?h.add(s):(h=new Set([s]),ei.xhrMap.set(t,h)),t.listeners("destroy").includes(ei.cancelXHRs)||t.once("destroy",ei.cancelXHRs)}return s.open("GET",e),s.responseType=r,s.onload=()=>{(s.status===200||s.status===0)&&s.response?i(s.response):s.onerror()},s.onerror=()=>{dr.warn(UA,`Failed to load resource as ${s.responseType} (Status ${s.status}): ${e}`),o(new Vf("Network error.",e,s.status))},s.onabort=()=>o(new Vf("Aborted.",e,s.status,!0)),s.onloadend=()=>{var h;ei.allXhrSet.delete(s),t&&((h=ei.xhrMap.get(t))==null||h.delete(s))},s}static cancelXHRs(){var t;(t=ei.xhrMap.get(this))==null||t.forEach(e=>{e.abort(),ei.allXhrSet.delete(e)}),ei.xhrMap.delete(this)}static release(){ei.allXhrSet.forEach(t=>t.abort()),ei.allXhrSet.clear(),ei.xhrMap=new WeakMap}};let ah=ei;ah.xhrMap=new WeakMap;ah.allXhrSet=new Set;ah.loader=(t,e)=>new Promise((r,i)=>{ei.createXHR(t.target,t.settings?t.settings.resolveURL(t.url):t.url,t.type,o=>{t.result=o,r()},i).send()});function R2(t,e){let r=-1;return i(0);function i(o,s){if(s)return Promise.reject(s);if(o<=r)return Promise.reject(new Error("next() called multiple times"));r=o;const h=t[o];if(!h)return Promise.resolve();try{return Promise.resolve(h(e,i.bind(null,o+1)))}catch(c){return Promise.reject(c)}}}class Sn{static load(e){return R2(this.middlewares,e).then(()=>e.result)}}Sn.middlewares=[ah.loader];function BA(t,e={}){const r={resourceOptions:{crossorigin:e.crossOrigin}};if(Ne.fromURL)return Ne.fromURL(t,r).catch(s=>{if(s instanceof Error)throw s;const h=new Error("Texture loading error");throw h.event=s,h});r.resourceOptions.autoLoad=!1;const i=Ne.from(t,r);if(i.baseTexture.valid)return Promise.resolve(i);const o=i.baseTexture.resource;return o._live2d_load!=null||(o._live2d_load=new Promise((s,h)=>{const c=d=>{o.source.removeEventListener("error",c);const _=new Error("Texture loading error");_.event=d,h(_)};o.source.addEventListener("error",c),o.load().then(()=>s(i)).catch(c)})),o._live2d_load}const Wf="Live2DFactory",P2=(t,e)=>Pr(void 0,null,function*(){if(typeof t.source=="string"){const r=yield Sn.load({url:t.source,type:"json",target:t.live2dModel});r.url=t.source,t.source=r,t.live2dModel.emit("settingsJSONLoaded",r)}return e()}),I2=(t,e)=>Pr(void 0,null,function*(){if(t.source instanceof oh)return t.settings=t.source,e();if(typeof t.source=="object"){const r=Rr.findRuntime(t.source);if(r){const i=r.createModelSettings(t.source);return t.settings=i,t.live2dModel.emit("settingsLoaded",i),e()}}throw new TypeError("Unknown settings format.")}),O2=(t,e)=>{if(t.settings){const r=Rr.findRuntime(t.settings);if(r)return r.ready().then(e)}return e()},w2=(t,e)=>Pr(void 0,null,function*(){yield e();const r=t.internalModel;if(r){const i=t.settings,o=Rr.findRuntime(i);if(o){const s=[];i.pose&&s.push(Sn.load({settings:i,url:i.pose,type:"json",target:r}).then(h=>{r.pose=o.createPose(r.coreModel,h),t.live2dModel.emit("poseLoaded",r.pose)}).catch(h=>{t.live2dModel.emit("poseLoadError",h),dr.warn(Wf,"Failed to load pose.",h)})),i.physics&&s.push(Sn.load({settings:i,url:i.physics,type:"json",target:r}).then(h=>{r.physics=o.createPhysics(r.coreModel,h),t.live2dModel.emit("physicsLoaded",r.physics)}).catch(h=>{t.live2dModel.emit("physicsLoadError",h),dr.warn(Wf,"Failed to load physics.",h)})),s.length&&(yield Promise.all(s))}}}),M2=(t,e)=>Pr(void 0,null,function*(){if(t.settings){const r=t.live2dModel,i=t.settings.textures.map(o=>{const s=t.settings.resolveURL(o);return BA(s,{crossOrigin:t.options.crossOrigin})});if(yield e(),t.internalModel)r.internalModel=t.internalModel,r.emit("modelLoaded",t.internalModel);else throw new TypeError("Missing internal model.");r.textures=yield Promise.all(i),r.emit("textureLoaded",r.textures)}else throw new TypeError("Missing settings.")}),C2=(t,e)=>Pr(void 0,null,function*(){const r=t.settings;if(r instanceof oh){const i=Rr.findRuntime(r);if(!i)throw new TypeError("Unknown model settings.");const o=yield Sn.load({settings:r,url:r.moc,type:"arraybuffer",target:t.live2dModel});if(!i.isValidMoc(o))throw new Error("Invalid moc data");const s=i.createCoreModel(o);return t.internalModel=i.createInternalModel(s,r,t.options),e()}throw new TypeError("Missing settings.")}),Vr=class{static registerRuntime(t){Vr.runtimes.push(t),Vr.runtimes.sort((e,r)=>r.version-e.version)}static findRuntime(t){for(const e of Vr.runtimes)if(e.test(t))return e}static setupLive2DModel(t,e,r){return Pr(this,null,function*(){const i=new Promise(h=>t.once("textureLoaded",h)),o=new Promise(h=>t.once("modelLoaded",h)),s=Promise.all([i,o]).then(()=>t.emit("ready"));yield R2(Vr.live2DModelMiddlewares,{live2dModel:t,source:e,options:r||{}}),yield s,t.emit("load")})}static loadMotion(t,e,r){var i,o;const s=h=>t.emit("motionLoadError",e,r,h);try{const h=(i=t.definitions[e])==null?void 0:i[r];if(!h)return Promise.resolve(void 0);t.listeners("destroy").includes(Vr.releaseTasks)||t.once("destroy",Vr.releaseTasks);let c=Vr.motionTasksMap.get(t);c||(c={},Vr.motionTasksMap.set(t,c));let d=c[e];d||(d=[],c[e]=d);const _=t.getMotionFile(h);return(o=d[r])!=null||(d[r]=Sn.load({url:_,settings:t.settings,type:t.motionDataType,target:t}).then(y=>{var I;const E=(I=Vr.motionTasksMap.get(t))==null?void 0:I[e];E&&delete E[r];const S=t.createMotion(y,e,h);return t.emit("motionLoaded",e,r,S),S}).catch(y=>{dr.warn(t.tag,`Failed to load motion: ${_}
`,y),s(y)})),d[r]}catch(h){dr.warn(t.tag,`Failed to load motion at "${e}"[${r}]
`,h),s(h)}return Promise.resolve(void 0)}static loadExpression(t,e){var r;const i=o=>t.emit("expressionLoadError",e,o);try{const o=t.definitions[e];if(!o)return Promise.resolve(void 0);t.listeners("destroy").includes(Vr.releaseTasks)||t.once("destroy",Vr.releaseTasks);let s=Vr.expressionTasksMap.get(t);s||(s=[],Vr.expressionTasksMap.set(t,s));const h=t.getExpressionFile(o);return(r=s[e])!=null||(s[e]=Sn.load({url:h,settings:t.settings,type:"json",target:t}).then(c=>{const d=Vr.expressionTasksMap.get(t);d&&delete d[e];const _=t.createExpression(c,o);return t.emit("expressionLoaded",e,_),_}).catch(c=>{dr.warn(t.tag,`Failed to load expression: ${h}
`,c),i(c)})),s[e]}catch(o){dr.warn(t.tag,`Failed to load expression at [${e}]
`,o),i(o)}return Promise.resolve(void 0)}static releaseTasks(){this instanceof sh?Vr.motionTasksMap.delete(this):Vr.expressionTasksMap.delete(this)}};let Rr=Vr;Rr.runtimes=[];Rr.urlToJSON=P2;Rr.jsonToSettings=I2;Rr.waitUntilReady=O2;Rr.setupOptionals=w2;Rr.setupEssentials=M2;Rr.createInternalModel=C2;Rr.live2DModelMiddlewares=[P2,I2,O2,w2,M2,C2];Rr.motionTasksMap=new WeakMap;Rr.expressionTasksMap=new WeakMap;sh.prototype._loadMotion=function(t,e){return Rr.loadMotion(this,t,e)};c0.prototype._loadExpression=function(t){return Rr.loadExpression(this,t)};class GA{constructor(){this._autoInteract=!1}get autoInteract(){return this._autoInteract}set autoInteract(e){e!==this._autoInteract&&(e?this.on("pointertap",zf,this):this.off("pointertap",zf,this),this._autoInteract=e)}registerInteraction(e){e!==this.interactionManager&&(this.unregisterInteraction(),this._autoInteract&&e&&(this.interactionManager=e,e.on("pointermove",qf,this)))}unregisterInteraction(){var e;this.interactionManager&&((e=this.interactionManager)==null||e.off("pointermove",qf,this),this.interactionManager=void 0)}}function zf(t){this.tap(t.data.global.x,t.data.global.y)}function qf(t){this.focus(t.data.global.x,t.data.global.y)}class kA extends th{}const _i=new fr,XA=new Sr;let mn;class D2 extends Ai{constructor(e){super(),this.tag="Live2DModel(uninitialized)",this.textures=[],this.transform=new kA,this.anchor=new yn(this.onAnchorChange,this,0,0),this.glContextID=-1,this.elapsedTime=performance.now(),this.deltaTime=0,this._autoUpdate=!1,this.once("modelLoaded",()=>this.init(e))}static from(e,r){const i=new this(r);return Rr.setupLive2DModel(i,e,r).then(()=>i)}static fromSync(e,r){const i=new this(r);return Rr.setupLive2DModel(i,e,r).then(r==null?void 0:r.onLoad).catch(r==null?void 0:r.onError),i}static registerTicker(e){mn=e}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){var r;mn||(mn=(r=window.PIXI)==null?void 0:r.Ticker),e?this._destroyed||(mn?(mn.shared.add(this.onTickerUpdate,this),this._autoUpdate=!0):dr.warn(this.tag,"No Ticker registered, please call Live2DModel.registerTicker(Ticker).")):(mn==null||mn.shared.remove(this.onTickerUpdate,this),this._autoUpdate=!1)}init(e){this.tag=`Live2DModel(${this.internalModel.settings.name})`;const r=Object.assign({autoUpdate:!0,autoInteract:!0},e);r.autoInteract&&(this.interactive=!0),this.autoInteract=r.autoInteract,this.autoUpdate=r.autoUpdate}onAnchorChange(){this.pivot.set(this.anchor.x*this.internalModel.width,this.anchor.y*this.internalModel.height)}motion(e,r,i){return r===void 0?this.internalModel.motionManager.startRandomMotion(e,i):this.internalModel.motionManager.startMotion(e,r,i)}expression(e){return this.internalModel.motionManager.expressionManager?e===void 0?this.internalModel.motionManager.expressionManager.setRandomExpression():this.internalModel.motionManager.expressionManager.setExpression(e):Promise.resolve(!1)}focus(e,r,i=!1){_i.x=e,_i.y=r,this.toModelPosition(_i,_i,!0);let o=_i.x/this.internalModel.originalWidth*2-1,s=_i.y/this.internalModel.originalHeight*2-1,h=Math.atan2(s,o);this.internalModel.focusController.focus(Math.cos(h),-Math.sin(h),i)}tap(e,r){const i=this.hitTest(e,r);i.length&&(dr.log(this.tag,"Hit",i),this.emit("hit",i))}hitTest(e,r){return _i.x=e,_i.y=r,this.toModelPosition(_i,_i),this.internalModel.hitTest(_i.x,_i.y)}toModelPosition(e,r=e.clone(),i){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.transform.worldTransform.applyInverse(e,r),this.internalModel.localTransform.applyInverse(r,r),r}containsPoint(e){return this.getBounds(!0).contains(e.x,e.y)}_calculateBounds(){this._bounds.addFrame(this.transform,0,0,this.internalModel.width,this.internalModel.height)}onTickerUpdate(){this.update(mn.shared.deltaMS)}update(e){this.deltaTime+=e,this.elapsedTime+=e}_render(e){this.registerInteraction(e.plugins.interaction),e.batch.reset(),e.geometry.reset(),e.shader.reset(),e.state.reset();let r=!1;this.glContextID!==e.CONTEXT_UID&&(this.glContextID=e.CONTEXT_UID,this.internalModel.updateWebGLContext(e.gl,this.glContextID),r=!0);for(let s=0;s<this.textures.length;s++){const h=this.textures[s];h.valid&&((r||!h.baseTexture._glTextures[this.glContextID])&&(e.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL,this.internalModel.textureFlipY),e.texture.bind(h.baseTexture,0)),this.internalModel.bindTexture(s,h.baseTexture._glTextures[this.glContextID].texture),h.baseTexture.touched=e.textureGC.count)}const i=e.framebuffer.viewport;this.internalModel.viewport=[i.x,i.y,i.width,i.height],this.deltaTime&&(this.internalModel.update(this.deltaTime,this.elapsedTime),this.deltaTime=0);const o=XA.copyFrom(e.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);this.internalModel.updateTransform(o),this.internalModel.draw(e.gl),e.state.reset(),e.texture.reset()}destroy(e){this.emit("destroy"),this.autoUpdate=!1,this.unregisterInteraction(),e!=null&&e.texture&&this.textures.forEach(r=>r.destroy(e.baseTexture)),this.internalModel.destroy(),super.destroy(e)}}x2(D2,[GA]);const Gi=class{static resolveURL(t,e){var r;const i=(r=Gi.filesMap[t])==null?void 0:r[e];if(i===void 0)throw new Error("Cannot find this file from uploaded files: "+e);return i}static upload(t,e){return Pr(this,null,function*(){const r={};for(const i of e.getDefinedFiles()){const o=decodeURI(Xi.resolve(e.url,i)),s=t.find(h=>h.webkitRelativePath===o);s&&(r[i]=URL.createObjectURL(s))}Gi.filesMap[e._objectURL]=r})}static createSettings(t){return Pr(this,null,function*(){const e=t.find(h=>h.name.endsWith("model.json")||h.name.endsWith("model3.json"));if(!e)throw new TypeError("Settings file not found");const r=yield Gi.readText(e),i=JSON.parse(r);i.url=e.webkitRelativePath;const o=Rr.findRuntime(i);if(!o)throw new Error("Unknown settings JSON");const s=o.createModelSettings(i);return s._objectURL=URL.createObjectURL(e),s})}static readText(t){return Pr(this,null,function*(){return new Promise((e,r)=>{const i=new FileReader;i.onload=()=>e(i.result),i.onerror=r,i.readAsText(t,"utf8")})})}};let d0=Gi;d0.filesMap={};d0.factory=(t,e)=>Pr(void 0,null,function*(){if(Array.isArray(t.source)&&t.source[0]instanceof File){const r=t.source;let i=r.settings;if(!i)i=yield Gi.createSettings(r);else if(!i._objectURL)throw new Error('"_objectURL" must be specified in ModelSettings');i.validateFiles(r.map(o=>encodeURI(o.webkitRelativePath))),yield Gi.upload(r,i),i.resolveURL=function(o){return Gi.resolveURL(this._objectURL,o)},t.source=i,t.live2dModel.once("modelLoaded",o=>{o.once("destroy",function(){const s=this.settings._objectURL;if(URL.revokeObjectURL(s),Gi.filesMap[s])for(const h of Object.values(Gi.filesMap[s]))URL.revokeObjectURL(h);delete Gi.filesMap[s]})})}return e()});Rr.live2DModelMiddlewares.unshift(d0.factory);const oi=class{static unzip(t,e){return Pr(this,null,function*(){const r=yield oi.getFilePaths(t),i=[];for(const s of e.getDefinedFiles()){const h=decodeURI(Xi.resolve(e.url,s));r.includes(h)&&i.push(h)}const o=yield oi.getFiles(t,i);for(let s=0;s<o.length;s++){const h=i[s],c=o[s];Object.defineProperty(c,"webkitRelativePath",{value:h})}return o})}static createSettings(t){return Pr(this,null,function*(){const e=(yield oi.getFilePaths(t)).find(s=>s.endsWith("model.json")||s.endsWith("model3.json"));if(!e)throw new Error("Settings file not found");const r=yield oi.readText(t,e);if(!r)throw new Error("Empty settings file: "+e);const i=JSON.parse(r);i.url=e;const o=Rr.findRuntime(i);if(!o)throw new Error("Unknown settings JSON");return o.createModelSettings(i)})}static zipReader(t,e){return Pr(this,null,function*(){throw new Error("Not implemented")})}static getFilePaths(t){return Pr(this,null,function*(){throw new Error("Not implemented")})}static getFiles(t,e){return Pr(this,null,function*(){throw new Error("Not implemented")})}static readText(t,e){return Pr(this,null,function*(){throw new Error("Not implemented")})}static releaseReader(t){}};let hh=oi;hh.ZIP_PROTOCOL="zip://";hh.uid=0;hh.factory=(t,e)=>Pr(void 0,null,function*(){const r=t.source;let i,o,s;if(typeof r=="string"&&(r.endsWith(".zip")||r.startsWith(oi.ZIP_PROTOCOL))?(r.startsWith(oi.ZIP_PROTOCOL)?i=r.slice(oi.ZIP_PROTOCOL.length):i=r,o=yield Sn.load({url:i,type:"blob",target:t.live2dModel})):Array.isArray(r)&&r.length===1&&r[0]instanceof File&&r[0].name.endsWith(".zip")&&(o=r[0],i=URL.createObjectURL(o),s=r.settings),o){if(!o.size)throw new Error("Empty zip file");const h=yield oi.zipReader(o,i);s||(s=yield oi.createSettings(h)),s._objectURL=oi.ZIP_PROTOCOL+oi.uid+"/"+s.url;const c=yield oi.unzip(h,s);c.settings=s,t.source=c,i.startsWith("blob:")&&t.live2dModel.once("modelLoaded",d=>{d.once("destroy",function(){URL.revokeObjectURL(i)})}),oi.releaseReader(h)}return e()});Rr.live2DModelMiddlewares.unshift(hh.factory);if(!window.Live2D)throw new Error("Could not find Cubism 2 runtime. This plugin requires live2d.min.js to be loaded.");const HA=Live2DMotion.prototype.updateParam;Live2DMotion.prototype.updateParam=function(t,e){HA.call(this,t,e),e.isFinished()&&this.onFinishHandler&&(this.onFinishHandler(this),delete this.onFinishHandler)};class jA extends AMotion{constructor(e){super(),this.params=[],this.setFadeIn(e.fade_in>0?e.fade_in:zr.expressionFadingDuration),this.setFadeOut(e.fade_out>0?e.fade_out:zr.expressionFadingDuration),Array.isArray(e.params)&&e.params.forEach(r=>{const i=r.calc||"add";if(i==="add"){const o=r.def||0;r.val-=o}else if(i==="mult"){const o=r.def||1;r.val/=o}this.params.push({calc:i,val:r.val,id:r.id})})}updateParamExe(e,r,i,o){this.params.forEach(s=>{e.setParamFloat(s.id,s.val*i)})}}class YA extends c0{constructor(e,r){var i;super(e,r),this.queueManager=new MotionQueueManager,this.definitions=(i=this.settings.expressions)!=null?i:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(e){return this.definitions.findIndex(r=>r.name===e)}getExpressionFile(e){return e.file}createExpression(e,r){return new jA(e)}_setExpression(e){return this.queueManager.startMotion(e)}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(e,r){return this.queueManager.updateParam(e)}}class VA extends sh{constructor(e,r){super(e,r),this.groups={idle:"idle"},this.motionDataType="arraybuffer",this.queueManager=new MotionQueueManager,this.definitions=this.settings.motions,this.init(r)}init(e){super.init(e),this.settings.expressions&&(this.expressionManager=new YA(this.settings,e))}isFinished(){return this.queueManager.isFinished()}createMotion(e,r,i){const o=Live2DMotion.loadMotion(e),s=r===this.groups.idle?zr.idleMotionFadingDuration:zr.motionFadingDuration;return o.setFadeIn(i.fade_in>0?i.fade_in:s),o.setFadeOut(i.fade_out>0?i.fade_out:s),o}getMotionFile(e){return e.file}getMotionName(e){return e.file}getSoundFile(e){return e.sound}_startMotion(e,r){return e.onFinishHandler=r,this.queueManager.stopAllMotions(),this.queueManager.startMotion(e)}_stopAllMotions(){this.queueManager.stopAllMotions()}updateParameters(e,r){return this.queueManager.updateParam(e)}destroy(){super.destroy(),this.queueManager=void 0}}class WA{constructor(e){this.coreModel=e,this.blinkInterval=4e3,this.closingDuration=100,this.closedDuration=50,this.openingDuration=150,this.eyeState=0,this.eyeParamValue=1,this.closedTimer=0,this.nextBlinkTimeLeft=this.blinkInterval,this.leftParam=e.getParamIndex("PARAM_EYE_L_OPEN"),this.rightParam=e.getParamIndex("PARAM_EYE_R_OPEN")}setEyeParams(e){this.eyeParamValue=Va(e,0,1),this.coreModel.setParamFloat(this.leftParam,this.eyeParamValue),this.coreModel.setParamFloat(this.rightParam,this.eyeParamValue)}update(e){switch(this.eyeState){case 0:this.nextBlinkTimeLeft-=e,this.nextBlinkTimeLeft<0&&(this.eyeState=1,this.nextBlinkTimeLeft=this.blinkInterval+this.closingDuration+this.closedDuration+this.openingDuration+IA(0,2e3));break;case 1:this.setEyeParams(this.eyeParamValue+e/this.closingDuration),this.eyeParamValue<=0&&(this.eyeState=2,this.closedTimer=0);break;case 2:this.closedTimer+=e,this.closedTimer>=this.closedDuration&&(this.eyeState=3);break;case 3:this.setEyeParams(this.eyeParamValue+e/this.openingDuration),this.eyeParamValue>=1&&(this.eyeState=0)}}}const kn=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class zA extends S2{constructor(e,r,i){super(),this.textureFlipY=!0,this.drawDataCount=0,this.disableCulling=!1,this.coreModel=e,this.settings=r,this.motionManager=new VA(r,i),this.eyeBlink=new WA(e),this.eyeballXParamIndex=e.getParamIndex("PARAM_EYE_BALL_X"),this.eyeballYParamIndex=e.getParamIndex("PARAM_EYE_BALL_Y"),this.angleXParamIndex=e.getParamIndex("PARAM_ANGLE_X"),this.angleYParamIndex=e.getParamIndex("PARAM_ANGLE_Y"),this.angleZParamIndex=e.getParamIndex("PARAM_ANGLE_Z"),this.bodyAngleXParamIndex=e.getParamIndex("PARAM_BODY_ANGLE_X"),this.breathParamIndex=e.getParamIndex("PARAM_BREATH"),this.init()}init(){super.init(),this.settings.initParams&&this.settings.initParams.forEach(({id:s,value:h})=>this.coreModel.setParamFloat(s,h)),this.settings.initOpacities&&this.settings.initOpacities.forEach(({id:s,value:h})=>this.coreModel.setPartsOpacity(s,h)),this.coreModel.saveParam();const e=this.coreModel.getModelContext()._$aS;e!=null&&e.length&&(this.drawDataCount=e.length);let r=this.coreModel.drawParamWebGL.culling;Object.defineProperty(this.coreModel.drawParamWebGL,"culling",{set:s=>r=s,get:()=>this.disableCulling?!1:r});const i=this.coreModel.getModelContext().clipManager,o=i.setupClip;i.setupClip=(s,h)=>{o.call(i,s,h),h.gl.viewport(...this.viewport)}}getSize(){return[this.coreModel.getCanvasWidth(),this.coreModel.getCanvasHeight()]}getLayout(){const e={};if(this.settings.layout)for(const r of Object.keys(this.settings.layout)){let i=r;r==="center_x"?i="centerX":r==="center_y"&&(i="centerY"),e[i]=this.settings.layout[r]}return e}updateWebGLContext(e,r){const i=this.coreModel.drawParamWebGL;i.firstDraw=!0,i.setGL(e),i.glno=r;for(const h in i)i.hasOwnProperty(h)&&i[h]instanceof WebGLBuffer&&(i[h]=null);const o=this.coreModel.getModelContext().clipManager;o.curFrameNo=r;const s=e.getParameter(e.FRAMEBUFFER_BINDING);o.getMaskRenderTexture(),e.bindFramebuffer(e.FRAMEBUFFER,s)}bindTexture(e,r){this.coreModel.setTexture(e,r)}getHitAreaDefs(){var e;return((e=this.settings.hitAreas)==null?void 0:e.map(r=>({id:r.id,name:r.name,index:this.coreModel.getDrawDataIndex(r.id)})))||[]}getDrawableIDs(){const e=this.coreModel.getModelContext(),r=[];for(let i=0;i<this.drawDataCount;i++){const o=e.getDrawData(i);o&&r.push(o.getDrawDataID().id)}return r}getDrawableIndex(e){return this.coreModel.getDrawDataIndex(e)}getDrawableVertices(e){if(typeof e=="string"&&(e=this.coreModel.getDrawDataIndex(e),e===-1))throw new TypeError("Unable to find drawable ID: "+e);return this.coreModel.getTransformedPoints(e).slice()}update(e,r){var i,o,s,h;super.update(e,r);const c=this.coreModel;this.emit("beforeMotionUpdate");const d=this.motionManager.update(this.coreModel,r);this.emit("afterMotionUpdate"),c.saveParam(),(i=this.motionManager.expressionManager)==null||i.update(c,r),d||(o=this.eyeBlink)==null||o.update(e),this.updateFocus(),this.updateNaturalMovements(e,r),(s=this.physics)==null||s.update(r),(h=this.pose)==null||h.update(e),this.emit("beforeModelUpdate"),c.update(),c.loadParam()}updateFocus(){this.coreModel.addToParamFloat(this.eyeballXParamIndex,this.focusController.x),this.coreModel.addToParamFloat(this.eyeballYParamIndex,this.focusController.y),this.coreModel.addToParamFloat(this.angleXParamIndex,this.focusController.x*30),this.coreModel.addToParamFloat(this.angleYParamIndex,this.focusController.y*30),this.coreModel.addToParamFloat(this.angleZParamIndex,this.focusController.x*this.focusController.y*-30),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,this.focusController.x*10)}updateNaturalMovements(e,r){const i=r/1e3*2*Math.PI;this.coreModel.addToParamFloat(this.angleXParamIndex,15*Math.sin(i/6.5345)*.5),this.coreModel.addToParamFloat(this.angleYParamIndex,8*Math.sin(i/3.5345)*.5),this.coreModel.addToParamFloat(this.angleZParamIndex,10*Math.sin(i/5.5345)*.5),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,4*Math.sin(i/15.5345)*.5),this.coreModel.setParamFloat(this.breathParamIndex,.5+.5*Math.sin(i/3.2345))}draw(e){const r=this.disableCulling;e.getParameter(e.FRAMEBUFFER_BINDING)&&(this.disableCulling=!0);const i=this.drawingMatrix;kn[0]=i.a,kn[1]=i.b,kn[4]=i.c,kn[5]=i.d,kn[12]=i.tx,kn[13]=i.ty,this.coreModel.setMatrix(kn),this.coreModel.draw(),this.disableCulling=r}destroy(){super.destroy(),this.coreModel=void 0}}class bs extends oh{constructor(e){if(super(e),this.motions={},!bs.isValidJSON(e))throw new TypeError("Invalid JSON.");this.moc=e.model,us("string",e,this,"textures","textures"),this.copy(e)}static isValidJSON(e){var r;return!!e&&typeof e.model=="string"&&((r=e.textures)==null?void 0:r.length)>0&&e.textures.every(i=>typeof i=="string")}copy(e){ls("string",e,this,"name","name"),ls("string",e,this,"pose","pose"),ls("string",e,this,"physics","physics"),ls("object",e,this,"layout","layout"),ls("object",e,this,"motions","motions"),us("object",e,this,"hit_areas","hitAreas"),us("object",e,this,"expressions","expressions"),us("object",e,this,"init_params","initParams"),us("object",e,this,"init_opacities","initOpacities")}replaceFiles(e){super.replaceFiles(e);for(const[r,i]of Object.entries(this.motions))for(let o=0;o<i.length;o++)i[o].file=e(i[o].file,`motions.${r}[${o}].file`),i[o].sound!==void 0&&(i[o].sound=e(i[o].sound,`motions.${r}[${o}].sound`));if(this.expressions)for(let r=0;r<this.expressions.length;r++)this.expressions[r].file=e(this.expressions[r].file,`expressions[${r}].file`)}}const qA={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE},ZA={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE};class QA{constructor(e,r){this.coreModel=e,this.physicsHairs=[],r.physics_hair&&(this.physicsHairs=r.physics_hair.map(i=>{const o=new PhysicsHair;return o.setup(i.setup.length,i.setup.regist,i.setup.mass),i.src.forEach(({id:s,ptype:h,scale:c,weight:d})=>{const _=qA[h];_&&o.addSrcParam(_,s,c,d)}),i.targets.forEach(({id:s,ptype:h,scale:c,weight:d})=>{const _=ZA[h];_&&o.addTargetParam(_,s,c,d)}),o}))}update(e){this.physicsHairs.forEach(r=>r.update(this.coreModel,e))}}class Zf{constructor(e){this.id=e,this.paramIndex=-1,this.partsIndex=-1,this.link=[]}initIndex(e){this.paramIndex=e.getParamIndex("VISIBLE:"+this.id),this.partsIndex=e.getPartsDataIndex(PartsDataID.getID(this.id)),e.setParamFloat(this.paramIndex,1)}}class JA{constructor(e,r){this.coreModel=e,this.opacityAnimDuration=500,this.partsGroups=[],r.parts_visible&&(this.partsGroups=r.parts_visible.map(({group:i})=>i.map(({id:o,link:s})=>{const h=new Zf(o);return s&&(h.link=s.map(c=>new Zf(c))),h})),this.init())}init(){this.partsGroups.forEach(e=>{e.forEach(r=>{if(r.initIndex(this.coreModel),r.paramIndex>=0){const i=this.coreModel.getParamFloat(r.paramIndex)!==0;this.coreModel.setPartsOpacity(r.partsIndex,i?1:0),this.coreModel.setParamFloat(r.paramIndex,i?1:0),r.link.length>0&&r.link.forEach(o=>o.initIndex(this.coreModel))}})})}normalizePartsOpacityGroup(e,r){const i=this.coreModel,o=.5,s=.15;let h=1,c=e.findIndex(({paramIndex:d,partsIndex:_})=>_>=0&&i.getParamFloat(d)!==0);if(c>=0){const d=i.getPartsOpacity(e[c].partsIndex);h=Va(d+r/this.opacityAnimDuration,0,1)}else c=0,h=1;e.forEach(({partsIndex:d},_)=>{if(d>=0)if(c==_)i.setPartsOpacity(d,h);else{let y=i.getPartsOpacity(d),I;h<o?I=h*(o-1)/o+1:I=(1-h)*o/(1-o),(1-I)*(1-h)>s&&(I=1-s/(1-h)),y>I&&(y=I),i.setPartsOpacity(d,y)}})}copyOpacity(e){const r=this.coreModel;e.forEach(({partsIndex:i,link:o})=>{if(i>=0&&o){const s=r.getPartsOpacity(i);o.forEach(({partsIndex:h})=>{h>=0&&r.setPartsOpacity(h,s)})}})}update(e){this.partsGroups.forEach(r=>{this.normalizePartsOpacityGroup(r,e),this.copyOpacity(r)})}}Rr.registerRuntime({version:2,test(t){return t instanceof bs||bs.isValidJSON(t)},ready(){return Promise.resolve()},isValidMoc(t){if(t.byteLength<3)return!1;const e=new Int8Array(t,0,3);return String.fromCharCode(...e)==="moc"},createModelSettings(t){return new bs(t)},createCoreModel(t){const e=Live2DModelWebGL.loadModel(t),r=Live2D.getError();if(r)throw r;return e},createInternalModel(t,e,r){return new zA(t,e,r)},createPose(t,e){return new JA(t,e)},createPhysics(t,e){return new QA(t,e)}});if(!window.Live2DCubismCore)throw new Error("Could not find Cubism 4 runtime. This plugin requires live2dcubismcore.js to be loaded.");class Fe{constructor(e,r){this.x=e||0,this.y=r||0}add(e){const r=new Fe(0,0);return r.x=this.x+e.x,r.y=this.y+e.y,r}substract(e){const r=new Fe(0,0);return r.x=this.x-e.x,r.y=this.y-e.y,r}multiply(e){const r=new Fe(0,0);return r.x=this.x*e.x,r.y=this.y*e.y,r}multiplyByScaler(e){return this.multiply(new Fe(e,e))}division(e){const r=new Fe(0,0);return r.x=this.x/e.x,r.y=this.y/e.y,r}divisionByScalar(e){return this.division(new Fe(e,e))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(e){return Math.sqrt((this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y))}dot(e){return this.x*e.x+this.y*e.y}normalize(){const e=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/e,this.y=this.y/e}isEqual(e){return this.x==e.x&&this.y==e.y}isNotEqual(e){return!this.isEqual(e)}}const $a=class{static range(t,e,r){return t<e?t=e:t>r&&(t=r),t}static sin(t){return Math.sin(t)}static cos(t){return Math.cos(t)}static abs(t){return Math.abs(t)}static sqrt(t){return Math.sqrt(t)}static cbrt(t){if(t===0)return t;let e=t;const r=e<0;r&&(e=-e);let i;return e===1/0?i=1/0:(i=Math.exp(Math.log(e)/3),i=(e/(i*i)+2*i)/3),r?-i:i}static getEasingSine(t){return t<0?0:t>1?1:.5-.5*this.cos(t*Math.PI)}static max(t,e){return t>e?t:e}static min(t,e){return t>e?e:t}static degreesToRadian(t){return t/180*Math.PI}static radianToDegrees(t){return t*180/Math.PI}static directionToRadian(t,e){const r=Math.atan2(e.y,e.x),i=Math.atan2(t.y,t.x);let o=r-i;for(;o<-Math.PI;)o+=Math.PI*2;for(;o>Math.PI;)o-=Math.PI*2;return o}static directionToDegrees(t,e){const r=this.directionToRadian(t,e);let i=this.radianToDegrees(r);return e.x-t.x>0&&(i=-i),i}static radianToDirection(t){const e=new Fe;return e.x=this.sin(t),e.y=this.cos(t),e}static quadraticEquation(t,e,r){return this.abs(t)<$a.Epsilon?this.abs(e)<$a.Epsilon?-r:-r/e:-(e+this.sqrt(e*e-4*t*r))/(2*t)}static cardanoAlgorithmForBezier(t,e,r,i){if(this.sqrt(t)<$a.Epsilon)return this.range(this.quadraticEquation(e,r,i),0,1);const o=e/t,s=r/t,h=i/t,c=(3*s-o*o)/3,d=c/3,_=(2*o*o*o-9*o*s+27*h)/27,y=_/2,I=y*y+d*d*d,E=.5,S=E+.01;if(I<0){const Y=-c/3,Q=Y*Y*Y,it=this.sqrt(Q),J=-_/(2*it),K=this.range(J,-1,1),Tt=Math.acos(K),yt=2*this.cbrt(it),ft=yt*this.cos(Tt/3)-o/3;if(this.abs(ft-E)<S)return this.range(ft,0,1);const St=yt*this.cos((Tt+2*Math.PI)/3)-o/3;if(this.abs(St-E)<S)return this.range(St,0,1);const wt=yt*this.cos((Tt+4*Math.PI)/3)-o/3;return this.range(wt,0,1)}if(I==0){let Y;y<0?Y=this.cbrt(-y):Y=-this.cbrt(y);const Q=2*Y-o/3;if(this.abs(Q-E)<S)return this.range(Q,0,1);const it=-Y-o/3;return this.range(it,0,1)}const b=this.sqrt(I),x=this.cbrt(b-y),$=this.cbrt(b+y),j=x-$-o/3;return this.range(j,0,1)}constructor(){}};let vr=$a;vr.Epsilon=1e-5;class Ei{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(e,r,i){const o=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),s=4;for(let h=0;h<s;++h)for(let c=0;c<s;++c)for(let d=0;d<s;++d)o[c+h*4]+=e[d+h*4]*r[c+d*4];for(let h=0;h<16;++h)i[h]=o[h]}loadIdentity(){const e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(e)}setMatrix(e){for(let r=0;r<16;++r)this._tr[r]=e[r]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(e){return this._tr[0]*e+this._tr[12]}transformY(e){return this._tr[5]*e+this._tr[13]}invertTransformX(e){return(e-this._tr[12])/this._tr[0]}invertTransformY(e){return(e-this._tr[13])/this._tr[5]}translateRelative(e,r){const i=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,r,0,1]);Ei.multiply(i,this._tr,this._tr)}translate(e,r){this._tr[12]=e,this._tr[13]=r}translateX(e){this._tr[12]=e}translateY(e){this._tr[13]=e}scaleRelative(e,r){const i=new Float32Array([e,0,0,0,0,r,0,0,0,0,1,0,0,0,0,1]);Ei.multiply(i,this._tr,this._tr)}scale(e,r){this._tr[0]=e,this._tr[5]=r}multiplyByMatrix(e){Ei.multiply(e.getArray(),this._tr,this._tr)}clone(){const e=new Ei;for(let r=0;r<this._tr.length;r++)e._tr[r]=this._tr[r];return e}}class f0{initialize(e){this._model=e}drawModel(){this.getModel()!=null&&this.doDrawModel()}setMvpMatrix(e){this._mvpMatrix4x4.setMatrix(e.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(e,r,i,o){e<0?e=0:e>1&&(e=1),r<0?r=0:r>1&&(r=1),i<0?i=0:i>1&&(i=1),o<0?o=0:o>1&&(o=1),this._modelColor.R=e,this._modelColor.G=r,this._modelColor.B=i,this._modelColor.A=o}getModelColor(){return Object.assign({},this._modelColor)}setIsPremultipliedAlpha(e){this._isPremultipliedAlpha=e}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(e){this._isCulling=e}isCulling(){return this._isCulling}setAnisotropy(e){this._anisortopy=e}getAnisotropy(){return this._anisortopy}getModel(){return this._model}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisortopy=0,this._modelColor=new ps,this._mvpMatrix4x4=new Ei,this._mvpMatrix4x4.loadIdentity()}}var An=(t=>(t[t.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",t[t.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",t[t.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative",t))(An||{});class ps{constructor(){this.R=1,this.G=1,this.B=1,this.A=1}}let Fi=!1,Eo=!1,To;const qh={vertexOffset:0,vertexStep:2};class js{static startUp(e){if(Fi)return cs("CubismFramework.startUp() is already done."),Fi;if(Live2DCubismCore._isStarted)return Fi=!0,!0;if(Live2DCubismCore._isStarted=!0,To=e,To&&Live2DCubismCore.Logging.csmSetLogFunction(To.logFunction),Fi=!0,Fi){const r=Live2DCubismCore.Version.csmGetVersion(),i=(r&4278190080)>>24,o=(r&16711680)>>16,s=r&65535,h=r;cs("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+i).slice(-2),("00"+o).slice(-2),("0000"+s).slice(-4),h)}return cs("CubismFramework.startUp() is complete."),Fi}static cleanUp(){Fi=!1,Eo=!1,To=void 0}static initialize(){if(!Fi){ms("CubismFramework is not started.");return}if(Eo){ms("CubismFramework.initialize() skipped, already initialized.");return}Eo=!0,cs("CubismFramework.initialize() is complete.")}static dispose(){if(!Fi){ms("CubismFramework is not started.");return}if(!Eo){ms("CubismFramework.dispose() skipped, not initialized.");return}f0.staticRelease(),Eo=!1,cs("CubismFramework.dispose() is complete.")}static isStarted(){return Fi}static isInitialized(){return Eo}static coreLogFunction(e){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(e)}static getLoggingLevel(){return To!=null?To.loggingLevel:ho.LogLevel_Off}constructor(){}}var ho=(t=>(t[t.LogLevel_Verbose=0]="LogLevel_Verbose",t[t.LogLevel_Debug=1]="LogLevel_Debug",t[t.LogLevel_Info=2]="LogLevel_Info",t[t.LogLevel_Warning=3]="LogLevel_Warning",t[t.LogLevel_Error=4]="LogLevel_Error",t[t.LogLevel_Off=5]="LogLevel_Off",t))(ho||{});const Oa=()=>{};function Qf(t,...e){lh.print(ho.LogLevel_Debug,"[CSM][D]"+t+`
`,e)}function cs(t,...e){lh.print(ho.LogLevel_Info,"[CSM][I]"+t+`
`,e)}function ms(t,...e){lh.print(ho.LogLevel_Warning,"[CSM][W]"+t+`
`,e)}function bo(t,...e){lh.print(ho.LogLevel_Error,"[CSM][E]"+t+`
`,e)}class lh{static print(e,r,i){if(e<js.getLoggingLevel())return;const o=js.coreLogFunction;if(!o)return;const s=r.replace(/{(\d+)}/g,(h,c)=>i[c]);o(s)}static dumpBytes(e,r,i){for(let o=0;o<i;o++)o%16==0&&o>0?this.print(e,`
`):o%8==0&&o>0&&this.print(e,"  "),this.print(e,"{0} ",[r[o]&255]);this.print(e,`
`)}constructor(){}}class L2{constructor(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=[]}release(){this._weight=0}updateParameters(e,r,i){if(!r.isAvailable()||r.isFinished())return;if(!r.isStarted()){r.setIsStarted(!0),r.setStartTime(i-this._offsetSeconds),r.setFadeInStartTime(i);const c=this.getDuration();r.getEndTime()<0&&r.setEndTime(c<=0?-1:r.getStartTime()+c)}let o=this._weight;const s=this._fadeInSeconds==0?1:vr.getEasingSine((i-r.getFadeInStartTime())/this._fadeInSeconds),h=this._fadeOutSeconds==0||r.getEndTime()<0?1:vr.getEasingSine((r.getEndTime()-i)/this._fadeOutSeconds);o=o*s*h,r.setState(i,o),this.doUpdateParameters(e,i,o,r),r.getEndTime()>0&&r.getEndTime()<i&&r.setIsFinished(!0)}setFadeInTime(e){this._fadeInSeconds=e}setFadeOutTime(e){this._fadeOutSeconds=e}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(e){this._weight=e}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(e){this._offsetSeconds=e}getFiredEvent(e,r){return this._firedEventValues}setFinishedMotionHandler(e){this._onFinishedMotion=e}getFinishedMotionHandler(){return this._onFinishedMotion}}const Jf=1;class _0 extends L2{constructor(){super(),this._parameters=[]}static create(e){const r=new _0,i=e.FadeInTime,o=e.FadeOutTime;r.setFadeInTime(i!==void 0?i:Jf),r.setFadeOutTime(o!==void 0?o:Jf);const s=e.Parameters||[];for(let h=0;h<s.length;++h){const c=s[h],d=c.Id,_=c.Value;let y;switch(c.Blend){case"Multiply":y=Wn.ExpressionBlendType_Multiply;break;case"Overwrite":y=Wn.ExpressionBlendType_Overwrite;break;case"Add":default:y=Wn.ExpressionBlendType_Add;break}const I={parameterId:d,blendType:y,value:_};r._parameters.push(I)}return r}doUpdateParameters(e,r,i,o){for(let s=0;s<this._parameters.length;++s){const h=this._parameters[s];switch(h.blendType){case Wn.ExpressionBlendType_Add:{e.addParameterValueById(h.parameterId,h.value,i);break}case Wn.ExpressionBlendType_Multiply:{e.multiplyParameterValueById(h.parameterId,h.value,i);break}case Wn.ExpressionBlendType_Overwrite:{e.setParameterValueById(h.parameterId,h.value,i);break}}}}}var Wn=(t=>(t[t.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",t[t.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",t[t.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite",t))(Wn||{});class KA{constructor(){this._autoDelete=!1,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&this._motion.release()}setFadeOut(e){this._fadeOutSeconds=e,this._isTriggeredFadeOut=!0}startFadeOut(e,r){const i=r+e;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||i<this._endTimeSeconds)&&(this._endTimeSeconds=i)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(e){this._startTimeSeconds=e}setFadeInStartTime(e){this._fadeInStartTimeSeconds=e}setEndTime(e){this._endTimeSeconds=e}setIsFinished(e){this._finished=e}setIsStarted(e){this._started=e}isAvailable(){return this._available}setIsAvailable(e){this._available=e}setState(e,r){this._stateTimeSeconds=e,this._stateWeight=r}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(e){this._lastEventCheckSeconds=e}isTriggeredFadeOut(){return this._isTriggeredFadeOut}getFadeOutSeconds(){return this._fadeOutSeconds}}class $2{constructor(){this._userTimeSeconds=0,this._eventCustomData=null,this._motions=[]}release(){for(let e=0;e<this._motions.length;++e)this._motions[e]&&this._motions[e].release();this._motions=void 0}startMotion(e,r,i){if(e==null)return tb;let o;for(let s=0;s<this._motions.length;++s)o=this._motions[s],o!=null&&o.setFadeOut(o._motion.getFadeOutTime());return o=new KA,o._autoDelete=r,o._motion=e,this._motions.push(o),o._motionQueueEntryHandle}isFinished(){let e=0;for(;e<this._motions.length;){const r=this._motions[e];if(r==null){this._motions.splice(e,1);continue}if(r._motion==null){r.release(),this._motions.splice(e,1);continue}if(!r.isFinished())return!1;e++}return!0}isFinishedByHandle(e){for(let r=0;r<this._motions.length;r++){const i=this._motions[r];if(i!=null&&i._motionQueueEntryHandle==e&&!i.isFinished())return!1}return!0}stopAllMotions(){for(let e=0;e<this._motions.length;e++){const r=this._motions[e];r!=null&&r.release()}this._motions=[]}getCubismMotionQueueEntry(e){return this._motions.find(r=>r!=null&&r._motionQueueEntryHandle==e)}setEventCallback(e,r=null){this._eventCallBack=e,this._eventCustomData=r}doUpdateMotion(e,r){let i=!1,o=0;for(;o<this._motions.length;){const s=this._motions[o];if(s==null){this._motions.splice(o,1);continue}const h=s._motion;if(h==null){s.release(),this._motions.splice(o,1);continue}h.updateParameters(e,s,r),i=!0;const c=h.getFiredEvent(s.getLastCheckEventSeconds()-s.getStartTime(),r-s.getStartTime());for(let d=0;d<c.length;++d)this._eventCallBack(this,c[d],this._eventCustomData);s.setLastCheckEventSeconds(r),s.isFinished()?(s.release(),this._motions.splice(o,1)):(s.isTriggeredFadeOut()&&s.startFadeOut(s.getFadeOutSeconds(),r),o++)}return i}}const tb=-1;class eb extends c0{constructor(e,r){var i;super(e,r),this.queueManager=new $2,this.definitions=(i=e.expressions)!=null?i:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(e){return this.definitions.findIndex(r=>r.Name===e)}getExpressionFile(e){return e.File}createExpression(e,r){return _0.create(e)}_setExpression(e){return this.queueManager.startMotion(e,!1,performance.now())}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(e,r){return this.queueManager.doUpdateMotion(e,r)}}class N2{constructor(e){this.groups=e.Groups,this.hitAreas=e.HitAreas,this.layout=e.Layout,this.moc=e.FileReferences.Moc,this.expressions=e.FileReferences.Expressions,this.motions=e.FileReferences.Motions,this.textures=e.FileReferences.Textures,this.physics=e.FileReferences.Physics,this.pose=e.FileReferences.Pose}getEyeBlinkParameters(){var e,r;return(r=(e=this.groups)==null?void 0:e.find(i=>i.Name==="EyeBlink"))==null?void 0:r.Ids}getLipSyncParameters(){var e,r;return(r=(e=this.groups)==null?void 0:e.find(i=>i.Name==="LipSync"))==null?void 0:r.Ids}}class Io extends oh{constructor(e){if(super(e),!Io.isValidJSON(e))throw new TypeError("Invalid JSON.");Object.assign(this,new N2(e))}static isValidJSON(e){var r;return!!(e!=null&&e.FileReferences)&&typeof e.FileReferences.Moc=="string"&&((r=e.FileReferences.Textures)==null?void 0:r.length)>0&&e.FileReferences.Textures.every(i=>typeof i=="string")}replaceFiles(e){if(super.replaceFiles(e),this.motions)for(const[r,i]of Object.entries(this.motions))for(let o=0;o<i.length;o++)i[o].File=e(i[o].File,`motions.${r}[${o}].File`),i[o].Sound!==void 0&&(i[o].Sound=e(i[o].Sound,`motions.${r}[${o}].Sound`));if(this.expressions)for(let r=0;r<this.expressions.length;r++)this.expressions[r].File=e(this.expressions[r].File,`expressions[${r}].File`)}}x2(Io,[N2]);var zn=(t=>(t[t.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",t[t.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",t[t.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",t))(zn||{}),Ui=(t=>(t[t.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",t[t.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",t[t.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",t[t.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",t))(Ui||{});class gn{constructor(e=0,r=0){this.time=e,this.value=r}}class rb{constructor(){this.basePointIndex=0,this.segmentType=0}}class ib{constructor(){this.id="",this.type=0,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}}class nb{constructor(){this.fireTime=0,this.value=""}}class ob{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=[],this.segments=[],this.points=[],this.events=[]}}class F2{constructor(e){this._json=e}release(){this._json=void 0}getMotionDuration(){return this._json.Meta.Duration}isMotionLoop(){return this._json.Meta.Loop||!1}getEvaluationOptionFlag(e){return p0.EvaluationOptionFlag_AreBeziersRistricted==e?!!this._json.Meta.AreBeziersRestricted:!1}getMotionCurveCount(){return this._json.Meta.CurveCount}getMotionFps(){return this._json.Meta.Fps}getMotionTotalSegmentCount(){return this._json.Meta.TotalSegmentCount}getMotionTotalPointCount(){return this._json.Meta.TotalPointCount}getMotionFadeInTime(){return this._json.Meta.FadeInTime}getMotionFadeOutTime(){return this._json.Meta.FadeOutTime}getMotionCurveTarget(e){return this._json.Curves[e].Target}getMotionCurveId(e){return this._json.Curves[e].Id}getMotionCurveFadeInTime(e){return this._json.Curves[e].FadeInTime}getMotionCurveFadeOutTime(e){return this._json.Curves[e].FadeOutTime}getMotionCurveSegmentCount(e){return this._json.Curves[e].Segments.length}getMotionCurveSegment(e,r){return this._json.Curves[e].Segments[r]}getEventCount(){return this._json.Meta.UserDataCount||0}getTotalEventValueSize(){return this._json.Meta.TotalUserDataSize}getEventTime(e){return this._json.UserData[e].Time}getEventValue(e){return this._json.UserData[e].Value}}var p0=(t=>(t[t.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted",t))(p0||{});const sb="EyeBlink",ab="LipSync",hb="Model",lb="Parameter",ub="PartOpacity",cb=!1;function gi(t,e,r){const i=new gn;return i.time=t.time+(e.time-t.time)*r,i.value=t.value+(e.value-t.value)*r,i}function db(t,e){let r=(e-t[0].time)/(t[1].time-t[0].time);return r<0&&(r=0),t[0].value+(t[1].value-t[0].value)*r}function fb(t,e){let r=(e-t[0].time)/(t[3].time-t[0].time);r<0&&(r=0);const i=gi(t[0],t[1],r),o=gi(t[1],t[2],r),s=gi(t[2],t[3],r),h=gi(i,o,r),c=gi(o,s,r);return gi(h,c,r).value}function _b(t,e){const r=e,i=t[0].time,o=t[3].time,s=t[1].time,h=t[2].time,c=o-3*h+3*s-i,d=3*h-6*s+3*i,_=3*s-3*i,y=i-r,I=vr.cardanoAlgorithmForBezier(c,d,_,y),E=gi(t[0],t[1],I),S=gi(t[1],t[2],I),b=gi(t[2],t[3],I),x=gi(E,S,I),$=gi(S,b,I);return gi(x,$,I).value}function pb(t,e){return t[0].value}function mb(t,e){return t[1].value}function Zh(t,e,r){const i=t.curves[e];let o=-1;const s=i.baseSegmentIndex+i.segmentCount;let h=0;for(let d=i.baseSegmentIndex;d<s;++d)if(h=t.segments[d].basePointIndex+(t.segments[d].segmentType==Ui.CubismMotionSegmentType_Bezier?3:1),t.points[h].time>r){o=d;break}if(o==-1)return t.points[h].value;const c=t.segments[o];return c.evaluate(t.points.slice(c.basePointIndex),r)}class m0 extends L2{constructor(){super(),this._eyeBlinkParameterIds=[],this._lipSyncParameterIds=[],this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0}static create(e,r){const i=new m0;return i.parse(e),i._sourceFrameRate=i._motionData.fps,i._loopDurationSeconds=i._motionData.duration,i._onFinishedMotion=r,i}doUpdateParameters(e,r,i,o){this._modelCurveIdEyeBlink==null&&(this._modelCurveIdEyeBlink=sb),this._modelCurveIdLipSync==null&&(this._modelCurveIdLipSync=ab);let s=r-o.getStartTime();s<0&&(s=0);let h=Number.MAX_VALUE,c=Number.MAX_VALUE;const d=64;let _=0,y=0;this._eyeBlinkParameterIds.length>d&&Qf("too many eye blink targets : {0}",this._eyeBlinkParameterIds.length),this._lipSyncParameterIds.length>d&&Qf("too many lip sync targets : {0}",this._lipSyncParameterIds.length);const I=this._fadeInSeconds<=0?1:vr.getEasingSine((r-o.getFadeInStartTime())/this._fadeInSeconds),E=this._fadeOutSeconds<=0||o.getEndTime()<0?1:vr.getEasingSine((o.getEndTime()-r)/this._fadeOutSeconds);let S,b,x,$=s;if(this._isLoop)for(;$>this._motionData.duration;)$-=this._motionData.duration;const j=this._motionData.curves;for(b=0;b<this._motionData.curveCount&&j[b].type==zn.CubismMotionCurveTarget_Model;++b)S=Zh(this._motionData,b,$),j[b].id==this._modelCurveIdEyeBlink?c=S:j[b].id==this._modelCurveIdLipSync&&(h=S);for(;b<this._motionData.curveCount&&j[b].type==zn.CubismMotionCurveTarget_Parameter;++b){if(x=e.getParameterIndex(j[b].id),x==-1)continue;const Y=e.getParameterValueByIndex(x);if(S=Zh(this._motionData,b,$),c!=Number.MAX_VALUE){for(let it=0;it<this._eyeBlinkParameterIds.length&&it<d;++it)if(this._eyeBlinkParameterIds[it]==j[b].id){S*=c,y|=1<<it;break}}if(h!=Number.MAX_VALUE){for(let it=0;it<this._lipSyncParameterIds.length&&it<d;++it)if(this._lipSyncParameterIds[it]==j[b].id){S+=h,_|=1<<it;break}}let Q;if(j[b].fadeInTime<0&&j[b].fadeOutTime<0)Q=Y+(S-Y)*i;else{let it,J;j[b].fadeInTime<0?it=I:it=j[b].fadeInTime==0?1:vr.getEasingSine((r-o.getFadeInStartTime())/j[b].fadeInTime),j[b].fadeOutTime<0?J=E:J=j[b].fadeOutTime==0||o.getEndTime()<0?1:vr.getEasingSine((o.getEndTime()-r)/j[b].fadeOutTime);const K=this._weight*it*J;Q=Y+(S-Y)*K}e.setParameterValueByIndex(x,Q,1)}{if(c!=Number.MAX_VALUE)for(let Y=0;Y<this._eyeBlinkParameterIds.length&&Y<d;++Y){const Q=e.getParameterValueById(this._eyeBlinkParameterIds[Y]);if(y>>Y&1)continue;const it=Q+(c-Q)*i;e.setParameterValueById(this._eyeBlinkParameterIds[Y],it)}if(h!=Number.MAX_VALUE)for(let Y=0;Y<this._lipSyncParameterIds.length&&Y<d;++Y){const Q=e.getParameterValueById(this._lipSyncParameterIds[Y]);if(_>>Y&1)continue;const it=Q+(h-Q)*i;e.setParameterValueById(this._lipSyncParameterIds[Y],it)}}for(;b<this._motionData.curveCount&&j[b].type==zn.CubismMotionCurveTarget_PartOpacity;++b)if(S=Zh(this._motionData,b,$),Hs.setOpacityFromMotion)e.setPartOpacityById(j[b].id,S);else{if(x=e.getParameterIndex(j[b].id),x==-1)continue;e.setParameterValueByIndex(x,S)}s>=this._motionData.duration&&(this._isLoop?(o.setStartTime(r),this._isLoopFadeIn&&o.setFadeInStartTime(r)):(this._onFinishedMotion&&this._onFinishedMotion(this),o.setIsFinished(!0))),this._lastWeight=i}setIsLoop(e){this._isLoop=e}isLoop(){return this._isLoop}setIsLoopFadeIn(e){this._isLoopFadeIn=e}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(e,r){const i=this._motionData.curves;for(let o=0;o<this._motionData.curveCount;++o)if(e==i[o].id){i[o].fadeInTime=r;return}}setParameterFadeOutTime(e,r){const i=this._motionData.curves;for(let o=0;o<this._motionData.curveCount;++o)if(e==i[o].id){i[o].fadeOutTime=r;return}}getParameterFadeInTime(e){const r=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==r[i].id)return r[i].fadeInTime;return-1}getParameterFadeOutTime(e){const r=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==r[i].id)return r[i].fadeOutTime;return-1}setEffectIds(e,r){this._eyeBlinkParameterIds=e,this._lipSyncParameterIds=r}release(){this._motionData=void 0}parse(e){this._motionData=new ob;let r=new F2(e);this._motionData.duration=r.getMotionDuration(),this._motionData.loop=r.isMotionLoop(),this._motionData.curveCount=r.getMotionCurveCount(),this._motionData.fps=r.getMotionFps(),this._motionData.eventCount=r.getEventCount();const i=r.getEvaluationOptionFlag(p0.EvaluationOptionFlag_AreBeziersRistricted),o=r.getMotionFadeInTime(),s=r.getMotionFadeOutTime();o!==void 0?this._fadeInSeconds=o<0?1:o:this._fadeInSeconds=1,s!==void 0?this._fadeOutSeconds=s<0?1:s:this._fadeOutSeconds=1,this._motionData.curves=Array.from({length:this._motionData.curveCount}).map(()=>new ib),this._motionData.segments=Array.from({length:r.getMotionTotalSegmentCount()}).map(()=>new rb),this._motionData.events=Array.from({length:this._motionData.eventCount}).map(()=>new nb),this._motionData.points=[];let h=0,c=0;for(let d=0;d<this._motionData.curveCount;++d){const _=this._motionData.curves[d];switch(r.getMotionCurveTarget(d)){case hb:_.type=zn.CubismMotionCurveTarget_Model;break;case lb:_.type=zn.CubismMotionCurveTarget_Parameter;break;case ub:_.type=zn.CubismMotionCurveTarget_PartOpacity;break;default:ms('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!')}_.id=r.getMotionCurveId(d),_.baseSegmentIndex=c;const y=r.getMotionCurveFadeInTime(d),I=r.getMotionCurveFadeOutTime(d);_.fadeInTime=y!==void 0?y:-1,_.fadeOutTime=I!==void 0?I:-1;for(let E=0;E<r.getMotionCurveSegmentCount(d);){switch(E==0?(this._motionData.segments[c].basePointIndex=h,this._motionData.points[h]=new gn(r.getMotionCurveSegment(d,E),r.getMotionCurveSegment(d,E+1)),h+=1,E+=2):this._motionData.segments[c].basePointIndex=h-1,r.getMotionCurveSegment(d,E)){case Ui.CubismMotionSegmentType_Linear:{this._motionData.segments[c].segmentType=Ui.CubismMotionSegmentType_Linear,this._motionData.segments[c].evaluate=db,this._motionData.points[h]=new gn(r.getMotionCurveSegment(d,E+1),r.getMotionCurveSegment(d,E+2)),h+=1,E+=3;break}case Ui.CubismMotionSegmentType_Bezier:{this._motionData.segments[c].segmentType=Ui.CubismMotionSegmentType_Bezier,i||cb?this._motionData.segments[c].evaluate=fb:this._motionData.segments[c].evaluate=_b,this._motionData.points[h]=new gn(r.getMotionCurveSegment(d,E+1),r.getMotionCurveSegment(d,E+2)),this._motionData.points[h+1]=new gn(r.getMotionCurveSegment(d,E+3),r.getMotionCurveSegment(d,E+4)),this._motionData.points[h+2]=new gn(r.getMotionCurveSegment(d,E+5),r.getMotionCurveSegment(d,E+6)),h+=3,E+=7;break}case Ui.CubismMotionSegmentType_Stepped:{this._motionData.segments[c].segmentType=Ui.CubismMotionSegmentType_Stepped,this._motionData.segments[c].evaluate=pb,this._motionData.points[h]=new gn(r.getMotionCurveSegment(d,E+1),r.getMotionCurveSegment(d,E+2)),h+=1,E+=3;break}case Ui.CubismMotionSegmentType_InverseStepped:{this._motionData.segments[c].segmentType=Ui.CubismMotionSegmentType_InverseStepped,this._motionData.segments[c].evaluate=mb,this._motionData.points[h]=new gn(r.getMotionCurveSegment(d,E+1),r.getMotionCurveSegment(d,E+2)),h+=1,E+=3;break}}++_.segmentCount,++c}this._motionData.curves.push(_)}for(let d=0;d<r.getEventCount();++d)this._motionData.events[d].fireTime=r.getEventTime(d),this._motionData.events[d].value=r.getEventValue(d);r.release()}getFiredEvent(e,r){this._firedEventValues.length=0;for(let i=0;i<this._motionData.eventCount;++i)this._motionData.events[i].fireTime>e&&this._motionData.events[i].fireTime<=r&&this._firedEventValues.push(this._motionData.events[i].value);return this._firedEventValues}}class gb extends sh{constructor(e,r){var i;super(e,r),this.groups={idle:"Idle"},this.motionDataType="json",this.queueManager=new $2,this.definitions=(i=e.motions)!=null?i:{},this.eyeBlinkIds=e.getEyeBlinkParameters()||[],this.lipSyncIds=e.getLipSyncParameters()||[],this.init(r)}init(e){super.init(e),this.settings.expressions&&(this.expressionManager=new eb(this.settings,e)),this.queueManager.setEventCallback((r,i,o)=>{this.emit("motion:"+i)})}isFinished(){return this.queueManager.isFinished()}_startMotion(e,r){return e.setFinishedMotionHandler(r),this.queueManager.stopAllMotions(),this.queueManager.startMotion(e,!1,performance.now())}_stopAllMotions(){this.queueManager.stopAllMotions()}createMotion(e,r,i){const o=m0.create(e),s=new F2(e),h=(r===this.groups.idle?zr.idleMotionFadingDuration:zr.motionFadingDuration)/1e3;return s.getMotionFadeInTime()===void 0&&o.setFadeInTime(i.FadeInTime>0?i.FadeInTime:h),s.getMotionFadeOutTime()===void 0&&o.setFadeOutTime(i.FadeOutTime>0?i.FadeOutTime:h),o.setEffectIds(this.eyeBlinkIds,this.lipSyncIds),o}getMotionFile(e){return e.File}getMotionName(e){return e.File}getSoundFile(e){return e.Sound}updateParameters(e,r){return this.queueManager.doUpdateMotion(e,r)}destroy(){super.destroy(),this.queueManager.release(),this.queueManager=void 0}}const vb="ParamAngleX",yb="ParamAngleY",Eb="ParamAngleZ",Tb="ParamEyeBallX",Ab="ParamEyeBallY",bb="ParamBodyAngleX",xb="ParamBreath";class g0{constructor(){this._breathParameters=[],this._currentTime=0}static create(){return new g0}setParameters(e){this._breathParameters=e}getParameters(){return this._breathParameters}updateParameters(e,r){this._currentTime+=r;const i=this._currentTime*2*3.14159;for(let o=0;o<this._breathParameters.length;++o){const s=this._breathParameters[o];e.addParameterValueById(s.parameterId,s.offset+s.peak*Math.sin(i/s.cycle),s.weight)}}}class ds{constructor(e,r,i,o,s){this.parameterId=e??void 0,this.offset=r??0,this.peak=i??0,this.cycle=o??0,this.weight=s??0}}const cu=class{static create(t){return new cu(t)}setBlinkingInterval(t){this._blinkingIntervalSeconds=t}setBlinkingSetting(t,e,r){this._closingSeconds=t,this._closedSeconds=e,this._openingSeconds=r}setParameterIds(t){this._parameterIds=t}getParameterIds(){return this._parameterIds}updateParameters(t,e){this._userTimeSeconds+=e;let r,i=0;switch(this._blinkingState){case pi.EyeState_Closing:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,i>=1&&(i=1,this._blinkingState=pi.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),r=1-i;break;case pi.EyeState_Closed:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,i>=1&&(this._blinkingState=pi.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),r=0;break;case pi.EyeState_Opening:i=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,i>=1&&(i=1,this._blinkingState=pi.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),r=i;break;case pi.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=pi.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),r=1;break;case pi.EyeState_First:default:this._blinkingState=pi.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),r=1;break}cu.CloseIfZero||(r=-r);for(let o=0;o<this._parameterIds.length;++o)t.setParameterValueById(this._parameterIds[o],r)}constructor(t){var e,r;this._blinkingState=pi.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=[],t!=null&&(this._parameterIds=(r=(e=t.getEyeBlinkParameters())==null?void 0:e.slice())!=null?r:this._parameterIds)}determinNextBlinkingTiming(){const t=Math.random();return this._userTimeSeconds+t*(2*this._blinkingIntervalSeconds-1)}};let U2=cu;U2.CloseIfZero=!0;var pi=(t=>(t[t.EyeState_First=0]="EyeState_First",t[t.EyeState_Interval=1]="EyeState_Interval",t[t.EyeState_Closing=2]="EyeState_Closing",t[t.EyeState_Closed=3]="EyeState_Closed",t[t.EyeState_Opening=4]="EyeState_Opening",t))(pi||{});class du{constructor(e=0,r=0,i=0,o=0){this.x=e,this.y=r,this.width=i,this.height=o}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height}expand(e,r){this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2}}const Qh=4,Sb=10;let Ao,gs,fu;class Jh{getChannelFlagAsColor(e){return this._channelColors[e]}getMaskRenderTexture(){let e=0;if(this._maskTexture&&this._maskTexture.texture!=0&&(this._maskTexture.frameNo=this._currentFrameNo,e=this._maskTexture.texture),e==0){const r=this._clippingMaskBufferSize;this._colorBuffer=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this._colorBuffer),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,r,r,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),e=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._colorBuffer,0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,fu),this._maskTexture=new Rb(this._currentFrameNo,e)}return e}setGL(e){this.gl=e}calcClippedDrawTotalBounds(e,r){let i=Number.MAX_VALUE,o=Number.MAX_VALUE,s=Number.MIN_VALUE,h=Number.MIN_VALUE;const c=r._clippedDrawableIndexList.length;for(let d=0;d<c;d++){const _=r._clippedDrawableIndexList[d],y=e.getDrawableVertexCount(_),I=e.getDrawableVertices(_);let E=Number.MAX_VALUE,S=Number.MAX_VALUE,b=Number.MIN_VALUE,x=Number.MIN_VALUE;const $=y*qh.vertexStep;for(let j=qh.vertexOffset;j<$;j+=qh.vertexStep){const Y=I[j],Q=I[j+1];Y<E&&(E=Y),Y>b&&(b=Y),Q<S&&(S=Q),Q>x&&(x=Q)}if(E!=Number.MAX_VALUE)if(E<i&&(i=E),S<o&&(o=S),b>s&&(s=b),x>h&&(h=x),i==Number.MAX_VALUE)r._allClippedDrawRect.x=0,r._allClippedDrawRect.y=0,r._allClippedDrawRect.width=0,r._allClippedDrawRect.height=0,r._isUsing=!1;else{r._isUsing=!0;const j=s-i,Y=h-o;r._allClippedDrawRect.x=i,r._allClippedDrawRect.y=o,r._allClippedDrawRect.width=j,r._allClippedDrawRect.height=Y}}}constructor(){this._maskRenderTexture=null,this._colorBuffer=null,this._currentFrameNo=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=[],this._clippingContextListForDraw=[],this._channelColors=[],this._tmpBoundsOnModel=new du,this._tmpMatrix=new Ei,this._tmpMatrixForMask=new Ei,this._tmpMatrixForDraw=new Ei;let e=new ps;e.R=1,e.G=0,e.B=0,e.A=0,this._channelColors.push(e),e=new ps,e.R=0,e.G=1,e.B=0,e.A=0,this._channelColors.push(e),e=new ps,e.R=0,e.G=0,e.B=1,e.A=0,this._channelColors.push(e),e=new ps,e.R=0,e.G=0,e.B=0,e.A=1,this._channelColors.push(e)}release(){var e,r,i;const o=this;for(let s=0;s<this._clippingContextListForMask.length;s++)this._clippingContextListForMask[s]&&((e=this._clippingContextListForMask[s])==null||e.release());o._clippingContextListForMask=void 0,o._clippingContextListForDraw=void 0,this._maskTexture&&((r=this.gl)==null||r.deleteFramebuffer(this._maskTexture.texture),o._maskTexture=void 0),o._channelColors=void 0,(i=this.gl)==null||i.deleteTexture(this._colorBuffer),this._colorBuffer=null}initialize(e,r,i,o){for(let s=0;s<r;s++){if(o[s]<=0){this._clippingContextListForDraw.push(null);continue}let h=this.findSameClip(i[s],o[s]);h==null&&(h=new Pb(this,i[s],o[s]),this._clippingContextListForMask.push(h)),h.addClippedDrawable(s),this._clippingContextListForDraw.push(h)}}setupClippingContext(e,r){this._currentFrameNo++;let i=0;for(let o=0;o<this._clippingContextListForMask.length;o++){const s=this._clippingContextListForMask[o];this.calcClippedDrawTotalBounds(e,s),s._isUsing&&i++}if(i>0){this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._maskRenderTexture=this.getMaskRenderTexture(),r.getMvpMatrix(),r.preDraw(),this.setupLayoutBounds(i),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTexture),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(let o=0;o<this._clippingContextListForMask.length;o++){const s=this._clippingContextListForMask[o],h=s._allClippedDrawRect,c=s._layoutBounds,d=.05;this._tmpBoundsOnModel.setRect(h),this._tmpBoundsOnModel.expand(h.width*d,h.height*d);const _=c.width/this._tmpBoundsOnModel.width,y=c.height/this._tmpBoundsOnModel.height;this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(c.x,c.y),this._tmpMatrix.scaleRelative(_,y),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(c.x,c.y),this._tmpMatrix.scaleRelative(_,y),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),s._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),s._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());const I=s._clippingIdCount;for(let E=0;E<I;E++){const S=s._clippingIdList[E];e.getDrawableDynamicFlagVertexPositionsDidChange(S)&&(r.setIsCulling(e.getDrawableCulling(S)!=!1),r.setClippingContextBufferForMask(s),r.drawMesh(e.getDrawableTextureIndices(S),e.getDrawableVertexIndexCount(S),e.getDrawableVertexCount(S),e.getDrawableVertexIndices(S),e.getDrawableVertices(S),e.getDrawableVertexUvs(S),e.getDrawableOpacity(S),An.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,fu),r.setClippingContextBufferForMask(null),this.gl.viewport(gs[0],gs[1],gs[2],gs[3])}}findSameClip(e,r){for(let i=0;i<this._clippingContextListForMask.length;i++){const o=this._clippingContextListForMask[i],s=o._clippingIdCount;if(s!=r)continue;let h=0;for(let c=0;c<s;c++){const d=o._clippingIdList[c];for(let _=0;_<s;_++)if(e[_]==d){h++;break}}if(h==s)return o}return null}setupLayoutBounds(e){let r=e/Qh,i=e%Qh;r=~~r,i=~~i;let o=0;for(let s=0;s<Qh;s++){const h=r+(s<i?1:0);if(h!=0)if(h==1){const c=this._clippingContextListForMask[o++];c._layoutChannelNo=s,c._layoutBounds.x=0,c._layoutBounds.y=0,c._layoutBounds.width=1,c._layoutBounds.height=1}else if(h==2)for(let c=0;c<h;c++){let d=c%2;d=~~d;const _=this._clippingContextListForMask[o++];_._layoutChannelNo=s,_._layoutBounds.x=d*.5,_._layoutBounds.y=0,_._layoutBounds.width=.5,_._layoutBounds.height=1}else if(h<=4)for(let c=0;c<h;c++){let d=c%2,_=c/2;d=~~d,_=~~_;const y=this._clippingContextListForMask[o++];y._layoutChannelNo=s,y._layoutBounds.x=d*.5,y._layoutBounds.y=_*.5,y._layoutBounds.width=.5,y._layoutBounds.height=.5}else if(h<=9)for(let c=0;c<h;c++){let d=c%3,_=c/3;d=~~d,_=~~_;const y=this._clippingContextListForMask[o++];y._layoutChannelNo=s,y._layoutBounds.x=d/3,y._layoutBounds.y=_/3,y._layoutBounds.width=1/3,y._layoutBounds.height=1/3}else if(Hs.supportMoreMaskDivisions&&h<=16)for(let c=0;c<h;c++){let d=c%4,_=c/4;d=~~d,_=~~_;const y=this._clippingContextListForMask[o++];y._layoutChannelNo=s,y._layoutBounds.x=d/4,y._layoutBounds.y=_/4,y._layoutBounds.width=1/4,y._layoutBounds.height=1/4}else bo("not supported mask count : {0}",h)}}getColorBuffer(){return this._colorBuffer}getClippingContextListForDraw(){return this._clippingContextListForDraw}setClippingMaskBufferSize(e){this._clippingMaskBufferSize=e}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}}class Rb{constructor(e,r){this.frameNo=e,this.texture=r}}class Pb{constructor(e,r,i){this._isUsing=!1,this._owner=e,this._clippingIdList=r,this._clippingIdCount=i,this._allClippedDrawRect=new du,this._layoutBounds=new du,this._clippedDrawableIndexList=[],this._matrixForMask=new Ei,this._matrixForDraw=new Ei}release(){const e=this;e._layoutBounds=void 0,e._allClippedDrawRect=void 0,e._clippedDrawableIndexList=void 0}addClippedDrawable(e){this._clippedDrawableIndexList.push(e)}getClippingManager(){return this._owner}setGl(e){this._owner.setGL(e)}}class Oo{static getInstance(){return Ao==null&&(Ao=new Oo),Ao}static deleteInstance(){Ao&&(Ao.release(),Ao=void 0)}constructor(){this._shaderSets=[]}release(){this.releaseShaderProgram()}setupShaderProgram(e,r,i,o,s,h,c,d,_,y,I,E,S){I||bo("NoPremultipliedAlpha is not allowed"),this._shaderSets.length==0&&this.generateShaders();let b,x,$,j;const Y=e.getClippingContextBufferForMask();if(Y!=null){const Q=this._shaderSets[vs.ShaderNames_SetupMask];this.gl.useProgram(Q.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.uniform1i(Q.samplerTexture0Location,0),c.vertex==null&&(c.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,c.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(Q.attributePositionLocation),this.gl.vertexAttribPointer(Q.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),c.uv==null&&(c.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,c.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,h,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(Q.attributeTexCoordLocation),this.gl.vertexAttribPointer(Q.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);const it=Y._layoutChannelNo,J=Y.getClippingManager().getChannelFlagAsColor(it);this.gl.uniform4f(Q.uniformChannelFlagLocation,J.R,J.G,J.B,J.A),this.gl.uniformMatrix4fv(Q.uniformClipMatrixLocation,!1,Y._matrixForMask.getArray());const K=Y._layoutBounds;this.gl.uniform4f(Q.uniformBaseColorLocation,K.x*2-1,K.y*2-1,K.getRight()*2-1,K.getBottom()*2-1),b=this.gl.ZERO,x=this.gl.ONE_MINUS_SRC_COLOR,$=this.gl.ZERO,j=this.gl.ONE_MINUS_SRC_ALPHA}else{const Q=e.getClippingContextBufferForDraw(),it=Q!=null?S?2:1:0;let J;switch(_){case An.CubismBlendMode_Normal:default:J=this._shaderSets[vs.ShaderNames_NormalPremultipliedAlpha+it],b=this.gl.ONE,x=this.gl.ONE_MINUS_SRC_ALPHA,$=this.gl.ONE,j=this.gl.ONE_MINUS_SRC_ALPHA;break;case An.CubismBlendMode_Additive:J=this._shaderSets[vs.ShaderNames_AddPremultipliedAlpha+it],b=this.gl.ONE,x=this.gl.ONE,$=this.gl.ZERO,j=this.gl.ONE;break;case An.CubismBlendMode_Multiplicative:J=this._shaderSets[vs.ShaderNames_MultPremultipliedAlpha+it],b=this.gl.DST_COLOR,x=this.gl.ONE_MINUS_SRC_ALPHA,$=this.gl.ZERO,j=this.gl.ONE;break}if(this.gl.useProgram(J.shaderProgram),c.vertex==null&&(c.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,c.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(J.attributePositionLocation),this.gl.vertexAttribPointer(J.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),c.uv==null&&(c.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,c.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,h,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(J.attributeTexCoordLocation),this.gl.vertexAttribPointer(J.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),Q!=null){this.gl.activeTexture(this.gl.TEXTURE1);const K=Q.getClippingManager().getColorBuffer();this.gl.bindTexture(this.gl.TEXTURE_2D,K),this.gl.uniform1i(J.samplerTexture1Location,1),this.gl.uniformMatrix4fv(J.uniformClipMatrixLocation,!1,Q._matrixForDraw.getArray());const Tt=Q._layoutChannelNo,yt=Q.getClippingManager().getChannelFlagAsColor(Tt);this.gl.uniform4f(J.uniformChannelFlagLocation,yt.R,yt.G,yt.B,yt.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.uniform1i(J.samplerTexture0Location,0),this.gl.uniformMatrix4fv(J.uniformMatrixLocation,!1,E.getArray()),this.gl.uniform4f(J.uniformBaseColorLocation,y.R,y.G,y.B,y.A)}c.index==null&&(c.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,c.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,s,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(b,x,$,j)}releaseShaderProgram(){for(let e=0;e<this._shaderSets.length;e++)this.gl.deleteProgram(this._shaderSets[e].shaderProgram),this._shaderSets[e].shaderProgram=0;this._shaderSets=[]}generateShaders(){for(let e=0;e<Sb;e++)this._shaderSets.push({});this._shaderSets[0].shaderProgram=this.loadShaderProgram(Ib,Ob),this._shaderSets[1].shaderProgram=this.loadShaderProgram(wb,Mb),this._shaderSets[2].shaderProgram=this.loadShaderProgram(Kf,Cb),this._shaderSets[3].shaderProgram=this.loadShaderProgram(Kf,Db),this._shaderSets[4].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[5].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[6].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[7].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[8].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[9].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[0].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_position"),this._shaderSets[0].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_texCoord"),this._shaderSets[0].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"s_texture0"),this._shaderSets[0].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_clipMatrix"),this._shaderSets[0].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_channelFlag"),this._shaderSets[0].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_baseColor"),this._shaderSets[1].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_position"),this._shaderSets[1].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_texCoord"),this._shaderSets[1].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"s_texture0"),this._shaderSets[1].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_matrix"),this._shaderSets[1].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_baseColor"),this._shaderSets[2].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_position"),this._shaderSets[2].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_texCoord"),this._shaderSets[2].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture0"),this._shaderSets[2].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture1"),this._shaderSets[2].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_matrix"),this._shaderSets[2].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_clipMatrix"),this._shaderSets[2].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_channelFlag"),this._shaderSets[2].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_baseColor"),this._shaderSets[3].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_position"),this._shaderSets[3].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_texCoord"),this._shaderSets[3].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture0"),this._shaderSets[3].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture1"),this._shaderSets[3].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_matrix"),this._shaderSets[3].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_clipMatrix"),this._shaderSets[3].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_channelFlag"),this._shaderSets[3].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_baseColor"),this._shaderSets[4].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_position"),this._shaderSets[4].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_texCoord"),this._shaderSets[4].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"s_texture0"),this._shaderSets[4].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_matrix"),this._shaderSets[4].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_baseColor"),this._shaderSets[5].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_position"),this._shaderSets[5].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_texCoord"),this._shaderSets[5].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture0"),this._shaderSets[5].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture1"),this._shaderSets[5].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_matrix"),this._shaderSets[5].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_clipMatrix"),this._shaderSets[5].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_channelFlag"),this._shaderSets[5].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_baseColor"),this._shaderSets[6].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_position"),this._shaderSets[6].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_texCoord"),this._shaderSets[6].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture0"),this._shaderSets[6].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture1"),this._shaderSets[6].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_matrix"),this._shaderSets[6].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_clipMatrix"),this._shaderSets[6].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_channelFlag"),this._shaderSets[6].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_baseColor"),this._shaderSets[7].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_position"),this._shaderSets[7].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_texCoord"),this._shaderSets[7].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"s_texture0"),this._shaderSets[7].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_matrix"),this._shaderSets[7].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_baseColor"),this._shaderSets[8].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_position"),this._shaderSets[8].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_texCoord"),this._shaderSets[8].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture0"),this._shaderSets[8].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture1"),this._shaderSets[8].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_matrix"),this._shaderSets[8].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_clipMatrix"),this._shaderSets[8].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_channelFlag"),this._shaderSets[8].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_baseColor"),this._shaderSets[9].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_position"),this._shaderSets[9].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_texCoord"),this._shaderSets[9].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture0"),this._shaderSets[9].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture1"),this._shaderSets[9].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_matrix"),this._shaderSets[9].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_clipMatrix"),this._shaderSets[9].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_channelFlag"),this._shaderSets[9].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_baseColor")}loadShaderProgram(e,r){let i=this.gl.createProgram(),o=this.compileShaderSource(this.gl.VERTEX_SHADER,e);if(!o)return bo("Vertex shader compile error!"),0;let s=this.compileShaderSource(this.gl.FRAGMENT_SHADER,r);return s?(this.gl.attachShader(i,o),this.gl.attachShader(i,s),this.gl.linkProgram(i),this.gl.getProgramParameter(i,this.gl.LINK_STATUS)?(this.gl.deleteShader(o),this.gl.deleteShader(s),i):(bo("Failed to link program: {0}",i),this.gl.deleteShader(o),this.gl.deleteShader(s),i&&this.gl.deleteProgram(i),0)):(bo("Vertex shader compile error!"),0)}compileShaderSource(e,r){const i=r,o=this.gl.createShader(e);if(this.gl.shaderSource(o,i),this.gl.compileShader(o),!o){const s=this.gl.getShaderInfoLog(o);bo("Shader compile log: {0} ",s)}return this.gl.getShaderParameter(o,this.gl.COMPILE_STATUS)?o:(this.gl.deleteShader(o),null)}setGl(e){this.gl=e}}var vs=(t=>(t[t.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",t[t.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",t[t.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",t[t.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",t[t.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",t[t.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",t[t.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",t[t.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",t[t.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",t[t.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted",t))(vs||{});const Ib="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",Ob="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",wb="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",Kf="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",Mb="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}",Cb="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",Db="precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}";class B2 extends f0{constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._clippingManager=new Jh,this.firstDraw=!0,this._textures={},this._sortedDrawableIndexList=[],this._bufferData={vertex:null,uv:null,index:null}}initialize(e){e.isUsingMasking()&&(this._clippingManager=new Jh,this._clippingManager.initialize(e,e.getDrawableCount(),e.getDrawableMasks(),e.getDrawableMaskCounts()));for(let r=e.getDrawableCount()-1;r>=0;r--)this._sortedDrawableIndexList[r]=0;super.initialize(e)}bindTexture(e,r){this._textures[e]=r}getBindedTextures(){return this._textures}setClippingMaskBufferSize(e){this._clippingManager.release(),this._clippingManager=new Jh,this._clippingManager.setClippingMaskBufferSize(e),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts())}getClippingMaskBufferSize(){return this._clippingManager.getClippingMaskBufferSize()}release(){var e,r,i;const o=this;this._clippingManager.release(),o._clippingManager=void 0,(e=this.gl)==null||e.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,(r=this.gl)==null||r.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,(i=this.gl)==null||i.deleteBuffer(this._bufferData.index),this._bufferData.index=null,o._bufferData=void 0,o._textures=void 0}doDrawModel(){this.preDraw(),this._clippingManager!=null&&this._clippingManager.setupClippingContext(this.getModel(),this);const e=this.getModel().getDrawableCount(),r=this.getModel().getDrawableRenderOrders();for(let i=0;i<e;++i){const o=r[i];this._sortedDrawableIndexList[o]=i}for(let i=0;i<e;++i){const o=this._sortedDrawableIndexList[i];this.getModel().getDrawableDynamicFlagIsVisible(o)&&(this.setClippingContextBufferForDraw(this._clippingManager!=null?this._clippingManager.getClippingContextListForDraw()[o]:null),this.setIsCulling(this.getModel().getDrawableCulling(o)),this.drawMesh(this.getModel().getDrawableTextureIndices(o),this.getModel().getDrawableVertexIndexCount(o),this.getModel().getDrawableVertexCount(o),this.getModel().getDrawableVertexIndices(o),this.getModel().getDrawableVertices(o),this.getModel().getDrawableVertexUvs(o),this.getModel().getDrawableOpacity(o),this.getModel().getDrawableBlendMode(o),this.getModel().getDrawableInvertedMaskBit(o)))}}drawMesh(e,r,i,o,s,h,c,d,_){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);const y=this.getModelColor();this.getClippingContextBufferForMask()==null&&(y.A*=c,this.isPremultipliedAlpha()&&(y.R*=y.A,y.G*=y.A,y.B*=y.A));let I=null;this._textures[e]!=null&&(I=this._textures[e]),Oo.getInstance().setupShaderProgram(this,I,i,s,o,h,this._bufferData,c,d,y,this.isPremultipliedAlpha(),this.getMvpMatrix(),_),this.gl.drawElements(this.gl.TRIANGLES,r,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}static doStaticRelease(){Oo.deleteInstance()}setRenderState(e,r){fu=e,gs=r}preDraw(){this.firstDraw&&(this.firstDraw=!1,this._anisortopy=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}setClippingContextBufferForMask(e){this._clippingContextBufferForMask=e}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(e){this._clippingContextBufferForDraw=e}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(e){this.gl=e,this._clippingManager.setGL(e),Oo.getInstance().setGl(e)}}f0.staticRelease=()=>{B2.doStaticRelease()};const t_=new Ei;class Lb extends S2{constructor(e,r,i){super(),this.lipSync=!0,this.breath=g0.create(),this.renderer=new B2,this.idParamAngleX=vb,this.idParamAngleY=yb,this.idParamAngleZ=Eb,this.idParamEyeBallX=Tb,this.idParamEyeBallY=Ab,this.idParamBodyAngleX=bb,this.idParamBreath=xb,this.pixelsPerUnit=1,this.centeringTransform=new Sr,this.coreModel=e,this.settings=r,this.motionManager=new gb(r,i),this.init()}init(){var e;super.init(),((e=this.settings.getEyeBlinkParameters())==null?void 0:e.length)>0&&(this.eyeBlink=U2.create(this.settings)),this.breath.setParameters([new ds(this.idParamAngleX,0,15,6.5345,.5),new ds(this.idParamAngleY,0,8,3.5345,.5),new ds(this.idParamAngleZ,0,10,5.5345,.5),new ds(this.idParamBodyAngleX,0,4,15.5345,.5),new ds(this.idParamBreath,0,.5,3.2345,.5)]),this.renderer.initialize(this.coreModel),this.renderer.setIsPremultipliedAlpha(!0)}getSize(){return[this.coreModel.getModel().canvasinfo.CanvasWidth,this.coreModel.getModel().canvasinfo.CanvasHeight]}getLayout(){const e={};if(this.settings.layout)for(const r of Object.keys(this.settings.layout)){const i=r.charAt(0).toLowerCase()+r.slice(1);e[i]=this.settings.layout[r]}return e}setupLayout(){super.setupLayout(),this.pixelsPerUnit=this.coreModel.getModel().canvasinfo.PixelsPerUnit,this.centeringTransform.scale(this.pixelsPerUnit,this.pixelsPerUnit).translate(this.originalWidth/2,this.originalHeight/2)}updateWebGLContext(e,r){this.renderer.firstDraw=!0,this.renderer._bufferData={vertex:null,uv:null,index:null},this.renderer.startUp(e),this.renderer._clippingManager._currentFrameNo=r,this.renderer._clippingManager._maskTexture=void 0,Oo.getInstance()._shaderSets=[]}bindTexture(e,r){this.renderer.bindTexture(e,r)}getHitAreaDefs(){var e,r;return(r=(e=this.settings.hitAreas)==null?void 0:e.map(i=>({id:i.Id,name:i.Name,index:this.coreModel.getDrawableIndex(i.Id)})))!=null?r:[]}getDrawableIDs(){return this.coreModel.getDrawableIds()}getDrawableIndex(e){return this.coreModel.getDrawableIndex(e)}getDrawableVertices(e){if(typeof e=="string"&&(e=this.coreModel.getDrawableIndex(e),e===-1))throw new TypeError("Unable to find drawable ID: "+e);const r=this.coreModel.getDrawableVertices(e).slice();for(let i=0;i<r.length;i+=2)r[i]=r[i]*this.pixelsPerUnit+this.originalWidth/2,r[i+1]=-r[i+1]*this.pixelsPerUnit+this.originalHeight/2;return r}updateTransform(e){this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(e)}update(e,r){var i,o,s,h;super.update(e,r),e/=1e3,r/=1e3;const c=this.coreModel;this.emit("beforeMotionUpdate");const d=this.motionManager.update(this.coreModel,r);this.emit("afterMotionUpdate"),c.saveParameters(),(i=this.motionManager.expressionManager)==null||i.update(c,r),d||(o=this.eyeBlink)==null||o.updateParameters(c,e),this.updateFocus(),this.updateNaturalMovements(e*1e3,r*1e3),(s=this.physics)==null||s.evaluate(c,e),(h=this.pose)==null||h.updateParameters(c,e),this.emit("beforeModelUpdate"),c.update(),c.loadParameters()}updateFocus(){this.coreModel.addParameterValueById(this.idParamEyeBallX,this.focusController.x),this.coreModel.addParameterValueById(this.idParamEyeBallY,this.focusController.y),this.coreModel.addParameterValueById(this.idParamAngleX,this.focusController.x*30),this.coreModel.addParameterValueById(this.idParamAngleY,this.focusController.y*30),this.coreModel.addParameterValueById(this.idParamAngleZ,this.focusController.x*this.focusController.y*-30),this.coreModel.addParameterValueById(this.idParamBodyAngleX,this.focusController.x*10)}updateNaturalMovements(e,r){var i;(i=this.breath)==null||i.updateParameters(this.coreModel,e/1e3)}draw(e){const r=this.drawingMatrix,i=t_.getArray();i[0]=r.a,i[1]=r.b,i[4]=-r.c,i[5]=-r.d,i[12]=r.tx,i[13]=r.ty,this.renderer.setMvpMatrix(t_),this.renderer.setRenderState(e.getParameter(e.FRAMEBUFFER_BINDING),this.viewport),this.renderer.drawModel()}destroy(){super.destroy(),this.renderer.release(),this.coreModel.release(),this.renderer=void 0,this.coreModel=void 0}}let Kh,e_=20;function $b(){return js.isStarted()?Promise.resolve():(Kh!=null||(Kh=new Promise((t,e)=>{function r(){try{Nb(),t()}catch(i){if(e_--,e_<0){const o=new Error("Failed to start up Cubism 4 framework.");o.cause=i,e(o);return}dr.log("Cubism4","Startup failed, retrying 10ms later..."),setTimeout(r,10)}}r()})),Kh)}function Nb(t){t=Object.assign({logFunction:console.log,loggingLevel:ho.LogLevel_Verbose},t),js.startUp(t),js.initialize()}const Fb=.001,r_=.5;class v0{static create(e){const r=new v0;typeof e.FadeInTime=="number"&&(r._fadeTimeSeconds=e.FadeInTime,r._fadeTimeSeconds<=0&&(r._fadeTimeSeconds=r_));const i=e.Groups,o=i.length;for(let s=0;s<o;++s){const h=i[s],c=h.length;let d=0;for(let _=0;_<c;++_){const y=h[_],I=new Wa;I.partId=y.Id;const E=y.Link;if(E){const S=E.length;for(let b=0;b<S;++b){const x=new Wa;x.partId=E[b],I.link.push(x)}}r._partGroups.push(I),++d}r._partGroupCounts.push(d)}return r}updateParameters(e,r){e!=this._lastModel&&this.reset(e),this._lastModel=e,r<0&&(r=0);let i=0;for(let o=0;o<this._partGroupCounts.length;o++){const s=this._partGroupCounts[o];this.doFade(e,r,i,s),i+=s}this.copyPartOpacities(e)}reset(e){let r=0;for(let i=0;i<this._partGroupCounts.length;++i){const o=this._partGroupCounts[i];for(let s=r;s<r+o;++s){this._partGroups[s].initialize(e);const h=this._partGroups[s].partIndex,c=this._partGroups[s].parameterIndex;if(!(h<0)){e.setPartOpacityByIndex(h,s==r?1:0),e.setParameterValueByIndex(c,s==r?1:0);for(let d=0;d<this._partGroups[s].link.length;++d)this._partGroups[s].link[d].initialize(e)}}r+=o}}copyPartOpacities(e){for(let r=0;r<this._partGroups.length;++r){const i=this._partGroups[r];if(i.link.length==0)continue;const o=this._partGroups[r].partIndex,s=e.getPartOpacityByIndex(o);for(let h=0;h<i.link.length;++h){const c=i.link[h].partIndex;c<0||e.setPartOpacityByIndex(c,s)}}}doFade(e,r,i,o){let s=-1,h=1;const c=.5,d=.15;for(let _=i;_<i+o;++_){const y=this._partGroups[_].partIndex,I=this._partGroups[_].parameterIndex;if(e.getParameterValueByIndex(I)>Fb){if(s>=0)break;s=_,h=e.getPartOpacityByIndex(y),h+=r/this._fadeTimeSeconds,h>1&&(h=1)}}s<0&&(s=0,h=1);for(let _=i;_<i+o;++_){const y=this._partGroups[_].partIndex;if(s==_)e.setPartOpacityByIndex(y,h);else{let I=e.getPartOpacityByIndex(y),E;h<c?E=h*(c-1)/c+1:E=(1-h)*c/(1-c),(1-E)*(1-h)>d&&(E=1-d/(1-h)),I>E&&(I=E),e.setPartOpacityByIndex(y,I)}}}constructor(){this._fadeTimeSeconds=r_,this._lastModel=void 0,this._partGroups=[],this._partGroupCounts=[]}}class Wa{constructor(e){this.parameterIndex=0,this.partIndex=0,this.partId="",this.link=[],e!=null&&this.assignment(e)}assignment(e){return this.partId=e.partId,this.link=e.link.map(r=>r.clone()),this}initialize(e){this.parameterIndex=e.getParameterIndex(this.partId),this.partIndex=e.getPartIndex(this.partId),e.setParameterValueByIndex(this.parameterIndex,1)}clone(){const e=new Wa;return e.partId=this.partId,e.parameterIndex=this.parameterIndex,e.partIndex=this.partIndex,e.link=this.link.map(r=>r.clone()),e}}class Ub{update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getCanvasWidth(){return this._model==null?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return this._model==null?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){const e=this._model.parameters.count,r=this._savedParameters.length;for(let i=0;i<e;++i)i<r?this._savedParameters[i]=this._parameterValues[i]:this._savedParameters.push(this._parameterValues[i])}getModel(){return this._model}getPartIndex(e){let r;const i=this._model.parts.count;for(r=0;r<i;++r)if(e==this._partIds[r])return r;return e in this._notExistPartId?this._notExistPartId[e]:(r=i+this._notExistPartId.length,this._notExistPartId[e]=r,this._notExistPartOpacities[r]=0,r)}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(e,r){if(e in this._notExistPartOpacities){this._notExistPartOpacities[e]=r;return}Oa(0<=e&&e<this.getPartCount()),this._partOpacities[e]=r}setPartOpacityById(e,r){const i=this.getPartIndex(e);i<0||this.setPartOpacityByIndex(i,r)}getPartOpacityByIndex(e){return e in this._notExistPartOpacities?this._notExistPartOpacities[e]:(Oa(0<=e&&e<this.getPartCount()),this._partOpacities[e])}getPartOpacityById(e){const r=this.getPartIndex(e);return r<0?0:this.getPartOpacityByIndex(r)}getParameterIndex(e){let r;const i=this._model.parameters.count;for(r=0;r<i;++r)if(e==this._parameterIds[r])return r;return e in this._notExistParameterId?this._notExistParameterId[e]:(r=this._model.parameters.count+Object.keys(this._notExistParameterId).length,this._notExistParameterId[e]=r,this._notExistParameterValues[r]=0,r)}getParameterCount(){return this._model.parameters.count}getParameterMaximumValue(e){return this._model.parameters.maximumValues[e]}getParameterMinimumValue(e){return this._model.parameters.minimumValues[e]}getParameterDefaultValue(e){return this._model.parameters.defaultValues[e]}getParameterValueByIndex(e){return e in this._notExistParameterValues?this._notExistParameterValues[e]:(Oa(0<=e&&e<this.getParameterCount()),this._parameterValues[e])}getParameterValueById(e){const r=this.getParameterIndex(e);return this.getParameterValueByIndex(r)}setParameterValueByIndex(e,r,i=1){if(e in this._notExistParameterValues){this._notExistParameterValues[e]=i==1?r:this._notExistParameterValues[e]*(1-i)+r*i;return}Oa(0<=e&&e<this.getParameterCount()),this._model.parameters.maximumValues[e]<r&&(r=this._model.parameters.maximumValues[e]),this._model.parameters.minimumValues[e]>r&&(r=this._model.parameters.minimumValues[e]),this._parameterValues[e]=i==1?r:this._parameterValues[e]=this._parameterValues[e]*(1-i)+r*i}setParameterValueById(e,r,i=1){const o=this.getParameterIndex(e);this.setParameterValueByIndex(o,r,i)}addParameterValueByIndex(e,r,i=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)+r*i)}addParameterValueById(e,r,i=1){const o=this.getParameterIndex(e);this.addParameterValueByIndex(o,r,i)}multiplyParameterValueById(e,r,i=1){const o=this.getParameterIndex(e);this.multiplyParameterValueByIndex(o,r,i)}multiplyParameterValueByIndex(e,r,i=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)*(1+(r-1)*i))}getDrawableIds(){return this._drawableIds.slice()}getDrawableIndex(e){const r=this._model.drawables.count;for(let i=0;i<r;++i)if(this._drawableIds[i]==e)return i;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(e){return this._model.drawables.ids[e]}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(e){return this._model.drawables.textureIndices[e]}getDrawableDynamicFlagVertexPositionsDidChange(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(r[e])}getDrawableVertexIndexCount(e){return this._model.drawables.indexCounts[e]}getDrawableVertexCount(e){return this._model.drawables.vertexCounts[e]}getDrawableVertices(e){return this.getDrawableVertexPositions(e)}getDrawableVertexIndices(e){return this._model.drawables.indices[e]}getDrawableVertexPositions(e){return this._model.drawables.vertexPositions[e]}getDrawableVertexUvs(e){return this._model.drawables.vertexUvs[e]}getDrawableOpacity(e){return this._model.drawables.opacities[e]}getDrawableCulling(e){const r=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(r[e])}getDrawableBlendMode(e){const r=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(r[e])?An.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(r[e])?An.CubismBlendMode_Multiplicative:An.CubismBlendMode_Normal}getDrawableInvertedMaskBit(e){const r=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(r[e])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let e=0;e<this._model.drawables.count;++e)if(!(this._model.drawables.maskCounts[e]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(r[e])}getDrawableDynamicFlagVisibilityDidChange(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(r[e])}getDrawableDynamicFlagOpacityDidChange(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(r[e])}getDrawableDynamicFlagRenderOrderDidChange(e){const r=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(r[e])}loadParameters(){let e=this._model.parameters.count;const r=this._savedParameters.length;e>r&&(e=r);for(let i=0;i<e;++i)this._parameterValues[i]=this._savedParameters[i]}initialize(){this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{const e=this._model.parameters.ids,r=this._model.parameters.count;for(let i=0;i<r;++i)this._parameterIds.push(e[i])}{const e=this._model.parts.ids,r=this._model.parts.count;for(let i=0;i<r;++i)this._partIds.push(e[i])}{const e=this._model.drawables.ids,r=this._model.drawables.count;for(let i=0;i<r;++i)this._drawableIds.push(e[i])}}constructor(e){this._model=e,this._savedParameters=[],this._parameterIds=[],this._drawableIds=[],this._partIds=[],this._notExistPartId={},this._notExistParameterId={},this._notExistParameterValues={},this._notExistPartOpacities={},this.initialize()}release(){this._model.release(),this._model=void 0}}class y0{static create(e){const r=Live2DCubismCore.Moc.fromArrayBuffer(e);if(r)return new y0(r);throw new Error("Unknown error")}createModel(){let e;const r=Live2DCubismCore.Model.fromMoc(this._moc);if(r)return e=new Ub(r),++this._modelCount,e;throw new Error("Unknown error")}deleteModel(e){e!=null&&--this._modelCount}constructor(e){this._moc=e,this._modelCount=0}release(){this._moc._release(),this._moc=void 0}}var _u=(t=>(t[t.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",t))(_u||{}),qn=(t=>(t[t.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",t[t.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",t[t.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",t))(qn||{});class Bb{constructor(){this.initialPosition=new Fe(0,0),this.position=new Fe(0,0),this.lastPosition=new Fe(0,0),this.lastGravity=new Fe(0,0),this.force=new Fe(0,0),this.velocity=new Fe(0,0)}}class Gb{constructor(){this.normalizationPosition={},this.normalizationAngle={}}}class kb{constructor(){this.source={}}}class Xb{constructor(){this.destination={},this.translationScale=new Fe(0,0)}}class Hb{constructor(){this.settings=[],this.inputs=[],this.outputs=[],this.particles=[],this.gravity=new Fe(0,0),this.wind=new Fe(0,0)}}class jb{constructor(e){this._json=e}release(){this._json=void 0}getGravity(){const e=new Fe(0,0);return e.x=this._json.Meta.EffectiveForces.Gravity.X,e.y=this._json.Meta.EffectiveForces.Gravity.Y,e}getWind(){const e=new Fe(0,0);return e.x=this._json.Meta.EffectiveForces.Wind.X,e.y=this._json.Meta.EffectiveForces.Wind.Y,e}getSubRigCount(){return this._json.Meta.PhysicsSettingCount}getTotalInputCount(){return this._json.Meta.TotalInputCount}getTotalOutputCount(){return this._json.Meta.TotalOutputCount}getVertexCount(){return this._json.Meta.VertexCount}getNormalizationPositionMinimumValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Minimum}getNormalizationPositionMaximumValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Maximum}getNormalizationPositionDefaultValue(e){return this._json.PhysicsSettings[e].Normalization.Position.Default}getNormalizationAngleMinimumValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Minimum}getNormalizationAngleMaximumValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Maximum}getNormalizationAngleDefaultValue(e){return this._json.PhysicsSettings[e].Normalization.Angle.Default}getInputCount(e){return this._json.PhysicsSettings[e].Input.length}getInputWeight(e,r){return this._json.PhysicsSettings[e].Input[r].Weight}getInputReflect(e,r){return this._json.PhysicsSettings[e].Input[r].Reflect}getInputType(e,r){return this._json.PhysicsSettings[e].Input[r].Type}getInputSourceId(e,r){return this._json.PhysicsSettings[e].Input[r].Source.Id}getOutputCount(e){return this._json.PhysicsSettings[e].Output.length}getOutputVertexIndex(e,r){return this._json.PhysicsSettings[e].Output[r].VertexIndex}getOutputAngleScale(e,r){return this._json.PhysicsSettings[e].Output[r].Scale}getOutputWeight(e,r){return this._json.PhysicsSettings[e].Output[r].Weight}getOutputDestinationId(e,r){return this._json.PhysicsSettings[e].Output[r].Destination.Id}getOutputType(e,r){return this._json.PhysicsSettings[e].Output[r].Type}getOutputReflect(e,r){return this._json.PhysicsSettings[e].Output[r].Reflect}getParticleCount(e){return this._json.PhysicsSettings[e].Vertices.length}getParticleMobility(e,r){return this._json.PhysicsSettings[e].Vertices[r].Mobility}getParticleDelay(e,r){return this._json.PhysicsSettings[e].Vertices[r].Delay}getParticleAcceleration(e,r){return this._json.PhysicsSettings[e].Vertices[r].Acceleration}getParticleRadius(e,r){return this._json.PhysicsSettings[e].Vertices[r].Radius}getParticlePosition(e,r){const i=new Fe(0,0);return i.x=this._json.PhysicsSettings[e].Vertices[r].Position.X,i.y=this._json.PhysicsSettings[e].Vertices[r].Position.Y,i}}const i_="X",n_="Y",o_="Angle",Yb=5,G2=100,Vb=.001;class E0{static create(e){const r=new E0;return r.parse(e),r._physicsRig.gravity.y=0,r}evaluate(e,r){let i,o,s,h;const c=new Fe;let d,_,y,I,E,S,b,x;E=e.getModel().parameters.values,S=e.getModel().parameters.maximumValues,b=e.getModel().parameters.minimumValues,x=e.getModel().parameters.defaultValues;for(let $=0;$<this._physicsRig.subRigCount;++$){i={angle:0},c.x=0,c.y=0,d=this._physicsRig.settings[$],_=this._physicsRig.inputs.slice(d.baseInputIndex),y=this._physicsRig.outputs.slice(d.baseOutputIndex),I=this._physicsRig.particles.slice(d.baseParticleIndex);for(let j=0;j<d.inputCount;++j)o=_[j].weight/G2,_[j].sourceParameterIndex==-1&&(_[j].sourceParameterIndex=e.getParameterIndex(_[j].source.id)),_[j].getNormalizedParameterValue(c,i,E[_[j].sourceParameterIndex],b[_[j].sourceParameterIndex],S[_[j].sourceParameterIndex],x[_[j].sourceParameterIndex],d.normalizationPosition,d.normalizationAngle,_[j].reflect,o);s=vr.degreesToRadian(-i.angle),c.x=c.x*vr.cos(s)-c.y*vr.sin(s),c.y=c.x*vr.sin(s)+c.y*vr.cos(s),ox(I,d.particleCount,c,i.angle,this._options.wind,Vb*d.normalizationPosition.maximum,r,Yb);for(let j=0;j<d.outputCount;++j){const Y=y[j].vertexIndex;if(Y<1||Y>=d.particleCount)break;y[j].destinationParameterIndex==-1&&(y[j].destinationParameterIndex=e.getParameterIndex(y[j].destination.id));const Q=new Fe;Q.x=I[Y].position.x-I[Y-1].position.x,Q.y=I[Y].position.y-I[Y-1].position.y,h=y[j].getValue(Q,I,Y,y[j].reflect,this._options.gravity);const it=y[j].destinationParameterIndex,J=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(E.subarray(it))):E.slice(it);sx(J,b[it],S[it],h,y[j]);for(let K=it,Tt=0;K<E.length;K++,Tt++)E[K]=J[Tt]}}}setOptions(e){this._options=e}getOption(){return this._options}constructor(){this._options=new Wb,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0}release(){this._physicsRig=void 0}parse(e){this._physicsRig=new Hb;let r=new jb(e);this._physicsRig.gravity=r.getGravity(),this._physicsRig.wind=r.getWind(),this._physicsRig.subRigCount=r.getSubRigCount();let i=0,o=0,s=0;for(let h=0;h<this._physicsRig.subRigCount;++h){const c=new Gb;c.normalizationPosition.minimum=r.getNormalizationPositionMinimumValue(h),c.normalizationPosition.maximum=r.getNormalizationPositionMaximumValue(h),c.normalizationPosition.defalut=r.getNormalizationPositionDefaultValue(h),c.normalizationAngle.minimum=r.getNormalizationAngleMinimumValue(h),c.normalizationAngle.maximum=r.getNormalizationAngleMaximumValue(h),c.normalizationAngle.defalut=r.getNormalizationAngleDefaultValue(h),c.inputCount=r.getInputCount(h),c.baseInputIndex=i,i+=c.inputCount;for(let d=0;d<c.inputCount;++d){const _=new kb;switch(_.sourceParameterIndex=-1,_.weight=r.getInputWeight(h,d),_.reflect=r.getInputReflect(h,d),r.getInputType(h,d)){case i_:_.type=qn.CubismPhysicsSource_X,_.getNormalizedParameterValue=zb;break;case n_:_.type=qn.CubismPhysicsSource_Y,_.getNormalizedParameterValue=qb;break;case o_:_.type=qn.CubismPhysicsSource_Angle,_.getNormalizedParameterValue=Zb;break}_.source.targetType=_u.CubismPhysicsTargetType_Parameter,_.source.id=r.getInputSourceId(h,d),this._physicsRig.inputs.push(_)}c.outputCount=r.getOutputCount(h),c.baseOutputIndex=o,o+=c.outputCount;for(let d=0;d<c.outputCount;++d){const _=new Xb;switch(_.destinationParameterIndex=-1,_.vertexIndex=r.getOutputVertexIndex(h,d),_.angleScale=r.getOutputAngleScale(h,d),_.weight=r.getOutputWeight(h,d),_.destination.targetType=_u.CubismPhysicsTargetType_Parameter,_.destination.id=r.getOutputDestinationId(h,d),r.getOutputType(h,d)){case i_:_.type=qn.CubismPhysicsSource_X,_.getValue=Qb,_.getScale=rx;break;case n_:_.type=qn.CubismPhysicsSource_Y,_.getValue=Jb,_.getScale=ix;break;case o_:_.type=qn.CubismPhysicsSource_Angle,_.getValue=Kb,_.getScale=nx;break}_.reflect=r.getOutputReflect(h,d),this._physicsRig.outputs.push(_)}c.particleCount=r.getParticleCount(h),c.baseParticleIndex=s,s+=c.particleCount;for(let d=0;d<c.particleCount;++d){const _=new Bb;_.mobility=r.getParticleMobility(h,d),_.delay=r.getParticleDelay(h,d),_.acceleration=r.getParticleAcceleration(h,d),_.radius=r.getParticleRadius(h,d),_.position=r.getParticlePosition(h,d),this._physicsRig.particles.push(_)}this._physicsRig.settings.push(c)}this.initialize(),r.release()}initialize(){let e,r,i;for(let o=0;o<this._physicsRig.subRigCount;++o){r=this._physicsRig.settings[o],e=this._physicsRig.particles.slice(r.baseParticleIndex),e[0].initialPosition=new Fe(0,0),e[0].lastPosition=new Fe(e[0].initialPosition.x,e[0].initialPosition.y),e[0].lastGravity=new Fe(0,-1),e[0].lastGravity.y*=-1,e[0].velocity=new Fe(0,0),e[0].force=new Fe(0,0);for(let s=1;s<r.particleCount;++s)i=new Fe(0,0),i.y=e[s].radius,e[s].initialPosition=new Fe(e[s-1].initialPosition.x+i.x,e[s-1].initialPosition.y+i.y),e[s].position=new Fe(e[s].initialPosition.x,e[s].initialPosition.y),e[s].lastPosition=new Fe(e[s].initialPosition.x,e[s].initialPosition.y),e[s].lastGravity=new Fe(0,-1),e[s].lastGravity.y*=-1,e[s].velocity=new Fe(0,0),e[s].force=new Fe(0,0)}}}class Wb{constructor(){this.gravity=new Fe(0,0),this.wind=new Fe(0,0)}}function zb(t,e,r,i,o,s,h,c,d,_){t.x+=T0(r,i,o,s,h.minimum,h.maximum,h.defalut,d)*_}function qb(t,e,r,i,o,s,h,c,d,_){t.y+=T0(r,i,o,s,h.minimum,h.maximum,h.defalut,d)*_}function Zb(t,e,r,i,o,s,h,c,d,_){e.angle+=T0(r,i,o,s,c.minimum,c.maximum,c.defalut,d)*_}function Qb(t,e,r,i,o){let s=t.x;return i&&(s*=-1),s}function Jb(t,e,r,i,o){let s=t.y;return i&&(s*=-1),s}function Kb(t,e,r,i,o){let s;return r>=2?o=e[r-1].position.substract(e[r-2].position):o=o.multiplyByScaler(-1),s=vr.directionToRadian(o,t),i&&(s*=-1),s}function tx(t,e){return Math.abs(Math.max(t,e)-Math.min(t,e))}function ex(t,e){return Math.min(t,e)+tx(t,e)/2}function rx(t,e){return t.x}function ix(t,e){return t.y}function nx(t,e){return e}function ox(t,e,r,i,o,s,h,c){let d,_,y,I,E=new Fe(0,0),S=new Fe(0,0),b=new Fe(0,0),x=new Fe(0,0);t[0].position=new Fe(r.x,r.y),d=vr.degreesToRadian(i),I=vr.radianToDirection(d),I.normalize();for(let $=1;$<e;++$)t[$].force=I.multiplyByScaler(t[$].acceleration).add(o),t[$].lastPosition=new Fe(t[$].position.x,t[$].position.y),_=t[$].delay*h*30,E=t[$].position.substract(t[$-1].position),y=vr.directionToRadian(t[$].lastGravity,I)/c,E.x=vr.cos(y)*E.x-E.y*vr.sin(y),E.y=vr.sin(y)*E.x+E.y*vr.cos(y),t[$].position=t[$-1].position.add(E),S=t[$].velocity.multiplyByScaler(_),b=t[$].force.multiplyByScaler(_).multiplyByScaler(_),t[$].position=t[$].position.add(S).add(b),x=t[$].position.substract(t[$-1].position),x.normalize(),t[$].position=t[$-1].position.add(x.multiplyByScaler(t[$].radius)),vr.abs(t[$].position.x)<s&&(t[$].position.x=0),_!=0&&(t[$].velocity=t[$].position.substract(t[$].lastPosition),t[$].velocity=t[$].velocity.divisionByScalar(_),t[$].velocity=t[$].velocity.multiplyByScaler(t[$].mobility)),t[$].force=new Fe(0,0),t[$].lastGravity=new Fe(I.x,I.y)}function sx(t,e,r,i,o){let s,h,c;s=o.getScale(o.translationScale,o.angleScale),h=i*s,h<e?(h<o.valueBelowMinimum&&(o.valueBelowMinimum=h),h=e):h>r&&(h>o.valueExceededMaximum&&(o.valueExceededMaximum=h),h=r),c=o.weight/G2,c>=1||(h=t[0]*(1-c)+h*c),t[0]=h}function T0(t,e,r,i,o,s,h,c){let d=0;const _=vr.max(r,e);_<t&&(t=_);const y=vr.min(r,e);y>t&&(t=y);const I=vr.min(o,s),E=vr.max(o,s),S=h,b=ex(y,_),x=t-b;switch(Math.sign(x)){case 1:{const $=E-S,j=_-b;j!=0&&(d=x*($/j),d+=S);break}case-1:{const $=I-S,j=y-b;j!=0&&(d=x*($/j),d+=S);break}case 0:{d=S;break}}return c?d:d*-1}Rr.registerRuntime({version:4,ready:$b,test(t){return t instanceof Io||Io.isValidJSON(t)},isValidMoc(t){if(t.byteLength<4)return!1;const e=new Int8Array(t,0,4);return String.fromCharCode(...e)==="MOC3"},createModelSettings(t){return new Io(t)},createCoreModel(t){const e=y0.create(t);try{const r=e.createModel();return r.__moc=e,r}catch(r){try{e.release()}catch{}throw r}},createInternalModel(t,e,r){const i=new Lb(t,e,r),o=t;return o.__moc&&(i.__moc=o.__moc,delete o.__moc,i.once("destroy",ax)),i},createPhysics(t,e){return E0.create(e)},createPose(t,e){return v0.create(e)}});function ax(){var t;(t=this.__moc)==null||t.release()}const hx=["","~","","","","~","2023~",""],lx={daybreak:"",morning:"",noon:"",afternoon:"~",dusk:"~",night:"",lateNight:"~",weeHours:""},ux=["~"],cx=`
.oml-icon {
  width: 1em; 
  height: 1em;
  vertical-align: -0.15em;
  fill: currentColor;
  overflow: hidden;
}

#oml-stage {
  position: fixed;
  left: 0;
  bottom: 0;
  z-index: 9997;
  transform: translateY(130%);
}

#oml-canvas{
  width: 100%;
  height: 100%;
  position: relative;
  z-index: 9997;
}

#oml-levitated-btn {
  position: fixed;
  transform: translateX(-110%);
  left: 0;
  bottom: 80px;
  padding: 7px 5px;
  z-index: 9998;
  background-color: #58b0fc;
  border-style: solid;
  border-width: 2px 2px 2px 0px;
  border-color: #fff;
  border-radius: 0 5px 5px 0;
  box-shadow: 0 0 5px #999;
  color: #fff;
  writing-mode: vertical-lr;
  display: flex;
  align-items: center;
  text-align: center;
  align-items: center;
  flex-wrap: wrap;
  font-size: 14px;
}

.oml-loading{
  animation-name: oml-loading-rotate;
  animation-duration: 600ms;
  animation-iteration-count: infinite;
  animation-timing-function: linear;
}

#oml-tips {
  position: absolute;
  top: 0px;
  font-size: 18px;
  border-radius: 10px;
  filter: drop-shadow(0 0 5px #999);
  transform: translate(0%, -40%);
  background-color: #58b0fc;
  border: 2px solid #fff;
  color: #fff;
  padding: 3px 5px;
  opacity: 0;
  visibility: hidden;
  transform: translateX(-50%);
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
}


#oml-controls {
  transition: all 500ms;
  visibility: hidden;
  opacity: 0;
  position: absolute;
  right: 0;
  bottom: 10%;
  z-index: 9999;
  font-size: 26px;
}

#oml-stage:hover > #oml-controls {
  visibility: visible;
  opacity: 1;
}

#oml-controls .oml-control-item {
  width: 35px;
  height: 35px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  box-sizing: border-box;
  align-items: center;
  transition: all 300ms;
  color: #58b0fc;
  cursor: pointer;
  background-color: #fff;
}

#oml-controls .oml-control-item:hover {
  background-color: #58b0fc;
  color: #fff;
  box-shadow: 0 0 5px #000;
}

#oml-controls .oml-control-item:not(:last-child) {
  margin-bottom: 10px;
}

@keyframes oml-shake-tooltip{
  0% {
    transform: translate(-50%, 5%) scale(0.99);
  }
  50% {
 
    transform: translate(-50%, 0%) scale(1);
  }
  100% {
    transform: translate(-50%, 5%) scale(0.99);
  }
}

@keyframes oml-stage-slide-in {
  from {
    transform: translateY(130%);
  }
  to {
    transform: translateY(0%);
  }
}

@keyframes oml-stage-slide-out {
  from {
    transform: translateY(0%);
  }
  to {
    transform: translateY(130%);
  }
}

@keyframes oml-loading-rotate {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@keyframes oml-levitated-btn-hidden {
  0% {
    transform: translateX(0%);
  }
  100% {
    transform: translateX(-120%);
  }
}


@keyframes oml-levitated-btn-display {
  0% {
    transform: translateX(-120%);
  }
  100% {
    transform: translateX(0%);
  }
}

@keyframes oml-display-tooltip {
  0% {
    opacity: 0;
    visibility: hidden;
  }
  100% {
    opacity: 1;
    visibility: visible;
  }
}

@keyframes oml-hidden-tooltip {
  0% {
    opacity: 1;
    visibility: visible;
  }
  100% {
    opacity: 0;
    visibility: hidden;
  }
}

`;window._iconfont_svg_string_3847283='<svg><symbol id="icon-bed1" viewBox="0 0 1280 1024"><path d="M352 512c88.22 0 160-71.78 160-160s-71.78-160-160-160-160 71.78-160 160 71.78 160 160 160z m704-256H608c-17.68 0-32 14.32-32 32v288H128V160c0-17.68-14.32-32-32-32H32C14.32 128 0 142.32 0 160v704c0 17.68 14.32 32 32 32h64c17.68 0 32-14.32 32-32v-96h1024v96c0 17.68 14.32 32 32 32h64c17.68 0 32-14.32 32-32V480c0-123.72-100.28-224-224-224z"  ></path></symbol><symbol id="icon-info-circle-fill" viewBox="0 0 1024 1024"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272z m-32-344c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z"  ></path></symbol><symbol id="icon-heart-fill" viewBox="0 0 1024 1024"><path d="M923 283.6c-13.4-31.1-32.6-58.9-56.9-82.8-24.3-23.8-52.5-42.4-84-55.5-32.5-13.5-66.9-20.3-102.4-20.3-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5-24.4 23.9-43.5 51.7-56.9 82.8-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3 0.1-35.3-7-69.6-20.9-101.9z"  ></path></symbol><symbol id="icon-skin-fill" viewBox="0 0 1024 1024"><path d="M870 126H663.8c-17.4 0-32.9 11.9-37 29.3C614.3 208.1 567 246 512 246s-102.3-37.9-114.8-90.7c-4.1-17.4-19.5-29.3-37-29.3H154c-24.3 0-44 19.7-44 44v252c0 24.3 19.7 44 44 44h75v388c0 24.3 19.7 44 44 44h478c24.3 0 44-19.7 44-44V466h75c24.3 0 44-19.7 44-44V170c0-24.3-19.7-44-44-44z"  ></path></symbol><symbol id="icon-setting-fill" viewBox="0 0 1024 1024"><path d="M512.5 390.6c-29.9 0-57.9 11.6-79.1 32.8-21.1 21.2-32.8 49.2-32.8 79.1 0 29.9 11.7 57.9 32.8 79.1 21.2 21.1 49.2 32.8 79.1 32.8 29.9 0 57.9-11.7 79.1-32.8 21.1-21.2 32.8-49.2 32.8-79.1 0-29.9-11.7-57.9-32.8-79.1-21.2-21.2-49.2-32.8-79.1-32.8z"  ></path><path d="M924.8 626.1l-65.4-55.9c3.1-19 4.7-38.4 4.7-57.7s-1.6-38.8-4.7-57.7l65.4-55.9c10.1-8.6 13.8-22.6 9.3-35.2l-0.9-2.6c-18.1-50.4-44.8-96.8-79.6-137.7l-1.8-2.1c-8.6-10.1-22.5-13.9-35.1-9.5l-81.2 28.9c-30-24.6-63.4-44-99.6-57.5l-15.7-84.9c-2.4-13.1-12.7-23.3-25.8-25.7l-2.7-0.5c-52-9.4-106.8-9.4-158.8 0l-2.7 0.5c-13.1 2.4-23.4 12.6-25.8 25.7l-15.8 85.3c-35.9 13.6-69.1 32.9-98.9 57.3l-81.8-29.1c-12.5-4.4-26.5-0.7-35.1 9.5l-1.8 2.1c-34.8 41.1-61.5 87.4-79.6 137.7l-0.9 2.6c-4.5 12.5-0.8 26.5 9.3 35.2l66.2 56.5c-3.1 18.8-4.6 38-4.6 57 0 19.2 1.5 38.4 4.6 57l-66 56.5c-10.1 8.6-13.8 22.6-9.3 35.2l0.9 2.6c18.1 50.3 44.8 96.8 79.6 137.7l1.8 2.1c8.6 10.1 22.5 13.9 35.1 9.5l81.8-29.1c29.8 24.5 63 43.9 98.9 57.3l15.8 85.3c2.4 13.1 12.7 23.3 25.8 25.7l2.7 0.5c26.1 4.7 52.7 7.1 79.4 7.1 26.7 0 53.4-2.4 79.4-7.1l2.7-0.5c13.1-2.4 23.4-12.6 25.8-25.7l15.7-84.9c36.2-13.6 69.6-32.9 99.6-57.5l81.2 28.9c12.5 4.4 26.5 0.7 35.1-9.5l1.8-2.1c34.8-41.1 61.5-87.4 79.6-137.7l0.9-2.6c4.3-12.4 0.6-26.3-9.5-35z m-412.3 52.2c-97.1 0-175.8-78.7-175.8-175.8s78.7-175.8 175.8-175.8 175.8 78.7 175.8 175.8-78.7 175.8-175.8 175.8z"  ></path></symbol><symbol id="icon-a-userswitch-fill" viewBox="0 0 1024 1024"><path d="M512 565c133.7 0 242-108.3 242-242S645.7 81 512 81 270 189.3 270 323s108.3 242 242 242z m4.8 299.3a264.4 264.4 0 0 1 0-205.6c2.3-5.4 4.8-10.8 7.4-16a4 4 0 0 0-3.7-5.8H512a311.4 311.4 0 0 1-122.2-24.7 319.8 319.8 0 0 1-57.9-32 4 4 0 0 0-4.2-0.3C208.7 645.3 128 771.7 128 917v25a4 4 0 0 0 4 4h429.9a4 4 0 0 0 3-6.7 261.9 261.9 0 0 1-48.1-75zM760 568c-106 0-192 86-192 192s86 192 192 192 192-86 192-192-86-192-192-192z m-98.4 136a4 4 0 0 1 4-4h124v-33.4c0-16 20.8-22.1 29.4-8.7l36.9 57.5a16 16 0 0 1-13.5 24.6H665.6a4 4 0 0 1-4-4z m196.8 112a4 4 0 0 1-4 4h-124v33.4c0 16-20.8 22.1-29.4 8.7l-36.9-57.5a16 16 0 0 1 13.5-24.6h176.8a4 4 0 0 1 4 4z"  ></path></symbol><symbol id="icon-loading" viewBox="0 0 1024 1024"><path d="M563.2 819.2a102.4 102.4 0 1 1 0 204.8 102.4 102.4 0 0 1 0-204.8z m-320.4608-153.6a128 128 0 1 1 0 256 128 128 0 0 1 0-256z m592.7936 25.6a102.4 102.4 0 1 1 0 204.8 102.4 102.4 0 0 1 0-204.8zM947.2 477.1328a76.8 76.8 0 1 1 0 153.6 76.8 76.8 0 0 1 0-153.6zM128 307.2a128 128 0 1 1 0 256 128 128 0 0 1 0-256z m782.6432-40.6016a51.2 51.2 0 1 1 0 102.4 51.2 51.2 0 0 1 0-102.4zM409.6 0a153.6 153.6 0 1 1 0 307.2 153.6 153.6 0 0 1 0-307.2z m384 153.6a25.6 25.6 0 1 1 0 51.2 25.6 25.6 0 0 1 0-51.2z"  ></path></symbol></svg>',function(t){var r=(r=document.getElementsByTagName("script"))[r.length-1],e=r.getAttribute("data-injectcss"),r=r.getAttribute("data-disable-injectsvg");if(!r){var i,o,s,h,c,d=function(I,E){E.parentNode.insertBefore(I,E)};if(e&&!t.__iconfont__svg__cssinject__){t.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(I){console&&console.log(I)}}i=function(){var I,E=document.createElement("div");E.innerHTML=t._iconfont_svg_string_3847283,(E=E.getElementsByTagName("svg")[0])&&(E.setAttribute("aria-hidden","true"),E.style.position="absolute",E.style.width=0,E.style.height=0,E.style.overflow="hidden",E=E,(I=document.body).firstChild?d(E,I.firstChild):I.appendChild(E))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(i,0):(o=function(){document.removeEventListener("DOMContentLoaded",o,!1),i()},document.addEventListener("DOMContentLoaded",o,!1)):document.attachEvent&&(s=i,h=t.document,c=!1,y(),h.onreadystatechange=function(){h.readyState=="complete"&&(h.onreadystatechange=null,_())})}function _(){c||(c=!0,s())}function y(){try{h.documentElement.doScroll("left")}catch{return void setTimeout(y,50)}_()}}(window);const dx="https://oml-api.tj520.top",fx={complete:"/pa15_3701/normal/normal.model3.json",cubism2:"/pio/index.json",cubism4:"/pa15_3701/normal/normal.model3.json"},_x=dx,Xn={source:_x,sayHello:!0,transitionTime:1e3,mobileShow:!1,models:{path:"",x:0,y:0,scale:1,stageStyle:{backgroundColor:"rgba(0, 0, 0, 0)",width:"auto",height:"auto"}},tips:{style:{width:230,height:100,offsetX:0,offsetY:0},idleTips:{message:hx,persistTime:5e3,interval:5e3,priority:2,remote:!1},welcomeTips:{message:lx,persistTime:5e3,priority:3},copyTips:{message:ux,persistTime:5e3,priority:9}}},wa={globalStyle:cx,elements:{canvasEl:{id:"oml-canvas",tagName:"canvas"},stageEl:{id:"oml-stage",tagName:"div"},tipsEl:{id:"oml-tips",tagName:"div"},levitatedBtnEl:{id:"oml-levitated-btn",tagName:"div"},controlsEl:{id:"oml-controls",tagName:"div"}},controls:[{id:"SwitchModel",name:"icon-a-userswitch-fill",title:""},{id:"Setting",name:"icon-setting-fill",title:""},{id:"About",name:"icon-info-circle-fill",title:""}]};var px=typeof global=="object"&&global&&global.Object===Object&&global;const k2=px;var mx=typeof self=="object"&&self&&self.Object===Object&&self,gx=k2||mx||Function("return this")();const qi=gx;var vx=qi.Symbol;const No=vx;var X2=Object.prototype,yx=X2.hasOwnProperty,Ex=X2.toString,fs=No?No.toStringTag:void 0;function Tx(t){var e=yx.call(t,fs),r=t[fs];try{t[fs]=void 0;var i=!0}catch{}var o=Ex.call(t);return i&&(e?t[fs]=r:delete t[fs]),o}var Ax=Object.prototype,bx=Ax.toString;function xx(t){return bx.call(t)}var Sx="[object Null]",Rx="[object Undefined]",s_=No?No.toStringTag:void 0;function Xo(t){return t==null?t===void 0?Rx:Sx:s_&&s_ in Object(t)?Tx(t):xx(t)}function lo(t){return t!=null&&typeof t=="object"}var Px=Array.isArray;const Ys=Px;function Pn(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function H2(t){return t}var Ix="[object AsyncFunction]",Ox="[object Function]",wx="[object GeneratorFunction]",Mx="[object Proxy]";function A0(t){if(!Pn(t))return!1;var e=Xo(t);return e==Ox||e==wx||e==Ix||e==Mx}var Cx=qi["__core-js_shared__"];const tl=Cx;var a_=function(){var t=/[^.]+$/.exec(tl&&tl.keys&&tl.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Dx(t){return!!a_&&a_ in t}var Lx=Function.prototype,$x=Lx.toString;function uo(t){if(t!=null){try{return $x.call(t)}catch{}try{return t+""}catch{}}return""}var Nx=/[\\^$.*+?()[\]{}|]/g,Fx=/^\[object .+?Constructor\]$/,Ux=Function.prototype,Bx=Object.prototype,Gx=Ux.toString,kx=Bx.hasOwnProperty,Xx=RegExp("^"+Gx.call(kx).replace(Nx,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Hx(t){if(!Pn(t)||Dx(t))return!1;var e=A0(t)?Xx:Fx;return e.test(uo(t))}function jx(t,e){return t==null?void 0:t[e]}function co(t,e){var r=jx(t,e);return Hx(r)?r:void 0}var Yx=co(qi,"WeakMap");const pu=Yx;var h_=Object.create,Vx=function(){function t(){}return function(e){if(!Pn(e))return{};if(h_)return h_(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();const Wx=Vx;function zx(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function j2(t,e){var r=-1,i=t.length;for(e||(e=Array(i));++r<i;)e[r]=t[r];return e}var qx=800,Zx=16,Qx=Date.now;function Jx(t){var e=0,r=0;return function(){var i=Qx(),o=Zx-(i-r);if(r=i,o>0){if(++e>=qx)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Kx(t){return function(){return t}}var tS=function(){try{var t=co(Object,"defineProperty");return t({},"",{}),t}catch{}}();const za=tS;var eS=za?function(t,e){return za(t,"toString",{configurable:!0,enumerable:!1,value:Kx(e),writable:!0})}:H2;const rS=eS;var iS=Jx(rS);const nS=iS;function oS(t,e){for(var r=-1,i=t==null?0:t.length;++r<i&&e(t[r],r,t)!==!1;);return t}var sS=9007199254740991,aS=/^(?:0|[1-9]\d*)$/;function Y2(t,e){var r=typeof t;return e=e??sS,!!e&&(r=="number"||r!="symbol"&&aS.test(t))&&t>-1&&t%1==0&&t<e}function b0(t,e,r){e=="__proto__"&&za?za(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function uh(t,e){return t===e||t!==t&&e!==e}var hS=Object.prototype,lS=hS.hasOwnProperty;function V2(t,e,r){var i=t[e];(!(lS.call(t,e)&&uh(i,r))||r===void 0&&!(e in t))&&b0(t,e,r)}function Qs(t,e,r,i){var o=!r;r||(r={});for(var s=-1,h=e.length;++s<h;){var c=e[s],d=i?i(r[c],t[c],c,r,t):void 0;d===void 0&&(d=t[c]),o?b0(r,c,d):V2(r,c,d)}return r}var l_=Math.max;function uS(t,e,r){return e=l_(e===void 0?t.length-1:e,0),function(){for(var i=arguments,o=-1,s=l_(i.length-e,0),h=Array(s);++o<s;)h[o]=i[e+o];o=-1;for(var c=Array(e+1);++o<e;)c[o]=i[o];return c[e]=r(h),zx(t,this,c)}}function cS(t,e){return nS(uS(t,e,H2),t+"")}var dS=9007199254740991;function W2(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=dS}function ch(t){return t!=null&&W2(t.length)&&!A0(t)}function fS(t,e,r){if(!Pn(r))return!1;var i=typeof e;return(i=="number"?ch(r)&&Y2(e,r.length):i=="string"&&e in r)?uh(r[e],t):!1}function _S(t){return cS(function(e,r){var i=-1,o=r.length,s=o>1?r[o-1]:void 0,h=o>2?r[2]:void 0;for(s=t.length>3&&typeof s=="function"?(o--,s):void 0,h&&fS(r[0],r[1],h)&&(s=o<3?void 0:s,o=1),e=Object(e);++i<o;){var c=r[i];c&&t(e,c,i,s)}return e})}var pS=Object.prototype;function x0(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||pS;return t===r}function mS(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}var gS="[object Arguments]";function u_(t){return lo(t)&&Xo(t)==gS}var z2=Object.prototype,vS=z2.hasOwnProperty,yS=z2.propertyIsEnumerable,ES=u_(function(){return arguments}())?u_:function(t){return lo(t)&&vS.call(t,"callee")&&!yS.call(t,"callee")};const mu=ES;function TS(){return!1}var q2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,c_=q2&&typeof module=="object"&&module&&!module.nodeType&&module,AS=c_&&c_.exports===q2,d_=AS?qi.Buffer:void 0,bS=d_?d_.isBuffer:void 0,xS=bS||TS;const S0=xS;var SS="[object Arguments]",RS="[object Array]",PS="[object Boolean]",IS="[object Date]",OS="[object Error]",wS="[object Function]",MS="[object Map]",CS="[object Number]",DS="[object Object]",LS="[object RegExp]",$S="[object Set]",NS="[object String]",US="[object WeakMap]",BS="[object ArrayBuffer]",GS="[object DataView]",kS="[object Float32Array]",XS="[object Float64Array]",HS="[object Int8Array]",jS="[object Int16Array]",YS="[object Int32Array]",VS="[object Uint8Array]",WS="[object Uint8ClampedArray]",zS="[object Uint16Array]",qS="[object Uint32Array]",br={};br[kS]=br[XS]=br[HS]=br[jS]=br[YS]=br[VS]=br[WS]=br[zS]=br[qS]=!0;br[SS]=br[RS]=br[BS]=br[PS]=br[GS]=br[IS]=br[OS]=br[wS]=br[MS]=br[CS]=br[DS]=br[LS]=br[$S]=br[NS]=br[US]=!1;function ZS(t){return lo(t)&&W2(t.length)&&!!br[Xo(t)]}function R0(t){return function(e){return t(e)}}var Z2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,xs=Z2&&typeof module=="object"&&module&&!module.nodeType&&module,QS=xs&&xs.exports===Z2,el=QS&&k2.process,JS=function(){try{var t=xs&&xs.require&&xs.require("util").types;return t||el&&el.binding&&el.binding("util")}catch{}}();const Fo=JS;var f_=Fo&&Fo.isTypedArray,KS=f_?R0(f_):ZS;const Q2=KS;var tR=Object.prototype,eR=tR.hasOwnProperty;function J2(t,e){var r=Ys(t),i=!r&&mu(t),o=!r&&!i&&S0(t),s=!r&&!i&&!o&&Q2(t),h=r||i||o||s,c=h?mS(t.length,String):[],d=c.length;for(var _ in t)(e||eR.call(t,_))&&!(h&&(_=="length"||o&&(_=="offset"||_=="parent")||s&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||Y2(_,d)))&&c.push(_);return c}function K2(t,e){return function(r){return t(e(r))}}var rR=K2(Object.keys,Object);const iR=rR;var nR=Object.prototype,oR=nR.hasOwnProperty;function sR(t){if(!x0(t))return iR(t);var e=[];for(var r in Object(t))oR.call(t,r)&&r!="constructor"&&e.push(r);return e}function P0(t){return ch(t)?J2(t):sR(t)}function aR(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var hR=Object.prototype,lR=hR.hasOwnProperty;function uR(t){if(!Pn(t))return aR(t);var e=x0(t),r=[];for(var i in t)i=="constructor"&&(e||!lR.call(t,i))||r.push(i);return r}function Js(t){return ch(t)?J2(t,!0):uR(t)}var cR=co(Object,"create");const Vs=cR;function dR(){this.__data__=Vs?Vs(null):{},this.size=0}function fR(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var _R="__lodash_hash_undefined__",pR=Object.prototype,mR=pR.hasOwnProperty;function gR(t){var e=this.__data__;if(Vs){var r=e[t];return r===_R?void 0:r}return mR.call(e,t)?e[t]:void 0}var vR=Object.prototype,yR=vR.hasOwnProperty;function ER(t){var e=this.__data__;return Vs?e[t]!==void 0:yR.call(e,t)}var TR="__lodash_hash_undefined__";function AR(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Vs&&e===void 0?TR:e,this}function so(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}so.prototype.clear=dR;so.prototype.delete=fR;so.prototype.get=gR;so.prototype.has=ER;so.prototype.set=AR;function bR(){this.__data__=[],this.size=0}function dh(t,e){for(var r=t.length;r--;)if(uh(t[r][0],e))return r;return-1}var xR=Array.prototype,SR=xR.splice;function RR(t){var e=this.__data__,r=dh(e,t);if(r<0)return!1;var i=e.length-1;return r==i?e.pop():SR.call(e,r,1),--this.size,!0}function PR(t){var e=this.__data__,r=dh(e,t);return r<0?void 0:e[r][1]}function IR(t){return dh(this.__data__,t)>-1}function OR(t,e){var r=this.__data__,i=dh(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}function un(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}un.prototype.clear=bR;un.prototype.delete=RR;un.prototype.get=PR;un.prototype.has=IR;un.prototype.set=OR;var wR=co(qi,"Map");const Ws=wR;function MR(){this.size=0,this.__data__={hash:new so,map:new(Ws||un),string:new so}}function CR(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function fh(t,e){var r=t.__data__;return CR(e)?r[typeof e=="string"?"string":"hash"]:r.map}function DR(t){var e=fh(this,t).delete(t);return this.size-=e?1:0,e}function LR(t){return fh(this,t).get(t)}function $R(t){return fh(this,t).has(t)}function NR(t,e){var r=fh(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}function Ho(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}Ho.prototype.clear=MR;Ho.prototype.delete=DR;Ho.prototype.get=LR;Ho.prototype.has=$R;Ho.prototype.set=NR;function t1(t,e){for(var r=-1,i=e.length,o=t.length;++r<i;)t[o+r]=e[r];return t}var FR=K2(Object.getPrototypeOf,Object);const I0=FR;var UR="[object Object]",BR=Function.prototype,GR=Object.prototype,e1=BR.toString,kR=GR.hasOwnProperty,XR=e1.call(Object);function HR(t){if(!lo(t)||Xo(t)!=UR)return!1;var e=I0(t);if(e===null)return!0;var r=kR.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&e1.call(r)==XR}function jR(){this.__data__=new un,this.size=0}function YR(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function VR(t){return this.__data__.get(t)}function WR(t){return this.__data__.has(t)}var zR=200;function qR(t,e){var r=this.__data__;if(r instanceof un){var i=r.__data__;if(!Ws||i.length<zR-1)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new Ho(i)}return r.set(t,e),this.size=r.size,this}function fo(t){var e=this.__data__=new un(t);this.size=e.size}fo.prototype.clear=jR;fo.prototype.delete=YR;fo.prototype.get=VR;fo.prototype.has=WR;fo.prototype.set=qR;function ZR(t,e){return t&&Qs(e,P0(e),t)}function QR(t,e){return t&&Qs(e,Js(e),t)}var r1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,__=r1&&typeof module=="object"&&module&&!module.nodeType&&module,JR=__&&__.exports===r1,p_=JR?qi.Buffer:void 0,m_=p_?p_.allocUnsafe:void 0;function i1(t,e){if(e)return t.slice();var r=t.length,i=m_?m_(r):new t.constructor(r);return t.copy(i),i}function KR(t,e){for(var r=-1,i=t==null?0:t.length,o=0,s=[];++r<i;){var h=t[r];e(h,r,t)&&(s[o++]=h)}return s}function n1(){return[]}var tP=Object.prototype,eP=tP.propertyIsEnumerable,g_=Object.getOwnPropertySymbols,rP=g_?function(t){return t==null?[]:(t=Object(t),KR(g_(t),function(e){return eP.call(t,e)}))}:n1;const O0=rP;function iP(t,e){return Qs(t,O0(t),e)}var nP=Object.getOwnPropertySymbols,oP=nP?function(t){for(var e=[];t;)t1(e,O0(t)),t=I0(t);return e}:n1;const o1=oP;function sP(t,e){return Qs(t,o1(t),e)}function s1(t,e,r){var i=e(t);return Ys(t)?i:t1(i,r(t))}function aP(t){return s1(t,P0,O0)}function hP(t){return s1(t,Js,o1)}var lP=co(qi,"DataView");const gu=lP;var uP=co(qi,"Promise");const vu=uP;var cP=co(qi,"Set");const yu=cP;var v_="[object Map]",dP="[object Object]",y_="[object Promise]",E_="[object Set]",T_="[object WeakMap]",A_="[object DataView]",fP=uo(gu),_P=uo(Ws),pP=uo(vu),mP=uo(yu),gP=uo(pu),Zn=Xo;(gu&&Zn(new gu(new ArrayBuffer(1)))!=A_||Ws&&Zn(new Ws)!=v_||vu&&Zn(vu.resolve())!=y_||yu&&Zn(new yu)!=E_||pu&&Zn(new pu)!=T_)&&(Zn=function(t){var e=Xo(t),r=e==dP?t.constructor:void 0,i=r?uo(r):"";if(i)switch(i){case fP:return A_;case _P:return v_;case pP:return y_;case mP:return E_;case gP:return T_}return e});const w0=Zn;var vP=Object.prototype,yP=vP.hasOwnProperty;function EP(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&yP.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var TP=qi.Uint8Array;const b_=TP;function M0(t){var e=new t.constructor(t.byteLength);return new b_(e).set(new b_(t)),e}function AP(t,e){var r=e?M0(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var bP=/\w*$/;function xP(t){var e=new t.constructor(t.source,bP.exec(t));return e.lastIndex=t.lastIndex,e}var x_=No?No.prototype:void 0,S_=x_?x_.valueOf:void 0;function SP(t){return S_?Object(S_.call(t)):{}}function a1(t,e){var r=e?M0(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var RP="[object Boolean]",PP="[object Date]",IP="[object Map]",OP="[object Number]",wP="[object RegExp]",MP="[object Set]",CP="[object String]",DP="[object Symbol]",LP="[object ArrayBuffer]",$P="[object DataView]",NP="[object Float32Array]",FP="[object Float64Array]",UP="[object Int8Array]",BP="[object Int16Array]",GP="[object Int32Array]",kP="[object Uint8Array]",XP="[object Uint8ClampedArray]",HP="[object Uint16Array]",jP="[object Uint32Array]";function YP(t,e,r){var i=t.constructor;switch(e){case LP:return M0(t);case RP:case PP:return new i(+t);case $P:return AP(t,r);case NP:case FP:case UP:case BP:case GP:case kP:case XP:case HP:case jP:return a1(t,r);case IP:return new i;case OP:case CP:return new i(t);case wP:return xP(t);case MP:return new i;case DP:return SP(t)}}function h1(t){return typeof t.constructor=="function"&&!x0(t)?Wx(I0(t)):{}}var VP="[object Map]";function WP(t){return lo(t)&&w0(t)==VP}var R_=Fo&&Fo.isMap,zP=R_?R0(R_):WP;const qP=zP;var ZP="[object Set]";function QP(t){return lo(t)&&w0(t)==ZP}var P_=Fo&&Fo.isSet,JP=P_?R0(P_):QP;const KP=JP;var tI=1,eI=2,rI=4,l1="[object Arguments]",iI="[object Array]",nI="[object Boolean]",oI="[object Date]",sI="[object Error]",u1="[object Function]",aI="[object GeneratorFunction]",hI="[object Map]",lI="[object Number]",c1="[object Object]",uI="[object RegExp]",cI="[object Set]",dI="[object String]",fI="[object Symbol]",_I="[object WeakMap]",pI="[object ArrayBuffer]",mI="[object DataView]",gI="[object Float32Array]",vI="[object Float64Array]",yI="[object Int8Array]",EI="[object Int16Array]",TI="[object Int32Array]",AI="[object Uint8Array]",bI="[object Uint8ClampedArray]",xI="[object Uint16Array]",SI="[object Uint32Array]",gr={};gr[l1]=gr[iI]=gr[pI]=gr[mI]=gr[nI]=gr[oI]=gr[gI]=gr[vI]=gr[yI]=gr[EI]=gr[TI]=gr[hI]=gr[lI]=gr[c1]=gr[uI]=gr[cI]=gr[dI]=gr[fI]=gr[AI]=gr[bI]=gr[xI]=gr[SI]=!0;gr[sI]=gr[u1]=gr[_I]=!1;function Na(t,e,r,i,o,s){var h,c=e&tI,d=e&eI,_=e&rI;if(r&&(h=o?r(t,i,o,s):r(t)),h!==void 0)return h;if(!Pn(t))return t;var y=Ys(t);if(y){if(h=EP(t),!c)return j2(t,h)}else{var I=w0(t),E=I==u1||I==aI;if(S0(t))return i1(t,c);if(I==c1||I==l1||E&&!o){if(h=d||E?{}:h1(t),!c)return d?sP(t,QR(h,t)):iP(t,ZR(h,t))}else{if(!gr[I])return o?t:{};h=YP(t,I,c)}}s||(s=new fo);var S=s.get(t);if(S)return S;s.set(t,h),KP(t)?t.forEach(function($){h.add(Na($,e,r,$,t,s))}):qP(t)&&t.forEach(function($,j){h.set(j,Na($,e,r,j,t,s))});var b=_?d?hP:aP:d?Js:P0,x=y?void 0:b(t);return oS(x||t,function($,j){x&&(j=$,$=t[j]),V2(h,j,Na($,e,r,j,t,s))}),h}var RI=1,PI=4;function rl(t){return Na(t,RI|PI)}function II(t){return function(e,r,i){for(var o=-1,s=Object(e),h=i(e),c=h.length;c--;){var d=h[t?c:++o];if(r(s[d],d,s)===!1)break}return e}}var OI=II();const wI=OI;function Eu(t,e,r){(r!==void 0&&!uh(t[e],r)||r===void 0&&!(e in t))&&b0(t,e,r)}function MI(t){return lo(t)&&ch(t)}function Tu(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function CI(t){return Qs(t,Js(t))}function DI(t,e,r,i,o,s,h){var c=Tu(t,r),d=Tu(e,r),_=h.get(d);if(_){Eu(t,r,_);return}var y=s?s(c,d,r+"",t,e,h):void 0,I=y===void 0;if(I){var E=Ys(d),S=!E&&S0(d),b=!E&&!S&&Q2(d);y=d,E||S||b?Ys(c)?y=c:MI(c)?y=j2(c):S?(I=!1,y=i1(d,!0)):b?(I=!1,y=a1(d,!0)):y=[]:HR(d)||mu(d)?(y=c,mu(c)?y=CI(c):(!Pn(c)||A0(c))&&(y=h1(d))):I=!1}I&&(h.set(d,y),o(y,d,i,s,h),h.delete(d)),Eu(t,r,y)}function d1(t,e,r,i,o){t!==e&&wI(e,function(s,h){if(o||(o=new fo),Pn(s))DI(t,e,h,r,d1,i,o);else{var c=i?i(Tu(t,h),s,h+"",t,e,o):void 0;c===void 0&&(c=s),Eu(t,h,c)}},Js)}var LI=_S(function(t,e,r){d1(t,e,r)});const I_=LI,$I=(t,e)=>{let r="",i="";return t.endsWith("/")?r=t:r=t+"/",e[0]!=="/"?i=e:i=e.slice(1),r+i},NI=t=>{console.log(`
 %c  %c %c  oh-my-live2d v0.3.0 - https://oml2d.com/  %c %c  
`,"background: #add7fb; padding:5px 0;","background: #58b0fc; padding:5px 0;","color: #fff; background: #030307; padding:5px 0;","background: #58b0fc; padding:5px 0;","background: #add7fb; padding:5px 0;")},Ro=(t,e)=>{t&&Object.assign(t.style,e)},FI=(t,e)=>{const r=rl(t);let i=rl(r.models);const o=[t.models];return I_(t,e),Array.isArray(t.models)&&t.models.map((s,h)=>{i=rl(r.models),o[h]=I_(i,s)}),t.models=o,t},UI=t=>new Promise(e=>setTimeout(e,t)),f1=t=>{const e=document.createElement(t.tagName);return e.id=t.id,t.className&&(e.className=t.className),t.childrens&&t.childrens.forEach(r=>{e.appendChild(f1(r))}),t.innerHtml&&(e.innerHTML=t.innerHtml),e},BI=(t,e,r)=>{t.innerHTML=e.map(i=>`
    <div title="${i.title}" class="oml-control-item" data-name="${i.id}">
      <svg class="oml-icon">
        <use xlink:href="#${i.name}"></use>
      </svg>
    </div>`).join(""),t.addEventListener("click",i=>{if(i.target===i.currentTarget)return;let o=i.target;for(;o.parentNode!==i.currentTarget;)o=o.parentNode;r(o.getAttribute("data-name"))})},GI=()=>{let t;const e=window.matchMedia("screen and (max-width: 768px)"),r=window.matchMedia("screen and (min-width: 768px)");return e.matches&&(t="xs"),r.matches&&(t="xl"),t};let O_;const kI=function(t,e){let r;switch(t){case"loading":r=`
      <div style="margin-bottom:3px;"></div>
      <svg class="oml-icon oml-loading" aria-hidden="true">
        <use xlink:href="#icon-loading"></use>
      </svg>
    `;break;case"text":r=`<div>${e}</div>`;break;case"error":r="<div></div>";break}this.elementList.levitatedBtnEl.innerHTML=r},XI=function(t,e="",r){return vn(this,null,function*(){clearTimeout(O_),this.changeLevitatedBtnContent(t,e),this.changeLevitatedBtnStyle({animationName:"oml-levitated-btn-display",animationDuration:`${this.options.transitionTime}ms`,animationFillMode:"forwards"}),r&&(O_=setTimeout(()=>{this.hiddenLevitatedBtn()},r))})},HI=function(){return vn(this,null,function*(){this.changeLevitatedBtnStyle({animationName:"oml-levitated-btn-hidden",animationDuration:`${this.options.transitionTime}ms`,animationFillMode:"forwards"}),yield UI(this.options.transitionTime)})};let w_=0,il=0,zs;const jI=function(t,e){if(!(il>e.priority||!e.message))return new Promise(r=>{il=e.priority,clearTimeout(w_),w_=setTimeout(()=>{Ro(t,{animationName:"oml-hidden-tooltip,oml-shake-tooltip"}),il=0},e.persistTime),t.innerHTML=e.message,Ro(t,{animationName:"oml-display-tooltip,oml-shake-tooltip",animationDuration:"1000ms,1000ms",animationFillMode:"forwards, none",animationIterationCount:"1, infinite"}),setTimeout(r,e.persistTime+1e3)})},YI=function(){this.options.tips&&(zs=WI(this.options.tips.idleTips,this))},VI=function(){zs&&zs()},WI=function(t,e){const r=setInterval(()=>{e.onTips("idleTips")},t.persistTime+t.interval);return zs=()=>clearInterval(r),zs},zI=function(t){return vn(this,null,function*(){if(!this.options.tips)return;const e=yield qI(t,this.options.tips);return yield jI(this.elementList.tipsEl,e)})},qI=function(t,e){return vn(this,null,function*(){var r,i,o;let s,h;switch(t){case"welcomeTips":s=ZI(e.welcomeTips);break;case"idleTips":(r=e.idleTips)!=null&&r.remote?s=(yield(o=(i=e.idleTips).remote)==null?void 0:o.call(i)).text:s=M_(e[t].message);break;default:s=M_(e[t].message);break}const c=e[t].persistTime,d=e[t].priority;return t==="idleTips"&&(h=e[t].interval),{message:s,persistTime:c,priority:d,interval:h}})},M_=function(t){return typeof t=="string"?t:t.length?t[Math.floor(Math.random()*t.length)]:void 0},ZI=function(t){const{message:e}=t;let r="";const i=new Date().getHours().toString(),o=/^[5-7]$/,s=/^(?:[8-9]|1[0-1])$/,h=/^(1[2-3])$/,c=/^1[4-7]$/,d=/^1[8-9]$/,_=/^2[0-1]$/,y=/^2[2-3]$/;return o.test(i)?r=e.daybreak:s.test(i)?r=e.morning:h.test(i)?r=e.noon:c.test(i)?r=e.afternoon:d.test(i)?r=e.dusk:_.test(i)?r=e.night:y.test(i)?r=e.lateNight:r=e.weeHours,r};class QI{constructor(e,r,i){ti(this,"options"),ti(this,"elementList"),ti(this,"currentModelIndex"),ti(this,"loadLive2DModel"),ti(this,"importType"),ti(this,"model"),ti(this,"app"),ti(this,"displayLevitatedBtn",XI),ti(this,"hiddenLevitatedBtn",HI),ti(this,"changeLevitatedBtnContent",kI),ti(this,"onTips",zI),ti(this,"startPlayIdleTips",YI),ti(this,"stopPlayIdleTips",VI),ti(this,"_omlScreenSize","xl"),ti(this,"_omlStatus","hidden"),this.options=e,this.currentModelIndex=0,this.loadLive2DModel=r,this.importType=i,this.elementList=this.mountElement(),this.setGlobalStyle(),this.addEventListen(),this.modelLoader(e.models[this.currentModelIndex]),this.options.sayHello&&NI()}set omlStatus(e){switch(e){case"display":this.changeStageStyle({visibility:"visible"}),this.stageSlideIn().then(()=>{this.onTips("welcomeTips"),this.startPlayIdleTips(),this.hiddenLevitatedBtn()});break;case"hidden":if(this.displayLevitatedBtn("text",""),this.stopPlayIdleTips(),this._omlStatus==="hidden")return;this.stageSlideOut().then(()=>{this.changeStageStyle({visibility:"hidden"})});break}}set screenSize(e){switch(this._omlScreenSize=e,e){case"xl":this.omlStatus="display";break;case"xs":this.options.mobileShow?this.omlStatus="display":this.omlStatus="hidden";break}}createOmlElements(){const e={};return Object.keys(wa.elements).forEach(r=>{e[r]=f1(wa.elements[r])}),e}setGlobalStyle(){const e=document.createElement("style");e.innerHTML=wa.globalStyle,document.head.appendChild(e)}mountElement(){const e=new DocumentFragment,r=this.createOmlElements(),{stageEl:i,canvasEl:o,tipsEl:s,controlsEl:h,levitatedBtnEl:c}=r;return i.append(o,s,h),BI(h,wa.controls,this.onClickControl.bind(this)),e.append(i,c),document.body.appendChild(e),window.onbeforeunload=()=>{document.body.removeChild(this.elementList.stageEl),document.body.removeChild(this.elementList.levitatedBtnEl)},r}changeStageStyle(e){Ro(this.elementList.stageEl,e)}changeCanvasStyle(e){Ro(this.elementList.canvasEl,e)}changeLevitatedBtnStyle(e){Ro(this.elementList.levitatedBtnEl,e)}changeTipsStyle(e){Ro(this.elementList.tipsEl,e)}reloadStageStyle(){let e=this.options.models[this.currentModelIndex].stageStyle.width,r=this.options.models[this.currentModelIndex].stageStyle.height;e==="auto"&&this.model?e=this.model.width:this.options.models[this.currentModelIndex].stageStyle.width,r==="auto"&&this.model?r=this.model.height:this.options.models[this.currentModelIndex].stageStyle.height,this.changeStageStyle({width:`${e}px`,height:`${r}px`,backgroundColor:this.options.models[this.currentModelIndex].stageStyle.backgroundColor})}reloadModelTransform(){var e;const r=this.options.models[this.currentModelIndex].x,i=this.options.models[this.currentModelIndex].y,o=this.options.models[this.currentModelIndex].scale;let s,h;Array.isArray(o)?(s=o[0]*.1,h=o[1]*.1):s=h=o*.1,(e=this.model)==null||e.setTransform(r,i,s,h)}reloadTipsStyle(){!this.options.tips||!this.model||this.changeTipsStyle({width:`${this.options.tips.style.width}px`,height:`${this.options.tips.style.height}px`,top:`${0-this.options.tips.style.offsetY}px`,left:`${this.model.width/2+this.model.x+this.options.tips.style.offsetX}px`})}reloadAllTransform(){this.reloadModelTransform(),this.reloadStageStyle(),this.reloadTipsStyle()}modelLoader(e){this.displayLevitatedBtn("loading");const r=$I(this.options.source,e.path);this.model=this.loadLive2DModel.fromSync(r,{onError:()=>{this.displayLevitatedBtn("error")}}),this.listenModelEvent()}loadNextModel(){return vn(this,null,function*(){this.options.models.length>1?(this.stopPlayIdleTips(),yield this.stageSlideOut(),this.currentModelIndex>=this.options.models.length-1?this.currentModelIndex=0:this.currentModelIndex++,this.modelLoader(this.options.models[this.currentModelIndex])):this.displayLevitatedBtn("text","",3e3)})}onClickControl(e){return vn(this,null,function*(){switch(e){case"SwitchModel":yield this.loadNextModel();break;case"About":window.open("https://oml2d.com");break;default:this.displayLevitatedBtn("text","",3e3);break}})}listenModelEvent(){var e,r,i;(e=this.model)==null||e.once("ready",()=>{this.reloadAllTransform()}),(r=this.model)==null||r.once("load",()=>vn(this,null,function*(){this.displayLevitatedBtn("text","",1e3),this.app?(this.app.stage.removeChildAt(0),this.model&&this.app.stage.addChild(this.model)):(this.app=new u0({view:this.elementList.canvasEl,resolution:2,autoStart:!0,autoDensity:!0,backgroundAlpha:0,resizeTo:this.elementList.stageEl}),this.model&&this.app.stage.addChild(this.model)),this.app.resize(),this.screenSize=GI()})),(i=this.model)==null||i.on("hit",o=>{["Tap","tap_"].map(s=>{var h;(h=this.model)==null||h.motion(`${s}${o[0]}`)})})}addEventListen(){const e=window.matchMedia("screen and (max-width: 768px)");window.addEventListener("copy",()=>{this.onTips("copyTips")}),e.addEventListener("change",r=>{r.matches?this.screenSize="xs":this.screenSize="xl"})}stageSlideIn(){return this.changeStageStyle({animationName:"oml-stage-slide-in",animationDuration:`${this.options.transitionTime}ms`,animationFillMode:"forwards"}),new Promise(e=>{setTimeout(()=>vn(this,null,function*(){this._omlStatus="display",e()}),this.options.transitionTime)})}stageSlideOut(){return this.changeStageStyle({animationName:"oml-stage-slide-out",animationDuration:`${this.options.transitionTime}ms`,animationFillMode:"forwards"}),new Promise(e=>setTimeout(()=>{this._omlStatus="hidden",e()},this.options.transitionTime))}}const JI=(t,e)=>{let r;Xn.models.path=fx[t];const i=()=>{Xn.models=Array.isArray(Xn.models)?Xn.models:[Xn.models],r=new QI(Xn,e,t)};return window.document.addEventListener("DOMContentLoaded",()=>{r!=null||i()}),o=>(FI(Xn,o),i(),{})},KI="complete";window.PIXI=PA;k_();const t4=JI(KI,D2);export{t4 as loadOhMyLive2D};
